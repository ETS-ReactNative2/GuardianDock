b0c9a576fa11e6d3cc5b4ad9b4f35c88
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _invariant = _interopRequireDefault(require("invariant"));

var customBubblingEventTypes = {};
var customDirectEventTypes = {};
exports.customBubblingEventTypes = customBubblingEventTypes;
exports.customDirectEventTypes = customDirectEventTypes;
var viewConfigCallbacks = new Map();
var viewConfigs = new Map();

function processEventTypes(viewConfig) {
  var bubblingEventTypes = viewConfig.bubblingEventTypes,
      directEventTypes = viewConfig.directEventTypes;

  if (__DEV__) {
    if (bubblingEventTypes != null && directEventTypes != null) {
      for (var topLevelType in directEventTypes) {
        (0, _invariant.default)(bubblingEventTypes[topLevelType] == null, 'Event cannot be both direct and bubbling: %s', topLevelType);
      }
    }
  }

  if (bubblingEventTypes != null) {
    for (var _topLevelType in bubblingEventTypes) {
      if (customBubblingEventTypes[_topLevelType] == null) {
        customBubblingEventTypes[_topLevelType] = bubblingEventTypes[_topLevelType];
      }
    }
  }

  if (directEventTypes != null) {
    for (var _topLevelType2 in directEventTypes) {
      if (customDirectEventTypes[_topLevelType2] == null) {
        customDirectEventTypes[_topLevelType2] = directEventTypes[_topLevelType2];
      }
    }
  }
}

exports.register = function (name, callback) {
  (0, _invariant.default)(!viewConfigCallbacks.has(name), 'Tried to register two views with the same name %s', name);
  (0, _invariant.default)(typeof callback === 'function', 'View config getter callback for component `%s` must be a function (received `%s`)', name, callback === null ? 'null' : typeof callback);
  viewConfigCallbacks.set(name, callback);
  return name;
};

exports.get = function (name) {
  var viewConfig;

  if (!viewConfigs.has(name)) {
    var callback = viewConfigCallbacks.get(name);

    if (typeof callback !== 'function') {
      (0, _invariant.default)(false, 'View config getter callback for component `%s` must be a function (received `%s`).%s', name, callback === null ? 'null' : typeof callback, typeof name[0] === 'string' && /[a-z]/.test(name[0]) ? ' Make sure to start component names with a capital letter.' : '');
    }

    viewConfig = callback();
    processEventTypes(viewConfig);
    viewConfigs.set(name, viewConfig);
    viewConfigCallbacks.set(name, null);
  } else {
    viewConfig = viewConfigs.get(name);
  }

  (0, _invariant.default)(viewConfig, 'View config not found for name %s', name);
  return viewConfig;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlYWN0TmF0aXZlVmlld0NvbmZpZ1JlZ2lzdHJ5LmpzIl0sIm5hbWVzIjpbImN1c3RvbUJ1YmJsaW5nRXZlbnRUeXBlcyIsImN1c3RvbURpcmVjdEV2ZW50VHlwZXMiLCJleHBvcnRzIiwidmlld0NvbmZpZ0NhbGxiYWNrcyIsIk1hcCIsInZpZXdDb25maWdzIiwicHJvY2Vzc0V2ZW50VHlwZXMiLCJ2aWV3Q29uZmlnIiwiYnViYmxpbmdFdmVudFR5cGVzIiwiZGlyZWN0RXZlbnRUeXBlcyIsIl9fREVWX18iLCJ0b3BMZXZlbFR5cGUiLCJyZWdpc3RlciIsIm5hbWUiLCJjYWxsYmFjayIsImhhcyIsInNldCIsImdldCIsInRlc3QiXSwibWFwcGluZ3MiOiJBQWVBOzs7O0FBR0E7O0FBR0EsSUFBTUEsd0JBUUwsR0FBRyxFQVJKO0FBU0EsSUFBTUMsc0JBS0wsR0FBRyxFQUxKO0FBT0FDLE9BQU8sQ0FBQ0Ysd0JBQVIsR0FBbUNBLHdCQUFuQztBQUNBRSxPQUFPLENBQUNELHNCQUFSLEdBQWlDQSxzQkFBakM7QUFFQSxJQUFNRSxtQkFBbUIsR0FBRyxJQUFJQyxHQUFKLEVBQTVCO0FBQ0EsSUFBTUMsV0FBVyxHQUFHLElBQUlELEdBQUosRUFBcEI7O0FBRUEsU0FBU0UsaUJBQVQsQ0FBMkJDLFVBQTNCLEVBQXlEO0FBQ3ZELE1BQU9DLGtCQUFQLEdBQStDRCxVQUEvQyxDQUFPQyxrQkFBUDtBQUFBLE1BQTJCQyxnQkFBM0IsR0FBK0NGLFVBQS9DLENBQTJCRSxnQkFBM0I7O0FBRUEsTUFBSUMsT0FBSixFQUFhO0FBQ1gsUUFBSUYsa0JBQWtCLElBQUksSUFBdEIsSUFBOEJDLGdCQUFnQixJQUFJLElBQXRELEVBQTREO0FBQzFELFdBQUssSUFBTUUsWUFBWCxJQUEyQkYsZ0JBQTNCLEVBQTZDO0FBQzNDLGdDQUNFRCxrQkFBa0IsQ0FBQ0csWUFBRCxDQUFsQixJQUFvQyxJQUR0QyxFQUVFLDhDQUZGLEVBR0VBLFlBSEY7QUFLRDtBQUNGO0FBQ0Y7O0FBRUQsTUFBSUgsa0JBQWtCLElBQUksSUFBMUIsRUFBZ0M7QUFDOUIsU0FBSyxJQUFNRyxhQUFYLElBQTJCSCxrQkFBM0IsRUFBK0M7QUFDN0MsVUFBSVIsd0JBQXdCLENBQUNXLGFBQUQsQ0FBeEIsSUFBMEMsSUFBOUMsRUFBb0Q7QUFDbERYLFFBQUFBLHdCQUF3QixDQUFDVyxhQUFELENBQXhCLEdBQ0VILGtCQUFrQixDQUFDRyxhQUFELENBRHBCO0FBRUQ7QUFDRjtBQUNGOztBQUVELE1BQUlGLGdCQUFnQixJQUFJLElBQXhCLEVBQThCO0FBQzVCLFNBQUssSUFBTUUsY0FBWCxJQUEyQkYsZ0JBQTNCLEVBQTZDO0FBQzNDLFVBQUlSLHNCQUFzQixDQUFDVSxjQUFELENBQXRCLElBQXdDLElBQTVDLEVBQWtEO0FBQ2hEVixRQUFBQSxzQkFBc0IsQ0FBQ1UsY0FBRCxDQUF0QixHQUF1Q0YsZ0JBQWdCLENBQUNFLGNBQUQsQ0FBdkQ7QUFDRDtBQUNGO0FBQ0Y7QUFDRjs7QUFPRFQsT0FBTyxDQUFDVSxRQUFSLEdBQW1CLFVBQVNDLElBQVQsRUFBdUJDLFFBQXZCLEVBQTJEO0FBQzVFLDBCQUNFLENBQUNYLG1CQUFtQixDQUFDWSxHQUFwQixDQUF3QkYsSUFBeEIsQ0FESCxFQUVFLG1EQUZGLEVBR0VBLElBSEY7QUFLQSwwQkFDRSxPQUFPQyxRQUFQLEtBQW9CLFVBRHRCLEVBRUUsbUZBRkYsRUFHRUQsSUFIRixFQUlFQyxRQUFRLEtBQUssSUFBYixHQUFvQixNQUFwQixHQUE2QixPQUFPQSxRQUp0QztBQU1BWCxFQUFBQSxtQkFBbUIsQ0FBQ2EsR0FBcEIsQ0FBd0JILElBQXhCLEVBQThCQyxRQUE5QjtBQUNBLFNBQU9ELElBQVA7QUFDRCxDQWREOztBQXFCQVgsT0FBTyxDQUFDZSxHQUFSLEdBQWMsVUFBU0osSUFBVCxFQUFtQztBQUMvQyxNQUFJTixVQUFKOztBQUNBLE1BQUksQ0FBQ0YsV0FBVyxDQUFDVSxHQUFaLENBQWdCRixJQUFoQixDQUFMLEVBQTRCO0FBQzFCLFFBQU1DLFFBQVEsR0FBR1gsbUJBQW1CLENBQUNjLEdBQXBCLENBQXdCSixJQUF4QixDQUFqQjs7QUFDQSxRQUFJLE9BQU9DLFFBQVAsS0FBb0IsVUFBeEIsRUFBb0M7QUFDbEMsOEJBQ0UsS0FERixFQUVFLHNGQUZGLEVBR0VELElBSEYsRUFJRUMsUUFBUSxLQUFLLElBQWIsR0FBb0IsTUFBcEIsR0FBNkIsT0FBT0EsUUFKdEMsRUFLRSxPQUFPRCxJQUFJLENBQUMsQ0FBRCxDQUFYLEtBQW1CLFFBQW5CLElBQStCLFFBQVFLLElBQVIsQ0FBYUwsSUFBSSxDQUFDLENBQUQsQ0FBakIsQ0FBL0IsR0FDSSw0REFESixHQUVJLEVBUE47QUFTRDs7QUFDRE4sSUFBQUEsVUFBVSxHQUFHTyxRQUFRLEVBQXJCO0FBQ0FSLElBQUFBLGlCQUFpQixDQUFDQyxVQUFELENBQWpCO0FBQ0FGLElBQUFBLFdBQVcsQ0FBQ1csR0FBWixDQUFnQkgsSUFBaEIsRUFBc0JOLFVBQXRCO0FBSUFKLElBQUFBLG1CQUFtQixDQUFDYSxHQUFwQixDQUF3QkgsSUFBeEIsRUFBOEIsSUFBOUI7QUFDRCxHQXBCRCxNQW9CTztBQUNMTixJQUFBQSxVQUFVLEdBQUdGLFdBQVcsQ0FBQ1ksR0FBWixDQUFnQkosSUFBaEIsQ0FBYjtBQUNEOztBQUNELDBCQUFVTixVQUFWLEVBQXNCLG1DQUF0QixFQUEyRE0sSUFBM0Q7QUFDQSxTQUFPTixVQUFQO0FBQ0QsQ0EzQkQiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93IHN0cmljdC1sb2NhbFxuICogQGdlbmVyYXRlZCBTaWduZWRTb3VyY2U8PDViMmRhM2U5MmY0NGVlMjY4NDExM2I0NWFmMDUyZjVkPj5cbiAqXG4gKiBUaGlzIGZpbGUgd2FzIHN5bmMnZCBmcm9tIHRoZSBmYWNlYm9vay9yZWFjdCByZXBvc2l0b3J5LlxuICovXG5cbi8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWludGVybmFsL2ludmFyaWFudC1hcmdzICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHt0eXBlIFZpZXdDb25maWd9IGZyb20gJy4vUmVhY3ROYXRpdmVUeXBlcyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbi8vIEV2ZW50IGNvbmZpZ3NcbmNvbnN0IGN1c3RvbUJ1YmJsaW5nRXZlbnRUeXBlczoge1xuICBbZXZlbnROYW1lOiBzdHJpbmddOiAkUmVhZE9ubHk8e3xcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczogJFJlYWRPbmx5PHt8XG4gICAgICBjYXB0dXJlZDogc3RyaW5nLFxuICAgICAgYnViYmxlZDogc3RyaW5nLFxuICAgIHx9PixcbiAgfH0+LFxuICAuLi4sXG59ID0ge307XG5jb25zdCBjdXN0b21EaXJlY3RFdmVudFR5cGVzOiB7XG4gIFtldmVudE5hbWU6IHN0cmluZ106ICRSZWFkT25seTx7fFxuICAgIHJlZ2lzdHJhdGlvbk5hbWU6IHN0cmluZyxcbiAgfH0+LFxuICAuLi4sXG59ID0ge307XG5cbmV4cG9ydHMuY3VzdG9tQnViYmxpbmdFdmVudFR5cGVzID0gY3VzdG9tQnViYmxpbmdFdmVudFR5cGVzO1xuZXhwb3J0cy5jdXN0b21EaXJlY3RFdmVudFR5cGVzID0gY3VzdG9tRGlyZWN0RXZlbnRUeXBlcztcblxuY29uc3Qgdmlld0NvbmZpZ0NhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbmNvbnN0IHZpZXdDb25maWdzID0gbmV3IE1hcCgpO1xuXG5mdW5jdGlvbiBwcm9jZXNzRXZlbnRUeXBlcyh2aWV3Q29uZmlnOiBWaWV3Q29uZmlnKTogdm9pZCB7XG4gIGNvbnN0IHtidWJibGluZ0V2ZW50VHlwZXMsIGRpcmVjdEV2ZW50VHlwZXN9ID0gdmlld0NvbmZpZztcblxuICBpZiAoX19ERVZfXykge1xuICAgIGlmIChidWJibGluZ0V2ZW50VHlwZXMgIT0gbnVsbCAmJiBkaXJlY3RFdmVudFR5cGVzICE9IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3QgdG9wTGV2ZWxUeXBlIGluIGRpcmVjdEV2ZW50VHlwZXMpIHtcbiAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgIGJ1YmJsaW5nRXZlbnRUeXBlc1t0b3BMZXZlbFR5cGVdID09IG51bGwsXG4gICAgICAgICAgJ0V2ZW50IGNhbm5vdCBiZSBib3RoIGRpcmVjdCBhbmQgYnViYmxpbmc6ICVzJyxcbiAgICAgICAgICB0b3BMZXZlbFR5cGUsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGJ1YmJsaW5nRXZlbnRUeXBlcyAhPSBudWxsKSB7XG4gICAgZm9yIChjb25zdCB0b3BMZXZlbFR5cGUgaW4gYnViYmxpbmdFdmVudFR5cGVzKSB7XG4gICAgICBpZiAoY3VzdG9tQnViYmxpbmdFdmVudFR5cGVzW3RvcExldmVsVHlwZV0gPT0gbnVsbCkge1xuICAgICAgICBjdXN0b21CdWJibGluZ0V2ZW50VHlwZXNbdG9wTGV2ZWxUeXBlXSA9XG4gICAgICAgICAgYnViYmxpbmdFdmVudFR5cGVzW3RvcExldmVsVHlwZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGRpcmVjdEV2ZW50VHlwZXMgIT0gbnVsbCkge1xuICAgIGZvciAoY29uc3QgdG9wTGV2ZWxUeXBlIGluIGRpcmVjdEV2ZW50VHlwZXMpIHtcbiAgICAgIGlmIChjdXN0b21EaXJlY3RFdmVudFR5cGVzW3RvcExldmVsVHlwZV0gPT0gbnVsbCkge1xuICAgICAgICBjdXN0b21EaXJlY3RFdmVudFR5cGVzW3RvcExldmVsVHlwZV0gPSBkaXJlY3RFdmVudFR5cGVzW3RvcExldmVsVHlwZV07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgbmF0aXZlIHZpZXcvY29tcG9uZW50IGJ5IG5hbWUuXG4gKiBBIGNhbGxiYWNrIGlzIHByb3ZpZGVkIHRvIGxvYWQgdGhlIHZpZXcgY29uZmlnIGZyb20gVUlNYW5hZ2VyLlxuICogVGhlIGNhbGxiYWNrIGlzIGRlZmVycmVkIHVudGlsIHRoZSB2aWV3IGlzIGFjdHVhbGx5IHJlbmRlcmVkLlxuICovXG5leHBvcnRzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZTogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gVmlld0NvbmZpZyk6IHN0cmluZyB7XG4gIGludmFyaWFudChcbiAgICAhdmlld0NvbmZpZ0NhbGxiYWNrcy5oYXMobmFtZSksXG4gICAgJ1RyaWVkIHRvIHJlZ2lzdGVyIHR3byB2aWV3cyB3aXRoIHRoZSBzYW1lIG5hbWUgJXMnLFxuICAgIG5hbWUsXG4gICk7XG4gIGludmFyaWFudChcbiAgICB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicsXG4gICAgJ1ZpZXcgY29uZmlnIGdldHRlciBjYWxsYmFjayBmb3IgY29tcG9uZW50IGAlc2AgbXVzdCBiZSBhIGZ1bmN0aW9uIChyZWNlaXZlZCBgJXNgKScsXG4gICAgbmFtZSxcbiAgICBjYWxsYmFjayA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBjYWxsYmFjayxcbiAgKTtcbiAgdmlld0NvbmZpZ0NhbGxiYWNrcy5zZXQobmFtZSwgY2FsbGJhY2spO1xuICByZXR1cm4gbmFtZTtcbn07XG5cbi8qKlxuICogUmV0cmlldmVzIGEgY29uZmlnIGZvciB0aGUgc3BlY2lmaWVkIHZpZXcuXG4gKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHRoZSB2aWV3IGhhcyBiZWVuIHVzZWQsXG4gKiBUaGlzIGNvbmZpZ3VyYXRpb24gd2lsbCBiZSBsYXp5LWxvYWRlZCBmcm9tIFVJTWFuYWdlci5cbiAqL1xuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbihuYW1lOiBzdHJpbmcpOiBWaWV3Q29uZmlnIHtcbiAgbGV0IHZpZXdDb25maWc7XG4gIGlmICghdmlld0NvbmZpZ3MuaGFzKG5hbWUpKSB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSB2aWV3Q29uZmlnQ2FsbGJhY2tzLmdldChuYW1lKTtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIGZhbHNlLFxuICAgICAgICAnVmlldyBjb25maWcgZ2V0dGVyIGNhbGxiYWNrIGZvciBjb21wb25lbnQgYCVzYCBtdXN0IGJlIGEgZnVuY3Rpb24gKHJlY2VpdmVkIGAlc2ApLiVzJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgY2FsbGJhY2sgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgY2FsbGJhY2ssXG4gICAgICAgIHR5cGVvZiBuYW1lWzBdID09PSAnc3RyaW5nJyAmJiAvW2Etel0vLnRlc3QobmFtZVswXSlcbiAgICAgICAgICA/ICcgTWFrZSBzdXJlIHRvIHN0YXJ0IGNvbXBvbmVudCBuYW1lcyB3aXRoIGEgY2FwaXRhbCBsZXR0ZXIuJ1xuICAgICAgICAgIDogJycsXG4gICAgICApO1xuICAgIH1cbiAgICB2aWV3Q29uZmlnID0gY2FsbGJhY2soKTtcbiAgICBwcm9jZXNzRXZlbnRUeXBlcyh2aWV3Q29uZmlnKTtcbiAgICB2aWV3Q29uZmlncy5zZXQobmFtZSwgdmlld0NvbmZpZyk7XG5cbiAgICAvLyBDbGVhciB0aGUgY2FsbGJhY2sgYWZ0ZXIgdGhlIGNvbmZpZyBpcyBzZXQgc28gdGhhdFxuICAgIC8vIHdlIGRvbid0IG1hc2sgYW55IGVycm9ycyBkdXJpbmcgcmVnaXN0cmF0aW9uLlxuICAgIHZpZXdDb25maWdDYWxsYmFja3Muc2V0KG5hbWUsIG51bGwpO1xuICB9IGVsc2Uge1xuICAgIHZpZXdDb25maWcgPSB2aWV3Q29uZmlncy5nZXQobmFtZSk7XG4gIH1cbiAgaW52YXJpYW50KHZpZXdDb25maWcsICdWaWV3IGNvbmZpZyBub3QgZm91bmQgZm9yIG5hbWUgJXMnLCBuYW1lKTtcbiAgcmV0dXJuIHZpZXdDb25maWc7XG59O1xuIl19