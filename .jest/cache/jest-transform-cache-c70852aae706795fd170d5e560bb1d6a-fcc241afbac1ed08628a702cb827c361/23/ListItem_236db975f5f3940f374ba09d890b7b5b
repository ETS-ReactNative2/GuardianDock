6620c004ad9b2615d0f933a84d80dec5
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _extends3 = _interopRequireDefault2(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));

var _excluded = ["left", "right", "title", "description", "onPress", "theme", "style", "titleStyle", "titleNumberOfLines", "descriptionNumberOfLines", "titleEllipsizeMode", "descriptionEllipsizeMode", "descriptionStyle"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _color = _interopRequireDefault(require("color"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _TouchableRipple = _interopRequireDefault(require("../TouchableRipple/TouchableRipple"));

var _Text = _interopRequireDefault(require("../Typography/Text"));

var _theming = require("../../core/theming");

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

var ListItem = function ListItem(_ref) {
  var left = _ref.left,
      right = _ref.right,
      title = _ref.title,
      description = _ref.description,
      onPress = _ref.onPress,
      theme = _ref.theme,
      style = _ref.style,
      titleStyle = _ref.titleStyle,
      _ref$titleNumberOfLin = _ref.titleNumberOfLines,
      titleNumberOfLines = _ref$titleNumberOfLin === void 0 ? 1 : _ref$titleNumberOfLin,
      _ref$descriptionNumbe = _ref.descriptionNumberOfLines,
      descriptionNumberOfLines = _ref$descriptionNumbe === void 0 ? 2 : _ref$descriptionNumbe,
      titleEllipsizeMode = _ref.titleEllipsizeMode,
      descriptionEllipsizeMode = _ref.descriptionEllipsizeMode,
      descriptionStyle = _ref.descriptionStyle,
      rest = (0, _objectWithoutProperties2.default)(_ref, _excluded);

  var renderDescription = function renderDescription(descriptionColor, description) {
    return typeof description === 'function' ? description({
      selectable: false,
      ellipsizeMode: descriptionEllipsizeMode,
      color: descriptionColor,
      fontSize: styles.description.fontSize
    }) : React.createElement(_Text.default, {
      selectable: false,
      numberOfLines: descriptionNumberOfLines,
      ellipsizeMode: descriptionEllipsizeMode,
      style: [styles.description, {
        color: descriptionColor
      }, descriptionStyle]
    }, description);
  };

  var renderTitle = function renderTitle() {
    var titleColor = (0, _color.default)(theme.colors.text).alpha(0.87).rgb().string();
    return typeof title === 'function' ? title({
      selectable: false,
      ellipsizeMode: titleEllipsizeMode,
      color: titleColor,
      fontSize: styles.title.fontSize
    }) : React.createElement(_Text.default, {
      selectable: false,
      ellipsizeMode: titleEllipsizeMode,
      numberOfLines: titleNumberOfLines,
      style: [styles.title, {
        color: titleColor
      }, titleStyle]
    }, title);
  };

  var descriptionColor = (0, _color.default)(theme.colors.text).alpha(0.54).rgb().string();
  return React.createElement(_TouchableRipple.default, _extends({}, rest, {
    style: [styles.container, style],
    onPress: onPress
  }), React.createElement(_reactNative.View, {
    style: styles.row
  }, left ? left({
    color: descriptionColor,
    style: description ? styles.iconMarginLeft : (0, _extends3.default)({}, styles.iconMarginLeft, styles.marginVerticalNone)
  }) : null, React.createElement(_reactNative.View, {
    style: [styles.item, styles.content]
  }, renderTitle(), description ? renderDescription(descriptionColor, description) : null), right ? right({
    color: descriptionColor,
    style: description ? styles.iconMarginRight : (0, _extends3.default)({}, styles.iconMarginRight, styles.marginVerticalNone)
  }) : null));
};

ListItem.displayName = 'List.Item';

var styles = _reactNative.StyleSheet.create({
  container: {
    padding: 8
  },
  row: {
    flexDirection: 'row'
  },
  title: {
    fontSize: 16
  },
  description: {
    fontSize: 14
  },
  marginVerticalNone: {
    marginVertical: 0
  },
  iconMarginLeft: {
    marginLeft: 0,
    marginRight: 16
  },
  iconMarginRight: {
    marginRight: 0
  },
  item: {
    marginVertical: 6,
    paddingLeft: 8
  },
  content: {
    flex: 1,
    justifyContent: 'center'
  }
});

var _default = (0, _theming.withTheme)(ListItem);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFRQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMEhBLElBQU1BLFFBQVEsR0FBRyxTQUFYQSxRQUFXLE9BZUo7QUFBQSxNQWRYQyxJQWNXLFFBZFhBLElBY1c7QUFBQSxNQWJYQyxLQWFXLFFBYlhBLEtBYVc7QUFBQSxNQVpYQyxLQVlXLFFBWlhBLEtBWVc7QUFBQSxNQVhYQyxXQVdXLFFBWFhBLFdBV1c7QUFBQSxNQVZYQyxPQVVXLFFBVlhBLE9BVVc7QUFBQSxNQVRYQyxLQVNXLFFBVFhBLEtBU1c7QUFBQSxNQVJYQyxLQVFXLFFBUlhBLEtBUVc7QUFBQSxNQVBYQyxVQU9XLFFBUFhBLFVBT1c7QUFBQSxtQ0FOWEMsa0JBTVc7QUFBQSxNQU5YQSxrQkFNVyxzQ0FOVSxDQU1WO0FBQUEsbUNBTFhDLHdCQUtXO0FBQUEsTUFMWEEsd0JBS1csc0NBTGdCLENBS2hCO0FBQUEsTUFKWEMsa0JBSVcsUUFKWEEsa0JBSVc7QUFBQSxNQUhYQyx3QkFHVyxRQUhYQSx3QkFHVztBQUFBLE1BRlhDLGdCQUVXLFFBRlhBLGdCQUVXO0FBQUEsTUFEUkMsSUFDUTs7QUFDWCxNQUFNQyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLENBQ3hCQyxnQkFEd0IsRUFFeEJaLFdBRndCLEVBR3JCO0FBQ0gsV0FBTyxPQUFPQSxXQUFQLEtBQXVCLFVBQXZCLEdBQ0xBLFdBQVcsQ0FBQztBQUNWYSxnQkFBVSxFQUFFLEtBREY7QUFFVkMsbUJBQWEsRUFBRU4sd0JBRkw7QUFHVk8sV0FBSyxFQUFFSCxnQkFIRztBQUlWSSxjQUFRLEVBQUVDLE1BQU0sQ0FBQ2pCLFdBQVBpQixDQUFtQkQ7QUFKbkIsS0FBRCxDQUROLEdBUUxFLG9CQUFDQyxhQUFEO0FBQ0VOLGdCQUFVLEVBQUUsS0FEZDtBQUVFTyxtQkFBYSxFQUFFZCx3QkFGakI7QUFHRVEsbUJBQWEsRUFBRU4sd0JBSGpCO0FBSUVMLFdBQUssRUFBRSxDQUNMYyxNQUFNLENBQUNqQixXQURGLEVBRUw7QUFBRWUsYUFBSyxFQUFFSDtBQUFULE9BRkssRUFHTEgsZ0JBSEs7QUFKVCxPQVVHVCxXQVZILENBUkY7QUFKRjs7QUEyQkEsTUFBTXFCLFdBQVcsR0FBRyxTQUFkQSxXQUFjLEdBQU07QUFDeEIsUUFBTUMsVUFBVSxHQUFHLG9CQUFNcEIsS0FBSyxDQUFDcUIsTUFBTnJCLENBQWFzQixJQUFuQixFQUF5QkMsS0FBekIsQ0FBK0IsSUFBL0IsRUFBcUNDLEdBQXJDLEdBQTJDQyxNQUEzQyxFQUFuQjtBQUVBLFdBQU8sT0FBTzVCLEtBQVAsS0FBaUIsVUFBakIsR0FDTEEsS0FBSyxDQUFDO0FBQ0pjLGdCQUFVLEVBQUUsS0FEUjtBQUVKQyxtQkFBYSxFQUFFUCxrQkFGWDtBQUdKUSxXQUFLLEVBQUVPLFVBSEg7QUFJSk4sY0FBUSxFQUFFQyxNQUFNLENBQUNsQixLQUFQa0IsQ0FBYUQ7QUFKbkIsS0FBRCxDQURBLEdBUUxFLG9CQUFDQyxhQUFEO0FBQ0VOLGdCQUFVLEVBQUUsS0FEZDtBQUVFQyxtQkFBYSxFQUFFUCxrQkFGakI7QUFHRWEsbUJBQWEsRUFBRWYsa0JBSGpCO0FBSUVGLFdBQUssRUFBRSxDQUFDYyxNQUFNLENBQUNsQixLQUFSLEVBQWU7QUFBRWdCLGFBQUssRUFBRU87QUFBVCxPQUFmLEVBQXNDbEIsVUFBdEM7QUFKVCxPQU1HTCxLQU5ILENBUkY7QUFIRjs7QUFzQkEsTUFBTWEsZ0JBQWdCLEdBQUcsb0JBQU1WLEtBQUssQ0FBQ3FCLE1BQU5yQixDQUFhc0IsSUFBbkIsRUFBeUJDLEtBQXpCLENBQStCLElBQS9CLEVBQXFDQyxHQUFyQyxHQUEyQ0MsTUFBM0MsRUFBekI7QUFFQSxTQUNFVCxvQkFBQ1Usd0JBQUQsZUFDTWxCLElBRE47QUFFRVAsU0FBSyxFQUFFLENBQUNjLE1BQU0sQ0FBQ1ksU0FBUixFQUFtQjFCLEtBQW5CLENBRlQ7QUFHRUYsV0FBTyxFQUFFQTtBQUhYLE1BS0VpQixvQkFBQ1ksaUJBQUQ7QUFBTTNCLFNBQUssRUFBRWMsTUFBTSxDQUFDYztBQUFwQixLQUNHbEMsSUFBSSxHQUNEQSxJQUFJLENBQUM7QUFDSGtCLFNBQUssRUFBRUgsZ0JBREo7QUFFSFQsU0FBSyxFQUFFSCxXQUFXLEdBQ2RpQixNQUFNLENBQUNlLGNBRE8sOEJBR1RmLE1BQU0sQ0FBQ2UsY0FIRSxFQUlUZixNQUFNLENBQUNnQixrQkFKRTtBQUZmLEdBQUQsQ0FESCxHQVVELElBWE4sRUFZRWYsb0JBQUNZLGlCQUFEO0FBQU0zQixTQUFLLEVBQUUsQ0FBQ2MsTUFBTSxDQUFDaUIsSUFBUixFQUFjakIsTUFBTSxDQUFDa0IsT0FBckI7QUFBYixLQUNHZCxXQUFXLEVBRGQsRUFHR3JCLFdBQVcsR0FDUlcsaUJBQWlCLENBQUNDLGdCQUFELEVBQW1CWixXQUFuQixDQURULEdBRVIsSUFMTixDQVpGLEVBbUJHRixLQUFLLEdBQ0ZBLEtBQUssQ0FBQztBQUNKaUIsU0FBSyxFQUFFSCxnQkFESDtBQUVKVCxTQUFLLEVBQUVILFdBQVcsR0FDZGlCLE1BQU0sQ0FBQ21CLGVBRE8sOEJBR1RuQixNQUFNLENBQUNtQixlQUhFLEVBSVRuQixNQUFNLENBQUNnQixrQkFKRTtBQUZkLEdBQUQsQ0FESCxHQVVGLElBN0JOLENBTEYsQ0FERjtBQW5FRjs7QUE0R0FyQyxRQUFRLENBQUN5QyxXQUFUekMsR0FBdUIsV0FBdkJBOztBQUVBLElBQU1xQixNQUFNLEdBQUdxQix3QkFBV0MsTUFBWEQsQ0FBa0I7QUFDL0JULFdBQVMsRUFBRTtBQUNUVyxXQUFPLEVBQUU7QUFEQSxHQURvQjtBQUkvQlQsS0FBRyxFQUFFO0FBQ0hVLGlCQUFhLEVBQUU7QUFEWixHQUowQjtBQU8vQjFDLE9BQUssRUFBRTtBQUNMaUIsWUFBUSxFQUFFO0FBREwsR0FQd0I7QUFVL0JoQixhQUFXLEVBQUU7QUFDWGdCLFlBQVEsRUFBRTtBQURDLEdBVmtCO0FBYS9CaUIsb0JBQWtCLEVBQUU7QUFBRVMsa0JBQWMsRUFBRTtBQUFsQixHQWJXO0FBYy9CVixnQkFBYyxFQUFFO0FBQUVXLGNBQVUsRUFBRSxDQUFkO0FBQWlCQyxlQUFXLEVBQUU7QUFBOUIsR0FkZTtBQWUvQlIsaUJBQWUsRUFBRTtBQUFFUSxlQUFXLEVBQUU7QUFBZixHQWZjO0FBZ0IvQlYsTUFBSSxFQUFFO0FBQ0pRLGtCQUFjLEVBQUUsQ0FEWjtBQUVKRyxlQUFXLEVBQUU7QUFGVCxHQWhCeUI7QUFvQi9CVixTQUFPLEVBQUU7QUFDUFcsUUFBSSxFQUFFLENBREM7QUFFUEMsa0JBQWMsRUFBRTtBQUZUO0FBcEJzQixDQUFsQlQsQ0FBZjs7ZUEwQmUsd0JBQVUxQyxRQUFWIiwibmFtZXMiOlsiTGlzdEl0ZW0iLCJsZWZ0IiwicmlnaHQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwib25QcmVzcyIsInRoZW1lIiwic3R5bGUiLCJ0aXRsZVN0eWxlIiwidGl0bGVOdW1iZXJPZkxpbmVzIiwiZGVzY3JpcHRpb25OdW1iZXJPZkxpbmVzIiwidGl0bGVFbGxpcHNpemVNb2RlIiwiZGVzY3JpcHRpb25FbGxpcHNpemVNb2RlIiwiZGVzY3JpcHRpb25TdHlsZSIsInJlc3QiLCJyZW5kZXJEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uQ29sb3IiLCJzZWxlY3RhYmxlIiwiZWxsaXBzaXplTW9kZSIsImNvbG9yIiwiZm9udFNpemUiLCJzdHlsZXMiLCJSZWFjdCIsIl9UZXh0IiwibnVtYmVyT2ZMaW5lcyIsInJlbmRlclRpdGxlIiwidGl0bGVDb2xvciIsImNvbG9ycyIsInRleHQiLCJhbHBoYSIsInJnYiIsInN0cmluZyIsIl9Ub3VjaGFibGVSaXBwbGUiLCJjb250YWluZXIiLCJfcmVhY3ROYXRpdmUiLCJyb3ciLCJpY29uTWFyZ2luTGVmdCIsIm1hcmdpblZlcnRpY2FsTm9uZSIsIml0ZW0iLCJjb250ZW50IiwiaWNvbk1hcmdpblJpZ2h0IiwiZGlzcGxheU5hbWUiLCJTdHlsZVNoZWV0IiwiY3JlYXRlIiwicGFkZGluZyIsImZsZXhEaXJlY3Rpb24iLCJtYXJnaW5WZXJ0aWNhbCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsInBhZGRpbmdMZWZ0IiwiZmxleCIsImp1c3RpZnlDb250ZW50Il0sInNvdXJjZXMiOlsiTGlzdEl0ZW0udHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvciBmcm9tICdjb2xvcic7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBTdHlsZVByb3AsXG4gIFN0eWxlU2hlZXQsXG4gIFRleHRTdHlsZSxcbiAgVmlldyxcbiAgVmlld1N0eWxlLFxufSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuXG5pbXBvcnQgVG91Y2hhYmxlUmlwcGxlIGZyb20gJy4uL1RvdWNoYWJsZVJpcHBsZS9Ub3VjaGFibGVSaXBwbGUnO1xuaW1wb3J0IFRleHQgZnJvbSAnLi4vVHlwb2dyYXBoeS9UZXh0JztcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJy4uLy4uL2NvcmUvdGhlbWluZyc7XG5pbXBvcnQgdHlwZSB7ICRSZW1vdmVDaGlsZHJlbiwgRWxsaXBzaXplUHJvcCB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxudHlwZSBUaXRsZSA9XG4gIHwgUmVhY3QuUmVhY3ROb2RlXG4gIHwgKChwcm9wczoge1xuICAgICAgc2VsZWN0YWJsZTogYm9vbGVhbjtcbiAgICAgIGVsbGlwc2l6ZU1vZGU6IEVsbGlwc2l6ZVByb3AgfCB1bmRlZmluZWQ7XG4gICAgICBjb2xvcjogc3RyaW5nO1xuICAgICAgZm9udFNpemU6IG51bWJlcjtcbiAgICB9KSA9PiBSZWFjdC5SZWFjdE5vZGUpO1xuXG50eXBlIERlc2NyaXB0aW9uID1cbiAgfCBSZWFjdC5SZWFjdE5vZGVcbiAgfCAoKHByb3BzOiB7XG4gICAgICBzZWxlY3RhYmxlOiBib29sZWFuO1xuICAgICAgZWxsaXBzaXplTW9kZTogRWxsaXBzaXplUHJvcCB8IHVuZGVmaW5lZDtcbiAgICAgIGNvbG9yOiBzdHJpbmc7XG4gICAgICBmb250U2l6ZTogbnVtYmVyO1xuICAgIH0pID0+IFJlYWN0LlJlYWN0Tm9kZSk7XG5cbnR5cGUgUHJvcHMgPSAkUmVtb3ZlQ2hpbGRyZW48dHlwZW9mIFRvdWNoYWJsZVJpcHBsZT4gJiB7XG4gIC8qKlxuICAgKiBUaXRsZSB0ZXh0IGZvciB0aGUgbGlzdCBpdGVtLlxuICAgKi9cbiAgdGl0bGU6IFRpdGxlO1xuICAvKipcbiAgICogRGVzY3JpcHRpb24gdGV4dCBmb3IgdGhlIGxpc3QgaXRlbSBvciBjYWxsYmFjayB3aGljaCByZXR1cm5zIGEgUmVhY3QgZWxlbWVudCB0byBkaXNwbGF5IHRoZSBkZXNjcmlwdGlvbi5cbiAgICovXG4gIGRlc2NyaXB0aW9uPzogRGVzY3JpcHRpb247XG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGljaCByZXR1cm5zIGEgUmVhY3QgZWxlbWVudCB0byBkaXNwbGF5IG9uIHRoZSBsZWZ0IHNpZGUuXG4gICAqL1xuICBsZWZ0PzogKHByb3BzOiB7XG4gICAgY29sb3I6IHN0cmluZztcbiAgICBzdHlsZToge1xuICAgICAgbWFyZ2luTGVmdDogbnVtYmVyO1xuICAgICAgbWFyZ2luUmlnaHQ6IG51bWJlcjtcbiAgICAgIG1hcmdpblZlcnRpY2FsPzogbnVtYmVyO1xuICAgIH07XG4gIH0pID0+IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIENhbGxiYWNrIHdoaWNoIHJldHVybnMgYSBSZWFjdCBlbGVtZW50IHRvIGRpc3BsYXkgb24gdGhlIHJpZ2h0IHNpZGUuXG4gICAqL1xuICByaWdodD86IChwcm9wczoge1xuICAgIGNvbG9yOiBzdHJpbmc7XG4gICAgc3R5bGU/OiB7XG4gICAgICBtYXJnaW5SaWdodDogbnVtYmVyO1xuICAgICAgbWFyZ2luVmVydGljYWw/OiBudW1iZXI7XG4gICAgfTtcbiAgfSkgPT4gUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBvbiBwcmVzcy5cbiAgICovXG4gIG9uUHJlc3M/OiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICB0aGVtZTogUmVhY3ROYXRpdmVQYXBlci5UaGVtZTtcbiAgLyoqXG4gICAqIFN0eWxlIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSB3cmFwcGluZyBUb3VjaGFibGVSaXBwbGUgZWxlbWVudC5cbiAgICovXG4gIHN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG4gIC8qKlxuICAgKiBTdHlsZSB0aGF0IGlzIHBhc3NlZCB0byBUaXRsZSBlbGVtZW50LlxuICAgKi9cbiAgdGl0bGVTdHlsZT86IFN0eWxlUHJvcDxUZXh0U3R5bGU+O1xuICAvKipcbiAgICogU3R5bGUgdGhhdCBpcyBwYXNzZWQgdG8gRGVzY3JpcHRpb24gZWxlbWVudC5cbiAgICovXG4gIGRlc2NyaXB0aW9uU3R5bGU/OiBTdHlsZVByb3A8VGV4dFN0eWxlPjtcbiAgLyoqXG4gICAqIFRydW5jYXRlIFRpdGxlIHRleHQgc3VjaCB0aGF0IHRoZSB0b3RhbCBudW1iZXIgb2YgbGluZXMgZG9lcyBub3RcbiAgICogZXhjZWVkIHRoaXMgbnVtYmVyLlxuICAgKi9cbiAgdGl0bGVOdW1iZXJPZkxpbmVzPzogbnVtYmVyO1xuICAvKipcbiAgICogVHJ1bmNhdGUgRGVzY3JpcHRpb24gdGV4dCBzdWNoIHRoYXQgdGhlIHRvdGFsIG51bWJlciBvZiBsaW5lcyBkb2VzIG5vdFxuICAgKiBleGNlZWQgdGhpcyBudW1iZXIuXG4gICAqL1xuICBkZXNjcmlwdGlvbk51bWJlck9mTGluZXM/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBFbGxpcHNpemUgTW9kZSBmb3IgdGhlIFRpdGxlLiAgT25lIG9mIGAnaGVhZCdgLCBgJ21pZGRsZSdgLCBgJ3RhaWwnYCwgYCdjbGlwJ2AuXG4gICAqXG4gICAqIFNlZSBbYGVsbGlwc2l6ZU1vZGVgXShodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3RleHQjZWxsaXBzaXplbW9kZSlcbiAgICovXG4gIHRpdGxlRWxsaXBzaXplTW9kZT86IEVsbGlwc2l6ZVByb3A7XG4gIC8qKlxuICAgKiBFbGxpcHNpemUgTW9kZSBmb3IgdGhlIERlc2NyaXB0aW9uLiAgT25lIG9mIGAnaGVhZCdgLCBgJ21pZGRsZSdgLCBgJ3RhaWwnYCwgYCdjbGlwJ2AuXG4gICAqXG4gICAqIFNlZSBbYGVsbGlwc2l6ZU1vZGVgXShodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3RleHQjZWxsaXBzaXplbW9kZSlcbiAgICovXG4gIGRlc2NyaXB0aW9uRWxsaXBzaXplTW9kZT86IEVsbGlwc2l6ZVByb3A7XG59O1xuXG4vKipcbiAqIEEgY29tcG9uZW50IHRvIHNob3cgdGlsZXMgaW5zaWRlIGEgTGlzdC5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwic2NyZWVuc2hvdHNcIj5cbiAqICAgPGltZyBjbGFzcz1cIm1lZGl1bVwiIHNyYz1cInNjcmVlbnNob3RzL2xpc3QtaXRlbS0xLnBuZ1wiIC8+XG4gKiAgIDxpbWcgY2xhc3M9XCJtZWRpdW1cIiBzcmM9XCJzY3JlZW5zaG90cy9saXN0LWl0ZW0tMi5wbmdcIiAvPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1pdGVtLTMucG5nXCIgLz5cbiAqIDwvZGl2PlxuICpcbiAqICMjIFVzYWdlXG4gKiBgYGBqc1xuICogaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuICogaW1wb3J0IHsgTGlzdCB9IGZyb20gJ3JlYWN0LW5hdGl2ZS1wYXBlcic7XG4gKlxuICogY29uc3QgTXlDb21wb25lbnQgPSAoKSA9PiAoXG4gKiAgIDxMaXN0Lkl0ZW1cbiAqICAgICB0aXRsZT1cIkZpcnN0IEl0ZW1cIlxuICogICAgIGRlc2NyaXB0aW9uPVwiSXRlbSBkZXNjcmlwdGlvblwiXG4gKiAgICAgbGVmdD17cHJvcHMgPT4gPExpc3QuSWNvbiB7Li4ucHJvcHN9IGljb249XCJmb2xkZXJcIiAvPn1cbiAqICAgLz5cbiAqICk7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgTXlDb21wb25lbnQ7XG4gKiBgYGBcbiAqXG4gKiBAZXh0ZW5kcyBUb3VjaGFibGVSaXBwbGUgcHJvcHMgaHR0cHM6Ly9jYWxsc3RhY2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS1wYXBlci90b3VjaGFibGUtcmlwcGxlLmh0bWxcbiAqL1xuY29uc3QgTGlzdEl0ZW0gPSAoe1xuICBsZWZ0LFxuICByaWdodCxcbiAgdGl0bGUsXG4gIGRlc2NyaXB0aW9uLFxuICBvblByZXNzLFxuICB0aGVtZSxcbiAgc3R5bGUsXG4gIHRpdGxlU3R5bGUsXG4gIHRpdGxlTnVtYmVyT2ZMaW5lcyA9IDEsXG4gIGRlc2NyaXB0aW9uTnVtYmVyT2ZMaW5lcyA9IDIsXG4gIHRpdGxlRWxsaXBzaXplTW9kZSxcbiAgZGVzY3JpcHRpb25FbGxpcHNpemVNb2RlLFxuICBkZXNjcmlwdGlvblN0eWxlLFxuICAuLi5yZXN0XG59OiBQcm9wcykgPT4ge1xuICBjb25zdCByZW5kZXJEZXNjcmlwdGlvbiA9IChcbiAgICBkZXNjcmlwdGlvbkNvbG9yOiBzdHJpbmcsXG4gICAgZGVzY3JpcHRpb24/OiBEZXNjcmlwdGlvbiB8IG51bGxcbiAgKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZXNjcmlwdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IChcbiAgICAgIGRlc2NyaXB0aW9uKHtcbiAgICAgICAgc2VsZWN0YWJsZTogZmFsc2UsXG4gICAgICAgIGVsbGlwc2l6ZU1vZGU6IGRlc2NyaXB0aW9uRWxsaXBzaXplTW9kZSxcbiAgICAgICAgY29sb3I6IGRlc2NyaXB0aW9uQ29sb3IsXG4gICAgICAgIGZvbnRTaXplOiBzdHlsZXMuZGVzY3JpcHRpb24uZm9udFNpemUsXG4gICAgICB9KVxuICAgICkgOiAoXG4gICAgICA8VGV4dFxuICAgICAgICBzZWxlY3RhYmxlPXtmYWxzZX1cbiAgICAgICAgbnVtYmVyT2ZMaW5lcz17ZGVzY3JpcHRpb25OdW1iZXJPZkxpbmVzfVxuICAgICAgICBlbGxpcHNpemVNb2RlPXtkZXNjcmlwdGlvbkVsbGlwc2l6ZU1vZGV9XG4gICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgc3R5bGVzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHsgY29sb3I6IGRlc2NyaXB0aW9uQ29sb3IgfSxcbiAgICAgICAgICBkZXNjcmlwdGlvblN0eWxlLFxuICAgICAgICBdfVxuICAgICAgPlxuICAgICAgICB7ZGVzY3JpcHRpb259XG4gICAgICA8L1RleHQ+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJUaXRsZSA9ICgpID0+IHtcbiAgICBjb25zdCB0aXRsZUNvbG9yID0gY29sb3IodGhlbWUuY29sb3JzLnRleHQpLmFscGhhKDAuODcpLnJnYigpLnN0cmluZygpO1xuXG4gICAgcmV0dXJuIHR5cGVvZiB0aXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IChcbiAgICAgIHRpdGxlKHtcbiAgICAgICAgc2VsZWN0YWJsZTogZmFsc2UsXG4gICAgICAgIGVsbGlwc2l6ZU1vZGU6IHRpdGxlRWxsaXBzaXplTW9kZSxcbiAgICAgICAgY29sb3I6IHRpdGxlQ29sb3IsXG4gICAgICAgIGZvbnRTaXplOiBzdHlsZXMudGl0bGUuZm9udFNpemUsXG4gICAgICB9KVxuICAgICkgOiAoXG4gICAgICA8VGV4dFxuICAgICAgICBzZWxlY3RhYmxlPXtmYWxzZX1cbiAgICAgICAgZWxsaXBzaXplTW9kZT17dGl0bGVFbGxpcHNpemVNb2RlfVxuICAgICAgICBudW1iZXJPZkxpbmVzPXt0aXRsZU51bWJlck9mTGluZXN9XG4gICAgICAgIHN0eWxlPXtbc3R5bGVzLnRpdGxlLCB7IGNvbG9yOiB0aXRsZUNvbG9yIH0sIHRpdGxlU3R5bGVdfVxuICAgICAgPlxuICAgICAgICB7dGl0bGV9XG4gICAgICA8L1RleHQ+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBkZXNjcmlwdGlvbkNvbG9yID0gY29sb3IodGhlbWUuY29sb3JzLnRleHQpLmFscGhhKDAuNTQpLnJnYigpLnN0cmluZygpO1xuXG4gIHJldHVybiAoXG4gICAgPFRvdWNoYWJsZVJpcHBsZVxuICAgICAgey4uLnJlc3R9XG4gICAgICBzdHlsZT17W3N0eWxlcy5jb250YWluZXIsIHN0eWxlXX1cbiAgICAgIG9uUHJlc3M9e29uUHJlc3N9XG4gICAgPlxuICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5yb3d9PlxuICAgICAgICB7bGVmdFxuICAgICAgICAgID8gbGVmdCh7XG4gICAgICAgICAgICAgIGNvbG9yOiBkZXNjcmlwdGlvbkNvbG9yLFxuICAgICAgICAgICAgICBzdHlsZTogZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICA/IHN0eWxlcy5pY29uTWFyZ2luTGVmdFxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZXMuaWNvbk1hcmdpbkxlZnQsXG4gICAgICAgICAgICAgICAgICAgIC4uLnN0eWxlcy5tYXJnaW5WZXJ0aWNhbE5vbmUsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IG51bGx9XG4gICAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLml0ZW0sIHN0eWxlcy5jb250ZW50XX0+XG4gICAgICAgICAge3JlbmRlclRpdGxlKCl9XG5cbiAgICAgICAgICB7ZGVzY3JpcHRpb25cbiAgICAgICAgICAgID8gcmVuZGVyRGVzY3JpcHRpb24oZGVzY3JpcHRpb25Db2xvciwgZGVzY3JpcHRpb24pXG4gICAgICAgICAgICA6IG51bGx9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICAge3JpZ2h0XG4gICAgICAgICAgPyByaWdodCh7XG4gICAgICAgICAgICAgIGNvbG9yOiBkZXNjcmlwdGlvbkNvbG9yLFxuICAgICAgICAgICAgICBzdHlsZTogZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICA/IHN0eWxlcy5pY29uTWFyZ2luUmlnaHRcbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc3R5bGVzLmljb25NYXJnaW5SaWdodCxcbiAgICAgICAgICAgICAgICAgICAgLi4uc3R5bGVzLm1hcmdpblZlcnRpY2FsTm9uZSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogbnVsbH1cbiAgICAgIDwvVmlldz5cbiAgICA8L1RvdWNoYWJsZVJpcHBsZT5cbiAgKTtcbn07XG5cbkxpc3RJdGVtLmRpc3BsYXlOYW1lID0gJ0xpc3QuSXRlbSc7XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgcGFkZGluZzogOCxcbiAgfSxcbiAgcm93OiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gIH0sXG4gIHRpdGxlOiB7XG4gICAgZm9udFNpemU6IDE2LFxuICB9LFxuICBkZXNjcmlwdGlvbjoge1xuICAgIGZvbnRTaXplOiAxNCxcbiAgfSxcbiAgbWFyZ2luVmVydGljYWxOb25lOiB7IG1hcmdpblZlcnRpY2FsOiAwIH0sXG4gIGljb25NYXJnaW5MZWZ0OiB7IG1hcmdpbkxlZnQ6IDAsIG1hcmdpblJpZ2h0OiAxNiB9LFxuICBpY29uTWFyZ2luUmlnaHQ6IHsgbWFyZ2luUmlnaHQ6IDAgfSxcbiAgaXRlbToge1xuICAgIG1hcmdpblZlcnRpY2FsOiA2LFxuICAgIHBhZGRpbmdMZWZ0OiA4LFxuICB9LFxuICBjb250ZW50OiB7XG4gICAgZmxleDogMSxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKExpc3RJdGVtKTtcbiJdfQ==