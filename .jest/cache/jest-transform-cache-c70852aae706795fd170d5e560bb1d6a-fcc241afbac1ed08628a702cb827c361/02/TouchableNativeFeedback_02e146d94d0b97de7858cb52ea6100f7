721b5066845129fdd810bd9e4bf05e71
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Pressability = _interopRequireDefault(require("../../Pressability/Pressability"));

var _PressabilityDebug = require("../../Pressability/PressabilityDebug");

var _ViewNativeComponent = require("react-native/Libraries/Components/View/ViewNativeComponent");

var _ReactNative = _interopRequireDefault(require("react-native/Libraries/Renderer/shims/ReactNative"));

var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));

var _View = _interopRequireDefault(require("../../Components/View/View"));

var _processColor = _interopRequireDefault(require("../../StyleSheet/processColor"));

var React = _interopRequireWildcard(require("react"));

var _invariant = _interopRequireDefault(require("invariant"));

var _jsxRuntime = require("react/jsx-runtime");

var _excluded = ["onBlur", "onFocus"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var TouchableNativeFeedback = function (_React$Component) {
  (0, _inherits2.default)(TouchableNativeFeedback, _React$Component);

  var _super = _createSuper(TouchableNativeFeedback);

  function TouchableNativeFeedback() {
    var _this;

    (0, _classCallCheck2.default)(this, TouchableNativeFeedback);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    _this.state = {
      pressability: new _Pressability.default(_this._createPressabilityConfig())
    };
    return _this;
  }

  (0, _createClass2.default)(TouchableNativeFeedback, [{
    key: "_createPressabilityConfig",
    value: function _createPressabilityConfig() {
      var _this$props$accessibi,
          _this2 = this;

      return {
        cancelable: !this.props.rejectResponderTermination,
        disabled: this.props.disabled != null ? this.props.disabled : (_this$props$accessibi = this.props.accessibilityState) == null ? void 0 : _this$props$accessibi.disabled,
        hitSlop: this.props.hitSlop,
        delayLongPress: this.props.delayLongPress,
        delayPressIn: this.props.delayPressIn,
        delayPressOut: this.props.delayPressOut,
        minPressDuration: 0,
        pressRectOffset: this.props.pressRetentionOffset,
        android_disableSound: this.props.touchSoundDisabled,
        onLongPress: this.props.onLongPress,
        onPress: this.props.onPress,
        onPressIn: function onPressIn(event) {
          if (_Platform.default.OS === 'android') {
            _this2._dispatchHotspotUpdate(event);

            _this2._dispatchPressedStateChange(true);
          }

          if (_this2.props.onPressIn != null) {
            _this2.props.onPressIn(event);
          }
        },
        onPressMove: function onPressMove(event) {
          if (_Platform.default.OS === 'android') {
            _this2._dispatchHotspotUpdate(event);
          }
        },
        onPressOut: function onPressOut(event) {
          if (_Platform.default.OS === 'android') {
            _this2._dispatchPressedStateChange(false);
          }

          if (_this2.props.onPressOut != null) {
            _this2.props.onPressOut(event);
          }
        }
      };
    }
  }, {
    key: "_dispatchPressedStateChange",
    value: function _dispatchPressedStateChange(pressed) {
      if (_Platform.default.OS === 'android') {
        var hostComponentRef = _ReactNative.default.findHostInstance_DEPRECATED(this);

        if (hostComponentRef == null) {
          console.warn('Touchable: Unable to find HostComponent instance. ' + 'Has your Touchable component been unmounted?');
        } else {
          _ViewNativeComponent.Commands.setPressed(hostComponentRef, pressed);
        }
      }
    }
  }, {
    key: "_dispatchHotspotUpdate",
    value: function _dispatchHotspotUpdate(event) {
      if (_Platform.default.OS === 'android') {
        var _event$nativeEvent = event.nativeEvent,
            locationX = _event$nativeEvent.locationX,
            locationY = _event$nativeEvent.locationY;

        var hostComponentRef = _ReactNative.default.findHostInstance_DEPRECATED(this);

        if (hostComponentRef == null) {
          console.warn('Touchable: Unable to find HostComponent instance. ' + 'Has your Touchable component been unmounted?');
        } else {
          _ViewNativeComponent.Commands.hotspotUpdate(hostComponentRef, locationX != null ? locationX : 0, locationY != null ? locationY : 0);
        }
      }
    }
  }, {
    key: "render",
    value: function render() {
      var element = React.Children.only(this.props.children);
      var children = [element.props.children];

      if (__DEV__) {
        if (element.type === _View.default) {
          children.push((0, _jsxRuntime.jsx)(_PressabilityDebug.PressabilityDebugView, {
            color: "brown",
            hitSlop: this.props.hitSlop
          }));
        }
      }

      var _this$state$pressabil = this.state.pressability.getEventHandlers(),
          onBlur = _this$state$pressabil.onBlur,
          onFocus = _this$state$pressabil.onFocus,
          eventHandlersWithoutBlurAndFocus = (0, _objectWithoutProperties2.default)(_this$state$pressabil, _excluded);

      var accessibilityState = this.props.disabled != null ? (0, _extends2.default)({}, this.props.accessibilityState, {
        disabled: this.props.disabled
      }) : this.props.accessibilityState;
      return React.cloneElement.apply(React, [element, (0, _extends2.default)({}, eventHandlersWithoutBlurAndFocus, getBackgroundProp(this.props.background === undefined ? TouchableNativeFeedback.SelectableBackground() : this.props.background, this.props.useForeground === true), {
        accessible: this.props.accessible !== false,
        accessibilityHint: this.props.accessibilityHint,
        accessibilityLabel: this.props.accessibilityLabel,
        accessibilityRole: this.props.accessibilityRole,
        accessibilityState: accessibilityState,
        accessibilityActions: this.props.accessibilityActions,
        onAccessibilityAction: this.props.onAccessibilityAction,
        accessibilityValue: this.props.accessibilityValue,
        importantForAccessibility: this.props.importantForAccessibility,
        accessibilityLiveRegion: this.props.accessibilityLiveRegion,
        accessibilityViewIsModal: this.props.accessibilityViewIsModal,
        accessibilityElementsHidden: this.props.accessibilityElementsHidden,
        hasTVPreferredFocus: this.props.hasTVPreferredFocus,
        hitSlop: this.props.hitSlop,
        focusable: this.props.focusable !== false && this.props.onPress !== undefined && !this.props.disabled,
        nativeID: this.props.nativeID,
        nextFocusDown: this.props.nextFocusDown,
        nextFocusForward: this.props.nextFocusForward,
        nextFocusLeft: this.props.nextFocusLeft,
        nextFocusRight: this.props.nextFocusRight,
        nextFocusUp: this.props.nextFocusUp,
        onLayout: this.props.onLayout,
        testID: this.props.testID
      })].concat(children));
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      this.state.pressability.configure(this._createPressabilityConfig());
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.state.pressability.reset();
    }
  }]);
  return TouchableNativeFeedback;
}(React.Component);

TouchableNativeFeedback.SelectableBackground = function (rippleRadius) {
  return {
    type: 'ThemeAttrAndroid',
    attribute: 'selectableItemBackground',
    rippleRadius: rippleRadius
  };
};

TouchableNativeFeedback.SelectableBackgroundBorderless = function (rippleRadius) {
  return {
    type: 'ThemeAttrAndroid',
    attribute: 'selectableItemBackgroundBorderless',
    rippleRadius: rippleRadius
  };
};

TouchableNativeFeedback.Ripple = function (color, borderless, rippleRadius) {
  var processedColor = (0, _processColor.default)(color);
  (0, _invariant.default)(processedColor == null || typeof processedColor === 'number', 'Unexpected color given for Ripple color');
  return {
    type: 'RippleAndroid',
    color: processedColor,
    borderless: borderless,
    rippleRadius: rippleRadius
  };
};

TouchableNativeFeedback.canUseNativeForeground = function () {
  return _Platform.default.OS === 'android' && _Platform.default.Version >= 23;
};

var getBackgroundProp = _Platform.default.OS === 'android' ? function (background, useForeground) {
  return useForeground && TouchableNativeFeedback.canUseNativeForeground() ? {
    nativeForegroundAndroid: background
  } : {
    nativeBackgroundAndroid: background
  };
} : function (background, useForeground) {
  return null;
};
TouchableNativeFeedback.displayName = 'TouchableNativeFeedback';
module.exports = TouchableNativeFeedback;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrLmpzIl0sIm5hbWVzIjpbIlRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrIiwic3RhdGUiLCJwcmVzc2FiaWxpdHkiLCJQcmVzc2FiaWxpdHkiLCJfY3JlYXRlUHJlc3NhYmlsaXR5Q29uZmlnIiwiY2FuY2VsYWJsZSIsInByb3BzIiwicmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24iLCJkaXNhYmxlZCIsImFjY2Vzc2liaWxpdHlTdGF0ZSIsImhpdFNsb3AiLCJkZWxheUxvbmdQcmVzcyIsImRlbGF5UHJlc3NJbiIsImRlbGF5UHJlc3NPdXQiLCJtaW5QcmVzc0R1cmF0aW9uIiwicHJlc3NSZWN0T2Zmc2V0IiwicHJlc3NSZXRlbnRpb25PZmZzZXQiLCJhbmRyb2lkX2Rpc2FibGVTb3VuZCIsInRvdWNoU291bmREaXNhYmxlZCIsIm9uTG9uZ1ByZXNzIiwib25QcmVzcyIsIm9uUHJlc3NJbiIsImV2ZW50IiwiUGxhdGZvcm0iLCJPUyIsIl9kaXNwYXRjaEhvdHNwb3RVcGRhdGUiLCJfZGlzcGF0Y2hQcmVzc2VkU3RhdGVDaGFuZ2UiLCJvblByZXNzTW92ZSIsIm9uUHJlc3NPdXQiLCJwcmVzc2VkIiwiaG9zdENvbXBvbmVudFJlZiIsIlJlYWN0TmF0aXZlIiwiZmluZEhvc3RJbnN0YW5jZV9ERVBSRUNBVEVEIiwiY29uc29sZSIsIndhcm4iLCJDb21tYW5kcyIsInNldFByZXNzZWQiLCJuYXRpdmVFdmVudCIsImxvY2F0aW9uWCIsImxvY2F0aW9uWSIsImhvdHNwb3RVcGRhdGUiLCJlbGVtZW50IiwiUmVhY3QiLCJDaGlsZHJlbiIsIm9ubHkiLCJjaGlsZHJlbiIsIl9fREVWX18iLCJ0eXBlIiwiVmlldyIsInB1c2giLCJnZXRFdmVudEhhbmRsZXJzIiwib25CbHVyIiwib25Gb2N1cyIsImV2ZW50SGFuZGxlcnNXaXRob3V0Qmx1ckFuZEZvY3VzIiwiY2xvbmVFbGVtZW50IiwiZ2V0QmFja2dyb3VuZFByb3AiLCJiYWNrZ3JvdW5kIiwidW5kZWZpbmVkIiwiU2VsZWN0YWJsZUJhY2tncm91bmQiLCJ1c2VGb3JlZ3JvdW5kIiwiYWNjZXNzaWJsZSIsImFjY2Vzc2liaWxpdHlIaW50IiwiYWNjZXNzaWJpbGl0eUxhYmVsIiwiYWNjZXNzaWJpbGl0eVJvbGUiLCJhY2Nlc3NpYmlsaXR5QWN0aW9ucyIsIm9uQWNjZXNzaWJpbGl0eUFjdGlvbiIsImFjY2Vzc2liaWxpdHlWYWx1ZSIsImltcG9ydGFudEZvckFjY2Vzc2liaWxpdHkiLCJhY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvbiIsImFjY2Vzc2liaWxpdHlWaWV3SXNNb2RhbCIsImFjY2Vzc2liaWxpdHlFbGVtZW50c0hpZGRlbiIsImhhc1RWUHJlZmVycmVkRm9jdXMiLCJmb2N1c2FibGUiLCJuYXRpdmVJRCIsIm5leHRGb2N1c0Rvd24iLCJuZXh0Rm9jdXNGb3J3YXJkIiwibmV4dEZvY3VzTGVmdCIsIm5leHRGb2N1c1JpZ2h0IiwibmV4dEZvY3VzVXAiLCJvbkxheW91dCIsInRlc3RJRCIsInByZXZQcm9wcyIsInByZXZTdGF0ZSIsImNvbmZpZ3VyZSIsInJlc2V0IiwiQ29tcG9uZW50IiwicmlwcGxlUmFkaXVzIiwiYXR0cmlidXRlIiwiU2VsZWN0YWJsZUJhY2tncm91bmRCb3JkZXJsZXNzIiwiUmlwcGxlIiwiY29sb3IiLCJib3JkZXJsZXNzIiwicHJvY2Vzc2VkQ29sb3IiLCJjYW5Vc2VOYXRpdmVGb3JlZ3JvdW5kIiwiVmVyc2lvbiIsIm5hdGl2ZUZvcmVncm91bmRBbmRyb2lkIiwibmF0aXZlQmFja2dyb3VuZEFuZHJvaWQiLCJkaXNwbGF5TmFtZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVQTs7QUFHQTs7QUFFQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7SUEwRU1BLHVCOzs7Ozs7Ozs7Ozs7Ozs7VUFtRUpDLEssR0FBZTtBQUNiQyxNQUFBQSxZQUFZLEVBQUUsSUFB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UUEzRCx1QkFBdUIsQ0FBQ2lHLFdBQXhCLEdBQXNDLHlCQUF0QztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJuRyx1QkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93IHN0cmljdC1sb2NhbFxuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCBQcmVzc2FiaWxpdHksIHtcbiAgdHlwZSBQcmVzc2FiaWxpdHlDb25maWcsXG59IGZyb20gJy4uLy4uL1ByZXNzYWJpbGl0eS9QcmVzc2FiaWxpdHknO1xuaW1wb3J0IHtQcmVzc2FiaWxpdHlEZWJ1Z1ZpZXd9IGZyb20gJy4uLy4uL1ByZXNzYWJpbGl0eS9QcmVzc2FiaWxpdHlEZWJ1Zyc7XG5pbXBvcnQgdHlwZW9mIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayBmcm9tICcuL1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayc7XG5pbXBvcnQge0NvbW1hbmRzfSBmcm9tICdyZWFjdC1uYXRpdmUvTGlicmFyaWVzL0NvbXBvbmVudHMvVmlldy9WaWV3TmF0aXZlQ29tcG9uZW50JztcbmltcG9ydCBSZWFjdE5hdGl2ZSBmcm9tICdyZWFjdC1uYXRpdmUvTGlicmFyaWVzL1JlbmRlcmVyL3NoaW1zL1JlYWN0TmF0aXZlJztcbmltcG9ydCB0eXBlIHtQcmVzc0V2ZW50fSBmcm9tICdyZWFjdC1uYXRpdmUvTGlicmFyaWVzL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcbmltcG9ydCBQbGF0Zm9ybSBmcm9tICcuLi8uLi9VdGlsaXRpZXMvUGxhdGZvcm0nO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi4vLi4vQ29tcG9uZW50cy9WaWV3L1ZpZXcnO1xuaW1wb3J0IHByb2Nlc3NDb2xvciBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L3Byb2Nlc3NDb2xvcic7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbnR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLi4uUmVhY3QuRWxlbWVudENvbmZpZzxUb3VjaGFibGVXaXRob3V0RmVlZGJhY2s+LFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHRoZSB0eXBlIG9mIGJhY2tncm91bmQgZHJhd2FibGUgdGhhdCdzIGdvaW5nIHRvIGJlIHVzZWQgdG9cbiAgICogZGlzcGxheSBmZWVkYmFjay4gSXQgdGFrZXMgYW4gb2JqZWN0IHdpdGggYHR5cGVgIHByb3BlcnR5IGFuZCBleHRyYSBkYXRhXG4gICAqIGRlcGVuZGluZyBvbiB0aGUgYHR5cGVgLiBJdCdzIHJlY29tbWVuZGVkIHRvIHVzZSBvbmUgb2YgdGhlIHN0YXRpY1xuICAgKiBtZXRob2RzIHRvIGdlbmVyYXRlIHRoYXQgZGljdGlvbmFyeS5cbiAgICovXG4gIGJhY2tncm91bmQ/OiA/KFxuICAgIHwgJFJlYWRPbmx5PHt8XG4gICAgICAgIHR5cGU6ICdUaGVtZUF0dHJBbmRyb2lkJyxcbiAgICAgICAgYXR0cmlidXRlOlxuICAgICAgICAgIHwgJ3NlbGVjdGFibGVJdGVtQmFja2dyb3VuZCdcbiAgICAgICAgICB8ICdzZWxlY3RhYmxlSXRlbUJhY2tncm91bmRCb3JkZXJsZXNzJyxcbiAgICAgICAgcmlwcGxlUmFkaXVzOiA/bnVtYmVyLFxuICAgICAgfH0+XG4gICAgfCAkUmVhZE9ubHk8e3xcbiAgICAgICAgdHlwZTogJ1JpcHBsZUFuZHJvaWQnLFxuICAgICAgICBjb2xvcjogP251bWJlcixcbiAgICAgICAgYm9yZGVybGVzczogYm9vbGVhbixcbiAgICAgICAgcmlwcGxlUmFkaXVzOiA/bnVtYmVyLFxuICAgICAgfH0+XG4gICksXG5cbiAgLyoqXG4gICAqIFRWIHByZWZlcnJlZCBmb2N1cyAoc2VlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBWaWV3IGNvbXBvbmVudCkuXG4gICAqL1xuICBoYXNUVlByZWZlcnJlZEZvY3VzPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIFRWIG5leHQgZm9jdXMgZG93biAoc2VlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBWaWV3IGNvbXBvbmVudCkuXG4gICAqL1xuICBuZXh0Rm9jdXNEb3duPzogP251bWJlcixcblxuICAvKipcbiAgICogVFYgbmV4dCBmb2N1cyBmb3J3YXJkIChzZWUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFZpZXcgY29tcG9uZW50KS5cbiAgICovXG4gIG5leHRGb2N1c0ZvcndhcmQ/OiA/bnVtYmVyLFxuXG4gIC8qKlxuICAgKiBUViBuZXh0IGZvY3VzIGxlZnQgKHNlZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgVmlldyBjb21wb25lbnQpLlxuICAgKi9cbiAgbmV4dEZvY3VzTGVmdD86ID9udW1iZXIsXG5cbiAgLyoqXG4gICAqIFRWIG5leHQgZm9jdXMgcmlnaHQgKHNlZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgVmlldyBjb21wb25lbnQpLlxuICAgKi9cbiAgbmV4dEZvY3VzUmlnaHQ/OiA/bnVtYmVyLFxuXG4gIC8qKlxuICAgKiBUViBuZXh0IGZvY3VzIHVwIChzZWUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFZpZXcgY29tcG9uZW50KS5cbiAgICovXG4gIG5leHRGb2N1c1VwPzogP251bWJlcixcblxuICAvKipcbiAgICogU2V0IHRvIHRydWUgdG8gYWRkIHRoZSByaXBwbGUgZWZmZWN0IHRvIHRoZSBmb3JlZ3JvdW5kIG9mIHRoZSB2aWV3LCBpbnN0ZWFkXG4gICAqIG9mIHRoZSBiYWNrZ3JvdW5kLiBUaGlzIGlzIHVzZWZ1bCBpZiBvbmUgb2YgeW91ciBjaGlsZCB2aWV3cyBoYXMgYVxuICAgKiBiYWNrZ3JvdW5kIG9mIGl0cyBvd24sIG9yIHlvdSdyZSBlLmcuIGRpc3BsYXlpbmcgaW1hZ2VzLCBhbmQgeW91IGRvbid0IHdhbnRcbiAgICogdGhlIHJpcHBsZSB0byBiZSBjb3ZlcmVkIGJ5IHRoZW0uXG4gICAqXG4gICAqIENoZWNrIFRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrLmNhblVzZU5hdGl2ZUZvcmVncm91bmQoKSBmaXJzdCwgYXMgdGhpcyBpc1xuICAgKiBvbmx5IGF2YWlsYWJsZSBvbiBBbmRyb2lkIDYuMCBhbmQgYWJvdmUuIElmIHlvdSB0cnkgdG8gdXNlIHRoaXMgb24gb2xkZXJcbiAgICogdmVyc2lvbnMsIHRoaXMgd2lsbCBmYWxsYmFjayB0byBiYWNrZ3JvdW5kLlxuICAgKi9cbiAgdXNlRm9yZWdyb3VuZD86ID9ib29sZWFuLFxufH0+O1xuXG50eXBlIFN0YXRlID0gJFJlYWRPbmx5PHt8XG4gIHByZXNzYWJpbGl0eTogUHJlc3NhYmlsaXR5LFxufH0+O1xuXG5jbGFzcyBUb3VjaGFibGVOYXRpdmVGZWVkYmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB2YWx1ZSBmb3IgdGhlIGBiYWNrZ3JvdW5kYCBwcm9wIHRoYXQgdXNlcyB0aGUgQW5kcm9pZCB0aGVtZSdzXG4gICAqIGRlZmF1bHQgYmFja2dyb3VuZCBmb3Igc2VsZWN0YWJsZSBlbGVtZW50cy5cbiAgICovXG4gIHN0YXRpYyBTZWxlY3RhYmxlQmFja2dyb3VuZDogKFxuICAgIHJpcHBsZVJhZGl1czogP251bWJlcixcbiAgKSA9PiAkUmVhZE9ubHk8e3xcbiAgICBhdHRyaWJ1dGU6ICdzZWxlY3RhYmxlSXRlbUJhY2tncm91bmQnLFxuICAgIHR5cGU6ICdUaGVtZUF0dHJBbmRyb2lkJyxcbiAgICByaXBwbGVSYWRpdXM6ID9udW1iZXIsXG4gIHx9PiA9IChyaXBwbGVSYWRpdXM6ID9udW1iZXIpID0+ICh7XG4gICAgdHlwZTogJ1RoZW1lQXR0ckFuZHJvaWQnLFxuICAgIGF0dHJpYnV0ZTogJ3NlbGVjdGFibGVJdGVtQmFja2dyb3VuZCcsXG4gICAgcmlwcGxlUmFkaXVzLFxuICB9KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHZhbHVlIGZvciB0aGUgYGJhY2tncm91bmRgIHByb3AgdGhhdCB1c2VzIHRoZSBBbmRyb2lkIHRoZW1lJ3NcbiAgICogZGVmYXVsdCBiYWNrZ3JvdW5kIGZvciBib3JkZXJsZXNzIHNlbGVjdGFibGUgZWxlbWVudHMuIFJlcXVpcmVzIEFQSSAyMSsuXG4gICAqL1xuICBzdGF0aWMgU2VsZWN0YWJsZUJhY2tncm91bmRCb3JkZXJsZXNzOiAoXG4gICAgcmlwcGxlUmFkaXVzOiA/bnVtYmVyLFxuICApID0+ICRSZWFkT25seTx7fFxuICAgIGF0dHJpYnV0ZTogJ3NlbGVjdGFibGVJdGVtQmFja2dyb3VuZEJvcmRlcmxlc3MnLFxuICAgIHR5cGU6ICdUaGVtZUF0dHJBbmRyb2lkJyxcbiAgICByaXBwbGVSYWRpdXM6ID9udW1iZXIsXG4gIHx9PiA9IChyaXBwbGVSYWRpdXM6ID9udW1iZXIpID0+ICh7XG4gICAgdHlwZTogJ1RoZW1lQXR0ckFuZHJvaWQnLFxuICAgIGF0dHJpYnV0ZTogJ3NlbGVjdGFibGVJdGVtQmFja2dyb3VuZEJvcmRlcmxlc3MnLFxuICAgIHJpcHBsZVJhZGl1cyxcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB2YWx1ZSBmb3IgdGhlIGBiYWNrZ3JvdW5kYCBwcm9wIHRoYXQgdXNlcyB0aGUgQW5kcm9pZCByaXBwbGUgd2l0aFxuICAgKiB0aGUgc3VwcGxpZWQgY29sb3IuIElmIGBib3JkZXJsZXNzYCBpcyB0cnVlLCB0aGUgcmlwcGxlIHdpbGwgcmVuZGVyIG91dHNpZGVcbiAgICogb2YgdGhlIHZpZXcgYm91bmRzLiBSZXF1aXJlcyBBUEkgMjErLlxuICAgKi9cbiAgc3RhdGljIFJpcHBsZTogKFxuICAgIGNvbG9yOiBzdHJpbmcsXG4gICAgYm9yZGVybGVzczogYm9vbGVhbixcbiAgICByaXBwbGVSYWRpdXM6ID9udW1iZXIsXG4gICkgPT4gJFJlYWRPbmx5PHt8XG4gICAgYm9yZGVybGVzczogYm9vbGVhbixcbiAgICBjb2xvcjogP251bWJlcixcbiAgICByaXBwbGVSYWRpdXM6ID9udW1iZXIsXG4gICAgdHlwZTogJ1JpcHBsZUFuZHJvaWQnLFxuICB8fT4gPSAoY29sb3I6IHN0cmluZywgYm9yZGVybGVzczogYm9vbGVhbiwgcmlwcGxlUmFkaXVzOiA/bnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcHJvY2Vzc2VkQ29sb3IgPSBwcm9jZXNzQ29sb3IoY29sb3IpO1xuICAgIGludmFyaWFudChcbiAgICAgIHByb2Nlc3NlZENvbG9yID09IG51bGwgfHwgdHlwZW9mIHByb2Nlc3NlZENvbG9yID09PSAnbnVtYmVyJyxcbiAgICAgICdVbmV4cGVjdGVkIGNvbG9yIGdpdmVuIGZvciBSaXBwbGUgY29sb3InLFxuICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdSaXBwbGVBbmRyb2lkJyxcbiAgICAgIGNvbG9yOiBwcm9jZXNzZWRDb2xvcixcbiAgICAgIGJvcmRlcmxlc3MsXG4gICAgICByaXBwbGVSYWRpdXMsXG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogV2hldGhlciBgdXNlRm9yZWdyb3VuZGAgaXMgc3VwcG9ydGVkLlxuICAgKi9cbiAgc3RhdGljIGNhblVzZU5hdGl2ZUZvcmVncm91bmQ6ICgpID0+IGJvb2xlYW4gPSAoKSA9PlxuICAgIFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcgJiYgUGxhdGZvcm0uVmVyc2lvbiA+PSAyMztcblxuICBzdGF0ZTogU3RhdGUgPSB7XG4gICAgcHJlc3NhYmlsaXR5OiBuZXcgUHJlc3NhYmlsaXR5KHRoaXMuX2NyZWF0ZVByZXNzYWJpbGl0eUNvbmZpZygpKSxcbiAgfTtcblxuICBfY3JlYXRlUHJlc3NhYmlsaXR5Q29uZmlnKCk6IFByZXNzYWJpbGl0eUNvbmZpZyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNhbmNlbGFibGU6ICF0aGlzLnByb3BzLnJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uLFxuICAgICAgZGlzYWJsZWQ6XG4gICAgICAgIHRoaXMucHJvcHMuZGlzYWJsZWQgIT0gbnVsbFxuICAgICAgICAgID8gdGhpcy5wcm9wcy5kaXNhYmxlZFxuICAgICAgICAgIDogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5U3RhdGU/LmRpc2FibGVkLFxuICAgICAgaGl0U2xvcDogdGhpcy5wcm9wcy5oaXRTbG9wLFxuICAgICAgZGVsYXlMb25nUHJlc3M6IHRoaXMucHJvcHMuZGVsYXlMb25nUHJlc3MsXG4gICAgICBkZWxheVByZXNzSW46IHRoaXMucHJvcHMuZGVsYXlQcmVzc0luLFxuICAgICAgZGVsYXlQcmVzc091dDogdGhpcy5wcm9wcy5kZWxheVByZXNzT3V0LFxuICAgICAgbWluUHJlc3NEdXJhdGlvbjogMCxcbiAgICAgIHByZXNzUmVjdE9mZnNldDogdGhpcy5wcm9wcy5wcmVzc1JldGVudGlvbk9mZnNldCxcbiAgICAgIGFuZHJvaWRfZGlzYWJsZVNvdW5kOiB0aGlzLnByb3BzLnRvdWNoU291bmREaXNhYmxlZCxcbiAgICAgIG9uTG9uZ1ByZXNzOiB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzLFxuICAgICAgb25QcmVzczogdGhpcy5wcm9wcy5vblByZXNzLFxuICAgICAgb25QcmVzc0luOiBldmVudCA9PiB7XG4gICAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICAgICAgdGhpcy5fZGlzcGF0Y2hIb3RzcG90VXBkYXRlKGV2ZW50KTtcbiAgICAgICAgICB0aGlzLl9kaXNwYXRjaFByZXNzZWRTdGF0ZUNoYW5nZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vblByZXNzSW4gIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMucHJvcHMub25QcmVzc0luKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uUHJlc3NNb3ZlOiBldmVudCA9PiB7XG4gICAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICAgICAgdGhpcy5fZGlzcGF0Y2hIb3RzcG90VXBkYXRlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uUHJlc3NPdXQ6IGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgICAgICB0aGlzLl9kaXNwYXRjaFByZXNzZWRTdGF0ZUNoYW5nZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25QcmVzc091dCAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vblByZXNzT3V0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgX2Rpc3BhdGNoUHJlc3NlZFN0YXRlQ2hhbmdlKHByZXNzZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgY29uc3QgaG9zdENvbXBvbmVudFJlZiA9IFJlYWN0TmF0aXZlLmZpbmRIb3N0SW5zdGFuY2VfREVQUkVDQVRFRCh0aGlzKTtcbiAgICAgIGlmIChob3N0Q29tcG9uZW50UmVmID09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICdUb3VjaGFibGU6IFVuYWJsZSB0byBmaW5kIEhvc3RDb21wb25lbnQgaW5zdGFuY2UuICcgK1xuICAgICAgICAgICAgJ0hhcyB5b3VyIFRvdWNoYWJsZSBjb21wb25lbnQgYmVlbiB1bm1vdW50ZWQ/JyxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIENvbW1hbmRzLnNldFByZXNzZWQoaG9zdENvbXBvbmVudFJlZiwgcHJlc3NlZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX2Rpc3BhdGNoSG90c3BvdFVwZGF0ZShldmVudDogUHJlc3NFdmVudCk6IHZvaWQge1xuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICBjb25zdCB7bG9jYXRpb25YLCBsb2NhdGlvbll9ID0gZXZlbnQubmF0aXZlRXZlbnQ7XG4gICAgICBjb25zdCBob3N0Q29tcG9uZW50UmVmID0gUmVhY3ROYXRpdmUuZmluZEhvc3RJbnN0YW5jZV9ERVBSRUNBVEVEKHRoaXMpO1xuICAgICAgaWYgKGhvc3RDb21wb25lbnRSZWYgPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ1RvdWNoYWJsZTogVW5hYmxlIHRvIGZpbmQgSG9zdENvbXBvbmVudCBpbnN0YW5jZS4gJyArXG4gICAgICAgICAgICAnSGFzIHlvdXIgVG91Y2hhYmxlIGNvbXBvbmVudCBiZWVuIHVubW91bnRlZD8nLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQ29tbWFuZHMuaG90c3BvdFVwZGF0ZShcbiAgICAgICAgICBob3N0Q29tcG9uZW50UmVmLFxuICAgICAgICAgIGxvY2F0aW9uWCA/PyAwLFxuICAgICAgICAgIGxvY2F0aW9uWSA/PyAwLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpOiBSZWFjdC5Ob2RlIHtcbiAgICBjb25zdCBlbGVtZW50ID0gUmVhY3QuQ2hpbGRyZW4ub25seSh0aGlzLnByb3BzLmNoaWxkcmVuKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtlbGVtZW50LnByb3BzLmNoaWxkcmVuXTtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gVmlldykge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICAgIDxQcmVzc2FiaWxpdHlEZWJ1Z1ZpZXcgY29sb3I9XCJicm93blwiIGhpdFNsb3A9e3RoaXMucHJvcHMuaGl0U2xvcH0gLz4sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQkFDS1dBUkQtQ09NUEFUSUJJTElUWTogRm9jdXMgYW5kIGJsdXIgZXZlbnRzIHdlcmUgbmV2ZXIgc3VwcG9ydGVkIGJlZm9yZVxuICAgIC8vIGFkb3B0aW5nIGBQcmVzc2FiaWxpdHlgLCBzbyBwcmVzZXJ2ZSB0aGF0IGJlaGF2aW9yLlxuICAgIGNvbnN0IHtcbiAgICAgIG9uQmx1cixcbiAgICAgIG9uRm9jdXMsXG4gICAgICAuLi5ldmVudEhhbmRsZXJzV2l0aG91dEJsdXJBbmRGb2N1c1xuICAgIH0gPSB0aGlzLnN0YXRlLnByZXNzYWJpbGl0eS5nZXRFdmVudEhhbmRsZXJzKCk7XG5cbiAgICBjb25zdCBhY2Nlc3NpYmlsaXR5U3RhdGUgPVxuICAgICAgdGhpcy5wcm9wcy5kaXNhYmxlZCAhPSBudWxsXG4gICAgICAgID8ge1xuICAgICAgICAgICAgLi4udGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5U3RhdGUsXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICB9XG4gICAgICAgIDogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5U3RhdGU7XG5cbiAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KFxuICAgICAgZWxlbWVudCxcbiAgICAgIHtcbiAgICAgICAgLi4uZXZlbnRIYW5kbGVyc1dpdGhvdXRCbHVyQW5kRm9jdXMsXG4gICAgICAgIC4uLmdldEJhY2tncm91bmRQcm9wKFxuICAgICAgICAgIHRoaXMucHJvcHMuYmFja2dyb3VuZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IFRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrLlNlbGVjdGFibGVCYWNrZ3JvdW5kKClcbiAgICAgICAgICAgIDogdGhpcy5wcm9wcy5iYWNrZ3JvdW5kLFxuICAgICAgICAgIHRoaXMucHJvcHMudXNlRm9yZWdyb3VuZCA9PT0gdHJ1ZSxcbiAgICAgICAgKSxcbiAgICAgICAgYWNjZXNzaWJsZTogdGhpcy5wcm9wcy5hY2Nlc3NpYmxlICE9PSBmYWxzZSxcbiAgICAgICAgYWNjZXNzaWJpbGl0eUhpbnQ6IHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUhpbnQsXG4gICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5TGFiZWwsXG4gICAgICAgIGFjY2Vzc2liaWxpdHlSb2xlOiB0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlSb2xlLFxuICAgICAgICBhY2Nlc3NpYmlsaXR5U3RhdGU6IGFjY2Vzc2liaWxpdHlTdGF0ZSxcbiAgICAgICAgYWNjZXNzaWJpbGl0eUFjdGlvbnM6IHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUFjdGlvbnMsXG4gICAgICAgIG9uQWNjZXNzaWJpbGl0eUFjdGlvbjogdGhpcy5wcm9wcy5vbkFjY2Vzc2liaWxpdHlBY3Rpb24sXG4gICAgICAgIGFjY2Vzc2liaWxpdHlWYWx1ZTogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5VmFsdWUsXG4gICAgICAgIGltcG9ydGFudEZvckFjY2Vzc2liaWxpdHk6IHRoaXMucHJvcHMuaW1wb3J0YW50Rm9yQWNjZXNzaWJpbGl0eSxcbiAgICAgICAgYWNjZXNzaWJpbGl0eUxpdmVSZWdpb246IHRoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUxpdmVSZWdpb24sXG4gICAgICAgIGFjY2Vzc2liaWxpdHlWaWV3SXNNb2RhbDogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5Vmlld0lzTW9kYWwsXG4gICAgICAgIGFjY2Vzc2liaWxpdHlFbGVtZW50c0hpZGRlbjogdGhpcy5wcm9wcy5hY2Nlc3NpYmlsaXR5RWxlbWVudHNIaWRkZW4sXG4gICAgICAgIGhhc1RWUHJlZmVycmVkRm9jdXM6IHRoaXMucHJvcHMuaGFzVFZQcmVmZXJyZWRGb2N1cyxcbiAgICAgICAgaGl0U2xvcDogdGhpcy5wcm9wcy5oaXRTbG9wLFxuICAgICAgICBmb2N1c2FibGU6XG4gICAgICAgICAgdGhpcy5wcm9wcy5mb2N1c2FibGUgIT09IGZhbHNlICYmXG4gICAgICAgICAgdGhpcy5wcm9wcy5vblByZXNzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAhdGhpcy5wcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgbmF0aXZlSUQ6IHRoaXMucHJvcHMubmF0aXZlSUQsXG4gICAgICAgIG5leHRGb2N1c0Rvd246IHRoaXMucHJvcHMubmV4dEZvY3VzRG93bixcbiAgICAgICAgbmV4dEZvY3VzRm9yd2FyZDogdGhpcy5wcm9wcy5uZXh0Rm9jdXNGb3J3YXJkLFxuICAgICAgICBuZXh0Rm9jdXNMZWZ0OiB0aGlzLnByb3BzLm5leHRGb2N1c0xlZnQsXG4gICAgICAgIG5leHRGb2N1c1JpZ2h0OiB0aGlzLnByb3BzLm5leHRGb2N1c1JpZ2h0LFxuICAgICAgICBuZXh0Rm9jdXNVcDogdGhpcy5wcm9wcy5uZXh0Rm9jdXNVcCxcbiAgICAgICAgb25MYXlvdXQ6IHRoaXMucHJvcHMub25MYXlvdXQsXG4gICAgICAgIHRlc3RJRDogdGhpcy5wcm9wcy50ZXN0SUQsXG4gICAgICB9LFxuICAgICAgLi4uY2hpbGRyZW4sXG4gICAgKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFByb3BzLCBwcmV2U3RhdGU6IFN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZS5wcmVzc2FiaWxpdHkuY29uZmlndXJlKHRoaXMuX2NyZWF0ZVByZXNzYWJpbGl0eUNvbmZpZygpKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUucHJlc3NhYmlsaXR5LnJlc2V0KCk7XG4gIH1cbn1cblxuY29uc3QgZ2V0QmFja2dyb3VuZFByb3AgPVxuICBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnXG4gICAgPyAoYmFja2dyb3VuZCwgdXNlRm9yZWdyb3VuZCkgPT5cbiAgICAgICAgdXNlRm9yZWdyb3VuZCAmJiBUb3VjaGFibGVOYXRpdmVGZWVkYmFjay5jYW5Vc2VOYXRpdmVGb3JlZ3JvdW5kKClcbiAgICAgICAgICA/IHtuYXRpdmVGb3JlZ3JvdW5kQW5kcm9pZDogYmFja2dyb3VuZH1cbiAgICAgICAgICA6IHtuYXRpdmVCYWNrZ3JvdW5kQW5kcm9pZDogYmFja2dyb3VuZH1cbiAgICA6IChiYWNrZ3JvdW5kLCB1c2VGb3JlZ3JvdW5kKSA9PiBudWxsO1xuXG5Ub3VjaGFibGVOYXRpdmVGZWVkYmFjay5kaXNwbGF5TmFtZSA9ICdUb3VjaGFibGVOYXRpdmVGZWVkYmFjayc7XG5cbm1vZHVsZS5leHBvcnRzID0gVG91Y2hhYmxlTmF0aXZlRmVlZGJhY2s7XG4iXX0=