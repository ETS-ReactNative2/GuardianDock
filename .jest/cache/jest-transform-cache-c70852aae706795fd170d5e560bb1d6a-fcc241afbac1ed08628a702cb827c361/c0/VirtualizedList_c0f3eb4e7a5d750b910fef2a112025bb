072252b99787a136af79bb7a2069367c
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _VirtualizeUtils = require("./VirtualizeUtils");

var React = _interopRequireWildcard(require("react"));

var _VirtualizedListContext = require("./VirtualizedListContext.js");

var _jsxRuntime = require("react/jsx-runtime");

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var Batchinator = require("../Interaction/Batchinator");

var FillRateHelper = require("./FillRateHelper");

var ReactNative = require("../Renderer/shims/ReactNative");

var RefreshControl = require("../Components/RefreshControl/RefreshControl");

var ScrollView = require("../Components/ScrollView/ScrollView");

var StyleSheet = require("../StyleSheet/StyleSheet");

var View = require("../Components/View/View");

var ViewabilityHelper = require("./ViewabilityHelper");

var flattenStyle = require("../StyleSheet/flattenStyle");

var infoLog = require("../Utilities/infoLog");

var invariant = require('invariant');

var _usedIndexForKey = false;
var _keylessItemComponentName = '';

function horizontalOrDefault(horizontal) {
  return horizontal != null ? horizontal : false;
}

function initialNumToRenderOrDefault(initialNumToRender) {
  return initialNumToRender != null ? initialNumToRender : 10;
}

function maxToRenderPerBatchOrDefault(maxToRenderPerBatch) {
  return maxToRenderPerBatch != null ? maxToRenderPerBatch : 10;
}

function onEndReachedThresholdOrDefault(onEndReachedThreshold) {
  return onEndReachedThreshold != null ? onEndReachedThreshold : 2;
}

function scrollEventThrottleOrDefault(scrollEventThrottle) {
  return scrollEventThrottle != null ? scrollEventThrottle : 50;
}

function windowSizeOrDefault(windowSize) {
  return windowSize != null ? windowSize : 21;
}

var VirtualizedList = function (_React$PureComponent) {
  (0, _inherits2.default)(VirtualizedList, _React$PureComponent);

  var _super = _createSuper(VirtualizedList);

  function VirtualizedList(_props) {
    var _this$props$updateCel;

    var _this;

    (0, _classCallCheck2.default)(this, VirtualizedList);
    _this = _super.call(this, _props);

    _this._getScrollMetrics = function () {
      return _this._scrollMetrics;
    };

    _this._getOutermostParentListRef = function () {
      if (_this._isNestedWithSameOrientation()) {
        return _this.context.getOutermostParentListRef();
      } else {
        return (0, _assertThisInitialized2.default)(_this);
      }
    };

    _this._getNestedChildState = function (key) {
      var existingChildData = _this._nestedChildLists.get(key);

      return existingChildData && existingChildData.state;
    };

    _this._registerAsNestedChild = function (childList) {
      var childListsInCell = _this._cellKeysToChildListKeys.get(childList.cellKey) || new Set();
      childListsInCell.add(childList.key);

      _this._cellKeysToChildListKeys.set(childList.cellKey, childListsInCell);

      var existingChildData = _this._nestedChildLists.get(childList.key);

      if (existingChildData && existingChildData.ref !== null) {
        console.error('A VirtualizedList contains a cell which itself contains ' + 'more than one VirtualizedList of the same orientation as the parent ' + 'list. You must pass a unique listKey prop to each sibling list.\n\n' + describeNestedLists((0, _extends2.default)({}, childList, {
          horizontal: !!childList.ref.props.horizontal
        })));
      }

      _this._nestedChildLists.set(childList.key, {
        ref: childList.ref,
        state: null
      });

      if (_this._hasInteracted) {
        childList.ref.recordInteraction();
      }
    };

    _this._unregisterAsNestedChild = function (childList) {
      _this._nestedChildLists.set(childList.key, {
        ref: null,
        state: childList.state
      });
    };

    _this._onUpdateSeparators = function (keys, newProps) {
      keys.forEach(function (key) {
        var ref = key != null && _this._cellRefs[key];
        ref && ref.updateSeparatorProps(newProps);
      });
    };

    _this._getSpacerKey = function (isVertical) {
      return isVertical ? 'height' : 'width';
    };

    _this._averageCellLength = 0;
    _this._cellKeysToChildListKeys = new Map();
    _this._cellRefs = {};
    _this._frames = {};
    _this._footerLength = 0;
    _this._hasDoneInitialScroll = false;
    _this._hasInteracted = false;
    _this._hasMore = false;
    _this._hasWarned = {};
    _this._headerLength = 0;
    _this._hiPriInProgress = false;
    _this._highestMeasuredFrameIndex = 0;
    _this._indicesToKeys = new Map();
    _this._nestedChildLists = new Map();
    _this._offsetFromParentVirtualizedList = 0;
    _this._prevParentOffset = 0;
    _this._scrollMetrics = {
      contentLength: 0,
      dOffset: 0,
      dt: 10,
      offset: 0,
      timestamp: 0,
      velocity: 0,
      visibleLength: 0
    };
    _this._scrollRef = null;
    _this._sentEndForContentLength = 0;
    _this._totalCellLength = 0;
    _this._totalCellsMeasured = 0;
    _this._viewabilityTuples = [];

    _this._captureScrollRef = function (ref) {
      _this._scrollRef = ref;
    };

    _this._defaultRenderScrollComponent = function (props) {
      var onRefresh = props.onRefresh;

      if (_this._isNestedWithSameOrientation()) {
        return (0, _jsxRuntime.jsx)(View, (0, _extends2.default)({}, props));
      } else if (onRefresh) {
        var _props$refreshing;

        invariant(typeof props.refreshing === 'boolean', '`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `' + JSON.stringify((_props$refreshing = props.refreshing) != null ? _props$refreshing : 'undefined') + '`');
        return (0, _jsxRuntime.jsx)(ScrollView, (0, _extends2.default)({}, props, {
          refreshControl: props.refreshControl == null ? (0, _jsxRuntime.jsx)(RefreshControl, {
            refreshing: props.refreshing,
            onRefresh: onRefresh,
            progressViewOffset: props.progressViewOffset
          }) : props.refreshControl
        }));
      } else {
        return (0, _jsxRuntime.jsx)(ScrollView, (0, _extends2.default)({}, props));
      }
    };

    _this._onCellUnmount = function (cellKey) {
      var curr = _this._frames[cellKey];

      if (curr) {
        _this._frames[cellKey] = (0, _extends2.default)({}, curr, {
          inLayout: false
        });
      }
    };

    _this._onLayout = function (e) {
      if (_this._isNestedWithSameOrientation()) {
        _this.measureLayoutRelativeToContainingList();
      } else {
        _this._scrollMetrics.visibleLength = _this._selectLength(e.nativeEvent.layout);
      }

      _this.props.onLayout && _this.props.onLayout(e);

      _this._scheduleCellsToRenderUpdate();

      _this._maybeCallOnEndReached();
    };

    _this._onLayoutEmpty = function (e) {
      _this.props.onLayout && _this.props.onLayout(e);
    };

    _this._onLayoutFooter = function (e) {
      _this._triggerRemeasureForChildListsInCell(_this._getFooterCellKey());

      _this._footerLength = _this._selectLength(e.nativeEvent.layout);
    };

    _this._onLayoutHeader = function (e) {
      _this._headerLength = _this._selectLength(e.nativeEvent.layout);
    };

    _this._onContentSizeChange = function (width, height) {
      if (width > 0 && height > 0 && _this.props.initialScrollIndex != null && _this.props.initialScrollIndex > 0 && !_this._hasDoneInitialScroll) {
        if (_this.props.contentOffset == null) {
          _this.scrollToIndex({
            animated: false,
            index: _this.props.initialScrollIndex
          });
        }

        _this._hasDoneInitialScroll = true;
      }

      if (_this.props.onContentSizeChange) {
        _this.props.onContentSizeChange(width, height);
      }

      _this._scrollMetrics.contentLength = _this._selectLength({
        height: height,
        width: width
      });

      _this._scheduleCellsToRenderUpdate();

      _this._maybeCallOnEndReached();
    };

    _this._convertParentScrollMetrics = function (metrics) {
      var offset = metrics.offset - _this._offsetFromParentVirtualizedList;
      var visibleLength = metrics.visibleLength;
      var dOffset = offset - _this._scrollMetrics.offset;
      var contentLength = _this._scrollMetrics.contentLength;
      return {
        visibleLength: visibleLength,
        contentLength: contentLength,
        offset: offset,
        dOffset: dOffset
      };
    };

    _this._onScroll = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScroll(e);
      });

      if (_this.props.onScroll) {
        _this.props.onScroll(e);
      }

      var timestamp = e.timeStamp;

      var visibleLength = _this._selectLength(e.nativeEvent.layoutMeasurement);

      var contentLength = _this._selectLength(e.nativeEvent.contentSize);

      var offset = _this._selectOffset(e.nativeEvent.contentOffset);

      var dOffset = offset - _this._scrollMetrics.offset;

      if (_this._isNestedWithSameOrientation()) {
        if (_this._scrollMetrics.contentLength === 0) {
          return;
        }

        var _this$_convertParentS = _this._convertParentScrollMetrics({
          visibleLength: visibleLength,
          offset: offset
        });

        visibleLength = _this$_convertParentS.visibleLength;
        contentLength = _this$_convertParentS.contentLength;
        offset = _this$_convertParentS.offset;
        dOffset = _this$_convertParentS.dOffset;
      }

      var dt = _this._scrollMetrics.timestamp ? Math.max(1, timestamp - _this._scrollMetrics.timestamp) : 1;
      var velocity = dOffset / dt;

      if (dt > 500 && _this._scrollMetrics.dt > 500 && contentLength > 5 * visibleLength && !_this._hasWarned.perf) {
        infoLog('VirtualizedList: You have a large list that is slow to update - make sure your ' + 'renderItem function renders components that follow React performance best practices ' + 'like PureComponent, shouldComponentUpdate, etc.', {
          dt: dt,
          prevDt: _this._scrollMetrics.dt,
          contentLength: contentLength
        });
        _this._hasWarned.perf = true;
      }

      _this._scrollMetrics = {
        contentLength: contentLength,
        dt: dt,
        dOffset: dOffset,
        offset: offset,
        timestamp: timestamp,
        velocity: velocity,
        visibleLength: visibleLength
      };

      _this._updateViewableItems(_this.props.data);

      if (!_this.props) {
        return;
      }

      _this._maybeCallOnEndReached();

      if (velocity !== 0) {
        _this._fillRateHelper.activate();
      }

      _this._computeBlankness();

      _this._scheduleCellsToRenderUpdate();
    };

    _this._onScrollBeginDrag = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScrollBeginDrag(e);
      });

      _this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.recordInteraction();
      });

      _this._hasInteracted = true;
      _this.props.onScrollBeginDrag && _this.props.onScrollBeginDrag(e);
    };

    _this._onScrollEndDrag = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScrollEndDrag(e);
      });

      var velocity = e.nativeEvent.velocity;

      if (velocity) {
        _this._scrollMetrics.velocity = _this._selectOffset(velocity);
      }

      _this._computeBlankness();

      _this.props.onScrollEndDrag && _this.props.onScrollEndDrag(e);
    };

    _this._onMomentumScrollBegin = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onMomentumScrollBegin(e);
      });

      _this.props.onMomentumScrollBegin && _this.props.onMomentumScrollBegin(e);
    };

    _this._onMomentumScrollEnd = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onMomentumScrollEnd(e);
      });

      _this._scrollMetrics.velocity = 0;

      _this._computeBlankness();

      _this.props.onMomentumScrollEnd && _this.props.onMomentumScrollEnd(e);
    };

    _this._updateCellsToRender = function () {
      var _this$props = _this.props,
          data = _this$props.data,
          getItemCount = _this$props.getItemCount,
          _onEndReachedThreshold = _this$props.onEndReachedThreshold;
      var onEndReachedThreshold = onEndReachedThresholdOrDefault(_onEndReachedThreshold);

      var isVirtualizationDisabled = _this._isVirtualizationDisabled();

      _this._updateViewableItems(data);

      if (!data) {
        return;
      }

      _this.setState(function (state) {
        var newState;
        var _this$_scrollMetrics = _this._scrollMetrics,
            contentLength = _this$_scrollMetrics.contentLength,
            offset = _this$_scrollMetrics.offset,
            visibleLength = _this$_scrollMetrics.visibleLength;

        if (!isVirtualizationDisabled) {
          if (visibleLength > 0 && contentLength > 0) {
            if (!_this.props.initialScrollIndex || _this._scrollMetrics.offset) {
              newState = (0, _VirtualizeUtils.computeWindowedRenderLimits)(_this.props.data, _this.props.getItemCount, maxToRenderPerBatchOrDefault(_this.props.maxToRenderPerBatch), windowSizeOrDefault(_this.props.windowSize), state, _this._getFrameMetricsApprox, _this._scrollMetrics);
            }
          }
        } else {
          var distanceFromEnd = contentLength - visibleLength - offset;
          var renderAhead = distanceFromEnd < onEndReachedThreshold * visibleLength ? maxToRenderPerBatchOrDefault(_this.props.maxToRenderPerBatch) : 0;
          newState = {
            first: 0,
            last: Math.min(state.last + renderAhead, getItemCount(data) - 1)
          };
        }

        if (newState && _this._nestedChildLists.size > 0) {
          var newFirst = newState.first;
          var newLast = newState.last;

          for (var ii = newFirst; ii <= newLast; ii++) {
            var cellKeyForIndex = _this._indicesToKeys.get(ii);

            var childListKeys = cellKeyForIndex && _this._cellKeysToChildListKeys.get(cellKeyForIndex);

            if (!childListKeys) {
              continue;
            }

            var someChildHasMore = false;

            for (var _iterator = _createForOfIteratorHelperLoose(childListKeys), _step; !(_step = _iterator()).done;) {
              var childKey = _step.value;

              var childList = _this._nestedChildLists.get(childKey);

              if (childList && childList.ref && childList.ref.hasMore()) {
                someChildHasMore = true;
                break;
              }
            }

            if (someChildHasMore) {
              newState.last = ii;
              break;
            }
          }
        }

        if (newState != null && newState.first === state.first && newState.last === state.last) {
          newState = null;
        }

        return newState;
      });
    };

    _this._createViewToken = function (index, isViewable) {
      var _this$props2 = _this.props,
          data = _this$props2.data,
          getItem = _this$props2.getItem;
      var item = getItem(data, index);
      return {
        index: index,
        item: item,
        key: _this._keyExtractor(item, index),
        isViewable: isViewable
      };
    };

    _this._getFrameMetricsApprox = function (index) {
      var frame = _this._getFrameMetrics(index);

      if (frame && frame.index === index) {
        return frame;
      } else {
        var getItemLayout = _this.props.getItemLayout;
        invariant(!getItemLayout, 'Should not have to estimate frames when a measurement metrics function is provided');
        return {
          length: _this._averageCellLength,
          offset: _this._averageCellLength * index
        };
      }
    };

    _this._getFrameMetrics = function (index) {
      var _this$props3 = _this.props,
          data = _this$props3.data,
          getItem = _this$props3.getItem,
          getItemCount = _this$props3.getItemCount,
          getItemLayout = _this$props3.getItemLayout;
      invariant(getItemCount(data) > index, 'Tried to get frame for out of range index ' + index);
      var item = getItem(data, index);

      var frame = item && _this._frames[_this._keyExtractor(item, index)];

      if (!frame || frame.index !== index) {
        if (getItemLayout) {
          frame = getItemLayout(data, index);
        }
      }

      return frame;
    };

    invariant(!_props.onScroll || !_props.onScroll.__isNative, 'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent ' + 'to support native onScroll events with useNativeDriver');
    invariant(windowSizeOrDefault(_props.windowSize) > 0, 'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');
    _this._fillRateHelper = new FillRateHelper(_this._getFrameMetrics);
    _this._updateCellsToRenderBatcher = new Batchinator(_this._updateCellsToRender, (_this$props$updateCel = _this.props.updateCellsBatchingPeriod) != null ? _this$props$updateCel : 50);

    if (_this.props.viewabilityConfigCallbackPairs) {
      _this._viewabilityTuples = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {
        return {
          viewabilityHelper: new ViewabilityHelper(pair.viewabilityConfig),
          onViewableItemsChanged: pair.onViewableItemsChanged
        };
      });
    } else if (_this.props.onViewableItemsChanged) {
      _this._viewabilityTuples.push({
        viewabilityHelper: new ViewabilityHelper(_this.props.viewabilityConfig),
        onViewableItemsChanged: _this.props.onViewableItemsChanged
      });
    }

    var initialState = {
      first: _this.props.initialScrollIndex || 0,
      last: Math.min(_this.props.getItemCount(_this.props.data), (_this.props.initialScrollIndex || 0) + initialNumToRenderOrDefault(_this.props.initialNumToRender)) - 1
    };

    if (_this._isNestedWithSameOrientation()) {
      var storedState = _this.context.getNestedChildState(_this._getListKey());

      if (storedState) {
        initialState = storedState;
        _this.state = storedState;
        _this._frames = storedState.frames;
      }
    }

    _this.state = initialState;
    return _this;
  }

  (0, _createClass2.default)(VirtualizedList, [{
    key: "scrollToEnd",
    value: function scrollToEnd(params) {
      var animated = params ? params.animated : true;
      var veryLast = this.props.getItemCount(this.props.data) - 1;

      var frame = this._getFrameMetricsApprox(veryLast);

      var offset = Math.max(0, frame.offset + frame.length + this._footerLength - this._scrollMetrics.visibleLength);

      if (this._scrollRef == null) {
        return;
      }

      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }

      this._scrollRef.scrollTo(horizontalOrDefault(this.props.horizontal) ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToIndex",
    value: function scrollToIndex(params) {
      var _this$props4 = this.props,
          data = _this$props4.data,
          horizontal = _this$props4.horizontal,
          getItemCount = _this$props4.getItemCount,
          getItemLayout = _this$props4.getItemLayout,
          onScrollToIndexFailed = _this$props4.onScrollToIndexFailed;
      var animated = params.animated,
          index = params.index,
          viewOffset = params.viewOffset,
          viewPosition = params.viewPosition;
      invariant(index >= 0, "scrollToIndex out of range: requested index " + index + " but minimum is 0");
      invariant(getItemCount(data) >= 1, "scrollToIndex out of range: item length " + getItemCount(data) + " but minimum is 1");
      invariant(index < getItemCount(data), "scrollToIndex out of range: requested index " + index + " is out of 0 to " + (getItemCount(data) - 1));

      if (!getItemLayout && index > this._highestMeasuredFrameIndex) {
        invariant(!!onScrollToIndexFailed, 'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, ' + 'otherwise there is no way to know the location of offscreen indices or handle failures.');
        onScrollToIndexFailed({
          averageItemLength: this._averageCellLength,
          highestMeasuredFrameIndex: this._highestMeasuredFrameIndex,
          index: index
        });
        return;
      }

      var frame = this._getFrameMetricsApprox(index);

      var offset = Math.max(0, frame.offset - (viewPosition || 0) * (this._scrollMetrics.visibleLength - frame.length)) - (viewOffset || 0);

      if (this._scrollRef == null) {
        return;
      }

      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }

      this._scrollRef.scrollTo(horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToItem",
    value: function scrollToItem(params) {
      var item = params.item;
      var _this$props5 = this.props,
          data = _this$props5.data,
          getItem = _this$props5.getItem,
          getItemCount = _this$props5.getItemCount;
      var itemCount = getItemCount(data);

      for (var _index = 0; _index < itemCount; _index++) {
        if (getItem(data, _index) === item) {
          this.scrollToIndex((0, _extends2.default)({}, params, {
            index: _index
          }));
          break;
        }
      }
    }
  }, {
    key: "scrollToOffset",
    value: function scrollToOffset(params) {
      var animated = params.animated,
          offset = params.offset;

      if (this._scrollRef == null) {
        return;
      }

      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }

      this._scrollRef.scrollTo(horizontalOrDefault(this.props.horizontal) ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "recordInteraction",
    value: function recordInteraction() {
      this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref.recordInteraction();
      });

      this._viewabilityTuples.forEach(function (t) {
        t.viewabilityHelper.recordInteraction();
      });

      this._updateViewableItems(this.props.data);
    }
  }, {
    key: "flashScrollIndicators",
    value: function flashScrollIndicators() {
      if (this._scrollRef == null) {
        return;
      }

      this._scrollRef.flashScrollIndicators();
    }
  }, {
    key: "getScrollResponder",
    value: function getScrollResponder() {
      if (this._scrollRef && this._scrollRef.getScrollResponder) {
        return this._scrollRef.getScrollResponder();
      }
    }
  }, {
    key: "getScrollableNode",
    value: function getScrollableNode() {
      if (this._scrollRef && this._scrollRef.getScrollableNode) {
        return this._scrollRef.getScrollableNode();
      } else {
        return ReactNative.findNodeHandle(this._scrollRef);
      }
    }
  }, {
    key: "getScrollRef",
    value: function getScrollRef() {
      if (this._scrollRef && this._scrollRef.getScrollRef) {
        return this._scrollRef.getScrollRef();
      } else {
        return this._scrollRef;
      }
    }
  }, {
    key: "setNativeProps",
    value: function setNativeProps(props) {
      if (this._scrollRef) {
        this._scrollRef.setNativeProps(props);
      }
    }
  }, {
    key: "_getCellKey",
    value: function _getCellKey() {
      var _this$context;

      return ((_this$context = this.context) == null ? void 0 : _this$context.cellKey) || 'rootList';
    }
  }, {
    key: "_getListKey",
    value: function _getListKey() {
      return this.props.listKey || this._getCellKey();
    }
  }, {
    key: "_getDebugInfo",
    value: function _getDebugInfo() {
      var _this$context2;

      return {
        listKey: this._getListKey(),
        cellKey: this._getCellKey(),
        horizontal: horizontalOrDefault(this.props.horizontal),
        parent: (_this$context2 = this.context) == null ? void 0 : _this$context2.debugInfo
      };
    }
  }, {
    key: "hasMore",
    value: function hasMore() {
      return this._hasMore;
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.registerAsNestedChild({
          cellKey: this._getCellKey(),
          key: this._getListKey(),
          ref: this,
          parentDebugInfo: this.context.debugInfo
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.unregisterAsNestedChild({
          key: this._getListKey(),
          state: {
            first: this.state.first,
            last: this.state.last,
            frames: this._frames
          }
        });
      }

      this._updateViewableItems(null);

      this._updateCellsToRenderBatcher.dispose({
        abort: true
      });

      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.dispose();
      });

      this._fillRateHelper.deactivateAndFlush();
    }
  }, {
    key: "_pushCells",
    value: function _pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, first, last, inversionStyle) {
      var _this2 = this;

      var _this$props6 = this.props,
          CellRendererComponent = _this$props6.CellRendererComponent,
          ItemSeparatorComponent = _this$props6.ItemSeparatorComponent,
          data = _this$props6.data,
          getItem = _this$props6.getItem,
          getItemCount = _this$props6.getItemCount,
          horizontal = _this$props6.horizontal;
      var stickyOffset = this.props.ListHeaderComponent ? 1 : 0;
      var end = getItemCount(data) - 1;
      var prevCellKey;
      last = Math.min(end, last);

      var _loop = function _loop(ii) {
        var item = getItem(data, ii);

        var key = _this2._keyExtractor(item, ii);

        _this2._indicesToKeys.set(ii, key);

        if (stickyIndicesFromProps.has(ii + stickyOffset)) {
          stickyHeaderIndices.push(cells.length);
        }

        cells.push((0, _jsxRuntime.jsx)(CellRenderer, {
          CellRendererComponent: CellRendererComponent,
          ItemSeparatorComponent: ii < end ? ItemSeparatorComponent : undefined,
          cellKey: key,
          fillRateHelper: _this2._fillRateHelper,
          horizontal: horizontal,
          index: ii,
          inversionStyle: inversionStyle,
          item: item,
          prevCellKey: prevCellKey,
          onUpdateSeparators: _this2._onUpdateSeparators,
          onLayout: function onLayout(e) {
            return _this2._onCellLayout(e, key, ii);
          },
          onUnmount: _this2._onCellUnmount,
          parentProps: _this2.props,
          ref: function ref(_ref) {
            _this2._cellRefs[key] = _ref;
          }
        }, key));
        prevCellKey = key;
      };

      for (var ii = first; ii <= last; ii++) {
        _loop(ii);
      }
    }
  }, {
    key: "_isVirtualizationDisabled",
    value: function _isVirtualizationDisabled() {
      return this.props.disableVirtualization || false;
    }
  }, {
    key: "_isNestedWithSameOrientation",
    value: function _isNestedWithSameOrientation() {
      var nestedContext = this.context;
      return !!(nestedContext && !!nestedContext.horizontal === horizontalOrDefault(this.props.horizontal));
    }
  }, {
    key: "_keyExtractor",
    value: function _keyExtractor(item, index) {
      if (this.props.keyExtractor != null) {
        return this.props.keyExtractor(item, index);
      }

      var key = (0, _VirtualizeUtils.keyExtractor)(item, index);

      if (key === String(index)) {
        _usedIndexForKey = true;

        if (item.type && item.type.displayName) {
          _keylessItemComponentName = item.type.displayName;
        }
      }

      return key;
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      if (__DEV__) {
        var flatStyles = flattenStyle(this.props.contentContainerStyle);

        if (flatStyles != null && flatStyles.flexWrap === 'wrap') {
          console.warn('`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.' + 'Consider using `numColumns` with `FlatList` instead.');
        }
      }

      var _this$props7 = this.props,
          ListEmptyComponent = _this$props7.ListEmptyComponent,
          ListFooterComponent = _this$props7.ListFooterComponent,
          ListHeaderComponent = _this$props7.ListHeaderComponent;
      var _this$props8 = this.props,
          data = _this$props8.data,
          horizontal = _this$props8.horizontal;

      var isVirtualizationDisabled = this._isVirtualizationDisabled();

      var inversionStyle = this.props.inverted ? horizontalOrDefault(this.props.horizontal) ? styles.horizontallyInverted : styles.verticallyInverted : null;
      var cells = [];
      var stickyIndicesFromProps = new Set(this.props.stickyHeaderIndices);
      var stickyHeaderIndices = [];

      if (ListHeaderComponent) {
        if (stickyIndicesFromProps.has(0)) {
          stickyHeaderIndices.push(0);
        }

        var element = React.isValidElement(ListHeaderComponent) ? ListHeaderComponent : (0, _jsxRuntime.jsx)(ListHeaderComponent, {});
        cells.push((0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
          cellKey: this._getCellKey() + '-header',
          children: (0, _jsxRuntime.jsx)(View, {
            onLayout: this._onLayoutHeader,
            style: StyleSheet.compose(inversionStyle, this.props.ListHeaderComponentStyle),
            children: element
          })
        }, "$header"));
      }

      var itemCount = this.props.getItemCount(data);

      if (itemCount > 0) {
        _usedIndexForKey = false;
        _keylessItemComponentName = '';

        var spacerKey = this._getSpacerKey(!horizontal);

        var lastInitialIndex = this.props.initialScrollIndex ? -1 : initialNumToRenderOrDefault(this.props.initialNumToRender) - 1;
        var _this$state = this.state,
            first = _this$state.first,
            last = _this$state.last;

        this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, 0, lastInitialIndex, inversionStyle);

        var firstAfterInitial = Math.max(lastInitialIndex + 1, first);

        if (!isVirtualizationDisabled && first > lastInitialIndex + 1) {
          var insertedStickySpacer = false;

          if (stickyIndicesFromProps.size > 0) {
            var stickyOffset = ListHeaderComponent ? 1 : 0;

            for (var ii = firstAfterInitial - 1; ii > lastInitialIndex; ii--) {
              if (stickyIndicesFromProps.has(ii + stickyOffset)) {
                var initBlock = this._getFrameMetricsApprox(lastInitialIndex);

                var stickyBlock = this._getFrameMetricsApprox(ii);

                var leadSpace = stickyBlock.offset - initBlock.offset - (this.props.initialScrollIndex ? 0 : initBlock.length);
                cells.push((0, _jsxRuntime.jsx)(View, {
                  style: (0, _defineProperty2.default)({}, spacerKey, leadSpace)
                }, "$sticky_lead"));

                this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, ii, ii, inversionStyle);

                var trailSpace = this._getFrameMetricsApprox(first).offset - (stickyBlock.offset + stickyBlock.length);
                cells.push((0, _jsxRuntime.jsx)(View, {
                  style: (0, _defineProperty2.default)({}, spacerKey, trailSpace)
                }, "$sticky_trail"));
                insertedStickySpacer = true;
                break;
              }
            }
          }

          if (!insertedStickySpacer) {
            var _initBlock = this._getFrameMetricsApprox(lastInitialIndex);

            var firstSpace = this._getFrameMetricsApprox(first).offset - (_initBlock.offset + _initBlock.length);

            cells.push((0, _jsxRuntime.jsx)(View, {
              style: (0, _defineProperty2.default)({}, spacerKey, firstSpace)
            }, "$lead_spacer"));
          }
        }

        this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, firstAfterInitial, last, inversionStyle);

        if (!this._hasWarned.keys && _usedIndexForKey) {
          console.warn('VirtualizedList: missing keys for items, make sure to specify a key or id property on each ' + 'item or provide a custom keyExtractor.', _keylessItemComponentName);
          this._hasWarned.keys = true;
        }

        if (!isVirtualizationDisabled && last < itemCount - 1) {
          var lastFrame = this._getFrameMetricsApprox(last);

          var end = this.props.getItemLayout ? itemCount - 1 : Math.min(itemCount - 1, this._highestMeasuredFrameIndex);

          var endFrame = this._getFrameMetricsApprox(end);

          var tailSpacerLength = endFrame.offset + endFrame.length - (lastFrame.offset + lastFrame.length);
          cells.push((0, _jsxRuntime.jsx)(View, {
            style: (0, _defineProperty2.default)({}, spacerKey, tailSpacerLength)
          }, "$tail_spacer"));
        }
      } else if (ListEmptyComponent) {
        var _element = React.isValidElement(ListEmptyComponent) ? ListEmptyComponent : (0, _jsxRuntime.jsx)(ListEmptyComponent, {});

        cells.push(React.cloneElement(_element, {
          key: '$empty',
          onLayout: function onLayout(event) {
            _this3._onLayoutEmpty(event);

            if (_element.props.onLayout) {
              _element.props.onLayout(event);
            }
          },
          style: StyleSheet.compose(inversionStyle, _element.props.style)
        }));
      }

      if (ListFooterComponent) {
        var _element2 = React.isValidElement(ListFooterComponent) ? ListFooterComponent : (0, _jsxRuntime.jsx)(ListFooterComponent, {});

        cells.push((0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
          cellKey: this._getFooterCellKey(),
          children: (0, _jsxRuntime.jsx)(View, {
            onLayout: this._onLayoutFooter,
            style: StyleSheet.compose(inversionStyle, this.props.ListFooterComponentStyle),
            children: _element2
          })
        }, "$footer"));
      }

      var scrollProps = (0, _extends2.default)({}, this.props, {
        onContentSizeChange: this._onContentSizeChange,
        onLayout: this._onLayout,
        onScroll: this._onScroll,
        onScrollBeginDrag: this._onScrollBeginDrag,
        onScrollEndDrag: this._onScrollEndDrag,
        onMomentumScrollBegin: this._onMomentumScrollBegin,
        onMomentumScrollEnd: this._onMomentumScrollEnd,
        scrollEventThrottle: scrollEventThrottleOrDefault(this.props.scrollEventThrottle),
        invertStickyHeaders: this.props.invertStickyHeaders !== undefined ? this.props.invertStickyHeaders : this.props.inverted,
        stickyHeaderIndices: stickyHeaderIndices,
        style: inversionStyle ? [inversionStyle, this.props.style] : this.props.style
      });
      this._hasMore = this.state.last < this.props.getItemCount(this.props.data) - 1;
      var innerRet = (0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListContextProvider, {
        value: {
          cellKey: null,
          getScrollMetrics: this._getScrollMetrics,
          horizontal: horizontalOrDefault(this.props.horizontal),
          getOutermostParentListRef: this._getOutermostParentListRef,
          getNestedChildState: this._getNestedChildState,
          registerAsNestedChild: this._registerAsNestedChild,
          unregisterAsNestedChild: this._unregisterAsNestedChild,
          debugInfo: this._getDebugInfo()
        },
        children: React.cloneElement((this.props.renderScrollComponent || this._defaultRenderScrollComponent)(scrollProps), {
          ref: this._captureScrollRef
        }, cells)
      });
      var ret = innerRet;

      if (__DEV__) {
        ret = (0, _jsxRuntime.jsx)(ScrollView.Context.Consumer, {
          children: function children(scrollContext) {
            if (scrollContext != null && !scrollContext.horizontal === !horizontalOrDefault(_this3.props.horizontal) && !_this3._hasWarned.nesting && _this3.context == null) {
              console.error('VirtualizedLists should never be nested inside plain ScrollViews with the same ' + 'orientation because it can break windowing and other functionality - use another ' + 'VirtualizedList-backed container instead.');
              _this3._hasWarned.nesting = true;
            }

            return innerRet;
          }
        });
      }

      if (this.props.debug) {
        return (0, _jsxRuntime.jsxs)(View, {
          style: styles.debug,
          children: [ret, this._renderDebugOverlay()]
        });
      } else {
        return ret;
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      var _this$props9 = this.props,
          data = _this$props9.data,
          extraData = _this$props9.extraData;

      if (data !== prevProps.data || extraData !== prevProps.extraData) {
        this._viewabilityTuples.forEach(function (tuple) {
          tuple.viewabilityHelper.resetViewableIndices();
        });
      }

      var hiPriInProgress = this._hiPriInProgress;

      this._scheduleCellsToRenderUpdate();

      if (hiPriInProgress) {
        this._hiPriInProgress = false;
      }
    }
  }, {
    key: "_computeBlankness",
    value: function _computeBlankness() {
      this._fillRateHelper.computeBlankness(this.props, this.state, this._scrollMetrics);
    }
  }, {
    key: "_onCellLayout",
    value: function _onCellLayout(e, cellKey, index) {
      var layout = e.nativeEvent.layout;
      var next = {
        offset: this._selectOffset(layout),
        length: this._selectLength(layout),
        index: index,
        inLayout: true
      };
      var curr = this._frames[cellKey];

      if (!curr || next.offset !== curr.offset || next.length !== curr.length || index !== curr.index) {
        this._totalCellLength += next.length - (curr ? curr.length : 0);
        this._totalCellsMeasured += curr ? 0 : 1;
        this._averageCellLength = this._totalCellLength / this._totalCellsMeasured;
        this._frames[cellKey] = next;
        this._highestMeasuredFrameIndex = Math.max(this._highestMeasuredFrameIndex, index);

        this._scheduleCellsToRenderUpdate();
      } else {
        this._frames[cellKey].inLayout = true;
      }

      this._triggerRemeasureForChildListsInCell(cellKey);

      this._computeBlankness();

      this._updateViewableItems(this.props.data);
    }
  }, {
    key: "_triggerRemeasureForChildListsInCell",
    value: function _triggerRemeasureForChildListsInCell(cellKey) {
      var childListKeys = this._cellKeysToChildListKeys.get(cellKey);

      if (childListKeys) {
        for (var _iterator2 = _createForOfIteratorHelperLoose(childListKeys), _step2; !(_step2 = _iterator2()).done;) {
          var childKey = _step2.value;

          var childList = this._nestedChildLists.get(childKey);

          childList && childList.ref && childList.ref.measureLayoutRelativeToContainingList();
        }
      }
    }
  }, {
    key: "measureLayoutRelativeToContainingList",
    value: function measureLayoutRelativeToContainingList() {
      var _this4 = this;

      try {
        if (!this._scrollRef) {
          return;
        }

        this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(), function (x, y, width, height) {
          _this4._offsetFromParentVirtualizedList = _this4._selectOffset({
            x: x,
            y: y
          });
          _this4._scrollMetrics.contentLength = _this4._selectLength({
            width: width,
            height: height
          });

          var scrollMetrics = _this4._convertParentScrollMetrics(_this4.context.getScrollMetrics());

          var metricsChanged = _this4._scrollMetrics.visibleLength !== scrollMetrics.visibleLength || _this4._scrollMetrics.offset !== scrollMetrics.offset;

          if (metricsChanged) {
            _this4._scrollMetrics.visibleLength = scrollMetrics.visibleLength;
            _this4._scrollMetrics.offset = scrollMetrics.offset;

            _this4._cellKeysToChildListKeys.forEach(function (childListKeys) {
              if (childListKeys) {
                for (var _iterator3 = _createForOfIteratorHelperLoose(childListKeys), _step3; !(_step3 = _iterator3()).done;) {
                  var childKey = _step3.value;

                  var childList = _this4._nestedChildLists.get(childKey);

                  childList && childList.ref && childList.ref.measureLayoutRelativeToContainingList();
                }
              }
            });
          }
        }, function (error) {
          console.warn("VirtualizedList: Encountered an error while measuring a list's" + ' offset from its containing VirtualizedList.');
        });
      } catch (error) {
        console.warn('measureLayoutRelativeToContainingList threw an error', error.stack);
      }
    }
  }, {
    key: "_getFooterCellKey",
    value: function _getFooterCellKey() {
      return this._getCellKey() + '-footer';
    }
  }, {
    key: "_renderDebugOverlay",
    value: function _renderDebugOverlay() {
      var normalize = this._scrollMetrics.visibleLength / (this._scrollMetrics.contentLength || 1);
      var framesInLayout = [];
      var itemCount = this.props.getItemCount(this.props.data);

      for (var ii = 0; ii < itemCount; ii++) {
        var frame = this._getFrameMetricsApprox(ii);

        if (frame.inLayout) {
          framesInLayout.push(frame);
        }
      }

      var windowTop = this._getFrameMetricsApprox(this.state.first).offset;

      var frameLast = this._getFrameMetricsApprox(this.state.last);

      var windowLen = frameLast.offset + frameLast.length - windowTop;
      var visTop = this._scrollMetrics.offset;
      var visLen = this._scrollMetrics.visibleLength;
      return (0, _jsxRuntime.jsxs)(View, {
        style: [styles.debugOverlayBase, styles.debugOverlay],
        children: [framesInLayout.map(function (f, ii) {
          return (0, _jsxRuntime.jsx)(View, {
            style: [styles.debugOverlayBase, styles.debugOverlayFrame, {
              top: f.offset * normalize,
              height: f.length * normalize
            }]
          }, 'f' + ii);
        }), (0, _jsxRuntime.jsx)(View, {
          style: [styles.debugOverlayBase, styles.debugOverlayFrameLast, {
            top: windowTop * normalize,
            height: windowLen * normalize
          }]
        }), (0, _jsxRuntime.jsx)(View, {
          style: [styles.debugOverlayBase, styles.debugOverlayFrameVis, {
            top: visTop * normalize,
            height: visLen * normalize
          }]
        })]
      });
    }
  }, {
    key: "_selectLength",
    value: function _selectLength(metrics) {
      return !horizontalOrDefault(this.props.horizontal) ? metrics.height : metrics.width;
    }
  }, {
    key: "_selectOffset",
    value: function _selectOffset(metrics) {
      return !horizontalOrDefault(this.props.horizontal) ? metrics.y : metrics.x;
    }
  }, {
    key: "_maybeCallOnEndReached",
    value: function _maybeCallOnEndReached() {
      var _this$props10 = this.props,
          data = _this$props10.data,
          getItemCount = _this$props10.getItemCount,
          onEndReached = _this$props10.onEndReached,
          onEndReachedThreshold = _this$props10.onEndReachedThreshold;
      var _this$_scrollMetrics2 = this._scrollMetrics,
          contentLength = _this$_scrollMetrics2.contentLength,
          visibleLength = _this$_scrollMetrics2.visibleLength,
          offset = _this$_scrollMetrics2.offset;
      var distanceFromEnd = contentLength - visibleLength - offset;
      var threshold = onEndReachedThreshold != null ? onEndReachedThreshold * visibleLength : 2;

      if (onEndReached && this.state.last === getItemCount(data) - 1 && distanceFromEnd < threshold && this._scrollMetrics.contentLength !== this._sentEndForContentLength) {
        this._sentEndForContentLength = this._scrollMetrics.contentLength;
        onEndReached({
          distanceFromEnd: distanceFromEnd
        });
      } else if (distanceFromEnd > threshold) {
        this._sentEndForContentLength = 0;
      }
    }
  }, {
    key: "_scheduleCellsToRenderUpdate",
    value: function _scheduleCellsToRenderUpdate() {
      var _this$state2 = this.state,
          first = _this$state2.first,
          last = _this$state2.last;
      var _this$_scrollMetrics3 = this._scrollMetrics,
          offset = _this$_scrollMetrics3.offset,
          visibleLength = _this$_scrollMetrics3.visibleLength,
          velocity = _this$_scrollMetrics3.velocity;
      var itemCount = this.props.getItemCount(this.props.data);
      var hiPri = false;
      var onEndReachedThreshold = onEndReachedThresholdOrDefault(this.props.onEndReachedThreshold);
      var scrollingThreshold = onEndReachedThreshold * visibleLength / 2;

      if (first > 0) {
        var distTop = offset - this._getFrameMetricsApprox(first).offset;

        hiPri = hiPri || distTop < 0 || velocity < -2 && distTop < scrollingThreshold;
      }

      if (last < itemCount - 1) {
        var distBottom = this._getFrameMetricsApprox(last).offset - (offset + visibleLength);
        hiPri = hiPri || distBottom < 0 || velocity > 2 && distBottom < scrollingThreshold;
      }

      if (hiPri && (this._averageCellLength || this.props.getItemLayout) && !this._hiPriInProgress) {
        this._hiPriInProgress = true;

        this._updateCellsToRenderBatcher.dispose({
          abort: true
        });

        this._updateCellsToRender();

        return;
      } else {
        this._updateCellsToRenderBatcher.schedule();
      }
    }
  }, {
    key: "_updateViewableItems",
    value: function _updateViewableItems(data) {
      var _this5 = this;

      var getItemCount = this.props.getItemCount;

      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.onUpdate(getItemCount(data), _this5._scrollMetrics.offset, _this5._scrollMetrics.visibleLength, _this5._getFrameMetrics, _this5._createViewToken, tuple.onViewableItemsChanged, _this5.state);
      });
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(newProps, prevState) {
      var data = newProps.data,
          getItemCount = newProps.getItemCount;
      var maxToRenderPerBatch = maxToRenderPerBatchOrDefault(newProps.maxToRenderPerBatch);
      return {
        first: Math.max(0, Math.min(prevState.first, getItemCount(data) - 1 - maxToRenderPerBatch)),
        last: Math.max(0, Math.min(prevState.last, getItemCount(data) - 1))
      };
    }
  }]);
  return VirtualizedList;
}(React.PureComponent);

VirtualizedList.contextType = _VirtualizedListContext.VirtualizedListContext;

var CellRenderer = function (_React$Component) {
  (0, _inherits2.default)(CellRenderer, _React$Component);

  var _super2 = _createSuper(CellRenderer);

  function CellRenderer() {
    var _this6;

    (0, _classCallCheck2.default)(this, CellRenderer);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this6 = _super2.call.apply(_super2, [this].concat(args));
    _this6.state = {
      separatorProps: {
        highlighted: false,
        leadingItem: _this6.props.item
      }
    };
    _this6._separators = {
      highlight: function highlight() {
        var _this6$props = _this6.props,
            cellKey = _this6$props.cellKey,
            prevCellKey = _this6$props.prevCellKey;

        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: true
        });
      },
      unhighlight: function unhighlight() {
        var _this6$props2 = _this6.props,
            cellKey = _this6$props2.cellKey,
            prevCellKey = _this6$props2.prevCellKey;

        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: false
        });
      },
      updateProps: function updateProps(select, newProps) {
        var _this6$props3 = _this6.props,
            cellKey = _this6$props3.cellKey,
            prevCellKey = _this6$props3.prevCellKey;

        _this6.props.onUpdateSeparators([select === 'leading' ? prevCellKey : cellKey], newProps);
      }
    };
    return _this6;
  }

  (0, _createClass2.default)(CellRenderer, [{
    key: "updateSeparatorProps",
    value: function updateSeparatorProps(newProps) {
      this.setState(function (state) {
        return {
          separatorProps: (0, _extends2.default)({}, state.separatorProps, newProps)
        };
      });
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.props.onUnmount(this.props.cellKey);
    }
  }, {
    key: "_renderElement",
    value: function _renderElement(renderItem, ListItemComponent, item, index) {
      if (renderItem && ListItemComponent) {
        console.warn('VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take' + ' precedence over renderItem.');
      }

      if (ListItemComponent) {
        return React.createElement(ListItemComponent, {
          item: item,
          index: index,
          separators: this._separators
        });
      }

      if (renderItem) {
        return renderItem({
          item: item,
          index: index,
          separators: this._separators
        });
      }

      invariant(false, 'VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.');
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props11 = this.props,
          CellRendererComponent = _this$props11.CellRendererComponent,
          ItemSeparatorComponent = _this$props11.ItemSeparatorComponent,
          fillRateHelper = _this$props11.fillRateHelper,
          horizontal = _this$props11.horizontal,
          item = _this$props11.item,
          index = _this$props11.index,
          inversionStyle = _this$props11.inversionStyle,
          parentProps = _this$props11.parentProps;
      var renderItem = parentProps.renderItem,
          getItemLayout = parentProps.getItemLayout,
          ListItemComponent = parentProps.ListItemComponent;

      var element = this._renderElement(renderItem, ListItemComponent, item, index);

      var onLayout = getItemLayout && !parentProps.debug && !fillRateHelper.enabled() ? undefined : this.props.onLayout;
      var itemSeparator = ItemSeparatorComponent && (0, _jsxRuntime.jsx)(ItemSeparatorComponent, (0, _extends2.default)({}, this.state.separatorProps));
      var cellStyle = inversionStyle ? horizontal ? [styles.rowReverse, inversionStyle] : [styles.columnReverse, inversionStyle] : horizontal ? [styles.row, inversionStyle] : inversionStyle;
      var result = !CellRendererComponent ? (0, _jsxRuntime.jsxs)(View, {
        style: cellStyle,
        onLayout: onLayout,
        children: [element, itemSeparator]
      }) : (0, _jsxRuntime.jsxs)(CellRendererComponent, (0, _extends2.default)({}, this.props, {
        style: cellStyle,
        onLayout: onLayout,
        children: [element, itemSeparator]
      }));
      return (0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
        cellKey: this.props.cellKey,
        children: result
      });
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(props, prevState) {
      return {
        separatorProps: (0, _extends2.default)({}, prevState.separatorProps, {
          leadingItem: props.item
        })
      };
    }
  }]);
  return CellRenderer;
}(React.Component);

function describeNestedLists(childList) {
  var trace = 'VirtualizedList trace:\n' + ("  Child (" + (childList.horizontal ? 'horizontal' : 'vertical') + "):\n") + ("    listKey: " + childList.key + "\n") + ("    cellKey: " + childList.cellKey);
  var debugInfo = childList.parentDebugInfo;

  while (debugInfo) {
    trace += "\n  Parent (" + (debugInfo.horizontal ? 'horizontal' : 'vertical') + "):\n" + ("    listKey: " + debugInfo.listKey + "\n") + ("    cellKey: " + debugInfo.cellKey);
    debugInfo = debugInfo.parent;
  }

  return trace;
}

var styles = StyleSheet.create({
  verticallyInverted: {
    transform: [{
      scaleY: -1
    }]
  },
  horizontallyInverted: {
    transform: [{
      scaleX: -1
    }]
  },
  row: {
    flexDirection: 'row'
  },
  rowReverse: {
    flexDirection: 'row-reverse'
  },
  columnReverse: {
    flexDirection: 'column-reverse'
  },
  debug: {
    flex: 1
  },
  debugOverlayBase: {
    position: 'absolute',
    top: 0,
    right: 0
  },
  debugOverlay: {
    bottom: 0,
    width: 20,
    borderColor: 'blue',
    borderWidth: 1
  },
  debugOverlayFrame: {
    left: 0,
    backgroundColor: 'orange'
  },
  debugOverlayFrameLast: {
    left: 0,
    borderColor: 'green',
    borderWidth: 2
  },
  debugOverlayFrameVis: {
    left: 0,
    borderColor: 'red',
    borderWidth: 2
  }
});
module.exports = VirtualizedList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZpcnR1YWxpemVkTGlzdC5qcyJdLCJuYW1lcyI6WyJCYXRjaGluYXRvciIsInJlcXVpcmUiLCJGaWxsUmF0ZUhlbHBlciIsIlJlYWN0TmF0aXZlIiwiUmVmcmVzaENvbnRyb2wiLCJTY3JvbGxWaWV3IiwiU3R5bGVTaGVldCIsIlZpZXciLCJWaWV3YWJpbGl0eUhlbHBlciIsImZsYXR0ZW5TdHlsZSIsImluZm9Mb2ciLCJpbnZhcmlhbnQiLCJfdXNlZEluZGV4Rm9yS2V5IiwiX2tleWxlc3NJdGVtQ29tcG9uZW50TmFtZSIsImhvcml6b250YWxPckRlZmF1bHQiLCJob3Jpem9udGFsIiwiaW5pdGlhbE51bVRvUmVuZGVyT3JEZWZhdWx0IiwiaW5pdGlhbE51bVRvUmVuZGVyIiwibWF4VG9SZW5kZXJQZXJCYXRjaE9yRGVmYXVsdCIsIm1heFRvUmVuZGVyUGVyQmF0Y2giLCJvbkVuZFJlYWNoZWRUaHJlc2hvbGRPckRlZmF1bHQiLCJvbkVuZFJlYWNoZWRUaHJlc2hvbGQiLCJzY3JvbGxFdmVudFRocm90dGxlT3JEZWZhdWx0Iiwic2Nyb2xsRXZlbnRUaHJvdHRsZSIsIndpbmRvd1NpemVPckRlZmF1bHQiLCJ3aW5kb3dTaXplIiwiVmlydHVhbGl6ZWRMaXN0IiwicHJvcHMiLCJfZ2V0U2Nyb2xsTWV0cmljcyIsIl9zY3JvbGxNZXRyaWNzIiwiX2dldE91dGVybW9zdFBhcmVudExpc3RSZWYiLCJfaXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uIiwiY29udGV4dCIsImdldE91dGVybW9zdFBhcmVudExpc3RSZWYiLCJfZ2V0TmVzdGVkQ2hpbGRTdGF0ZSIsImtleSIsImV4aXN0aW5nQ2hpbGREYXRhIiwiX25lc3RlZENoaWxkTGlzdHMiLCJnZXQiLCJzdGF0ZSIsIl9yZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJjaGlsZExpc3QiLCJjaGlsZExpc3RzSW5DZWxsIiwiX2NlbGxLZXlzVG9DaGlsZExpc3RLZXlzIiwiY2VsbEtleSIsIlNldCIsImFkZCIsInNldCIsInJlZiIsImNvbnNvbGUiLCJlcnJvciIsImRlc2NyaWJlTmVzdGVkTGlzdHMiLCJfaGFzSW50ZXJhY3RlZCIsInJlY29yZEludGVyYWN0aW9uIiwiX3VucmVnaXN0ZXJBc05lc3RlZENoaWxkIiwiX29uVXBkYXRlU2VwYXJhdG9ycyIsImtleXMiLCJuZXdQcm9wcyIsImZvckVhY2giLCJfY2VsbFJlZnMiLCJ1cGRhdGVTZXBhcmF0b3JQcm9wcyIsIl9nZXRTcGFjZXJLZXkiLCJpc1ZlcnRpY2FsIiwiX2F2ZXJhZ2VDZWxsTGVuZ3RoIiwiTWFwIiwiX2ZyYW1lcyIsIl9mb290ZXJMZW5ndGgiLCJfaGFzRG9uZUluaXRpYWxTY3JvbGwiLCJfaGFzTW9yZSIsIl9oYXNXYXJuZWQiLCJfaGVhZGVyTGVuZ3RoIiwiX2hpUHJpSW5Qcm9ncmVzcyIsIl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4IiwiX2luZGljZXNUb0tleXMiLCJfb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdCIsIl9wcmV2UGFyZW50T2Zmc2V0IiwiY29udGVudExlbmd0aCIsImRPZmZzZXQiLCJkdCIsIm9mZnNldCIsInRpbWVzdGFtcCIsInZlbG9jaXR5IiwidmlzaWJsZUxlbmd0aCIsIl9zY3JvbGxSZWYiLCJfc2VudEVuZEZvckNvbnRlbnRMZW5ndGgiLCJfdG90YWxDZWxsTGVuZ3RoIiwiX3RvdGFsQ2VsbHNNZWFzdXJlZCIsIl92aWV3YWJpbGl0eVR1cGxlcyIsIl9jYXB0dXJlU2Nyb2xsUmVmIiwiX2RlZmF1bHRSZW5kZXJTY3JvbGxDb21wb25lbnQiLCJvblJlZnJlc2giLCJyZWZyZXNoaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlZnJlc2hDb250cm9sIiwicHJvZ3Jlc3NWaWV3T2Zmc2V0IiwiX29uQ2VsbFVubW91bnQiLCJjdXJyIiwiaW5MYXlvdXQiLCJfb25MYXlvdXQiLCJlIiwibWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCIsIl9zZWxlY3RMZW5ndGgiLCJuYXRpdmVFdmVudCIsImxheW91dCIsIm9uTGF5b3V0IiwiX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSIsIl9tYXliZUNhbGxPbkVuZFJlYWNoZWQiLCJfb25MYXlvdXRFbXB0eSIsIl9vbkxheW91dEZvb3RlciIsIl90cmlnZ2VyUmVtZWFzdXJlRm9yQ2hpbGRMaXN0c0luQ2VsbCIsIl9nZXRGb290ZXJDZWxsS2V5IiwiX29uTGF5b3V0SGVhZGVyIiwiX29uQ29udGVudFNpemVDaGFuZ2UiLCJ3aWR0aCIsImhlaWdodCIsImluaXRpYWxTY3JvbGxJbmRleCIsImNvbnRlbnRPZmZzZXQiLCJzY3JvbGxUb0luZGV4IiwiYW5pbWF0ZWQiLCJpbmRleCIsIm9uQ29udGVudFNpemVDaGFuZ2UiLCJfY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3MiLCJtZXRyaWNzIiwiX29uU2Nyb2xsIiwib25TY3JvbGwiLCJ0aW1lU3RhbXAiLCJsYXlvdXRNZWFzdXJlbWVudCIsImNvbnRlbnRTaXplIiwiX3NlbGVjdE9mZnNldCIsIk1hdGgiLCJtYXgiLCJwZXJmIiwicHJldkR0IiwiX3VwZGF0ZVZpZXdhYmxlSXRlbXMiLCJkYXRhIiwiX2ZpbGxSYXRlSGVscGVyIiwiYWN0aXZhdGUiLCJfY29tcHV0ZUJsYW5rbmVzcyIsIl9vblNjcm9sbEJlZ2luRHJhZyIsInR1cGxlIiwidmlld2FiaWxpdHlIZWxwZXIiLCJvblNjcm9sbEJlZ2luRHJhZyIsIl9vblNjcm9sbEVuZERyYWciLCJvblNjcm9sbEVuZERyYWciLCJfb25Nb21lbnR1bVNjcm9sbEJlZ2luIiwib25Nb21lbnR1bVNjcm9sbEJlZ2luIiwiX29uTW9tZW50dW1TY3JvbGxFbmQiLCJvbk1vbWVudHVtU2Nyb2xsRW5kIiwiX3VwZGF0ZUNlbGxzVG9SZW5kZXIiLCJnZXRJdGVtQ291bnQiLCJfb25FbmRSZWFjaGVkVGhyZXNob2xkIiwiaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkIiwiX2lzVmlydHVhbGl6YXRpb25EaXNhYmxlZCIsInNldFN0YXRlIiwibmV3U3RhdGUiLCJfZ2V0RnJhbWVNZXRyaWNzQXBwcm94IiwiZGlzdGFuY2VGcm9tRW5kIiwicmVuZGVyQWhlYWQiLCJmaXJzdCIsImxhc3QiLCJtaW4iLCJzaXplIiwibmV3Rmlyc3QiLCJuZXdMYXN0IiwiaWkiLCJjZWxsS2V5Rm9ySW5kZXgiLCJjaGlsZExpc3RLZXlzIiwic29tZUNoaWxkSGFzTW9yZSIsImNoaWxkS2V5IiwiaGFzTW9yZSIsIl9jcmVhdGVWaWV3VG9rZW4iLCJpc1ZpZXdhYmxlIiwiZ2V0SXRlbSIsIml0ZW0iLCJfa2V5RXh0cmFjdG9yIiwiZnJhbWUiLCJfZ2V0RnJhbWVNZXRyaWNzIiwiZ2V0SXRlbUxheW91dCIsImxlbmd0aCIsIl9faXNOYXRpdmUiLCJfdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIiLCJ1cGRhdGVDZWxsc0JhdGNoaW5nUGVyaW9kIiwidmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzIiwibWFwIiwicGFpciIsInZpZXdhYmlsaXR5Q29uZmlnIiwib25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCIsInB1c2giLCJpbml0aWFsU3RhdGUiLCJzdG9yZWRTdGF0ZSIsImdldE5lc3RlZENoaWxkU3RhdGUiLCJfZ2V0TGlzdEtleSIsImZyYW1lcyIsInBhcmFtcyIsInZlcnlMYXN0Iiwic2Nyb2xsVG8iLCJ3YXJuIiwieCIsInkiLCJvblNjcm9sbFRvSW5kZXhGYWlsZWQiLCJ2aWV3T2Zmc2V0Iiwidmlld1Bvc2l0aW9uIiwiYXZlcmFnZUl0ZW1MZW5ndGgiLCJoaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4IiwiaXRlbUNvdW50IiwidCIsImZsYXNoU2Nyb2xsSW5kaWNhdG9ycyIsImdldFNjcm9sbFJlc3BvbmRlciIsImdldFNjcm9sbGFibGVOb2RlIiwiZmluZE5vZGVIYW5kbGUiLCJnZXRTY3JvbGxSZWYiLCJzZXROYXRpdmVQcm9wcyIsImxpc3RLZXkiLCJfZ2V0Q2VsbEtleSIsInBhcmVudCIsImRlYnVnSW5mbyIsInJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCIsInBhcmVudERlYnVnSW5mbyIsInVucmVnaXN0ZXJBc05lc3RlZENoaWxkIiwiZGlzcG9zZSIsImFib3J0IiwiZGVhY3RpdmF0ZUFuZEZsdXNoIiwiY2VsbHMiLCJzdGlja3lIZWFkZXJJbmRpY2VzIiwic3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyIsImludmVyc2lvblN0eWxlIiwiQ2VsbFJlbmRlcmVyQ29tcG9uZW50IiwiSXRlbVNlcGFyYXRvckNvbXBvbmVudCIsInN0aWNreU9mZnNldCIsIkxpc3RIZWFkZXJDb21wb25lbnQiLCJlbmQiLCJwcmV2Q2VsbEtleSIsImhhcyIsInVuZGVmaW5lZCIsIl9vbkNlbGxMYXlvdXQiLCJkaXNhYmxlVmlydHVhbGl6YXRpb24iLCJuZXN0ZWRDb250ZXh0Iiwia2V5RXh0cmFjdG9yIiwiU3RyaW5nIiwidHlwZSIsImRpc3BsYXlOYW1lIiwiX19ERVZfXyIsImZsYXRTdHlsZXMiLCJjb250ZW50Q29udGFpbmVyU3R5bGUiLCJmbGV4V3JhcCIsIkxpc3RFbXB0eUNvbXBvbmVudCIsIkxpc3RGb290ZXJDb21wb25lbnQiLCJpbnZlcnRlZCIsInN0eWxlcyIsImhvcml6b250YWxseUludmVydGVkIiwidmVydGljYWxseUludmVydGVkIiwiZWxlbWVudCIsIlJlYWN0IiwiaXNWYWxpZEVsZW1lbnQiLCJjb21wb3NlIiwiTGlzdEhlYWRlckNvbXBvbmVudFN0eWxlIiwic3BhY2VyS2V5IiwibGFzdEluaXRpYWxJbmRleCIsIl9wdXNoQ2VsbHMiLCJmaXJzdEFmdGVySW5pdGlhbCIsImluc2VydGVkU3RpY2t5U3BhY2VyIiwiaW5pdEJsb2NrIiwic3RpY2t5QmxvY2siLCJsZWFkU3BhY2UiLCJ0cmFpbFNwYWNlIiwiZmlyc3RTcGFjZSIsImxhc3RGcmFtZSIsImVuZEZyYW1lIiwidGFpbFNwYWNlckxlbmd0aCIsImNsb25lRWxlbWVudCIsImV2ZW50Iiwic3R5bGUiLCJMaXN0Rm9vdGVyQ29tcG9uZW50U3R5bGUiLCJzY3JvbGxQcm9wcyIsImludmVydFN0aWNreUhlYWRlcnMiLCJpbm5lclJldCIsImdldFNjcm9sbE1ldHJpY3MiLCJfZ2V0RGVidWdJbmZvIiwicmVuZGVyU2Nyb2xsQ29tcG9uZW50IiwicmV0Iiwic2Nyb2xsQ29udGV4dCIsIm5lc3RpbmciLCJkZWJ1ZyIsIl9yZW5kZXJEZWJ1Z092ZXJsYXkiLCJwcmV2UHJvcHMiLCJleHRyYURhdGEiLCJyZXNldFZpZXdhYmxlSW5kaWNlcyIsImhpUHJpSW5Qcm9ncmVzcyIsImNvbXB1dGVCbGFua25lc3MiLCJuZXh0IiwibWVhc3VyZUxheW91dCIsInNjcm9sbE1ldHJpY3MiLCJtZXRyaWNzQ2hhbmdlZCIsInN0YWNrIiwibm9ybWFsaXplIiwiZnJhbWVzSW5MYXlvdXQiLCJ3aW5kb3dUb3AiLCJmcmFtZUxhc3QiLCJ3aW5kb3dMZW4iLCJ2aXNUb3AiLCJ2aXNMZW4iLCJkZWJ1Z092ZXJsYXlCYXNlIiwiZGVidWdPdmVybGF5IiwiZiIsImRlYnVnT3ZlcmxheUZyYW1lIiwidG9wIiwiZGVidWdPdmVybGF5RnJhbWVMYXN0IiwiZGVidWdPdmVybGF5RnJhbWVWaXMiLCJvbkVuZFJlYWNoZWQiLCJ0aHJlc2hvbGQiLCJoaVByaSIsInNjcm9sbGluZ1RocmVzaG9sZCIsImRpc3RUb3AiLCJkaXN0Qm90dG9tIiwic2NoZWR1bGUiLCJvblVwZGF0ZSIsInByZXZTdGF0ZSIsIlB1cmVDb21wb25lbnQiLCJjb250ZXh0VHlwZSIsIlZpcnR1YWxpemVkTGlzdENvbnRleHQiLCJDZWxsUmVuZGVyZXIiLCJzZXBhcmF0b3JQcm9wcyIsImhpZ2hsaWdodGVkIiwibGVhZGluZ0l0ZW0iLCJfc2VwYXJhdG9ycyIsImhpZ2hsaWdodCIsIm9uVXBkYXRlU2VwYXJhdG9ycyIsInVuaGlnaGxpZ2h0IiwidXBkYXRlUHJvcHMiLCJzZWxlY3QiLCJvblVubW91bnQiLCJyZW5kZXJJdGVtIiwiTGlzdEl0ZW1Db21wb25lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2VwYXJhdG9ycyIsImZpbGxSYXRlSGVscGVyIiwicGFyZW50UHJvcHMiLCJfcmVuZGVyRWxlbWVudCIsImVuYWJsZWQiLCJpdGVtU2VwYXJhdG9yIiwiY2VsbFN0eWxlIiwicm93UmV2ZXJzZSIsImNvbHVtblJldmVyc2UiLCJyb3ciLCJyZXN1bHQiLCJDb21wb25lbnQiLCJ0cmFjZSIsImNyZWF0ZSIsInRyYW5zZm9ybSIsInNjYWxlWSIsInNjYWxlWCIsImZsZXhEaXJlY3Rpb24iLCJmbGV4IiwicG9zaXRpb24iLCJyaWdodCIsImJvdHRvbSIsImJvcmRlckNvbG9yIiwiYm9yZGVyV2lkdGgiLCJsZWZ0IiwiYmFja2dyb3VuZENvbG9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBOztBQUtBOztBQVFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUExQkEsSUFBTUEsV0FBVyxHQUFHQyxPQUFPLDhCQUEzQjs7QUFDQSxJQUFNQyxjQUFjLEdBQUdELE9BQU8sb0JBQTlCOztBQUNBLElBQU1FLFdBQVcsR0FBR0YsT0FBTyxpQ0FBM0I7O0FBQ0EsSUFBTUcsY0FBYyxHQUFHSCxPQUFPLCtDQUE5Qjs7QUFDQSxJQUFNSSxVQUFVLEdBQUdKLE9BQU8sdUNBQTFCOztBQUNBLElBQU1LLFVBQVUsR0FBR0wsT0FBTyw0QkFBMUI7O0FBQ0EsSUFBTU0sSUFBSSxHQUFHTixPQUFPLDJCQUFwQjs7QUFDQSxJQUFNTyxpQkFBaUIsR0FBR1AsT0FBTyx1QkFBakM7O0FBRUEsSUFBTVEsWUFBWSxHQUFHUixPQUFPLDhCQUE1Qjs7QUFDQSxJQUFNUyxPQUFPLEdBQUdULE9BQU8sd0JBQXZCOztBQUNBLElBQU1VLFNBQVMsR0FBR1YsT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBOFJBLElBQUlXLGdCQUFnQixHQUFHLEtBQXZCO0FBQ0EsSUFBSUMseUJBQWlDLEdBQUcsRUFBeEM7O0FBYUEsU0FBU0MsbUJBQVQsQ0FBNkJDLFVBQTdCLEVBQW1EO0FBQ2pELFNBQU9BLFVBQVAsV0FBT0EsVUFBUCxHQUFxQixLQUFyQjtBQUNEOztBQUdELFNBQVNDLDJCQUFULENBQXFDQyxrQkFBckMsRUFBa0U7QUFDaEUsU0FBT0Esa0JBQVAsV0FBT0Esa0JBQVAsR0FBNkIsRUFBN0I7QUFDRDs7QUFHRCxTQUFTQyw0QkFBVCxDQUFzQ0MsbUJBQXRDLEVBQW9FO0FBQ2xFLFNBQU9BLG1CQUFQLFdBQU9BLG1CQUFQLEdBQThCLEVBQTlCO0FBQ0Q7O0FBR0QsU0FBU0MsOEJBQVQsQ0FBd0NDLHFCQUF4QyxFQUF3RTtBQUN0RSxTQUFPQSxxQkFBUCxXQUFPQSxxQkFBUCxHQUFnQyxDQUFoQztBQUNEOztBQUdELFNBQVNDLDRCQUFULENBQXNDQyxtQkFBdEMsRUFBb0U7QUFDbEUsU0FBT0EsbUJBQVAsV0FBT0EsbUJBQVAsR0FBOEIsRUFBOUI7QUFDRDs7QUFHRCxTQUFTQyxtQkFBVCxDQUE2QkMsVUFBN0IsRUFBa0Q7QUFDaEQsU0FBT0EsVUFBUCxXQUFPQSxVQUFQLEdBQXFCLEVBQXJCO0FBQ0Q7O0lBK0JLQyxlOzs7OztBQTRTSiwyQkFBWUMsTUFBWixFQUEwQjtBQUFBOztBQUFBOztBQUFBO0FBQ3hCLDhCQUFNQSxNQUFOOztBQUR3QixVQXRFMUJDLGlCQXNFMEIsR0F0RU4sWUFBTTtBQUN4QixhQUFPLE1BQUtDLGNBQVo7QUFDRCxLQW9FeUI7O0FBQUEsVUE5RDFCQywwQkE4RDBCLEdBOURHLFlBQU07QUFDakMsVUFBSSxNQUFLQyw0QkFBTCxFQUFKLEVBQXlDO0FBQ3ZDLGVBQU8sTUFBS0MsT0FBTCxDQUFhQyx5QkFBYixFQUFQO0FBQ0QsT0FGRCxNQUVPO0FBQ0w7QUFDRDtBQUNGLEtBd0R5Qjs7QUFBQSxVQXREMUJDLG9CQXNEMEIsR0F0REgsVUFBQ0MsR0FBRCxFQUFrQztBQUN2RCxVQUFNQyxpQkFBaUIsR0FBRyxNQUFLQyxpQkFBTCxDQUF1QkMsR0FBdkIsQ0FBMkJILEdBQTNCLENBQTFCOztBQUNBLGFBQU9DLGlCQUFpQixJQUFJQSxpQkFBaUIsQ0FBQ0csS0FBOUM7QUFDRCxLQW1EeUI7O0FBQUEsVUFqRDFCQyxzQkFpRDBCLEdBakRELFVBQUNDLFNBQUQsRUFNRjtBQUVyQixVQUFNQyxnQkFBZ0IsR0FDcEIsTUFBS0Msd0JBQUwsQ0FBOEJMLEdBQTlCLENBQWtDRyxTQUFTLENBQUNHLE9BQTVDLEtBQXdELElBQUlDLEdBQUosRUFEMUQ7QUFFQUgsTUFBQUEsZ0JBQWdCLENBQUNJLEdBQWpCLENBQXFCTCxTQUFTLENBQUNOLEdBQS9COztBQUNBLFlBQUtRLHdCQUFMLENBQThCSSxHQUE5QixDQUFrQ04sU0FBUyxDQUFDRyxPQUE1QyxFQUFxREYsZ0JBQXJEOztBQUNBLFVBQU1OLGlCQUFpQixHQUFHLE1BQUtDLGlCQUFMLENBQXVCQyxHQUF2QixDQUEyQkcsU0FBUyxDQUFDTixHQUFyQyxDQUExQjs7QUFDQSxVQUFJQyxpQkFBaUIsSUFBSUEsaUJBQWlCLENBQUNZLEdBQWxCLEtBQTBCLElBQW5ELEVBQXlEO0FBQ3ZEQyxRQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FDRSw2REFDRSxzRUFERixHQUVFLHFFQUZGLEdBR0VDLG1CQUFtQiw0QkFDZFYsU0FEYztBQUlqQjFCLFVBQUFBLFVBQVUsRUFBRSxDQUFDLENBQUMwQixTQUFTLENBQUNPLEdBQVYsQ0FBY3JCLEtBQWQsQ0FBb0JaO0FBSmpCLFdBSnZCO0FBV0Q7O0FBQ0QsWUFBS3NCLGlCQUFMLENBQXVCVSxHQUF2QixDQUEyQk4sU0FBUyxDQUFDTixHQUFyQyxFQUEwQztBQUN4Q2EsUUFBQUEsR0FBRyxFQUFFUCxTQUFTLENBQUNPLEdBRHlCO0FBRXhDVCxRQUFBQSxLQUFLLEVBQUU7QUFGaUMsT0FBMUM7O0FBS0EsVUFBSSxNQUFLYSxjQUFULEVBQXlCO0FBQ3ZCWCxRQUFBQSxTQUFTLENBQUNPLEdBQVYsQ0FBY0ssaUJBQWQ7QUFDRDtBQUNGLEtBZXlCOztBQUFBLFVBYjFCQyx3QkFhMEIsR0FiQyxVQUFDYixTQUFELEVBSWY7QUFDVixZQUFLSixpQkFBTCxDQUF1QlUsR0FBdkIsQ0FBMkJOLFNBQVMsQ0FBQ04sR0FBckMsRUFBMEM7QUFDeENhLFFBQUFBLEdBQUcsRUFBRSxJQURtQztBQUV4Q1QsUUFBQUEsS0FBSyxFQUFFRSxTQUFTLENBQUNGO0FBRnVCLE9BQTFDO0FBSUQsS0FJeUI7O0FBQUEsVUE4SjFCZ0IsbUJBOUowQixHQThKSixVQUFDQyxJQUFELEVBQXVCQyxRQUF2QixFQUE0QztBQUNoRUQsTUFBQUEsSUFBSSxDQUFDRSxPQUFMLENBQWEsVUFBQXZCLEdBQUcsRUFBSTtBQUNsQixZQUFNYSxHQUFHLEdBQUdiLEdBQUcsSUFBSSxJQUFQLElBQWUsTUFBS3dCLFNBQUwsQ0FBZXhCLEdBQWYsQ0FBM0I7QUFDQWEsUUFBQUEsR0FBRyxJQUFJQSxHQUFHLENBQUNZLG9CQUFKLENBQXlCSCxRQUF6QixDQUFQO0FBQ0QsT0FIRDtBQUlELEtBbkt5Qjs7QUFBQSxVQWlMMUJJLGFBakwwQixHQWlMVixVQUFDQyxVQUFEO0FBQUEsYUFDZEEsVUFBVSxHQUFHLFFBQUgsR0FBYyxPQURWO0FBQUEsS0FqTFU7O0FBQUEsVUF3ZjFCQyxrQkF4ZjBCLEdBd2ZMLENBeGZLO0FBQUEsVUEwZjFCcEIsd0JBMWYwQixHQTBmMkIsSUFBSXFCLEdBQUosRUExZjNCO0FBQUEsVUEyZjFCTCxTQTNmMEIsR0EyZmQsRUEzZmM7QUFBQSxVQTZmMUJNLE9BN2YwQixHQTZmaEIsRUE3ZmdCO0FBQUEsVUE4ZjFCQyxhQTlmMEIsR0E4ZlYsQ0E5ZlU7QUFBQSxVQStmMUJDLHFCQS9mMEIsR0ErZkYsS0EvZkU7QUFBQSxVQWdnQjFCZixjQWhnQjBCLEdBZ2dCVCxLQWhnQlM7QUFBQSxVQWlnQjFCZ0IsUUFqZ0IwQixHQWlnQmYsS0FqZ0JlO0FBQUEsVUFrZ0IxQkMsVUFsZ0IwQixHQWtnQmIsRUFsZ0JhO0FBQUEsVUFtZ0IxQkMsYUFuZ0IwQixHQW1nQlYsQ0FuZ0JVO0FBQUEsVUFvZ0IxQkMsZ0JBcGdCMEIsR0FvZ0JFLEtBcGdCRjtBQUFBLFVBcWdCMUJDLDBCQXJnQjBCLEdBcWdCRyxDQXJnQkg7QUFBQSxVQXNnQjFCQyxjQXRnQjBCLEdBc2dCWSxJQUFJVCxHQUFKLEVBdGdCWjtBQUFBLFVBdWdCMUIzQixpQkF2Z0IwQixHQThnQnRCLElBQUkyQixHQUFKLEVBOWdCc0I7QUFBQSxVQStnQjFCVSxnQ0EvZ0IwQixHQStnQmlCLENBL2dCakI7QUFBQSxVQWdoQjFCQyxpQkFoaEIwQixHQWdoQkUsQ0FoaEJGO0FBQUEsVUFpaEIxQjlDLGNBamhCMEIsR0FpaEJUO0FBQ2YrQyxNQUFBQSxhQUFhLEVBQUUsQ0FEQTtBQUVmQyxNQUFBQSxPQUFPLEVBQUUsQ0FGTTtBQUdmQyxNQUFBQSxFQUFFLEVBQUUsRUFIVztBQUlmQyxNQUFBQSxNQUFNLEVBQUUsQ0FKTztBQUtmQyxNQUFBQSxTQUFTLEVBQUUsQ0FMSTtBQU1mQyxNQUFBQSxRQUFRLEVBQUUsQ0FOSztBQU9mQyxNQUFBQSxhQUFhLEVBQUU7QUFQQSxLQWpoQlM7QUFBQSxVQTBoQjFCQyxVQTFoQjBCLEdBMGhCVyxJQTFoQlg7QUFBQSxVQTJoQjFCQyx3QkEzaEIwQixHQTJoQkMsQ0EzaEJEO0FBQUEsVUE0aEIxQkMsZ0JBNWhCMEIsR0E0aEJQLENBNWhCTztBQUFBLFVBNmhCMUJDLG1CQTdoQjBCLEdBNmhCSixDQTdoQkk7QUFBQSxVQStoQjFCQyxrQkEvaEIwQixHQStoQmtDLEVBL2hCbEM7O0FBQUEsVUFpaUIxQkMsaUJBamlCMEIsR0FpaUJOLFVBQUF4QyxHQUFHLEVBQUk7QUFDekIsWUFBS21DLFVBQUwsR0FBa0JuQyxHQUFsQjtBQUNELEtBbmlCeUI7O0FBQUEsVUE2aUIxQnlDLDZCQTdpQjBCLEdBNmlCTSxVQUFBOUQsS0FBSyxFQUFJO0FBQ3ZDLFVBQU0rRCxTQUFTLEdBQUcvRCxLQUFLLENBQUMrRCxTQUF4Qjs7QUFDQSxVQUFJLE1BQUszRCw0QkFBTCxFQUFKLEVBQXlDO0FBRXZDLGVBQU8scUJBQUMsSUFBRCw2QkFBVUosS0FBVixFQUFQO0FBQ0QsT0FIRCxNQUdPLElBQUkrRCxTQUFKLEVBQWU7QUFBQTs7QUFDcEIvRSxRQUFBQSxTQUFTLENBQ1AsT0FBT2dCLEtBQUssQ0FBQ2dFLFVBQWIsS0FBNEIsU0FEckIsRUFFUCxzRkFDRUMsSUFBSSxDQUFDQyxTQUFMLHNCQUFlbEUsS0FBSyxDQUFDZ0UsVUFBckIsZ0NBQW1DLFdBQW5DLENBREYsR0FFRSxHQUpLLENBQVQ7QUFNQSxlQUVFLHFCQUFDLFVBQUQsNkJBQ01oRSxLQUROO0FBRUUsVUFBQSxjQUFjLEVBQ1pBLEtBQUssQ0FBQ21FLGNBQU4sSUFBd0IsSUFBeEIsR0FDRSxxQkFBQyxjQUFEO0FBQ0UsWUFBQSxVQUFVLEVBQUVuRSxLQUFLLENBQUNnRSxVQURwQjtBQUVFLFlBQUEsU0FBUyxFQUFFRCxTQUZiO0FBR0UsWUFBQSxrQkFBa0IsRUFBRS9ELEtBQUssQ0FBQ29FO0FBSDVCLFlBREYsR0FPRXBFLEtBQUssQ0FBQ21FO0FBVlosV0FGRjtBQWlCRCxPQXhCTSxNQXdCQTtBQUVMLGVBQU8scUJBQUMsVUFBRCw2QkFBZ0JuRSxLQUFoQixFQUFQO0FBQ0Q7QUFDRixLQTlrQnlCOztBQUFBLFVBbW5CMUJxRSxjQW5uQjBCLEdBbW5CVCxVQUFDcEQsT0FBRCxFQUFxQjtBQUNwQyxVQUFNcUQsSUFBSSxHQUFHLE1BQUtoQyxPQUFMLENBQWFyQixPQUFiLENBQWI7O0FBQ0EsVUFBSXFELElBQUosRUFBVTtBQUNSLGNBQUtoQyxPQUFMLENBQWFyQixPQUFiLCtCQUE0QnFELElBQTVCO0FBQWtDQyxVQUFBQSxRQUFRLEVBQUU7QUFBNUM7QUFDRDtBQUNGLEtBeG5CeUI7O0FBQUEsVUFnc0IxQkMsU0Foc0IwQixHQWdzQmQsVUFBQ0MsQ0FBRCxFQUFlO0FBQ3pCLFVBQUksTUFBS3JFLDRCQUFMLEVBQUosRUFBeUM7QUFHdkMsY0FBS3NFLHFDQUFMO0FBQ0QsT0FKRCxNQUlPO0FBQ0wsY0FBS3hFLGNBQUwsQ0FBb0JxRCxhQUFwQixHQUFvQyxNQUFLb0IsYUFBTCxDQUNsQ0YsQ0FBQyxDQUFDRyxXQUFGLENBQWNDLE1BRG9CLENBQXBDO0FBR0Q7O0FBQ0QsWUFBSzdFLEtBQUwsQ0FBVzhFLFFBQVgsSUFBdUIsTUFBSzlFLEtBQUwsQ0FBVzhFLFFBQVgsQ0FBb0JMLENBQXBCLENBQXZCOztBQUNBLFlBQUtNLDRCQUFMOztBQUNBLFlBQUtDLHNCQUFMO0FBQ0QsS0E3c0J5Qjs7QUFBQSxVQStzQjFCQyxjQS9zQjBCLEdBK3NCVCxVQUFBUixDQUFDLEVBQUk7QUFDcEIsWUFBS3pFLEtBQUwsQ0FBVzhFLFFBQVgsSUFBdUIsTUFBSzlFLEtBQUwsQ0FBVzhFLFFBQVgsQ0FBb0JMLENBQXBCLENBQXZCO0FBQ0QsS0FqdEJ5Qjs7QUFBQSxVQXV0QjFCUyxlQXZ0QjBCLEdBdXRCUixVQUFBVCxDQUFDLEVBQUk7QUFDckIsWUFBS1Usb0NBQUwsQ0FBMEMsTUFBS0MsaUJBQUwsRUFBMUM7O0FBQ0EsWUFBSzdDLGFBQUwsR0FBcUIsTUFBS29DLGFBQUwsQ0FBbUJGLENBQUMsQ0FBQ0csV0FBRixDQUFjQyxNQUFqQyxDQUFyQjtBQUNELEtBMXRCeUI7O0FBQUEsVUE0dEIxQlEsZUE1dEIwQixHQTR0QlIsVUFBQVosQ0FBQyxFQUFJO0FBQ3JCLFlBQUs5QixhQUFMLEdBQXFCLE1BQUtnQyxhQUFMLENBQW1CRixDQUFDLENBQUNHLFdBQUYsQ0FBY0MsTUFBakMsQ0FBckI7QUFDRCxLQTl0QnlCOztBQUFBLFVBNjBCMUJTLG9CQTcwQjBCLEdBNjBCSCxVQUFDQyxLQUFELEVBQWdCQyxNQUFoQixFQUFtQztBQUN4RCxVQUNFRCxLQUFLLEdBQUcsQ0FBUixJQUNBQyxNQUFNLEdBQUcsQ0FEVCxJQUVBLE1BQUt4RixLQUFMLENBQVd5RixrQkFBWCxJQUFpQyxJQUZqQyxJQUdBLE1BQUt6RixLQUFMLENBQVd5RixrQkFBWCxHQUFnQyxDQUhoQyxJQUlBLENBQUMsTUFBS2pELHFCQUxSLEVBTUU7QUFDQSxZQUFJLE1BQUt4QyxLQUFMLENBQVcwRixhQUFYLElBQTRCLElBQWhDLEVBQXNDO0FBQ3BDLGdCQUFLQyxhQUFMLENBQW1CO0FBQ2pCQyxZQUFBQSxRQUFRLEVBQUUsS0FETztBQUVqQkMsWUFBQUEsS0FBSyxFQUFFLE1BQUs3RixLQUFMLENBQVd5RjtBQUZELFdBQW5CO0FBSUQ7O0FBQ0QsY0FBS2pELHFCQUFMLEdBQTZCLElBQTdCO0FBQ0Q7O0FBQ0QsVUFBSSxNQUFLeEMsS0FBTCxDQUFXOEYsbUJBQWYsRUFBb0M7QUFDbEMsY0FBSzlGLEtBQUwsQ0FBVzhGLG1CQUFYLENBQStCUCxLQUEvQixFQUFzQ0MsTUFBdEM7QUFDRDs7QUFDRCxZQUFLdEYsY0FBTCxDQUFvQitDLGFBQXBCLEdBQW9DLE1BQUswQixhQUFMLENBQW1CO0FBQUNhLFFBQUFBLE1BQU0sRUFBTkEsTUFBRDtBQUFTRCxRQUFBQSxLQUFLLEVBQUxBO0FBQVQsT0FBbkIsQ0FBcEM7O0FBQ0EsWUFBS1IsNEJBQUw7O0FBQ0EsWUFBS0Msc0JBQUw7QUFDRCxLQW4yQnlCOztBQUFBLFVBdzJCMUJlLDJCQXgyQjBCLEdBdzJCSSxVQUFDQyxPQUFELEVBSXhCO0FBRUosVUFBTTVDLE1BQU0sR0FBRzRDLE9BQU8sQ0FBQzVDLE1BQVIsR0FBaUIsTUFBS0wsZ0NBQXJDO0FBRUEsVUFBTVEsYUFBYSxHQUFHeUMsT0FBTyxDQUFDekMsYUFBOUI7QUFDQSxVQUFNTCxPQUFPLEdBQUdFLE1BQU0sR0FBRyxNQUFLbEQsY0FBTCxDQUFvQmtELE1BQTdDO0FBQ0EsVUFBTUgsYUFBYSxHQUFHLE1BQUsvQyxjQUFMLENBQW9CK0MsYUFBMUM7QUFFQSxhQUFPO0FBQ0xNLFFBQUFBLGFBQWEsRUFBYkEsYUFESztBQUVMTixRQUFBQSxhQUFhLEVBQWJBLGFBRks7QUFHTEcsUUFBQUEsTUFBTSxFQUFOQSxNQUhLO0FBSUxGLFFBQUFBLE9BQU8sRUFBUEE7QUFKSyxPQUFQO0FBTUQsS0ExM0J5Qjs7QUFBQSxVQTQzQjFCK0MsU0E1M0IwQixHQTQzQmQsVUFBQ3hCLENBQUQsRUFBZTtBQUN6QixZQUFLL0QsaUJBQUwsQ0FBdUJxQixPQUF2QixDQUErQixVQUFBakIsU0FBUyxFQUFJO0FBQzFDQSxRQUFBQSxTQUFTLENBQUNPLEdBQVYsSUFBaUJQLFNBQVMsQ0FBQ08sR0FBVixDQUFjNEUsU0FBZCxDQUF3QnhCLENBQXhCLENBQWpCO0FBQ0QsT0FGRDs7QUFHQSxVQUFJLE1BQUt6RSxLQUFMLENBQVdrRyxRQUFmLEVBQXlCO0FBQ3ZCLGNBQUtsRyxLQUFMLENBQVdrRyxRQUFYLENBQW9CekIsQ0FBcEI7QUFDRDs7QUFDRCxVQUFNcEIsU0FBUyxHQUFHb0IsQ0FBQyxDQUFDMEIsU0FBcEI7O0FBQ0EsVUFBSTVDLGFBQWEsR0FBRyxNQUFLb0IsYUFBTCxDQUFtQkYsQ0FBQyxDQUFDRyxXQUFGLENBQWN3QixpQkFBakMsQ0FBcEI7O0FBQ0EsVUFBSW5ELGFBQWEsR0FBRyxNQUFLMEIsYUFBTCxDQUFtQkYsQ0FBQyxDQUFDRyxXQUFGLENBQWN5QixXQUFqQyxDQUFwQjs7QUFDQSxVQUFJakQsTUFBTSxHQUFHLE1BQUtrRCxhQUFMLENBQW1CN0IsQ0FBQyxDQUFDRyxXQUFGLENBQWNjLGFBQWpDLENBQWI7O0FBQ0EsVUFBSXhDLE9BQU8sR0FBR0UsTUFBTSxHQUFHLE1BQUtsRCxjQUFMLENBQW9Ca0QsTUFBM0M7O0FBRUEsVUFBSSxNQUFLaEQsNEJBQUwsRUFBSixFQUF5QztBQUN2QyxZQUFJLE1BQUtGLGNBQUwsQ0FBb0IrQyxhQUFwQixLQUFzQyxDQUExQyxFQUE2QztBQUczQztBQUNEOztBQUxzQyxvQ0FXbkMsTUFBSzhDLDJCQUFMLENBQWlDO0FBQ25DeEMsVUFBQUEsYUFBYSxFQUFiQSxhQURtQztBQUVuQ0gsVUFBQUEsTUFBTSxFQUFOQTtBQUZtQyxTQUFqQyxDQVhtQzs7QUFPckNHLFFBQUFBLGFBUHFDLHlCQU9yQ0EsYUFQcUM7QUFRckNOLFFBQUFBLGFBUnFDLHlCQVFyQ0EsYUFScUM7QUFTckNHLFFBQUFBLE1BVHFDLHlCQVNyQ0EsTUFUcUM7QUFVckNGLFFBQUFBLE9BVnFDLHlCQVVyQ0EsT0FWcUM7QUFleEM7O0FBRUQsVUFBTUMsRUFBRSxHQUFHLE1BQUtqRCxjQUFMLENBQW9CbUQsU0FBcEIsR0FDUGtELElBQUksQ0FBQ0MsR0FBTCxDQUFTLENBQVQsRUFBWW5ELFNBQVMsR0FBRyxNQUFLbkQsY0FBTCxDQUFvQm1ELFNBQTVDLENBRE8sR0FFUCxDQUZKO0FBR0EsVUFBTUMsUUFBUSxHQUFHSixPQUFPLEdBQUdDLEVBQTNCOztBQUVBLFVBQ0VBLEVBQUUsR0FBRyxHQUFMLElBQ0EsTUFBS2pELGNBQUwsQ0FBb0JpRCxFQUFwQixHQUF5QixHQUR6QixJQUVBRixhQUFhLEdBQUcsSUFBSU0sYUFGcEIsSUFHQSxDQUFDLE1BQUtiLFVBQUwsQ0FBZ0IrRCxJQUpuQixFQUtFO0FBQ0ExSCxRQUFBQSxPQUFPLENBQ0wsb0ZBQ0Usc0ZBREYsR0FFRSxpREFIRyxFQUlMO0FBQUNvRSxVQUFBQSxFQUFFLEVBQUZBLEVBQUQ7QUFBS3VELFVBQUFBLE1BQU0sRUFBRSxNQUFLeEcsY0FBTCxDQUFvQmlELEVBQWpDO0FBQXFDRixVQUFBQSxhQUFhLEVBQWJBO0FBQXJDLFNBSkssQ0FBUDtBQU1BLGNBQUtQLFVBQUwsQ0FBZ0IrRCxJQUFoQixHQUF1QixJQUF2QjtBQUNEOztBQUNELFlBQUt2RyxjQUFMLEdBQXNCO0FBQ3BCK0MsUUFBQUEsYUFBYSxFQUFiQSxhQURvQjtBQUVwQkUsUUFBQUEsRUFBRSxFQUFGQSxFQUZvQjtBQUdwQkQsUUFBQUEsT0FBTyxFQUFQQSxPQUhvQjtBQUlwQkUsUUFBQUEsTUFBTSxFQUFOQSxNQUpvQjtBQUtwQkMsUUFBQUEsU0FBUyxFQUFUQSxTQUxvQjtBQU1wQkMsUUFBQUEsUUFBUSxFQUFSQSxRQU5vQjtBQU9wQkMsUUFBQUEsYUFBYSxFQUFiQTtBQVBvQixPQUF0Qjs7QUFTQSxZQUFLb0Qsb0JBQUwsQ0FBMEIsTUFBSzNHLEtBQUwsQ0FBVzRHLElBQXJDOztBQUNBLFVBQUksQ0FBQyxNQUFLNUcsS0FBVixFQUFpQjtBQUNmO0FBQ0Q7O0FBQ0QsWUFBS2dGLHNCQUFMOztBQUNBLFVBQUkxQixRQUFRLEtBQUssQ0FBakIsRUFBb0I7QUFDbEIsY0FBS3VELGVBQUwsQ0FBcUJDLFFBQXJCO0FBQ0Q7O0FBQ0QsWUFBS0MsaUJBQUw7O0FBQ0EsWUFBS2hDLDRCQUFMO0FBQ0QsS0FoOEJ5Qjs7QUFBQSxVQW0vQjFCaUMsa0JBbi9CMEIsR0FtL0JMLFVBQUN2QyxDQUFELEVBQWE7QUFDaEMsWUFBSy9ELGlCQUFMLENBQXVCcUIsT0FBdkIsQ0FBK0IsVUFBQWpCLFNBQVMsRUFBSTtBQUMxQ0EsUUFBQUEsU0FBUyxDQUFDTyxHQUFWLElBQWlCUCxTQUFTLENBQUNPLEdBQVYsQ0FBYzJGLGtCQUFkLENBQWlDdkMsQ0FBakMsQ0FBakI7QUFDRCxPQUZEOztBQUdBLFlBQUtiLGtCQUFMLENBQXdCN0IsT0FBeEIsQ0FBZ0MsVUFBQWtGLEtBQUssRUFBSTtBQUN2Q0EsUUFBQUEsS0FBSyxDQUFDQyxpQkFBTixDQUF3QnhGLGlCQUF4QjtBQUNELE9BRkQ7O0FBR0EsWUFBS0QsY0FBTCxHQUFzQixJQUF0QjtBQUNBLFlBQUt6QixLQUFMLENBQVdtSCxpQkFBWCxJQUFnQyxNQUFLbkgsS0FBTCxDQUFXbUgsaUJBQVgsQ0FBNkIxQyxDQUE3QixDQUFoQztBQUNELEtBNS9CeUI7O0FBQUEsVUE4L0IxQjJDLGdCQTkvQjBCLEdBOC9CUCxVQUFDM0MsQ0FBRCxFQUFhO0FBQzlCLFlBQUsvRCxpQkFBTCxDQUF1QnFCLE9BQXZCLENBQStCLFVBQUFqQixTQUFTLEVBQUk7QUFDMUNBLFFBQUFBLFNBQVMsQ0FBQ08sR0FBVixJQUFpQlAsU0FBUyxDQUFDTyxHQUFWLENBQWMrRixnQkFBZCxDQUErQjNDLENBQS9CLENBQWpCO0FBQ0QsT0FGRDs7QUFHQSxVQUFPbkIsUUFBUCxHQUFtQm1CLENBQUMsQ0FBQ0csV0FBckIsQ0FBT3RCLFFBQVA7O0FBQ0EsVUFBSUEsUUFBSixFQUFjO0FBQ1osY0FBS3BELGNBQUwsQ0FBb0JvRCxRQUFwQixHQUErQixNQUFLZ0QsYUFBTCxDQUFtQmhELFFBQW5CLENBQS9CO0FBQ0Q7O0FBQ0QsWUFBS3lELGlCQUFMOztBQUNBLFlBQUsvRyxLQUFMLENBQVdxSCxlQUFYLElBQThCLE1BQUtySCxLQUFMLENBQVdxSCxlQUFYLENBQTJCNUMsQ0FBM0IsQ0FBOUI7QUFDRCxLQXhnQ3lCOztBQUFBLFVBMGdDMUI2QyxzQkExZ0MwQixHQTBnQ0QsVUFBQzdDLENBQUQsRUFBYTtBQUNwQyxZQUFLL0QsaUJBQUwsQ0FBdUJxQixPQUF2QixDQUErQixVQUFBakIsU0FBUyxFQUFJO0FBQzFDQSxRQUFBQSxTQUFTLENBQUNPLEdBQVYsSUFBaUJQLFNBQVMsQ0FBQ08sR0FBVixDQUFjaUcsc0JBQWQsQ0FBcUM3QyxDQUFyQyxDQUFqQjtBQUNELE9BRkQ7O0FBR0EsWUFBS3pFLEtBQUwsQ0FBV3VILHFCQUFYLElBQW9DLE1BQUt2SCxLQUFMLENBQVd1SCxxQkFBWCxDQUFpQzlDLENBQWpDLENBQXBDO0FBQ0QsS0EvZ0N5Qjs7QUFBQSxVQWloQzFCK0Msb0JBamhDMEIsR0FpaENILFVBQUMvQyxDQUFELEVBQWE7QUFDbEMsWUFBSy9ELGlCQUFMLENBQXVCcUIsT0FBdkIsQ0FBK0IsVUFBQWpCLFNBQVMsRUFBSTtBQUMxQ0EsUUFBQUEsU0FBUyxDQUFDTyxHQUFWLElBQWlCUCxTQUFTLENBQUNPLEdBQVYsQ0FBY21HLG9CQUFkLENBQW1DL0MsQ0FBbkMsQ0FBakI7QUFDRCxPQUZEOztBQUdBLFlBQUt2RSxjQUFMLENBQW9Cb0QsUUFBcEIsR0FBK0IsQ0FBL0I7O0FBQ0EsWUFBS3lELGlCQUFMOztBQUNBLFlBQUsvRyxLQUFMLENBQVd5SCxtQkFBWCxJQUFrQyxNQUFLekgsS0FBTCxDQUFXeUgsbUJBQVgsQ0FBK0JoRCxDQUEvQixDQUFsQztBQUNELEtBeGhDeUI7O0FBQUEsVUEwaEMxQmlELG9CQTFoQzBCLEdBMGhDSCxZQUFNO0FBQzNCLHdCQUlJLE1BQUsxSCxLQUpUO0FBQUEsVUFDRTRHLElBREYsZUFDRUEsSUFERjtBQUFBLFVBRUVlLFlBRkYsZUFFRUEsWUFGRjtBQUFBLFVBR3lCQyxzQkFIekIsZUFHRWxJLHFCQUhGO0FBS0EsVUFBTUEscUJBQXFCLEdBQUdELDhCQUE4QixDQUMxRG1JLHNCQUQwRCxDQUE1RDs7QUFHQSxVQUFNQyx3QkFBd0IsR0FBRyxNQUFLQyx5QkFBTCxFQUFqQzs7QUFDQSxZQUFLbkIsb0JBQUwsQ0FBMEJDLElBQTFCOztBQUNBLFVBQUksQ0FBQ0EsSUFBTCxFQUFXO0FBQ1Q7QUFDRDs7QUFDRCxZQUFLbUIsUUFBTCxDQUFjLFVBQUFuSCxLQUFLLEVBQUk7QUFDckIsWUFBSW9ILFFBQUo7QUFDQSxtQ0FBK0MsTUFBSzlILGNBQXBEO0FBQUEsWUFBTytDLGFBQVAsd0JBQU9BLGFBQVA7QUFBQSxZQUFzQkcsTUFBdEIsd0JBQXNCQSxNQUF0QjtBQUFBLFlBQThCRyxhQUE5Qix3QkFBOEJBLGFBQTlCOztBQUNBLFlBQUksQ0FBQ3NFLHdCQUFMLEVBQStCO0FBSzdCLGNBQUl0RSxhQUFhLEdBQUcsQ0FBaEIsSUFBcUJOLGFBQWEsR0FBRyxDQUF6QyxFQUE0QztBQUsxQyxnQkFBSSxDQUFDLE1BQUtqRCxLQUFMLENBQVd5RixrQkFBWixJQUFrQyxNQUFLdkYsY0FBTCxDQUFvQmtELE1BQTFELEVBQWtFO0FBQ2hFNEUsY0FBQUEsUUFBUSxHQUFHLGtEQUNULE1BQUtoSSxLQUFMLENBQVc0RyxJQURGLEVBRVQsTUFBSzVHLEtBQUwsQ0FBVzJILFlBRkYsRUFHVHBJLDRCQUE0QixDQUFDLE1BQUtTLEtBQUwsQ0FBV1IsbUJBQVosQ0FIbkIsRUFJVEssbUJBQW1CLENBQUMsTUFBS0csS0FBTCxDQUFXRixVQUFaLENBSlYsRUFLVGMsS0FMUyxFQU1ULE1BQUtxSCxzQkFOSSxFQU9ULE1BQUsvSCxjQVBJLENBQVg7QUFTRDtBQUNGO0FBQ0YsU0F0QkQsTUFzQk87QUFDTCxjQUFNZ0ksZUFBZSxHQUFHakYsYUFBYSxHQUFHTSxhQUFoQixHQUFnQ0gsTUFBeEQ7QUFDQSxjQUFNK0UsV0FBVyxHQUNmRCxlQUFlLEdBQUd4SSxxQkFBcUIsR0FBRzZELGFBQTFDLEdBQ0loRSw0QkFBNEIsQ0FBQyxNQUFLUyxLQUFMLENBQVdSLG1CQUFaLENBRGhDLEdBRUksQ0FITjtBQUlBd0ksVUFBQUEsUUFBUSxHQUFHO0FBQ1RJLFlBQUFBLEtBQUssRUFBRSxDQURFO0FBRVRDLFlBQUFBLElBQUksRUFBRTlCLElBQUksQ0FBQytCLEdBQUwsQ0FBUzFILEtBQUssQ0FBQ3lILElBQU4sR0FBYUYsV0FBdEIsRUFBbUNSLFlBQVksQ0FBQ2YsSUFBRCxDQUFaLEdBQXFCLENBQXhEO0FBRkcsV0FBWDtBQUlEOztBQUNELFlBQUlvQixRQUFRLElBQUksTUFBS3RILGlCQUFMLENBQXVCNkgsSUFBdkIsR0FBOEIsQ0FBOUMsRUFBaUQ7QUFDL0MsY0FBTUMsUUFBUSxHQUFHUixRQUFRLENBQUNJLEtBQTFCO0FBQ0EsY0FBTUssT0FBTyxHQUFHVCxRQUFRLENBQUNLLElBQXpCOztBQUtBLGVBQUssSUFBSUssRUFBRSxHQUFHRixRQUFkLEVBQXdCRSxFQUFFLElBQUlELE9BQTlCLEVBQXVDQyxFQUFFLEVBQXpDLEVBQTZDO0FBQzNDLGdCQUFNQyxlQUFlLEdBQUcsTUFBSzdGLGNBQUwsQ0FBb0JuQyxHQUFwQixDQUF3QitILEVBQXhCLENBQXhCOztBQUNBLGdCQUFNRSxhQUFhLEdBQ2pCRCxlQUFlLElBQ2YsTUFBSzNILHdCQUFMLENBQThCTCxHQUE5QixDQUFrQ2dJLGVBQWxDLENBRkY7O0FBR0EsZ0JBQUksQ0FBQ0MsYUFBTCxFQUFvQjtBQUNsQjtBQUNEOztBQUNELGdCQUFJQyxnQkFBZ0IsR0FBRyxLQUF2Qjs7QUFFQSxpRUFBcUJELGFBQXJCLHdDQUFvQztBQUFBLGtCQUEzQkUsUUFBMkI7O0FBQ2xDLGtCQUFNaEksU0FBUyxHQUFHLE1BQUtKLGlCQUFMLENBQXVCQyxHQUF2QixDQUEyQm1JLFFBQTNCLENBQWxCOztBQUNBLGtCQUFJaEksU0FBUyxJQUFJQSxTQUFTLENBQUNPLEdBQXZCLElBQThCUCxTQUFTLENBQUNPLEdBQVYsQ0FBYzBILE9BQWQsRUFBbEMsRUFBMkQ7QUFDekRGLGdCQUFBQSxnQkFBZ0IsR0FBRyxJQUFuQjtBQUNBO0FBQ0Q7QUFDRjs7QUFDRCxnQkFBSUEsZ0JBQUosRUFBc0I7QUFFcEJiLGNBQUFBLFFBQVEsQ0FBQ0ssSUFBVCxHQUFnQkssRUFBaEI7QUFDQTtBQUNEO0FBQ0Y7QUFDRjs7QUFDRCxZQUNFVixRQUFRLElBQUksSUFBWixJQUNBQSxRQUFRLENBQUNJLEtBQVQsS0FBbUJ4SCxLQUFLLENBQUN3SCxLQUR6QixJQUVBSixRQUFRLENBQUNLLElBQVQsS0FBa0J6SCxLQUFLLENBQUN5SCxJQUgxQixFQUlFO0FBQ0FMLFVBQUFBLFFBQVEsR0FBRyxJQUFYO0FBQ0Q7O0FBQ0QsZUFBT0EsUUFBUDtBQUNELE9BM0VEO0FBNEVELEtBcG5DeUI7O0FBQUEsVUFzbkMxQmdCLGdCQXRuQzBCLEdBc25DUCxVQUFDbkQsS0FBRCxFQUFnQm9ELFVBQWhCLEVBQXdDO0FBQ3pELHlCQUF3QixNQUFLakosS0FBN0I7QUFBQSxVQUFPNEcsSUFBUCxnQkFBT0EsSUFBUDtBQUFBLFVBQWFzQyxPQUFiLGdCQUFhQSxPQUFiO0FBQ0EsVUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUN0QyxJQUFELEVBQU9mLEtBQVAsQ0FBcEI7QUFDQSxhQUFPO0FBQUNBLFFBQUFBLEtBQUssRUFBTEEsS0FBRDtBQUFRc0QsUUFBQUEsSUFBSSxFQUFKQSxJQUFSO0FBQWMzSSxRQUFBQSxHQUFHLEVBQUUsTUFBSzRJLGFBQUwsQ0FBbUJELElBQW5CLEVBQXlCdEQsS0FBekIsQ0FBbkI7QUFBb0RvRCxRQUFBQSxVQUFVLEVBQVZBO0FBQXBELE9BQVA7QUFDRCxLQTFuQ3lCOztBQUFBLFVBNG5DMUJoQixzQkE1bkMwQixHQTRuQ0QsVUFDdkJwQyxLQUR1QixFQU1wQjtBQUNILFVBQU13RCxLQUFLLEdBQUcsTUFBS0MsZ0JBQUwsQ0FBc0J6RCxLQUF0QixDQUFkOztBQUNBLFVBQUl3RCxLQUFLLElBQUlBLEtBQUssQ0FBQ3hELEtBQU4sS0FBZ0JBLEtBQTdCLEVBQW9DO0FBRWxDLGVBQU93RCxLQUFQO0FBQ0QsT0FIRCxNQUdPO0FBQ0wsWUFBT0UsYUFBUCxHQUF3QixNQUFLdkosS0FBN0IsQ0FBT3VKLGFBQVA7QUFDQXZLLFFBQUFBLFNBQVMsQ0FDUCxDQUFDdUssYUFETSxFQUVQLG9GQUZPLENBQVQ7QUFJQSxlQUFPO0FBQ0xDLFVBQUFBLE1BQU0sRUFBRSxNQUFLcEgsa0JBRFI7QUFFTGdCLFVBQUFBLE1BQU0sRUFBRSxNQUFLaEIsa0JBQUwsR0FBMEJ5RDtBQUY3QixTQUFQO0FBSUQ7QUFDRixLQWxwQ3lCOztBQUFBLFVBb3BDMUJ5RCxnQkFwcEMwQixHQW9wQ1AsVUFDakJ6RCxLQURpQixFQVFkO0FBQ0gseUJBQXFELE1BQUs3RixLQUExRDtBQUFBLFVBQU80RyxJQUFQLGdCQUFPQSxJQUFQO0FBQUEsVUFBYXNDLE9BQWIsZ0JBQWFBLE9BQWI7QUFBQSxVQUFzQnZCLFlBQXRCLGdCQUFzQkEsWUFBdEI7QUFBQSxVQUFvQzRCLGFBQXBDLGdCQUFvQ0EsYUFBcEM7QUFDQXZLLE1BQUFBLFNBQVMsQ0FDUDJJLFlBQVksQ0FBQ2YsSUFBRCxDQUFaLEdBQXFCZixLQURkLEVBRVAsK0NBQStDQSxLQUZ4QyxDQUFUO0FBSUEsVUFBTXNELElBQUksR0FBR0QsT0FBTyxDQUFDdEMsSUFBRCxFQUFPZixLQUFQLENBQXBCOztBQUNBLFVBQUl3RCxLQUFLLEdBQUdGLElBQUksSUFBSSxNQUFLN0csT0FBTCxDQUFhLE1BQUs4RyxhQUFMLENBQW1CRCxJQUFuQixFQUF5QnRELEtBQXpCLENBQWIsQ0FBcEI7O0FBQ0EsVUFBSSxDQUFDd0QsS0FBRCxJQUFVQSxLQUFLLENBQUN4RCxLQUFOLEtBQWdCQSxLQUE5QixFQUFxQztBQUNuQyxZQUFJMEQsYUFBSixFQUFtQjtBQUNqQkYsVUFBQUEsS0FBSyxHQUFHRSxhQUFhLENBQUMzQyxJQUFELEVBQU9mLEtBQVAsQ0FBckI7QUFDRDtBQUNGOztBQUlELGFBQU93RCxLQUFQO0FBQ0QsS0E3cUN5Qjs7QUFFeEJySyxJQUFBQSxTQUFTLENBRVAsQ0FBQ2dCLE1BQUssQ0FBQ2tHLFFBQVAsSUFBbUIsQ0FBQ2xHLE1BQUssQ0FBQ2tHLFFBQU4sQ0FBZXVELFVBRjVCLEVBR1AsK0ZBQ0Usd0RBSkssQ0FBVDtBQU1BekssSUFBQUEsU0FBUyxDQUNQYSxtQkFBbUIsQ0FBQ0csTUFBSyxDQUFDRixVQUFQLENBQW5CLEdBQXdDLENBRGpDLEVBRVAseUZBRk8sQ0FBVDtBQUtBLFVBQUsrRyxlQUFMLEdBQXVCLElBQUl0SSxjQUFKLENBQW1CLE1BQUsrSyxnQkFBeEIsQ0FBdkI7QUFDQSxVQUFLSSwyQkFBTCxHQUFtQyxJQUFJckwsV0FBSixDQUNqQyxNQUFLcUosb0JBRDRCLDJCQUVqQyxNQUFLMUgsS0FBTCxDQUFXMkoseUJBRnNCLG9DQUVPLEVBRlAsQ0FBbkM7O0FBS0EsUUFBSSxNQUFLM0osS0FBTCxDQUFXNEosOEJBQWYsRUFBK0M7QUFDN0MsWUFBS2hHLGtCQUFMLEdBQTBCLE1BQUs1RCxLQUFMLENBQVc0Siw4QkFBWCxDQUEwQ0MsR0FBMUMsQ0FDeEIsVUFBQUMsSUFBSTtBQUFBLGVBQUs7QUFDUDVDLFVBQUFBLGlCQUFpQixFQUFFLElBQUlySSxpQkFBSixDQUFzQmlMLElBQUksQ0FBQ0MsaUJBQTNCLENBRFo7QUFFUEMsVUFBQUEsc0JBQXNCLEVBQUVGLElBQUksQ0FBQ0U7QUFGdEIsU0FBTDtBQUFBLE9BRG9CLENBQTFCO0FBTUQsS0FQRCxNQU9PLElBQUksTUFBS2hLLEtBQUwsQ0FBV2dLLHNCQUFmLEVBQXVDO0FBQzVDLFlBQUtwRyxrQkFBTCxDQUF3QnFHLElBQXhCLENBQTZCO0FBQzNCL0MsUUFBQUEsaUJBQWlCLEVBQUUsSUFBSXJJLGlCQUFKLENBQXNCLE1BQUttQixLQUFMLENBQVcrSixpQkFBakMsQ0FEUTtBQUczQkMsUUFBQUEsc0JBQXNCLEVBQUUsTUFBS2hLLEtBQUwsQ0FBV2dLO0FBSFIsT0FBN0I7QUFLRDs7QUFFRCxRQUFJRSxZQUFZLEdBQUc7QUFDakI5QixNQUFBQSxLQUFLLEVBQUUsTUFBS3BJLEtBQUwsQ0FBV3lGLGtCQUFYLElBQWlDLENBRHZCO0FBRWpCNEMsTUFBQUEsSUFBSSxFQUNGOUIsSUFBSSxDQUFDK0IsR0FBTCxDQUNFLE1BQUt0SSxLQUFMLENBQVcySCxZQUFYLENBQXdCLE1BQUszSCxLQUFMLENBQVc0RyxJQUFuQyxDQURGLEVBRUUsQ0FBQyxNQUFLNUcsS0FBTCxDQUFXeUYsa0JBQVgsSUFBaUMsQ0FBbEMsSUFDRXBHLDJCQUEyQixDQUFDLE1BQUtXLEtBQUwsQ0FBV1Ysa0JBQVosQ0FIL0IsSUFJSTtBQVBXLEtBQW5COztBQVVBLFFBQUksTUFBS2MsNEJBQUwsRUFBSixFQUF5QztBQUN2QyxVQUFNK0osV0FBVyxHQUFHLE1BQUs5SixPQUFMLENBQWErSixtQkFBYixDQUFpQyxNQUFLQyxXQUFMLEVBQWpDLENBQXBCOztBQUNBLFVBQUlGLFdBQUosRUFBaUI7QUFDZkQsUUFBQUEsWUFBWSxHQUFHQyxXQUFmO0FBQ0EsY0FBS3ZKLEtBQUwsR0FBYXVKLFdBQWI7QUFDQSxjQUFLN0gsT0FBTCxHQUFlNkgsV0FBVyxDQUFDRyxNQUEzQjtBQUNEO0FBQ0Y7O0FBRUQsVUFBSzFKLEtBQUwsR0FBYXNKLFlBQWI7QUFyRHdCO0FBc0R6Qjs7OztXQTlWRCxxQkFBWUssTUFBWixFQUFrRDtBQUNoRCxVQUFNM0UsUUFBUSxHQUFHMkUsTUFBTSxHQUFHQSxNQUFNLENBQUMzRSxRQUFWLEdBQXFCLElBQTVDO0FBQ0EsVUFBTTRFLFFBQVEsR0FBRyxLQUFLeEssS0FBTCxDQUFXMkgsWUFBWCxDQUF3QixLQUFLM0gsS0FBTCxDQUFXNEcsSUFBbkMsSUFBMkMsQ0FBNUQ7O0FBQ0EsVUFBTXlDLEtBQUssR0FBRyxLQUFLcEIsc0JBQUwsQ0FBNEJ1QyxRQUE1QixDQUFkOztBQUNBLFVBQU1wSCxNQUFNLEdBQUdtRCxJQUFJLENBQUNDLEdBQUwsQ0FDYixDQURhLEVBRWI2QyxLQUFLLENBQUNqRyxNQUFOLEdBQ0VpRyxLQUFLLENBQUNHLE1BRFIsR0FFRSxLQUFLakgsYUFGUCxHQUdFLEtBQUtyQyxjQUFMLENBQW9CcUQsYUFMVCxDQUFmOztBQVFBLFVBQUksS0FBS0MsVUFBTCxJQUFtQixJQUF2QixFQUE2QjtBQUMzQjtBQUNEOztBQUVELFVBQUksS0FBS0EsVUFBTCxDQUFnQmlILFFBQWhCLElBQTRCLElBQWhDLEVBQXNDO0FBQ3BDbkosUUFBQUEsT0FBTyxDQUFDb0osSUFBUixDQUNFLDBFQUNFLGlFQURGLEdBRUUsNERBSEo7QUFLQTtBQUNEOztBQUVELFdBQUtsSCxVQUFMLENBQWdCaUgsUUFBaEIsQ0FDRXRMLG1CQUFtQixDQUFDLEtBQUthLEtBQUwsQ0FBV1osVUFBWixDQUFuQixHQUNJO0FBQUN1TCxRQUFBQSxDQUFDLEVBQUV2SCxNQUFKO0FBQVl3QyxRQUFBQSxRQUFRLEVBQVJBO0FBQVosT0FESixHQUVJO0FBQUNnRixRQUFBQSxDQUFDLEVBQUV4SCxNQUFKO0FBQVl3QyxRQUFBQSxRQUFRLEVBQVJBO0FBQVosT0FITjtBQUtEOzs7V0FHRCx1QkFBYzJFLE1BQWQsRUFNRztBQUNELHlCQU1JLEtBQUt2SyxLQU5UO0FBQUEsVUFDRTRHLElBREYsZ0JBQ0VBLElBREY7QUFBQSxVQUVFeEgsVUFGRixnQkFFRUEsVUFGRjtBQUFBLFVBR0V1SSxZQUhGLGdCQUdFQSxZQUhGO0FBQUEsVUFJRTRCLGFBSkYsZ0JBSUVBLGFBSkY7QUFBQSxVQUtFc0IscUJBTEYsZ0JBS0VBLHFCQUxGO0FBT0EsVUFBT2pGLFFBQVAsR0FBb0QyRSxNQUFwRCxDQUFPM0UsUUFBUDtBQUFBLFVBQWlCQyxLQUFqQixHQUFvRDBFLE1BQXBELENBQWlCMUUsS0FBakI7QUFBQSxVQUF3QmlGLFVBQXhCLEdBQW9EUCxNQUFwRCxDQUF3Qk8sVUFBeEI7QUFBQSxVQUFvQ0MsWUFBcEMsR0FBb0RSLE1BQXBELENBQW9DUSxZQUFwQztBQUNBL0wsTUFBQUEsU0FBUyxDQUNQNkcsS0FBSyxJQUFJLENBREYsbURBRXdDQSxLQUZ4Qyx1QkFBVDtBQUlBN0csTUFBQUEsU0FBUyxDQUNQMkksWUFBWSxDQUFDZixJQUFELENBQVosSUFBc0IsQ0FEZiwrQ0FFb0NlLFlBQVksQ0FDckRmLElBRHFELENBRmhELHVCQUFUO0FBTUE1SCxNQUFBQSxTQUFTLENBQ1A2RyxLQUFLLEdBQUc4QixZQUFZLENBQUNmLElBQUQsQ0FEYixtREFFd0NmLEtBRnhDLHlCQUVnRThCLFlBQVksQ0FDakZmLElBRGlGLENBQVosR0FFbkUsQ0FKRyxFQUFUOztBQU1BLFVBQUksQ0FBQzJDLGFBQUQsSUFBa0IxRCxLQUFLLEdBQUcsS0FBS2hELDBCQUFuQyxFQUErRDtBQUM3RDdELFFBQUFBLFNBQVMsQ0FDUCxDQUFDLENBQUM2TCxxQkFESyxFQUVQLDhGQUNFLHlGQUhLLENBQVQ7QUFLQUEsUUFBQUEscUJBQXFCLENBQUM7QUFDcEJHLFVBQUFBLGlCQUFpQixFQUFFLEtBQUs1SSxrQkFESjtBQUVwQjZJLFVBQUFBLHlCQUF5QixFQUFFLEtBQUtwSSwwQkFGWjtBQUdwQmdELFVBQUFBLEtBQUssRUFBTEE7QUFIb0IsU0FBRCxDQUFyQjtBQUtBO0FBQ0Q7O0FBQ0QsVUFBTXdELEtBQUssR0FBRyxLQUFLcEIsc0JBQUwsQ0FBNEJwQyxLQUE1QixDQUFkOztBQUNBLFVBQU16QyxNQUFNLEdBQ1ZtRCxJQUFJLENBQUNDLEdBQUwsQ0FDRSxDQURGLEVBRUU2QyxLQUFLLENBQUNqRyxNQUFOLEdBQ0UsQ0FBQzJILFlBQVksSUFBSSxDQUFqQixLQUNHLEtBQUs3SyxjQUFMLENBQW9CcUQsYUFBcEIsR0FBb0M4RixLQUFLLENBQUNHLE1BRDdDLENBSEosS0FLS3NCLFVBQVUsSUFBSSxDQUxuQixDQURGOztBQVFBLFVBQUksS0FBS3RILFVBQUwsSUFBbUIsSUFBdkIsRUFBNkI7QUFDM0I7QUFDRDs7QUFFRCxVQUFJLEtBQUtBLFVBQUwsQ0FBZ0JpSCxRQUFoQixJQUE0QixJQUFoQyxFQUFzQztBQUNwQ25KLFFBQUFBLE9BQU8sQ0FBQ29KLElBQVIsQ0FDRSwwRUFDRSxpRUFERixHQUVFLDREQUhKO0FBS0E7QUFDRDs7QUFFRCxXQUFLbEgsVUFBTCxDQUFnQmlILFFBQWhCLENBQ0VyTCxVQUFVLEdBQUc7QUFBQ3VMLFFBQUFBLENBQUMsRUFBRXZILE1BQUo7QUFBWXdDLFFBQUFBLFFBQVEsRUFBUkE7QUFBWixPQUFILEdBQTJCO0FBQUNnRixRQUFBQSxDQUFDLEVBQUV4SCxNQUFKO0FBQVl3QyxRQUFBQSxRQUFRLEVBQVJBO0FBQVosT0FEdkM7QUFHRDs7O1dBSUQsc0JBQWEyRSxNQUFiLEVBS0c7QUFDRCxVQUFPcEIsSUFBUCxHQUFlb0IsTUFBZixDQUFPcEIsSUFBUDtBQUNBLHlCQUFzQyxLQUFLbkosS0FBM0M7QUFBQSxVQUFPNEcsSUFBUCxnQkFBT0EsSUFBUDtBQUFBLFVBQWFzQyxPQUFiLGdCQUFhQSxPQUFiO0FBQUEsVUFBc0J2QixZQUF0QixnQkFBc0JBLFlBQXRCO0FBQ0EsVUFBTXVELFNBQVMsR0FBR3ZELFlBQVksQ0FBQ2YsSUFBRCxDQUE5Qjs7QUFDQSxXQUFLLElBQUlmLE1BQUssR0FBRyxDQUFqQixFQUFvQkEsTUFBSyxHQUFHcUYsU0FBNUIsRUFBdUNyRixNQUFLLEVBQTVDLEVBQWdEO0FBQzlDLFlBQUlxRCxPQUFPLENBQUN0QyxJQUFELEVBQU9mLE1BQVAsQ0FBUCxLQUF5QnNELElBQTdCLEVBQW1DO0FBQ2pDLGVBQUt4RCxhQUFMLDRCQUF1QjRFLE1BQXZCO0FBQStCMUUsWUFBQUEsS0FBSyxFQUFMQTtBQUEvQjtBQUNBO0FBQ0Q7QUFDRjtBQUNGOzs7V0FZRCx3QkFBZTBFLE1BQWYsRUFBbUU7QUFDakUsVUFBTzNFLFFBQVAsR0FBMkIyRSxNQUEzQixDQUFPM0UsUUFBUDtBQUFBLFVBQWlCeEMsTUFBakIsR0FBMkJtSCxNQUEzQixDQUFpQm5ILE1BQWpCOztBQUVBLFVBQUksS0FBS0ksVUFBTCxJQUFtQixJQUF2QixFQUE2QjtBQUMzQjtBQUNEOztBQUVELFVBQUksS0FBS0EsVUFBTCxDQUFnQmlILFFBQWhCLElBQTRCLElBQWhDLEVBQXNDO0FBQ3BDbkosUUFBQUEsT0FBTyxDQUFDb0osSUFBUixDQUNFLDBFQUNFLGlFQURGLEdBRUUsNERBSEo7QUFLQTtBQUNEOztBQUVELFdBQUtsSCxVQUFMLENBQWdCaUgsUUFBaEIsQ0FDRXRMLG1CQUFtQixDQUFDLEtBQUthLEtBQUwsQ0FBV1osVUFBWixDQUFuQixHQUNJO0FBQUN1TCxRQUFBQSxDQUFDLEVBQUV2SCxNQUFKO0FBQVl3QyxRQUFBQSxRQUFRLEVBQVJBO0FBQVosT0FESixHQUVJO0FBQUNnRixRQUFBQSxDQUFDLEVBQUV4SCxNQUFKO0FBQVl3QyxRQUFBQSxRQUFRLEVBQVJBO0FBQVosT0FITjtBQUtEOzs7V0FFRCw2QkFBb0I7QUFDbEIsV0FBS2xGLGlCQUFMLENBQXVCcUIsT0FBdkIsQ0FBK0IsVUFBQWpCLFNBQVMsRUFBSTtBQUMxQ0EsUUFBQUEsU0FBUyxDQUFDTyxHQUFWLElBQWlCUCxTQUFTLENBQUNPLEdBQVYsQ0FBY0ssaUJBQWQsRUFBakI7QUFDRCxPQUZEOztBQUdBLFdBQUtrQyxrQkFBTCxDQUF3QjdCLE9BQXhCLENBQWdDLFVBQUFvSixDQUFDLEVBQUk7QUFDbkNBLFFBQUFBLENBQUMsQ0FBQ2pFLGlCQUFGLENBQW9CeEYsaUJBQXBCO0FBQ0QsT0FGRDs7QUFHQSxXQUFLaUYsb0JBQUwsQ0FBMEIsS0FBSzNHLEtBQUwsQ0FBVzRHLElBQXJDO0FBQ0Q7OztXQUVELGlDQUF3QjtBQUN0QixVQUFJLEtBQUtwRCxVQUFMLElBQW1CLElBQXZCLEVBQTZCO0FBQzNCO0FBQ0Q7O0FBRUQsV0FBS0EsVUFBTCxDQUFnQjRILHFCQUFoQjtBQUNEOzs7V0FPRCw4QkFBMkM7QUFDekMsVUFBSSxLQUFLNUgsVUFBTCxJQUFtQixLQUFLQSxVQUFMLENBQWdCNkgsa0JBQXZDLEVBQTJEO0FBQ3pELGVBQU8sS0FBSzdILFVBQUwsQ0FBZ0I2SCxrQkFBaEIsRUFBUDtBQUNEO0FBQ0Y7OztXQUVELDZCQUE2QjtBQUMzQixVQUFJLEtBQUs3SCxVQUFMLElBQW1CLEtBQUtBLFVBQUwsQ0FBZ0I4SCxpQkFBdkMsRUFBMEQ7QUFDeEQsZUFBTyxLQUFLOUgsVUFBTCxDQUFnQjhILGlCQUFoQixFQUFQO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsZUFBTzlNLFdBQVcsQ0FBQytNLGNBQVosQ0FBMkIsS0FBSy9ILFVBQWhDLENBQVA7QUFDRDtBQUNGOzs7V0FFRCx3QkFFbUM7QUFDakMsVUFBSSxLQUFLQSxVQUFMLElBQW1CLEtBQUtBLFVBQUwsQ0FBZ0JnSSxZQUF2QyxFQUFxRDtBQUNuRCxlQUFPLEtBQUtoSSxVQUFMLENBQWdCZ0ksWUFBaEIsRUFBUDtBQUNELE9BRkQsTUFFTztBQUNMLGVBQU8sS0FBS2hJLFVBQVo7QUFDRDtBQUNGOzs7V0FFRCx3QkFBZXhELEtBQWYsRUFBOEI7QUFDNUIsVUFBSSxLQUFLd0QsVUFBVCxFQUFxQjtBQUNuQixhQUFLQSxVQUFMLENBQWdCaUksY0FBaEIsQ0FBK0J6TCxLQUEvQjtBQUNEO0FBQ0Y7OztXQUVELHVCQUFzQjtBQUFBOztBQUNwQixhQUFPLHVCQUFLSyxPQUFMLG1DQUFjWSxPQUFkLEtBQXlCLFVBQWhDO0FBQ0Q7OztXQUVELHVCQUFzQjtBQUNwQixhQUFPLEtBQUtqQixLQUFMLENBQVcwTCxPQUFYLElBQXNCLEtBQUtDLFdBQUwsRUFBN0I7QUFDRDs7O1dBRUQseUJBQStCO0FBQUE7O0FBQzdCLGFBQU87QUFDTEQsUUFBQUEsT0FBTyxFQUFFLEtBQUtyQixXQUFMLEVBREo7QUFFTHBKLFFBQUFBLE9BQU8sRUFBRSxLQUFLMEssV0FBTCxFQUZKO0FBR0x2TSxRQUFBQSxVQUFVLEVBQUVELG1CQUFtQixDQUFDLEtBQUthLEtBQUwsQ0FBV1osVUFBWixDQUgxQjtBQUlMd00sUUFBQUEsTUFBTSxvQkFBRSxLQUFLdkwsT0FBUCxxQkFBRSxlQUFjd0w7QUFKakIsT0FBUDtBQU1EOzs7V0FNRCxtQkFBbUI7QUFDakIsYUFBTyxLQUFLcEosUUFBWjtBQUNEOzs7V0F3SEQsNkJBQW9CO0FBQ2xCLFVBQUksS0FBS3JDLDRCQUFMLEVBQUosRUFBeUM7QUFDdkMsYUFBS0MsT0FBTCxDQUFheUwscUJBQWIsQ0FBbUM7QUFDakM3SyxVQUFBQSxPQUFPLEVBQUUsS0FBSzBLLFdBQUwsRUFEd0I7QUFFakNuTCxVQUFBQSxHQUFHLEVBQUUsS0FBSzZKLFdBQUwsRUFGNEI7QUFHakNoSixVQUFBQSxHQUFHLEVBQUUsSUFINEI7QUFRakMwSyxVQUFBQSxlQUFlLEVBQUUsS0FBSzFMLE9BQUwsQ0FBYXdMO0FBUkcsU0FBbkM7QUFVRDtBQUNGOzs7V0FFRCxnQ0FBdUI7QUFDckIsVUFBSSxLQUFLekwsNEJBQUwsRUFBSixFQUF5QztBQUN2QyxhQUFLQyxPQUFMLENBQWEyTCx1QkFBYixDQUFxQztBQUNuQ3hMLFVBQUFBLEdBQUcsRUFBRSxLQUFLNkosV0FBTCxFQUQ4QjtBQUVuQ3pKLFVBQUFBLEtBQUssRUFBRTtBQUNMd0gsWUFBQUEsS0FBSyxFQUFFLEtBQUt4SCxLQUFMLENBQVd3SCxLQURiO0FBRUxDLFlBQUFBLElBQUksRUFBRSxLQUFLekgsS0FBTCxDQUFXeUgsSUFGWjtBQUdMaUMsWUFBQUEsTUFBTSxFQUFFLEtBQUtoSTtBQUhSO0FBRjRCLFNBQXJDO0FBUUQ7O0FBQ0QsV0FBS3FFLG9CQUFMLENBQTBCLElBQTFCOztBQUNBLFdBQUsrQywyQkFBTCxDQUFpQ3VDLE9BQWpDLENBQXlDO0FBQUNDLFFBQUFBLEtBQUssRUFBRTtBQUFSLE9BQXpDOztBQUNBLFdBQUt0SSxrQkFBTCxDQUF3QjdCLE9BQXhCLENBQWdDLFVBQUFrRixLQUFLLEVBQUk7QUFDdkNBLFFBQUFBLEtBQUssQ0FBQ0MsaUJBQU4sQ0FBd0IrRSxPQUF4QjtBQUNELE9BRkQ7O0FBR0EsV0FBS3BGLGVBQUwsQ0FBcUJzRixrQkFBckI7QUFDRDs7O1dBa0JELG9CQUNFQyxLQURGLEVBRUVDLG1CQUZGLEVBR0VDLHNCQUhGLEVBSUVsRSxLQUpGLEVBS0VDLElBTEYsRUFNRWtFLGNBTkYsRUFPRTtBQUFBOztBQUNBLHlCQU9JLEtBQUt2TSxLQVBUO0FBQUEsVUFDRXdNLHFCQURGLGdCQUNFQSxxQkFERjtBQUFBLFVBRUVDLHNCQUZGLGdCQUVFQSxzQkFGRjtBQUFBLFVBR0U3RixJQUhGLGdCQUdFQSxJQUhGO0FBQUEsVUFJRXNDLE9BSkYsZ0JBSUVBLE9BSkY7QUFBQSxVQUtFdkIsWUFMRixnQkFLRUEsWUFMRjtBQUFBLFVBTUV2SSxVQU5GLGdCQU1FQSxVQU5GO0FBUUEsVUFBTXNOLFlBQVksR0FBRyxLQUFLMU0sS0FBTCxDQUFXMk0sbUJBQVgsR0FBaUMsQ0FBakMsR0FBcUMsQ0FBMUQ7QUFDQSxVQUFNQyxHQUFHLEdBQUdqRixZQUFZLENBQUNmLElBQUQsQ0FBWixHQUFxQixDQUFqQztBQUNBLFVBQUlpRyxXQUFKO0FBQ0F4RSxNQUFBQSxJQUFJLEdBQUc5QixJQUFJLENBQUMrQixHQUFMLENBQVNzRSxHQUFULEVBQWN2RSxJQUFkLENBQVA7O0FBWkEsaUNBYVNLLEVBYlQ7QUFjRSxZQUFNUyxJQUFJLEdBQUdELE9BQU8sQ0FBQ3RDLElBQUQsRUFBTzhCLEVBQVAsQ0FBcEI7O0FBQ0EsWUFBTWxJLEdBQUcsR0FBRyxNQUFJLENBQUM0SSxhQUFMLENBQW1CRCxJQUFuQixFQUF5QlQsRUFBekIsQ0FBWjs7QUFDQSxRQUFBLE1BQUksQ0FBQzVGLGNBQUwsQ0FBb0IxQixHQUFwQixDQUF3QnNILEVBQXhCLEVBQTRCbEksR0FBNUI7O0FBQ0EsWUFBSThMLHNCQUFzQixDQUFDUSxHQUF2QixDQUEyQnBFLEVBQUUsR0FBR2dFLFlBQWhDLENBQUosRUFBbUQ7QUFDakRMLFVBQUFBLG1CQUFtQixDQUFDcEMsSUFBcEIsQ0FBeUJtQyxLQUFLLENBQUM1QyxNQUEvQjtBQUNEOztBQUNENEMsUUFBQUEsS0FBSyxDQUFDbkMsSUFBTixDQUNFLHFCQUFDLFlBQUQ7QUFDRSxVQUFBLHFCQUFxQixFQUFFdUMscUJBRHpCO0FBRUUsVUFBQSxzQkFBc0IsRUFBRTlELEVBQUUsR0FBR2tFLEdBQUwsR0FBV0gsc0JBQVgsR0FBb0NNLFNBRjlEO0FBR0UsVUFBQSxPQUFPLEVBQUV2TSxHQUhYO0FBSUUsVUFBQSxjQUFjLEVBQUUsTUFBSSxDQUFDcUcsZUFKdkI7QUFLRSxVQUFBLFVBQVUsRUFBRXpILFVBTGQ7QUFNRSxVQUFBLEtBQUssRUFBRXNKLEVBTlQ7QUFPRSxVQUFBLGNBQWMsRUFBRTZELGNBUGxCO0FBUUUsVUFBQSxJQUFJLEVBQUVwRCxJQVJSO0FBVUUsVUFBQSxXQUFXLEVBQUUwRCxXQVZmO0FBV0UsVUFBQSxrQkFBa0IsRUFBRSxNQUFJLENBQUNqTCxtQkFYM0I7QUFZRSxVQUFBLFFBQVEsRUFBRSxrQkFBQTZDLENBQUM7QUFBQSxtQkFBSSxNQUFJLENBQUN1SSxhQUFMLENBQW1CdkksQ0FBbkIsRUFBc0JqRSxHQUF0QixFQUEyQmtJLEVBQTNCLENBQUo7QUFBQSxXQVpiO0FBYUUsVUFBQSxTQUFTLEVBQUUsTUFBSSxDQUFDckUsY0FibEI7QUFjRSxVQUFBLFdBQVcsRUFBRSxNQUFJLENBQUNyRSxLQWRwQjtBQWVFLFVBQUEsR0FBRyxFQUFFLGFBQUFxQixJQUFHLEVBQUk7QUFDVixZQUFBLE1BQUksQ0FBQ1csU0FBTCxDQUFleEIsR0FBZixJQUFzQmEsSUFBdEI7QUFDRDtBQWpCSCxXQVNPYixHQVRQLENBREY7QUFxQkFxTSxRQUFBQSxXQUFXLEdBQUdyTSxHQUFkO0FBekNGOztBQWFBLFdBQUssSUFBSWtJLEVBQUUsR0FBR04sS0FBZCxFQUFxQk0sRUFBRSxJQUFJTCxJQUEzQixFQUFpQ0ssRUFBRSxFQUFuQyxFQUF1QztBQUFBLGNBQTlCQSxFQUE4QjtBQTZCdEM7QUFDRjs7O1dBU0QscUNBQXFDO0FBQ25DLGFBQU8sS0FBSzFJLEtBQUwsQ0FBV2lOLHFCQUFYLElBQW9DLEtBQTNDO0FBQ0Q7OztXQUVELHdDQUF3QztBQUN0QyxVQUFNQyxhQUFhLEdBQUcsS0FBSzdNLE9BQTNCO0FBQ0EsYUFBTyxDQUFDLEVBQ042TSxhQUFhLElBQ2IsQ0FBQyxDQUFDQSxhQUFhLENBQUM5TixVQUFoQixLQUErQkQsbUJBQW1CLENBQUMsS0FBS2EsS0FBTCxDQUFXWixVQUFaLENBRjVDLENBQVI7QUFJRDs7O1dBS0QsdUJBQWMrSixJQUFkLEVBQTBCdEQsS0FBMUIsRUFBeUM7QUFDdkMsVUFBSSxLQUFLN0YsS0FBTCxDQUFXbU4sWUFBWCxJQUEyQixJQUEvQixFQUFxQztBQUNuQyxlQUFPLEtBQUtuTixLQUFMLENBQVdtTixZQUFYLENBQXdCaEUsSUFBeEIsRUFBOEJ0RCxLQUE5QixDQUFQO0FBQ0Q7O0FBRUQsVUFBTXJGLEdBQUcsR0FBRyxtQ0FBb0IySSxJQUFwQixFQUEwQnRELEtBQTFCLENBQVo7O0FBQ0EsVUFBSXJGLEdBQUcsS0FBSzRNLE1BQU0sQ0FBQ3ZILEtBQUQsQ0FBbEIsRUFBMkI7QUFDekI1RyxRQUFBQSxnQkFBZ0IsR0FBRyxJQUFuQjs7QUFDQSxZQUFJa0ssSUFBSSxDQUFDa0UsSUFBTCxJQUFhbEUsSUFBSSxDQUFDa0UsSUFBTCxDQUFVQyxXQUEzQixFQUF3QztBQUN0Q3BPLFVBQUFBLHlCQUF5QixHQUFHaUssSUFBSSxDQUFDa0UsSUFBTCxDQUFVQyxXQUF0QztBQUNEO0FBQ0Y7O0FBQ0QsYUFBTzlNLEdBQVA7QUFDRDs7O1dBRUQsa0JBQXFCO0FBQUE7O0FBQ25CLFVBQUkrTSxPQUFKLEVBQWE7QUFDWCxZQUFNQyxVQUFVLEdBQUcxTyxZQUFZLENBQUMsS0FBS2tCLEtBQUwsQ0FBV3lOLHFCQUFaLENBQS9COztBQUNBLFlBQUlELFVBQVUsSUFBSSxJQUFkLElBQXNCQSxVQUFVLENBQUNFLFFBQVgsS0FBd0IsTUFBbEQsRUFBMEQ7QUFDeERwTSxVQUFBQSxPQUFPLENBQUNvSixJQUFSLENBQ0UsK0VBQ0Usc0RBRko7QUFJRDtBQUNGOztBQUNELHlCQUlJLEtBQUsxSyxLQUpUO0FBQUEsVUFDRTJOLGtCQURGLGdCQUNFQSxrQkFERjtBQUFBLFVBRUVDLG1CQUZGLGdCQUVFQSxtQkFGRjtBQUFBLFVBR0VqQixtQkFIRixnQkFHRUEsbUJBSEY7QUFLQSx5QkFBMkIsS0FBSzNNLEtBQWhDO0FBQUEsVUFBTzRHLElBQVAsZ0JBQU9BLElBQVA7QUFBQSxVQUFheEgsVUFBYixnQkFBYUEsVUFBYjs7QUFDQSxVQUFNeUksd0JBQXdCLEdBQUcsS0FBS0MseUJBQUwsRUFBakM7O0FBQ0EsVUFBTXlFLGNBQWMsR0FBRyxLQUFLdk0sS0FBTCxDQUFXNk4sUUFBWCxHQUNuQjFPLG1CQUFtQixDQUFDLEtBQUthLEtBQUwsQ0FBV1osVUFBWixDQUFuQixHQUNFME8sTUFBTSxDQUFDQyxvQkFEVCxHQUVFRCxNQUFNLENBQUNFLGtCQUhVLEdBSW5CLElBSko7QUFLQSxVQUFNNUIsS0FBSyxHQUFHLEVBQWQ7QUFDQSxVQUFNRSxzQkFBc0IsR0FBRyxJQUFJcEwsR0FBSixDQUFRLEtBQUtsQixLQUFMLENBQVdxTSxtQkFBbkIsQ0FBL0I7QUFDQSxVQUFNQSxtQkFBbUIsR0FBRyxFQUE1Qjs7QUFDQSxVQUFJTSxtQkFBSixFQUF5QjtBQUN2QixZQUFJTCxzQkFBc0IsQ0FBQ1EsR0FBdkIsQ0FBMkIsQ0FBM0IsQ0FBSixFQUFtQztBQUNqQ1QsVUFBQUEsbUJBQW1CLENBQUNwQyxJQUFwQixDQUF5QixDQUF6QjtBQUNEOztBQUNELFlBQU1nRSxPQUFPLEdBQUdDLEtBQUssQ0FBQ0MsY0FBTixDQUFxQnhCLG1CQUFyQixJQUNkQSxtQkFEYyxHQUtkLHFCQUFDLG1CQUFELEtBTEY7QUFPQVAsUUFBQUEsS0FBSyxDQUFDbkMsSUFBTixDQUNFLHFCQUFDLDBEQUFEO0FBQ0UsVUFBQSxPQUFPLEVBQUUsS0FBSzBCLFdBQUwsS0FBcUIsU0FEaEM7QUFBQSxvQkFHRSxxQkFBQyxJQUFEO0FBQ0UsWUFBQSxRQUFRLEVBQUUsS0FBS3RHLGVBRGpCO0FBRUUsWUFBQSxLQUFLLEVBQUUxRyxVQUFVLENBQUN5UCxPQUFYLENBQ0w3QixjQURLLEVBRUwsS0FBS3ZNLEtBQUwsQ0FBV3FPLHdCQUZOLENBRlQ7QUFBQSxzQkFRSUo7QUFSSjtBQUhGLFdBRU0sU0FGTixDQURGO0FBaUJEOztBQUNELFVBQU0vQyxTQUFTLEdBQUcsS0FBS2xMLEtBQUwsQ0FBVzJILFlBQVgsQ0FBd0JmLElBQXhCLENBQWxCOztBQUNBLFVBQUlzRSxTQUFTLEdBQUcsQ0FBaEIsRUFBbUI7QUFDakJqTSxRQUFBQSxnQkFBZ0IsR0FBRyxLQUFuQjtBQUNBQyxRQUFBQSx5QkFBeUIsR0FBRyxFQUE1Qjs7QUFDQSxZQUFNb1AsU0FBUyxHQUFHLEtBQUtwTSxhQUFMLENBQW1CLENBQUM5QyxVQUFwQixDQUFsQjs7QUFDQSxZQUFNbVAsZ0JBQWdCLEdBQUcsS0FBS3ZPLEtBQUwsQ0FBV3lGLGtCQUFYLEdBQ3JCLENBQUMsQ0FEb0IsR0FFckJwRywyQkFBMkIsQ0FBQyxLQUFLVyxLQUFMLENBQVdWLGtCQUFaLENBQTNCLEdBQTZELENBRmpFO0FBR0EsMEJBQXNCLEtBQUtzQixLQUEzQjtBQUFBLFlBQU93SCxLQUFQLGVBQU9BLEtBQVA7QUFBQSxZQUFjQyxJQUFkLGVBQWNBLElBQWQ7O0FBQ0EsYUFBS21HLFVBQUwsQ0FDRXBDLEtBREYsRUFFRUMsbUJBRkYsRUFHRUMsc0JBSEYsRUFJRSxDQUpGLEVBS0VpQyxnQkFMRixFQU1FaEMsY0FORjs7QUFRQSxZQUFNa0MsaUJBQWlCLEdBQUdsSSxJQUFJLENBQUNDLEdBQUwsQ0FBUytILGdCQUFnQixHQUFHLENBQTVCLEVBQStCbkcsS0FBL0IsQ0FBMUI7O0FBQ0EsWUFBSSxDQUFDUCx3QkFBRCxJQUE2Qk8sS0FBSyxHQUFHbUcsZ0JBQWdCLEdBQUcsQ0FBNUQsRUFBK0Q7QUFDN0QsY0FBSUcsb0JBQW9CLEdBQUcsS0FBM0I7O0FBQ0EsY0FBSXBDLHNCQUFzQixDQUFDL0QsSUFBdkIsR0FBOEIsQ0FBbEMsRUFBcUM7QUFDbkMsZ0JBQU1tRSxZQUFZLEdBQUdDLG1CQUFtQixHQUFHLENBQUgsR0FBTyxDQUEvQzs7QUFFQSxpQkFBSyxJQUFJakUsRUFBRSxHQUFHK0YsaUJBQWlCLEdBQUcsQ0FBbEMsRUFBcUMvRixFQUFFLEdBQUc2RixnQkFBMUMsRUFBNEQ3RixFQUFFLEVBQTlELEVBQWtFO0FBQ2hFLGtCQUFJNEQsc0JBQXNCLENBQUNRLEdBQXZCLENBQTJCcEUsRUFBRSxHQUFHZ0UsWUFBaEMsQ0FBSixFQUFtRDtBQUNqRCxvQkFBTWlDLFNBQVMsR0FBRyxLQUFLMUcsc0JBQUwsQ0FBNEJzRyxnQkFBNUIsQ0FBbEI7O0FBQ0Esb0JBQU1LLFdBQVcsR0FBRyxLQUFLM0csc0JBQUwsQ0FBNEJTLEVBQTVCLENBQXBCOztBQUNBLG9CQUFNbUcsU0FBUyxHQUNiRCxXQUFXLENBQUN4TCxNQUFaLEdBQ0F1TCxTQUFTLENBQUN2TCxNQURWLElBRUMsS0FBS3BELEtBQUwsQ0FBV3lGLGtCQUFYLEdBQWdDLENBQWhDLEdBQW9Da0osU0FBUyxDQUFDbkYsTUFGL0MsQ0FERjtBQUlBNEMsZ0JBQUFBLEtBQUssQ0FBQ25DLElBQU4sQ0FDRSxxQkFBQyxJQUFEO0FBQXlCLGtCQUFBLEtBQUssb0NBQUlxRSxTQUFKLEVBQWdCTyxTQUFoQjtBQUE5QixtQkFBVSxjQUFWLENBREY7O0FBR0EscUJBQUtMLFVBQUwsQ0FDRXBDLEtBREYsRUFFRUMsbUJBRkYsRUFHRUMsc0JBSEYsRUFJRTVELEVBSkYsRUFLRUEsRUFMRixFQU1FNkQsY0FORjs7QUFRQSxvQkFBTXVDLFVBQVUsR0FDZCxLQUFLN0csc0JBQUwsQ0FBNEJHLEtBQTVCLEVBQW1DaEYsTUFBbkMsSUFDQ3dMLFdBQVcsQ0FBQ3hMLE1BQVosR0FBcUJ3TCxXQUFXLENBQUNwRixNQURsQyxDQURGO0FBR0E0QyxnQkFBQUEsS0FBSyxDQUFDbkMsSUFBTixDQUNFLHFCQUFDLElBQUQ7QUFBMEIsa0JBQUEsS0FBSyxvQ0FBSXFFLFNBQUosRUFBZ0JRLFVBQWhCO0FBQS9CLG1CQUFVLGVBQVYsQ0FERjtBQUdBSixnQkFBQUEsb0JBQW9CLEdBQUcsSUFBdkI7QUFDQTtBQUNEO0FBQ0Y7QUFDRjs7QUFDRCxjQUFJLENBQUNBLG9CQUFMLEVBQTJCO0FBQ3pCLGdCQUFNQyxVQUFTLEdBQUcsS0FBSzFHLHNCQUFMLENBQTRCc0csZ0JBQTVCLENBQWxCOztBQUNBLGdCQUFNUSxVQUFVLEdBQ2QsS0FBSzlHLHNCQUFMLENBQTRCRyxLQUE1QixFQUFtQ2hGLE1BQW5DLElBQ0N1TCxVQUFTLENBQUN2TCxNQUFWLEdBQW1CdUwsVUFBUyxDQUFDbkYsTUFEOUIsQ0FERjs7QUFHQTRDLFlBQUFBLEtBQUssQ0FBQ25DLElBQU4sQ0FDRSxxQkFBQyxJQUFEO0FBQXlCLGNBQUEsS0FBSyxvQ0FBSXFFLFNBQUosRUFBZ0JTLFVBQWhCO0FBQTlCLGVBQVUsY0FBVixDQURGO0FBR0Q7QUFDRjs7QUFDRCxhQUFLUCxVQUFMLENBQ0VwQyxLQURGLEVBRUVDLG1CQUZGLEVBR0VDLHNCQUhGLEVBSUVtQyxpQkFKRixFQUtFcEcsSUFMRixFQU1Fa0UsY0FORjs7QUFRQSxZQUFJLENBQUMsS0FBSzdKLFVBQUwsQ0FBZ0JiLElBQWpCLElBQXlCNUMsZ0JBQTdCLEVBQStDO0FBQzdDcUMsVUFBQUEsT0FBTyxDQUFDb0osSUFBUixDQUNFLGdHQUNFLHdDQUZKLEVBR0V4TCx5QkFIRjtBQUtBLGVBQUt3RCxVQUFMLENBQWdCYixJQUFoQixHQUF1QixJQUF2QjtBQUNEOztBQUNELFlBQUksQ0FBQ2dHLHdCQUFELElBQTZCUSxJQUFJLEdBQUc2QyxTQUFTLEdBQUcsQ0FBcEQsRUFBdUQ7QUFDckQsY0FBTThELFNBQVMsR0FBRyxLQUFLL0csc0JBQUwsQ0FBNEJJLElBQTVCLENBQWxCOztBQUlBLGNBQU11RSxHQUFHLEdBQUcsS0FBSzVNLEtBQUwsQ0FBV3VKLGFBQVgsR0FDUjJCLFNBQVMsR0FBRyxDQURKLEdBRVIzRSxJQUFJLENBQUMrQixHQUFMLENBQVM0QyxTQUFTLEdBQUcsQ0FBckIsRUFBd0IsS0FBS3JJLDBCQUE3QixDQUZKOztBQUdBLGNBQU1vTSxRQUFRLEdBQUcsS0FBS2hILHNCQUFMLENBQTRCMkUsR0FBNUIsQ0FBakI7O0FBQ0EsY0FBTXNDLGdCQUFnQixHQUNwQkQsUUFBUSxDQUFDN0wsTUFBVCxHQUNBNkwsUUFBUSxDQUFDekYsTUFEVCxJQUVDd0YsU0FBUyxDQUFDNUwsTUFBVixHQUFtQjRMLFNBQVMsQ0FBQ3hGLE1BRjlCLENBREY7QUFJQTRDLFVBQUFBLEtBQUssQ0FBQ25DLElBQU4sQ0FDRSxxQkFBQyxJQUFEO0FBQXlCLFlBQUEsS0FBSyxvQ0FBSXFFLFNBQUosRUFBZ0JZLGdCQUFoQjtBQUE5QixhQUFVLGNBQVYsQ0FERjtBQUdEO0FBQ0YsT0EvRkQsTUErRk8sSUFBSXZCLGtCQUFKLEVBQXdCO0FBQzdCLFlBQU1NLFFBQTJCLEdBQUtDLEtBQUssQ0FBQ0MsY0FBTixDQUNwQ1Isa0JBRG9DLElBR3BDQSxrQkFIb0MsR0FPcEMscUJBQUMsa0JBQUQsS0FQRjs7QUFTQXZCLFFBQUFBLEtBQUssQ0FBQ25DLElBQU4sQ0FDRWlFLEtBQUssQ0FBQ2lCLFlBQU4sQ0FBbUJsQixRQUFuQixFQUE0QjtBQUMxQnpOLFVBQUFBLEdBQUcsRUFBRSxRQURxQjtBQUUxQnNFLFVBQUFBLFFBQVEsRUFBRSxrQkFBQXNLLEtBQUssRUFBSTtBQUNqQixZQUFBLE1BQUksQ0FBQ25LLGNBQUwsQ0FBb0JtSyxLQUFwQjs7QUFDQSxnQkFBSW5CLFFBQU8sQ0FBQ2pPLEtBQVIsQ0FBYzhFLFFBQWxCLEVBQTRCO0FBQzFCbUosY0FBQUEsUUFBTyxDQUFDak8sS0FBUixDQUFjOEUsUUFBZCxDQUF1QnNLLEtBQXZCO0FBQ0Q7QUFDRixXQVB5QjtBQVExQkMsVUFBQUEsS0FBSyxFQUFFMVEsVUFBVSxDQUFDeVAsT0FBWCxDQUFtQjdCLGNBQW5CLEVBQW1DMEIsUUFBTyxDQUFDak8sS0FBUixDQUFjcVAsS0FBakQ7QUFSbUIsU0FBNUIsQ0FERjtBQVlEOztBQUNELFVBQUl6QixtQkFBSixFQUF5QjtBQUN2QixZQUFNSyxTQUFPLEdBQUdDLEtBQUssQ0FBQ0MsY0FBTixDQUFxQlAsbUJBQXJCLElBQ2RBLG1CQURjLEdBS2QscUJBQUMsbUJBQUQsS0FMRjs7QUFPQXhCLFFBQUFBLEtBQUssQ0FBQ25DLElBQU4sQ0FDRSxxQkFBQywwREFBRDtBQUNFLFVBQUEsT0FBTyxFQUFFLEtBQUs3RSxpQkFBTCxFQURYO0FBQUEsb0JBR0UscUJBQUMsSUFBRDtBQUNFLFlBQUEsUUFBUSxFQUFFLEtBQUtGLGVBRGpCO0FBRUUsWUFBQSxLQUFLLEVBQUV2RyxVQUFVLENBQUN5UCxPQUFYLENBQ0w3QixjQURLLEVBRUwsS0FBS3ZNLEtBQUwsQ0FBV3NQLHdCQUZOLENBRlQ7QUFBQSxzQkFRSXJCO0FBUko7QUFIRixXQUVNLFNBRk4sQ0FERjtBQWlCRDs7QUFDRCxVQUFNc0IsV0FBVyw4QkFDWixLQUFLdlAsS0FETztBQUVmOEYsUUFBQUEsbUJBQW1CLEVBQUUsS0FBS1Isb0JBRlg7QUFHZlIsUUFBQUEsUUFBUSxFQUFFLEtBQUtOLFNBSEE7QUFJZjBCLFFBQUFBLFFBQVEsRUFBRSxLQUFLRCxTQUpBO0FBS2ZrQixRQUFBQSxpQkFBaUIsRUFBRSxLQUFLSCxrQkFMVDtBQU1mSyxRQUFBQSxlQUFlLEVBQUUsS0FBS0QsZ0JBTlA7QUFPZkcsUUFBQUEscUJBQXFCLEVBQUUsS0FBS0Qsc0JBUGI7QUFRZkcsUUFBQUEsbUJBQW1CLEVBQUUsS0FBS0Qsb0JBUlg7QUFTZjVILFFBQUFBLG1CQUFtQixFQUFFRCw0QkFBNEIsQ0FDL0MsS0FBS0ssS0FBTCxDQUFXSixtQkFEb0MsQ0FUbEM7QUFZZjRQLFFBQUFBLG1CQUFtQixFQUNqQixLQUFLeFAsS0FBTCxDQUFXd1AsbUJBQVgsS0FBbUN6QyxTQUFuQyxHQUNJLEtBQUsvTSxLQUFMLENBQVd3UCxtQkFEZixHQUVJLEtBQUt4UCxLQUFMLENBQVc2TixRQWZGO0FBZ0JmeEIsUUFBQUEsbUJBQW1CLEVBQW5CQSxtQkFoQmU7QUFpQmZnRCxRQUFBQSxLQUFLLEVBQUU5QyxjQUFjLEdBQ2pCLENBQUNBLGNBQUQsRUFBaUIsS0FBS3ZNLEtBQUwsQ0FBV3FQLEtBQTVCLENBRGlCLEdBRWpCLEtBQUtyUCxLQUFMLENBQVdxUDtBQW5CQSxRQUFqQjtBQXNCQSxXQUFLNU0sUUFBTCxHQUNFLEtBQUs3QixLQUFMLENBQVd5SCxJQUFYLEdBQWtCLEtBQUtySSxLQUFMLENBQVcySCxZQUFYLENBQXdCLEtBQUszSCxLQUFMLENBQVc0RyxJQUFuQyxJQUEyQyxDQUQvRDtBQUdBLFVBQU02SSxRQUFRLEdBQ1oscUJBQUMsc0RBQUQ7QUFDRSxRQUFBLEtBQUssRUFBRTtBQUNMeE8sVUFBQUEsT0FBTyxFQUFFLElBREo7QUFFTHlPLFVBQUFBLGdCQUFnQixFQUFFLEtBQUt6UCxpQkFGbEI7QUFHTGIsVUFBQUEsVUFBVSxFQUFFRCxtQkFBbUIsQ0FBQyxLQUFLYSxLQUFMLENBQVdaLFVBQVosQ0FIMUI7QUFJTGtCLFVBQUFBLHlCQUF5QixFQUFFLEtBQUtILDBCQUozQjtBQUtMaUssVUFBQUEsbUJBQW1CLEVBQUUsS0FBSzdKLG9CQUxyQjtBQU1MdUwsVUFBQUEscUJBQXFCLEVBQUUsS0FBS2pMLHNCQU52QjtBQU9MbUwsVUFBQUEsdUJBQXVCLEVBQUUsS0FBS3JLLHdCQVB6QjtBQVFMa0ssVUFBQUEsU0FBUyxFQUFFLEtBQUs4RCxhQUFMO0FBUk4sU0FEVDtBQUFBLGtCQVdHekIsS0FBSyxDQUFDaUIsWUFBTixDQUNDLENBQ0UsS0FBS25QLEtBQUwsQ0FBVzRQLHFCQUFYLElBQ0EsS0FBSzlMLDZCQUZQLEVBR0V5TCxXQUhGLENBREQsRUFLQztBQUNFbE8sVUFBQUEsR0FBRyxFQUFFLEtBQUt3QztBQURaLFNBTEQsRUFRQ3VJLEtBUkQ7QUFYSCxRQURGO0FBd0JBLFVBQUl5RCxHQUFHLEdBQUdKLFFBQVY7O0FBQ0EsVUFBSWxDLE9BQUosRUFBYTtBQUNYc0MsUUFBQUEsR0FBRyxHQUNELHFCQUFDLFVBQUQsQ0FBWSxPQUFaLENBQW9CLFFBQXBCO0FBQUEsb0JBQ0csa0JBQUFDLGFBQWEsRUFBSTtBQUNoQixnQkFDRUEsYUFBYSxJQUFJLElBQWpCLElBQ0EsQ0FBQ0EsYUFBYSxDQUFDMVEsVUFBZixLQUNFLENBQUNELG1CQUFtQixDQUFDLE1BQUksQ0FBQ2EsS0FBTCxDQUFXWixVQUFaLENBRnRCLElBR0EsQ0FBQyxNQUFJLENBQUNzRCxVQUFMLENBQWdCcU4sT0FIakIsSUFJQSxNQUFJLENBQUMxUCxPQUFMLElBQWdCLElBTGxCLEVBTUU7QUFFQWlCLGNBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUNFLG9GQUNFLG1GQURGLEdBRUUsMkNBSEo7QUFLQSxjQUFBLE1BQUksQ0FBQ21CLFVBQUwsQ0FBZ0JxTixPQUFoQixHQUEwQixJQUExQjtBQUNEOztBQUNELG1CQUFPTixRQUFQO0FBQ0Q7QUFsQkgsVUFERjtBQXNCRDs7QUFDRCxVQUFJLEtBQUt6UCxLQUFMLENBQVdnUSxLQUFmLEVBQXNCO0FBQ3BCLGVBQ0Usc0JBQUMsSUFBRDtBQUFNLFVBQUEsS0FBSyxFQUFFbEMsTUFBTSxDQUFDa0MsS0FBcEI7QUFBQSxxQkFDR0gsR0FESCxFQUVHLEtBQUtJLG1CQUFMLEVBRkg7QUFBQSxVQURGO0FBTUQsT0FQRCxNQU9PO0FBQ0wsZUFBT0osR0FBUDtBQUNEO0FBQ0Y7OztXQUVELDRCQUFtQkssU0FBbkIsRUFBcUM7QUFDbkMseUJBQTBCLEtBQUtsUSxLQUEvQjtBQUFBLFVBQU80RyxJQUFQLGdCQUFPQSxJQUFQO0FBQUEsVUFBYXVKLFNBQWIsZ0JBQWFBLFNBQWI7O0FBQ0EsVUFBSXZKLElBQUksS0FBS3NKLFNBQVMsQ0FBQ3RKLElBQW5CLElBQTJCdUosU0FBUyxLQUFLRCxTQUFTLENBQUNDLFNBQXZELEVBQWtFO0FBR2hFLGFBQUt2TSxrQkFBTCxDQUF3QjdCLE9BQXhCLENBQWdDLFVBQUFrRixLQUFLLEVBQUk7QUFDdkNBLFVBQUFBLEtBQUssQ0FBQ0MsaUJBQU4sQ0FBd0JrSixvQkFBeEI7QUFDRCxTQUZEO0FBR0Q7O0FBT0QsVUFBTUMsZUFBZSxHQUFHLEtBQUt6TixnQkFBN0I7O0FBQ0EsV0FBS21DLDRCQUFMOztBQUdBLFVBQUlzTCxlQUFKLEVBQXFCO0FBQ25CLGFBQUt6TixnQkFBTCxHQUF3QixLQUF4QjtBQUNEO0FBQ0Y7OztXQStDRCw2QkFBb0I7QUFDbEIsV0FBS2lFLGVBQUwsQ0FBcUJ5SixnQkFBckIsQ0FDRSxLQUFLdFEsS0FEUCxFQUVFLEtBQUtZLEtBRlAsRUFHRSxLQUFLVixjQUhQO0FBS0Q7OztXQXFDRCx1QkFBY3VFLENBQWQsRUFBaUJ4RCxPQUFqQixFQUEwQjRFLEtBQTFCLEVBQWlDO0FBQy9CLFVBQU1oQixNQUFNLEdBQUdKLENBQUMsQ0FBQ0csV0FBRixDQUFjQyxNQUE3QjtBQUNBLFVBQU0wTCxJQUFJLEdBQUc7QUFDWG5OLFFBQUFBLE1BQU0sRUFBRSxLQUFLa0QsYUFBTCxDQUFtQnpCLE1BQW5CLENBREc7QUFFWDJFLFFBQUFBLE1BQU0sRUFBRSxLQUFLN0UsYUFBTCxDQUFtQkUsTUFBbkIsQ0FGRztBQUdYZ0IsUUFBQUEsS0FBSyxFQUFMQSxLQUhXO0FBSVh0QixRQUFBQSxRQUFRLEVBQUU7QUFKQyxPQUFiO0FBTUEsVUFBTUQsSUFBSSxHQUFHLEtBQUtoQyxPQUFMLENBQWFyQixPQUFiLENBQWI7O0FBQ0EsVUFDRSxDQUFDcUQsSUFBRCxJQUNBaU0sSUFBSSxDQUFDbk4sTUFBTCxLQUFnQmtCLElBQUksQ0FBQ2xCLE1BRHJCLElBRUFtTixJQUFJLENBQUMvRyxNQUFMLEtBQWdCbEYsSUFBSSxDQUFDa0YsTUFGckIsSUFHQTNELEtBQUssS0FBS3ZCLElBQUksQ0FBQ3VCLEtBSmpCLEVBS0U7QUFDQSxhQUFLbkMsZ0JBQUwsSUFBeUI2TSxJQUFJLENBQUMvRyxNQUFMLElBQWVsRixJQUFJLEdBQUdBLElBQUksQ0FBQ2tGLE1BQVIsR0FBaUIsQ0FBcEMsQ0FBekI7QUFDQSxhQUFLN0YsbUJBQUwsSUFBNEJXLElBQUksR0FBRyxDQUFILEdBQU8sQ0FBdkM7QUFDQSxhQUFLbEMsa0JBQUwsR0FDRSxLQUFLc0IsZ0JBQUwsR0FBd0IsS0FBS0MsbUJBRC9CO0FBRUEsYUFBS3JCLE9BQUwsQ0FBYXJCLE9BQWIsSUFBd0JzUCxJQUF4QjtBQUNBLGFBQUsxTiwwQkFBTCxHQUFrQzBELElBQUksQ0FBQ0MsR0FBTCxDQUNoQyxLQUFLM0QsMEJBRDJCLEVBRWhDZ0QsS0FGZ0MsQ0FBbEM7O0FBSUEsYUFBS2QsNEJBQUw7QUFDRCxPQWhCRCxNQWdCTztBQUNMLGFBQUt6QyxPQUFMLENBQWFyQixPQUFiLEVBQXNCc0QsUUFBdEIsR0FBaUMsSUFBakM7QUFDRDs7QUFFRCxXQUFLWSxvQ0FBTCxDQUEwQ2xFLE9BQTFDOztBQUVBLFdBQUs4RixpQkFBTDs7QUFDQSxXQUFLSixvQkFBTCxDQUEwQixLQUFLM0csS0FBTCxDQUFXNEcsSUFBckM7QUFDRDs7O1dBU0QsOENBQXFDM0YsT0FBckMsRUFBNEQ7QUFDMUQsVUFBTTJILGFBQWEsR0FBRyxLQUFLNUgsd0JBQUwsQ0FBOEJMLEdBQTlCLENBQWtDTSxPQUFsQyxDQUF0Qjs7QUFDQSxVQUFJMkgsYUFBSixFQUFtQjtBQUNqQiw4REFBcUJBLGFBQXJCLDJDQUFvQztBQUFBLGNBQTNCRSxRQUEyQjs7QUFDbEMsY0FBTWhJLFNBQVMsR0FBRyxLQUFLSixpQkFBTCxDQUF1QkMsR0FBdkIsQ0FBMkJtSSxRQUEzQixDQUFsQjs7QUFDQWhJLFVBQUFBLFNBQVMsSUFDUEEsU0FBUyxDQUFDTyxHQURaLElBRUVQLFNBQVMsQ0FBQ08sR0FBVixDQUFjcUQscUNBQWQsRUFGRjtBQUdEO0FBQ0Y7QUFDRjs7O1dBRUQsaURBQThDO0FBQUE7O0FBRzVDLFVBQUk7QUFDRixZQUFJLENBQUMsS0FBS2xCLFVBQVYsRUFBc0I7QUFDcEI7QUFDRDs7QUFHRCxhQUFLQSxVQUFMLENBQWdCZ04sYUFBaEIsQ0FDRSxLQUFLblEsT0FBTCxDQUFhQyx5QkFBYixHQUF5Q2tMLFlBQXpDLEVBREYsRUFFRSxVQUFDYixDQUFELEVBQUlDLENBQUosRUFBT3JGLEtBQVAsRUFBY0MsTUFBZCxFQUF5QjtBQUN2QixVQUFBLE1BQUksQ0FBQ3pDLGdDQUFMLEdBQXdDLE1BQUksQ0FBQ3VELGFBQUwsQ0FBbUI7QUFBQ3FFLFlBQUFBLENBQUMsRUFBREEsQ0FBRDtBQUFJQyxZQUFBQSxDQUFDLEVBQURBO0FBQUosV0FBbkIsQ0FBeEM7QUFDQSxVQUFBLE1BQUksQ0FBQzFLLGNBQUwsQ0FBb0IrQyxhQUFwQixHQUFvQyxNQUFJLENBQUMwQixhQUFMLENBQW1CO0FBQ3JEWSxZQUFBQSxLQUFLLEVBQUxBLEtBRHFEO0FBRXJEQyxZQUFBQSxNQUFNLEVBQU5BO0FBRnFELFdBQW5CLENBQXBDOztBQUlBLGNBQU1pTCxhQUFhLEdBQUcsTUFBSSxDQUFDMUssMkJBQUwsQ0FDcEIsTUFBSSxDQUFDMUYsT0FBTCxDQUFhcVAsZ0JBQWIsRUFEb0IsQ0FBdEI7O0FBSUEsY0FBTWdCLGNBQWMsR0FDbEIsTUFBSSxDQUFDeFEsY0FBTCxDQUFvQnFELGFBQXBCLEtBQXNDa04sYUFBYSxDQUFDbE4sYUFBcEQsSUFDQSxNQUFJLENBQUNyRCxjQUFMLENBQW9Ca0QsTUFBcEIsS0FBK0JxTixhQUFhLENBQUNyTixNQUYvQzs7QUFJQSxjQUFJc04sY0FBSixFQUFvQjtBQUNsQixZQUFBLE1BQUksQ0FBQ3hRLGNBQUwsQ0FBb0JxRCxhQUFwQixHQUFvQ2tOLGFBQWEsQ0FBQ2xOLGFBQWxEO0FBQ0EsWUFBQSxNQUFJLENBQUNyRCxjQUFMLENBQW9Ca0QsTUFBcEIsR0FBNkJxTixhQUFhLENBQUNyTixNQUEzQzs7QUFJQSxZQUFBLE1BQUksQ0FBQ3BDLHdCQUFMLENBQThCZSxPQUE5QixDQUFzQyxVQUFBNkcsYUFBYSxFQUFJO0FBQ3JELGtCQUFJQSxhQUFKLEVBQW1CO0FBQ2pCLHNFQUFxQkEsYUFBckIsMkNBQW9DO0FBQUEsc0JBQTNCRSxRQUEyQjs7QUFDbEMsc0JBQU1oSSxTQUFTLEdBQUcsTUFBSSxDQUFDSixpQkFBTCxDQUF1QkMsR0FBdkIsQ0FBMkJtSSxRQUEzQixDQUFsQjs7QUFDQWhJLGtCQUFBQSxTQUFTLElBQ1BBLFNBQVMsQ0FBQ08sR0FEWixJQUVFUCxTQUFTLENBQUNPLEdBQVYsQ0FBY3FELHFDQUFkLEVBRkY7QUFHRDtBQUNGO0FBQ0YsYUFURDtBQVVEO0FBQ0YsU0FqQ0gsRUFrQ0UsVUFBQW5ELEtBQUssRUFBSTtBQUNQRCxVQUFBQSxPQUFPLENBQUNvSixJQUFSLENBQ0UsbUVBQ0UsOENBRko7QUFJRCxTQXZDSDtBQXlDRCxPQS9DRCxDQStDRSxPQUFPbkosS0FBUCxFQUFjO0FBQ2RELFFBQUFBLE9BQU8sQ0FBQ29KLElBQVIsQ0FDRSxzREFERixFQUVFbkosS0FBSyxDQUFDb1AsS0FGUjtBQUlEO0FBQ0Y7OztXQXFCRCw2QkFBNEI7QUFDMUIsYUFBTyxLQUFLaEYsV0FBTCxLQUFxQixTQUE1QjtBQUNEOzs7V0FXRCwrQkFBc0I7QUFDcEIsVUFBTWlGLFNBQVMsR0FDYixLQUFLMVEsY0FBTCxDQUFvQnFELGFBQXBCLElBQ0MsS0FBS3JELGNBQUwsQ0FBb0IrQyxhQUFwQixJQUFxQyxDQUR0QyxDQURGO0FBR0EsVUFBTTROLGNBQWMsR0FBRyxFQUF2QjtBQUNBLFVBQU0zRixTQUFTLEdBQUcsS0FBS2xMLEtBQUwsQ0FBVzJILFlBQVgsQ0FBd0IsS0FBSzNILEtBQUwsQ0FBVzRHLElBQW5DLENBQWxCOztBQUNBLFdBQUssSUFBSThCLEVBQUUsR0FBRyxDQUFkLEVBQWlCQSxFQUFFLEdBQUd3QyxTQUF0QixFQUFpQ3hDLEVBQUUsRUFBbkMsRUFBdUM7QUFDckMsWUFBTVcsS0FBSyxHQUFHLEtBQUtwQixzQkFBTCxDQUE0QlMsRUFBNUIsQ0FBZDs7QUFJQSxZQUFJVyxLQUFLLENBQUM5RSxRQUFWLEVBQW9CO0FBQ2xCc00sVUFBQUEsY0FBYyxDQUFDNUcsSUFBZixDQUFvQlosS0FBcEI7QUFDRDtBQUNGOztBQUNELFVBQU15SCxTQUFTLEdBQUcsS0FBSzdJLHNCQUFMLENBQTRCLEtBQUtySCxLQUFMLENBQVd3SCxLQUF2QyxFQUE4Q2hGLE1BQWhFOztBQUNBLFVBQU0yTixTQUFTLEdBQUcsS0FBSzlJLHNCQUFMLENBQTRCLEtBQUtySCxLQUFMLENBQVd5SCxJQUF2QyxDQUFsQjs7QUFDQSxVQUFNMkksU0FBUyxHQUFHRCxTQUFTLENBQUMzTixNQUFWLEdBQW1CMk4sU0FBUyxDQUFDdkgsTUFBN0IsR0FBc0NzSCxTQUF4RDtBQUNBLFVBQU1HLE1BQU0sR0FBRyxLQUFLL1EsY0FBTCxDQUFvQmtELE1BQW5DO0FBQ0EsVUFBTThOLE1BQU0sR0FBRyxLQUFLaFIsY0FBTCxDQUFvQnFELGFBQW5DO0FBRUEsYUFDRSxzQkFBQyxJQUFEO0FBQU0sUUFBQSxLQUFLLEVBQUUsQ0FBQ3VLLE1BQU0sQ0FBQ3FELGdCQUFSLEVBQTBCckQsTUFBTSxDQUFDc0QsWUFBakMsQ0FBYjtBQUFBLG1CQUNHUCxjQUFjLENBQUNoSCxHQUFmLENBQW1CLFVBQUN3SCxDQUFELEVBQUkzSSxFQUFKO0FBQUEsaUJBQ2xCLHFCQUFDLElBQUQ7QUFFRSxZQUFBLEtBQUssRUFBRSxDQUNMb0YsTUFBTSxDQUFDcUQsZ0JBREYsRUFFTHJELE1BQU0sQ0FBQ3dELGlCQUZGLEVBR0w7QUFDRUMsY0FBQUEsR0FBRyxFQUFFRixDQUFDLENBQUNqTyxNQUFGLEdBQVd3TixTQURsQjtBQUVFcEwsY0FBQUEsTUFBTSxFQUFFNkwsQ0FBQyxDQUFDN0gsTUFBRixHQUFXb0g7QUFGckIsYUFISztBQUZULGFBQ08sTUFBTWxJLEVBRGIsQ0FEa0I7QUFBQSxTQUFuQixDQURILEVBY0UscUJBQUMsSUFBRDtBQUNFLFVBQUEsS0FBSyxFQUFFLENBQ0xvRixNQUFNLENBQUNxRCxnQkFERixFQUVMckQsTUFBTSxDQUFDMEQscUJBRkYsRUFHTDtBQUNFRCxZQUFBQSxHQUFHLEVBQUVULFNBQVMsR0FBR0YsU0FEbkI7QUFFRXBMLFlBQUFBLE1BQU0sRUFBRXdMLFNBQVMsR0FBR0o7QUFGdEIsV0FISztBQURULFVBZEYsRUF3QkUscUJBQUMsSUFBRDtBQUNFLFVBQUEsS0FBSyxFQUFFLENBQ0w5QyxNQUFNLENBQUNxRCxnQkFERixFQUVMckQsTUFBTSxDQUFDMkQsb0JBRkYsRUFHTDtBQUNFRixZQUFBQSxHQUFHLEVBQUVOLE1BQU0sR0FBR0wsU0FEaEI7QUFFRXBMLFlBQUFBLE1BQU0sRUFBRTBMLE1BQU0sR0FBR047QUFGbkIsV0FISztBQURULFVBeEJGO0FBQUEsUUFERjtBQXFDRDs7O1dBRUQsdUJBQ0U1SyxPQURGLEVBTVU7QUFDUixhQUFPLENBQUM3RyxtQkFBbUIsQ0FBQyxLQUFLYSxLQUFMLENBQVdaLFVBQVosQ0FBcEIsR0FDSDRHLE9BQU8sQ0FBQ1IsTUFETCxHQUVIUSxPQUFPLENBQUNULEtBRlo7QUFHRDs7O1dBRUQsdUJBQ0VTLE9BREYsRUFNVTtBQUNSLGFBQU8sQ0FBQzdHLG1CQUFtQixDQUFDLEtBQUthLEtBQUwsQ0FBV1osVUFBWixDQUFwQixHQUE4QzRHLE9BQU8sQ0FBQzRFLENBQXRELEdBQTBENUUsT0FBTyxDQUFDMkUsQ0FBekU7QUFDRDs7O1dBRUQsa0NBQXlCO0FBQ3ZCLDBCQUtJLEtBQUszSyxLQUxUO0FBQUEsVUFDRTRHLElBREYsaUJBQ0VBLElBREY7QUFBQSxVQUVFZSxZQUZGLGlCQUVFQSxZQUZGO0FBQUEsVUFHRStKLFlBSEYsaUJBR0VBLFlBSEY7QUFBQSxVQUlFaFMscUJBSkYsaUJBSUVBLHFCQUpGO0FBTUEsa0NBQStDLEtBQUtRLGNBQXBEO0FBQUEsVUFBTytDLGFBQVAseUJBQU9BLGFBQVA7QUFBQSxVQUFzQk0sYUFBdEIseUJBQXNCQSxhQUF0QjtBQUFBLFVBQXFDSCxNQUFyQyx5QkFBcUNBLE1BQXJDO0FBQ0EsVUFBTThFLGVBQWUsR0FBR2pGLGFBQWEsR0FBR00sYUFBaEIsR0FBZ0NILE1BQXhEO0FBQ0EsVUFBTXVPLFNBQVMsR0FDYmpTLHFCQUFxQixJQUFJLElBQXpCLEdBQWdDQSxxQkFBcUIsR0FBRzZELGFBQXhELEdBQXdFLENBRDFFOztBQUVBLFVBQ0VtTyxZQUFZLElBQ1osS0FBSzlRLEtBQUwsQ0FBV3lILElBQVgsS0FBb0JWLFlBQVksQ0FBQ2YsSUFBRCxDQUFaLEdBQXFCLENBRHpDLElBRUFzQixlQUFlLEdBQUd5SixTQUZsQixJQUdBLEtBQUt6UixjQUFMLENBQW9CK0MsYUFBcEIsS0FBc0MsS0FBS1Esd0JBSjdDLEVBS0U7QUFFQSxhQUFLQSx3QkFBTCxHQUFnQyxLQUFLdkQsY0FBTCxDQUFvQitDLGFBQXBEO0FBQ0F5TyxRQUFBQSxZQUFZLENBQUM7QUFBQ3hKLFVBQUFBLGVBQWUsRUFBZkE7QUFBRCxTQUFELENBQVo7QUFDRCxPQVRELE1BU08sSUFBSUEsZUFBZSxHQUFHeUosU0FBdEIsRUFBaUM7QUFHdEMsYUFBS2xPLHdCQUFMLEdBQWdDLENBQWhDO0FBQ0Q7QUFDRjs7O1dBdUhELHdDQUErQjtBQUM3Qix5QkFBc0IsS0FBSzdDLEtBQTNCO0FBQUEsVUFBT3dILEtBQVAsZ0JBQU9BLEtBQVA7QUFBQSxVQUFjQyxJQUFkLGdCQUFjQSxJQUFkO0FBQ0Esa0NBQTBDLEtBQUtuSSxjQUEvQztBQUFBLFVBQU9rRCxNQUFQLHlCQUFPQSxNQUFQO0FBQUEsVUFBZUcsYUFBZix5QkFBZUEsYUFBZjtBQUFBLFVBQThCRCxRQUE5Qix5QkFBOEJBLFFBQTlCO0FBQ0EsVUFBTTRILFNBQVMsR0FBRyxLQUFLbEwsS0FBTCxDQUFXMkgsWUFBWCxDQUF3QixLQUFLM0gsS0FBTCxDQUFXNEcsSUFBbkMsQ0FBbEI7QUFDQSxVQUFJZ0wsS0FBSyxHQUFHLEtBQVo7QUFDQSxVQUFNbFMscUJBQXFCLEdBQUdELDhCQUE4QixDQUMxRCxLQUFLTyxLQUFMLENBQVdOLHFCQUQrQyxDQUE1RDtBQUdBLFVBQU1tUyxrQkFBa0IsR0FBSW5TLHFCQUFxQixHQUFHNkQsYUFBekIsR0FBMEMsQ0FBckU7O0FBR0EsVUFBSTZFLEtBQUssR0FBRyxDQUFaLEVBQWU7QUFDYixZQUFNMEosT0FBTyxHQUFHMU8sTUFBTSxHQUFHLEtBQUs2RSxzQkFBTCxDQUE0QkcsS0FBNUIsRUFBbUNoRixNQUE1RDs7QUFDQXdPLFFBQUFBLEtBQUssR0FDSEEsS0FBSyxJQUFJRSxPQUFPLEdBQUcsQ0FBbkIsSUFBeUJ4TyxRQUFRLEdBQUcsQ0FBQyxDQUFaLElBQWlCd08sT0FBTyxHQUFHRCxrQkFEdEQ7QUFFRDs7QUFHRCxVQUFJeEosSUFBSSxHQUFHNkMsU0FBUyxHQUFHLENBQXZCLEVBQTBCO0FBQ3hCLFlBQU02RyxVQUFVLEdBQ2QsS0FBSzlKLHNCQUFMLENBQTRCSSxJQUE1QixFQUFrQ2pGLE1BQWxDLElBQTRDQSxNQUFNLEdBQUdHLGFBQXJELENBREY7QUFFQXFPLFFBQUFBLEtBQUssR0FDSEEsS0FBSyxJQUNMRyxVQUFVLEdBQUcsQ0FEYixJQUVDek8sUUFBUSxHQUFHLENBQVgsSUFBZ0J5TyxVQUFVLEdBQUdGLGtCQUhoQztBQUlEOztBQVFELFVBQ0VELEtBQUssS0FDSixLQUFLeFAsa0JBQUwsSUFBMkIsS0FBS3BDLEtBQUwsQ0FBV3VKLGFBRGxDLENBQUwsSUFFQSxDQUFDLEtBQUszRyxnQkFIUixFQUlFO0FBQ0EsYUFBS0EsZ0JBQUwsR0FBd0IsSUFBeEI7O0FBR0EsYUFBSzhHLDJCQUFMLENBQWlDdUMsT0FBakMsQ0FBeUM7QUFBQ0MsVUFBQUEsS0FBSyxFQUFFO0FBQVIsU0FBekM7O0FBQ0EsYUFBS3hFLG9CQUFMOztBQUNBO0FBQ0QsT0FYRCxNQVdPO0FBQ0wsYUFBS2dDLDJCQUFMLENBQWlDc0ksUUFBakM7QUFDRDtBQUNGOzs7V0E4TEQsOEJBQXFCcEwsSUFBckIsRUFBZ0M7QUFBQTs7QUFDOUIsVUFBT2UsWUFBUCxHQUF1QixLQUFLM0gsS0FBNUIsQ0FBTzJILFlBQVA7O0FBRUEsV0FBSy9ELGtCQUFMLENBQXdCN0IsT0FBeEIsQ0FBZ0MsVUFBQWtGLEtBQUssRUFBSTtBQUN2Q0EsUUFBQUEsS0FBSyxDQUFDQyxpQkFBTixDQUF3QitLLFFBQXhCLENBQ0V0SyxZQUFZLENBQUNmLElBQUQsQ0FEZCxFQUVFLE1BQUksQ0FBQzFHLGNBQUwsQ0FBb0JrRCxNQUZ0QixFQUdFLE1BQUksQ0FBQ2xELGNBQUwsQ0FBb0JxRCxhQUh0QixFQUlFLE1BQUksQ0FBQytGLGdCQUpQLEVBS0UsTUFBSSxDQUFDTixnQkFMUCxFQU1FL0IsS0FBSyxDQUFDK0Msc0JBTlIsRUFPRSxNQUFJLENBQUNwSixLQVBQO0FBU0QsT0FWRDtBQVdEOzs7V0FubUNELGtDQUFnQ2tCLFFBQWhDLEVBQWlEb1EsU0FBakQsRUFBMEU7QUFDeEUsVUFBT3RMLElBQVAsR0FBNkI5RSxRQUE3QixDQUFPOEUsSUFBUDtBQUFBLFVBQWFlLFlBQWIsR0FBNkI3RixRQUE3QixDQUFhNkYsWUFBYjtBQUNBLFVBQU1uSSxtQkFBbUIsR0FBR0QsNEJBQTRCLENBQ3REdUMsUUFBUSxDQUFDdEMsbUJBRDZDLENBQXhEO0FBS0EsYUFBTztBQUNMNEksUUFBQUEsS0FBSyxFQUFFN0IsSUFBSSxDQUFDQyxHQUFMLENBQ0wsQ0FESyxFQUVMRCxJQUFJLENBQUMrQixHQUFMLENBQVM0SixTQUFTLENBQUM5SixLQUFuQixFQUEwQlQsWUFBWSxDQUFDZixJQUFELENBQVosR0FBcUIsQ0FBckIsR0FBeUJwSCxtQkFBbkQsQ0FGSyxDQURGO0FBS0w2SSxRQUFBQSxJQUFJLEVBQUU5QixJQUFJLENBQUNDLEdBQUwsQ0FBUyxDQUFULEVBQVlELElBQUksQ0FBQytCLEdBQUwsQ0FBUzRKLFNBQVMsQ0FBQzdKLElBQW5CLEVBQXlCVixZQUFZLENBQUNmLElBQUQsQ0FBWixHQUFxQixDQUE5QyxDQUFaO0FBTEQsT0FBUDtBQU9EOzs7RUFwWjJCc0gsS0FBSyxDQUFDaUUsYTs7QUFBOUJwUyxlLENBQ0dxUyxXLEdBQTZDQyw4Qzs7SUFxaERoREMsWTs7Ozs7Ozs7Ozs7Ozs7O1dBSUoxUixLLEdBQVE7QUFDTjJSLE1BQUFBLGNBQWMsRUFBRTtBQUNkQyxRQUFBQSxXQUFXLEVBQUUsS0FEQztBQUVkQyxRQUFBQSxXQUFXLEVBQUUsT0FBS3pTLEtBQUwsQ0FBV21KO0FBRlY7QUFEVixLO1dBcUJSdUosVyxHQUFjO0FBQ1pDLE1BQUFBLFNBQVMsRUFBRSxxQkFBTTtBQUNmLDJCQUErQixPQUFLM1MsS0FBcEM7QUFBQSxZQUFPaUIsT0FBUCxnQkFBT0EsT0FBUDtBQUFBLFlBQWdCNEwsV0FBaEIsZ0JBQWdCQSxXQUFoQjs7QUFDQSxlQUFLN00sS0FBTCxDQUFXNFMsa0JBQVgsQ0FBOEIsQ0FBQzNSLE9BQUQsRUFBVTRMLFdBQVYsQ0FBOUIsRUFBc0Q7QUFDcEQyRixVQUFBQSxXQUFXLEVBQUU7QUFEdUMsU0FBdEQ7QUFHRCxPQU5XO0FBT1pLLE1BQUFBLFdBQVcsRUFBRSx1QkFBTTtBQUNqQiw0QkFBK0IsT0FBSzdTLEtBQXBDO0FBQUEsWUFBT2lCLE9BQVAsaUJBQU9BLE9BQVA7QUFBQSxZQUFnQjRMLFdBQWhCLGlCQUFnQkEsV0FBaEI7O0FBQ0EsZUFBSzdNLEtBQUwsQ0FBVzRTLGtCQUFYLENBQThCLENBQUMzUixPQUFELEVBQVU0TCxXQUFWLENBQTlCLEVBQXNEO0FBQ3BEMkYsVUFBQUEsV0FBVyxFQUFFO0FBRHVDLFNBQXREO0FBR0QsT0FaVztBQWFaTSxNQUFBQSxXQUFXLEVBQUUscUJBQUNDLE1BQUQsRUFBaUNqUixRQUFqQyxFQUFzRDtBQUNqRSw0QkFBK0IsT0FBSzlCLEtBQXBDO0FBQUEsWUFBT2lCLE9BQVAsaUJBQU9BLE9BQVA7QUFBQSxZQUFnQjRMLFdBQWhCLGlCQUFnQkEsV0FBaEI7O0FBQ0EsZUFBSzdNLEtBQUwsQ0FBVzRTLGtCQUFYLENBQ0UsQ0FBQ0csTUFBTSxLQUFLLFNBQVgsR0FBdUJsRyxXQUF2QixHQUFxQzVMLE9BQXRDLENBREYsRUFFRWEsUUFGRjtBQUlEO0FBbkJXLEs7Ozs7OztXQXNCZCw4QkFBcUJBLFFBQXJCLEVBQXVDO0FBQ3JDLFdBQUtpRyxRQUFMLENBQWMsVUFBQW5ILEtBQUs7QUFBQSxlQUFLO0FBQ3RCMlIsVUFBQUEsY0FBYyw2QkFBTTNSLEtBQUssQ0FBQzJSLGNBQVosRUFBK0J6USxRQUEvQjtBQURRLFNBQUw7QUFBQSxPQUFuQjtBQUdEOzs7V0FFRCxnQ0FBdUI7QUFDckIsV0FBSzlCLEtBQUwsQ0FBV2dULFNBQVgsQ0FBcUIsS0FBS2hULEtBQUwsQ0FBV2lCLE9BQWhDO0FBQ0Q7OztXQUVELHdCQUFlZ1MsVUFBZixFQUEyQkMsaUJBQTNCLEVBQThDL0osSUFBOUMsRUFBb0R0RCxLQUFwRCxFQUEyRDtBQUN6RCxVQUFJb04sVUFBVSxJQUFJQyxpQkFBbEIsRUFBcUM7QUFDbkM1UixRQUFBQSxPQUFPLENBQUNvSixJQUFSLENBQ0UsMEdBQ0UsOEJBRko7QUFJRDs7QUFFRCxVQUFJd0ksaUJBQUosRUFBdUI7QUFPckIsZUFBT2hGLEtBQUssQ0FBQ2lGLGFBQU4sQ0FBb0JELGlCQUFwQixFQUF1QztBQUM1Qy9KLFVBQUFBLElBQUksRUFBSkEsSUFENEM7QUFFNUN0RCxVQUFBQSxLQUFLLEVBQUxBLEtBRjRDO0FBRzVDdU4sVUFBQUEsVUFBVSxFQUFFLEtBQUtWO0FBSDJCLFNBQXZDLENBQVA7QUFLRDs7QUFFRCxVQUFJTyxVQUFKLEVBQWdCO0FBQ2QsZUFBT0EsVUFBVSxDQUFDO0FBQ2hCOUosVUFBQUEsSUFBSSxFQUFKQSxJQURnQjtBQUVoQnRELFVBQUFBLEtBQUssRUFBTEEsS0FGZ0I7QUFHaEJ1TixVQUFBQSxVQUFVLEVBQUUsS0FBS1Y7QUFIRCxTQUFELENBQWpCO0FBS0Q7O0FBRUQxVCxNQUFBQSxTQUFTLENBQ1AsS0FETyxFQUVQLGlHQUZPLENBQVQ7QUFJRDs7O1dBRUQsa0JBQVM7QUFDUCwwQkFTSSxLQUFLZ0IsS0FUVDtBQUFBLFVBQ0V3TSxxQkFERixpQkFDRUEscUJBREY7QUFBQSxVQUVFQyxzQkFGRixpQkFFRUEsc0JBRkY7QUFBQSxVQUdFNEcsY0FIRixpQkFHRUEsY0FIRjtBQUFBLFVBSUVqVSxVQUpGLGlCQUlFQSxVQUpGO0FBQUEsVUFLRStKLElBTEYsaUJBS0VBLElBTEY7QUFBQSxVQU1FdEQsS0FORixpQkFNRUEsS0FORjtBQUFBLFVBT0UwRyxjQVBGLGlCQU9FQSxjQVBGO0FBQUEsVUFRRStHLFdBUkYsaUJBUUVBLFdBUkY7QUFVQSxVQUFPTCxVQUFQLEdBQXVESyxXQUF2RCxDQUFPTCxVQUFQO0FBQUEsVUFBbUIxSixhQUFuQixHQUF1RCtKLFdBQXZELENBQW1CL0osYUFBbkI7QUFBQSxVQUFrQzJKLGlCQUFsQyxHQUF1REksV0FBdkQsQ0FBa0NKLGlCQUFsQzs7QUFDQSxVQUFNakYsT0FBTyxHQUFHLEtBQUtzRixjQUFMLENBQ2ROLFVBRGMsRUFFZEMsaUJBRmMsRUFHZC9KLElBSGMsRUFJZHRELEtBSmMsQ0FBaEI7O0FBT0EsVUFBTWYsUUFBUSxHQUlaeUUsYUFBYSxJQUFJLENBQUMrSixXQUFXLENBQUN0RCxLQUE5QixJQUF1QyxDQUFDcUQsY0FBYyxDQUFDRyxPQUFmLEVBQXhDLEdBQ0l6RyxTQURKLEdBRUksS0FBSy9NLEtBQUwsQ0FBVzhFLFFBTmpCO0FBU0EsVUFBTTJPLGFBQWEsR0FBR2hILHNCQUFzQixJQUMxQyxxQkFBQyxzQkFBRCw2QkFBNEIsS0FBSzdMLEtBQUwsQ0FBVzJSLGNBQXZDLEVBREY7QUFHQSxVQUFNbUIsU0FBUyxHQUFHbkgsY0FBYyxHQUM1Qm5OLFVBQVUsR0FDUixDQUFDME8sTUFBTSxDQUFDNkYsVUFBUixFQUFvQnBILGNBQXBCLENBRFEsR0FFUixDQUFDdUIsTUFBTSxDQUFDOEYsYUFBUixFQUF1QnJILGNBQXZCLENBSDBCLEdBSTVCbk4sVUFBVSxHQUNWLENBQUMwTyxNQUFNLENBQUMrRixHQUFSLEVBQWF0SCxjQUFiLENBRFUsR0FFVkEsY0FOSjtBQU9BLFVBQU11SCxNQUFNLEdBQUcsQ0FBQ3RILHFCQUFELEdBSWIsc0JBQUMsSUFBRDtBQUFNLFFBQUEsS0FBSyxFQUFFa0gsU0FBYjtBQUF3QixRQUFBLFFBQVEsRUFBRTVPLFFBQWxDO0FBQUEsbUJBQ0dtSixPQURILEVBRUd3RixhQUZIO0FBQUEsUUFKYSxHQVNiLHNCQUFDLHFCQUFELDZCQUNNLEtBQUt6VCxLQURYO0FBRUUsUUFBQSxLQUFLLEVBQUUwVCxTQUZUO0FBR0UsUUFBQSxRQUFRLEVBQUU1TyxRQUhaO0FBQUEsbUJBSUdtSixPQUpILEVBS0d3RixhQUxIO0FBQUEsU0FURjtBQWtCQSxhQUNFLHFCQUFDLDBEQUFEO0FBQW9DLFFBQUEsT0FBTyxFQUFFLEtBQUt6VCxLQUFMLENBQVdpQixPQUF4RDtBQUFBLGtCQUNHNlM7QUFESCxRQURGO0FBS0Q7OztXQS9JRCxrQ0FDRTlULEtBREYsRUFFRWtTLFNBRkYsRUFHc0I7QUFDcEIsYUFBTztBQUNMSyxRQUFBQSxjQUFjLDZCQUNUTCxTQUFTLENBQUNLLGNBREQ7QUFFWkUsVUFBQUEsV0FBVyxFQUFFelMsS0FBSyxDQUFDbUo7QUFGUDtBQURULE9BQVA7QUFNRDs7O0VBckJ3QitFLEtBQUssQ0FBQzZGLFM7O0FBNkpqQyxTQUFTdlMsbUJBQVQsQ0FBNkJWLFNBQTdCLEVBT0c7QUFDRCxNQUFJa1QsS0FBSyxHQUNQLDZDQUNZbFQsU0FBUyxDQUFDMUIsVUFBVixHQUF1QixZQUF2QixHQUFzQyxVQURsRCxpQ0FFZ0IwQixTQUFTLENBQUNOLEdBRjFCLDhCQUdnQk0sU0FBUyxDQUFDRyxPQUgxQixDQURGO0FBTUEsTUFBSTRLLFNBQVMsR0FBRy9LLFNBQVMsQ0FBQ2lMLGVBQTFCOztBQUNBLFNBQU9GLFNBQVAsRUFBa0I7QUFDaEJtSSxJQUFBQSxLQUFLLElBQ0gsa0JBQWVuSSxTQUFTLENBQUN6TSxVQUFWLEdBQXVCLFlBQXZCLEdBQXNDLFVBQXJELGdDQUNnQnlNLFNBQVMsQ0FBQ0gsT0FEMUIsOEJBRWdCRyxTQUFTLENBQUM1SyxPQUYxQixDQURGO0FBSUE0SyxJQUFBQSxTQUFTLEdBQUdBLFNBQVMsQ0FBQ0QsTUFBdEI7QUFDRDs7QUFDRCxTQUFPb0ksS0FBUDtBQUNEOztBQUVELElBQU1sRyxNQUFNLEdBQUduUCxVQUFVLENBQUNzVixNQUFYLENBQWtCO0FBQy9CakcsRUFBQUEsa0JBQWtCLEVBQUU7QUFDbEJrRyxJQUFBQSxTQUFTLEVBQUUsQ0FBQztBQUFDQyxNQUFBQSxNQUFNLEVBQUUsQ0FBQztBQUFWLEtBQUQ7QUFETyxHQURXO0FBSS9CcEcsRUFBQUEsb0JBQW9CLEVBQUU7QUFDcEJtRyxJQUFBQSxTQUFTLEVBQUUsQ0FBQztBQUFDRSxNQUFBQSxNQUFNLEVBQUUsQ0FBQztBQUFWLEtBQUQ7QUFEUyxHQUpTO0FBTy9CUCxFQUFBQSxHQUFHLEVBQUU7QUFDSFEsSUFBQUEsYUFBYSxFQUFFO0FBRFosR0FQMEI7QUFVL0JWLEVBQUFBLFVBQVUsRUFBRTtBQUNWVSxJQUFBQSxhQUFhLEVBQUU7QUFETCxHQVZtQjtBQWEvQlQsRUFBQUEsYUFBYSxFQUFFO0FBQ2JTLElBQUFBLGFBQWEsRUFBRTtBQURGLEdBYmdCO0FBZ0IvQnJFLEVBQUFBLEtBQUssRUFBRTtBQUNMc0UsSUFBQUEsSUFBSSxFQUFFO0FBREQsR0FoQndCO0FBbUIvQm5ELEVBQUFBLGdCQUFnQixFQUFFO0FBQ2hCb0QsSUFBQUEsUUFBUSxFQUFFLFVBRE07QUFFaEJoRCxJQUFBQSxHQUFHLEVBQUUsQ0FGVztBQUdoQmlELElBQUFBLEtBQUssRUFBRTtBQUhTLEdBbkJhO0FBd0IvQnBELEVBQUFBLFlBQVksRUFBRTtBQUNacUQsSUFBQUEsTUFBTSxFQUFFLENBREk7QUFFWmxQLElBQUFBLEtBQUssRUFBRSxFQUZLO0FBR1ptUCxJQUFBQSxXQUFXLEVBQUUsTUFIRDtBQUlaQyxJQUFBQSxXQUFXLEVBQUU7QUFKRCxHQXhCaUI7QUE4Qi9CckQsRUFBQUEsaUJBQWlCLEVBQUU7QUFDakJzRCxJQUFBQSxJQUFJLEVBQUUsQ0FEVztBQUVqQkMsSUFBQUEsZUFBZSxFQUFFO0FBRkEsR0E5Qlk7QUFrQy9CckQsRUFBQUEscUJBQXFCLEVBQUU7QUFDckJvRCxJQUFBQSxJQUFJLEVBQUUsQ0FEZTtBQUVyQkYsSUFBQUEsV0FBVyxFQUFFLE9BRlE7QUFHckJDLElBQUFBLFdBQVcsRUFBRTtBQUhRLEdBbENRO0FBdUMvQmxELEVBQUFBLG9CQUFvQixFQUFFO0FBQ3BCbUQsSUFBQUEsSUFBSSxFQUFFLENBRGM7QUFFcEJGLElBQUFBLFdBQVcsRUFBRSxLQUZPO0FBR3BCQyxJQUFBQSxXQUFXLEVBQUU7QUFITztBQXZDUyxDQUFsQixDQUFmO0FBOENBRyxNQUFNLENBQUNDLE9BQVAsR0FBaUJoVixlQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5jb25zdCBCYXRjaGluYXRvciA9IHJlcXVpcmUoJy4uL0ludGVyYWN0aW9uL0JhdGNoaW5hdG9yJyk7XG5jb25zdCBGaWxsUmF0ZUhlbHBlciA9IHJlcXVpcmUoJy4vRmlsbFJhdGVIZWxwZXInKTtcbmNvbnN0IFJlYWN0TmF0aXZlID0gcmVxdWlyZSgnLi4vUmVuZGVyZXIvc2hpbXMvUmVhY3ROYXRpdmUnKTtcbmNvbnN0IFJlZnJlc2hDb250cm9sID0gcmVxdWlyZSgnLi4vQ29tcG9uZW50cy9SZWZyZXNoQ29udHJvbC9SZWZyZXNoQ29udHJvbCcpO1xuY29uc3QgU2Nyb2xsVmlldyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvU2Nyb2xsVmlldy9TY3JvbGxWaWV3Jyk7XG5jb25zdCBTdHlsZVNoZWV0ID0gcmVxdWlyZSgnLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0Jyk7XG5jb25zdCBWaWV3ID0gcmVxdWlyZSgnLi4vQ29tcG9uZW50cy9WaWV3L1ZpZXcnKTtcbmNvbnN0IFZpZXdhYmlsaXR5SGVscGVyID0gcmVxdWlyZSgnLi9WaWV3YWJpbGl0eUhlbHBlcicpO1xuXG5jb25zdCBmbGF0dGVuU3R5bGUgPSByZXF1aXJlKCcuLi9TdHlsZVNoZWV0L2ZsYXR0ZW5TdHlsZScpO1xuY29uc3QgaW5mb0xvZyA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9pbmZvTG9nJyk7XG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxuaW1wb3J0IHtcbiAga2V5RXh0cmFjdG9yIGFzIGRlZmF1bHRLZXlFeHRyYWN0b3IsXG4gIGNvbXB1dGVXaW5kb3dlZFJlbmRlckxpbWl0cyxcbn0gZnJvbSAnLi9WaXJ0dWFsaXplVXRpbHMnO1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdHlwZSB7U2Nyb2xsUmVzcG9uZGVyVHlwZX0gZnJvbSAnLi4vQ29tcG9uZW50cy9TY3JvbGxWaWV3L1Njcm9sbFZpZXcnO1xuaW1wb3J0IHR5cGUge1ZpZXdTdHlsZVByb3B9IGZyb20gJy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCc7XG5pbXBvcnQgdHlwZSB7XG4gIFZpZXdhYmlsaXR5Q29uZmlnLFxuICBWaWV3VG9rZW4sXG4gIFZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlyLFxufSBmcm9tICcuL1ZpZXdhYmlsaXR5SGVscGVyJztcbmltcG9ydCB7XG4gIFZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXIsXG4gIFZpcnR1YWxpemVkTGlzdENvbnRleHQsXG4gIFZpcnR1YWxpemVkTGlzdENvbnRleHRQcm92aWRlcixcbiAgdHlwZSBDaGlsZExpc3RTdGF0ZSxcbiAgdHlwZSBMaXN0RGVidWdJbmZvLFxufSBmcm9tICcuL1ZpcnR1YWxpemVkTGlzdENvbnRleHQuanMnO1xuXG50eXBlIEl0ZW0gPSBhbnk7XG5cbmV4cG9ydCB0eXBlIFNlcGFyYXRvcnMgPSB7XG4gIGhpZ2hsaWdodDogKCkgPT4gdm9pZCxcbiAgdW5oaWdobGlnaHQ6ICgpID0+IHZvaWQsXG4gIHVwZGF0ZVByb3BzOiAoc2VsZWN0OiAnbGVhZGluZycgfCAndHJhaWxpbmcnLCBuZXdQcm9wczogT2JqZWN0KSA9PiB2b2lkLFxuICAuLi5cbn07XG5cbmV4cG9ydCB0eXBlIFJlbmRlckl0ZW1Qcm9wczxJdGVtVD4gPSB7XG4gIGl0ZW06IEl0ZW1ULFxuICBpbmRleDogbnVtYmVyLFxuICBzZXBhcmF0b3JzOiBTZXBhcmF0b3JzLFxuICAuLi5cbn07XG5cbmV4cG9ydCB0eXBlIFJlbmRlckl0ZW1UeXBlPEl0ZW1UPiA9IChcbiAgaW5mbzogUmVuZGVySXRlbVByb3BzPEl0ZW1UPixcbikgPT4gUmVhY3QuTm9kZTtcblxudHlwZSBWaWV3YWJpbGl0eUhlbHBlckNhbGxiYWNrVHVwbGUgPSB7XG4gIHZpZXdhYmlsaXR5SGVscGVyOiBWaWV3YWJpbGl0eUhlbHBlcixcbiAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZDogKGluZm86IHtcbiAgICB2aWV3YWJsZUl0ZW1zOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgIGNoYW5nZWQ6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgLi4uXG4gIH0pID0+IHZvaWQsXG4gIC4uLlxufTtcblxudHlwZSBSZXF1aXJlZFByb3BzID0ge3xcbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGFjY2Vzc29yIGZ1bmN0aW9ucyBhc3N1bWUgdGhpcyBpcyBhbiBBcnJheTx7a2V5OiBzdHJpbmd9IHwge2lkOiBzdHJpbmd9PiBidXQgeW91IGNhbiBvdmVycmlkZVxuICAgKiBnZXRJdGVtLCBnZXRJdGVtQ291bnQsIGFuZCBrZXlFeHRyYWN0b3IgdG8gaGFuZGxlIGFueSB0eXBlIG9mIGluZGV4LWJhc2VkIGRhdGEuXG4gICAqL1xuICBkYXRhPzogYW55LFxuICAvKipcbiAgICogQSBnZW5lcmljIGFjY2Vzc29yIGZvciBleHRyYWN0aW5nIGFuIGl0ZW0gZnJvbSBhbnkgc29ydCBvZiBkYXRhIGJsb2IuXG4gICAqL1xuICBnZXRJdGVtOiAoZGF0YTogYW55LCBpbmRleDogbnVtYmVyKSA9PiA/SXRlbSxcbiAgLyoqXG4gICAqIERldGVybWluZXMgaG93IG1hbnkgaXRlbXMgYXJlIGluIHRoZSBkYXRhIGJsb2IuXG4gICAqL1xuICBnZXRJdGVtQ291bnQ6IChkYXRhOiBhbnkpID0+IG51bWJlcixcbnx9O1xudHlwZSBPcHRpb25hbFByb3BzID0ge3xcbiAgcmVuZGVySXRlbT86ID9SZW5kZXJJdGVtVHlwZTxJdGVtPixcbiAgLyoqXG4gICAqIGBkZWJ1Z2Agd2lsbCB0dXJuIG9uIGV4dHJhIGxvZ2dpbmcgYW5kIHZpc3VhbCBvdmVybGF5cyB0byBhaWQgd2l0aCBkZWJ1Z2dpbmcgYm90aCB1c2FnZSBhbmRcbiAgICogaW1wbGVtZW50YXRpb24sIGJ1dCB3aXRoIGEgc2lnbmlmaWNhbnQgcGVyZiBoaXQuXG4gICAqL1xuICBkZWJ1Zz86ID9ib29sZWFuLFxuICAvKipcbiAgICogREVQUkVDQVRFRDogVmlydHVhbGl6YXRpb24gcHJvdmlkZXMgc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgYW5kIG1lbW9yeSBvcHRpbWl6YXRpb25zLCBidXQgZnVsbHlcbiAgICogdW5tb3VudHMgcmVhY3QgaW5zdGFuY2VzIHRoYXQgYXJlIG91dHNpZGUgb2YgdGhlIHJlbmRlciB3aW5kb3cuIFlvdSBzaG91bGQgb25seSBuZWVkIHRvIGRpc2FibGVcbiAgICogdGhpcyBmb3IgZGVidWdnaW5nIHB1cnBvc2VzLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICovXG4gIGRpc2FibGVWaXJ0dWFsaXphdGlvbj86ID9ib29sZWFuLFxuICAvKipcbiAgICogQSBtYXJrZXIgcHJvcGVydHkgZm9yIHRlbGxpbmcgdGhlIGxpc3QgdG8gcmUtcmVuZGVyIChzaW5jZSBpdCBpbXBsZW1lbnRzIGBQdXJlQ29tcG9uZW50YCkuIElmXG4gICAqIGFueSBvZiB5b3VyIGByZW5kZXJJdGVtYCwgSGVhZGVyLCBGb290ZXIsIGV0Yy4gZnVuY3Rpb25zIGRlcGVuZCBvbiBhbnl0aGluZyBvdXRzaWRlIG9mIHRoZVxuICAgKiBgZGF0YWAgcHJvcCwgc3RpY2sgaXQgaGVyZSBhbmQgdHJlYXQgaXQgaW1tdXRhYmx5LlxuICAgKi9cbiAgZXh0cmFEYXRhPzogYW55LFxuICAvLyBlLmcuIGhlaWdodCwgeVxuICBnZXRJdGVtTGF5b3V0PzogKFxuICAgIGRhdGE6IGFueSxcbiAgICBpbmRleDogbnVtYmVyLFxuICApID0+IHtcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIC4uLlxuICB9LFxuICBob3Jpem9udGFsPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBIb3cgbWFueSBpdGVtcyB0byByZW5kZXIgaW4gdGhlIGluaXRpYWwgYmF0Y2guIFRoaXMgc2hvdWxkIGJlIGVub3VnaCB0byBmaWxsIHRoZSBzY3JlZW4gYnV0IG5vdFxuICAgKiBtdWNoIG1vcmUuIE5vdGUgdGhlc2UgaXRlbXMgd2lsbCBuZXZlciBiZSB1bm1vdW50ZWQgYXMgcGFydCBvZiB0aGUgd2luZG93ZWQgcmVuZGVyaW5nIGluIG9yZGVyXG4gICAqIHRvIGltcHJvdmUgcGVyY2VpdmVkIHBlcmZvcm1hbmNlIG9mIHNjcm9sbC10by10b3AgYWN0aW9ucy5cbiAgICovXG4gIGluaXRpYWxOdW1Ub1JlbmRlcj86ID9udW1iZXIsXG4gIC8qKlxuICAgKiBJbnN0ZWFkIG9mIHN0YXJ0aW5nIGF0IHRoZSB0b3Agd2l0aCB0aGUgZmlyc3QgaXRlbSwgc3RhcnQgYXQgYGluaXRpYWxTY3JvbGxJbmRleGAuIFRoaXNcbiAgICogZGlzYWJsZXMgdGhlIFwic2Nyb2xsIHRvIHRvcFwiIG9wdGltaXphdGlvbiB0aGF0IGtlZXBzIHRoZSBmaXJzdCBgaW5pdGlhbE51bVRvUmVuZGVyYCBpdGVtc1xuICAgKiBhbHdheXMgcmVuZGVyZWQgYW5kIGltbWVkaWF0ZWx5IHJlbmRlcnMgdGhlIGl0ZW1zIHN0YXJ0aW5nIGF0IHRoaXMgaW5pdGlhbCBpbmRleC4gUmVxdWlyZXNcbiAgICogYGdldEl0ZW1MYXlvdXRgIHRvIGJlIGltcGxlbWVudGVkLlxuICAgKi9cbiAgaW5pdGlhbFNjcm9sbEluZGV4PzogP251bWJlcixcbiAgLyoqXG4gICAqIFJldmVyc2VzIHRoZSBkaXJlY3Rpb24gb2Ygc2Nyb2xsLiBVc2VzIHNjYWxlIHRyYW5zZm9ybXMgb2YgLTEuXG4gICAqL1xuICBpbnZlcnRlZD86ID9ib29sZWFuLFxuICBrZXlFeHRyYWN0b3I/OiA/KGl0ZW06IEl0ZW0sIGluZGV4OiBudW1iZXIpID0+IHN0cmluZyxcbiAgLyoqXG4gICAqIEVhY2ggY2VsbCBpcyByZW5kZXJlZCB1c2luZyB0aGlzIGVsZW1lbnQuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcyxcbiAgICogb3IgYSByZW5kZXIgZnVuY3Rpb24uIERlZmF1bHRzIHRvIHVzaW5nIFZpZXcuXG4gICAqL1xuICBDZWxsUmVuZGVyZXJDb21wb25lbnQ/OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LFxuICAvKipcbiAgICogUmVuZGVyZWQgaW4gYmV0d2VlbiBlYWNoIGl0ZW0sIGJ1dCBub3QgYXQgdGhlIHRvcCBvciBib3R0b20uIEJ5IGRlZmF1bHQsIGBoaWdobGlnaHRlZGAgYW5kXG4gICAqIGBsZWFkaW5nSXRlbWAgcHJvcHMgYXJlIHByb3ZpZGVkLiBgcmVuZGVySXRlbWAgcHJvdmlkZXMgYHNlcGFyYXRvcnMuaGlnaGxpZ2h0YC9gdW5oaWdobGlnaHRgXG4gICAqIHdoaWNoIHdpbGwgdXBkYXRlIHRoZSBgaGlnaGxpZ2h0ZWRgIHByb3AsIGJ1dCB5b3UgY2FuIGFsc28gYWRkIGN1c3RvbSBwcm9wcyB3aXRoXG4gICAqIGBzZXBhcmF0b3JzLnVwZGF0ZVByb3BzYC5cbiAgICovXG4gIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQ/OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LFxuICAvKipcbiAgICogVGFrZXMgYW4gaXRlbSBmcm9tIGBkYXRhYCBhbmQgcmVuZGVycyBpdCBpbnRvIHRoZSBsaXN0LiBFeGFtcGxlIHVzYWdlOlxuICAgKlxuICAgKiAgICAgPEZsYXRMaXN0XG4gICAqICAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQ9e1BsYXRmb3JtLk9TICE9PSAnYW5kcm9pZCcgJiYgKHtoaWdobGlnaHRlZH0pID0+IChcbiAgICogICAgICAgICA8VmlldyBzdHlsZT17W3N0eWxlLnNlcGFyYXRvciwgaGlnaGxpZ2h0ZWQgJiYge21hcmdpbkxlZnQ6IDB9XX0gLz5cbiAgICogICAgICAgKX1cbiAgICogICAgICAgZGF0YT17W3t0aXRsZTogJ1RpdGxlIFRleHQnLCBrZXk6ICdpdGVtMSd9XX1cbiAgICogICAgICAgTGlzdEl0ZW1Db21wb25lbnQ9eyh7aXRlbSwgc2VwYXJhdG9yc30pID0+IChcbiAgICogICAgICAgICA8VG91Y2hhYmxlSGlnaGxpZ2h0XG4gICAqICAgICAgICAgICBvblByZXNzPXsoKSA9PiB0aGlzLl9vblByZXNzKGl0ZW0pfVxuICAgKiAgICAgICAgICAgb25TaG93VW5kZXJsYXk9e3NlcGFyYXRvcnMuaGlnaGxpZ2h0fVxuICAgKiAgICAgICAgICAgb25IaWRlVW5kZXJsYXk9e3NlcGFyYXRvcnMudW5oaWdobGlnaHR9PlxuICAgKiAgICAgICAgICAgPFZpZXcgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSd9fT5cbiAgICogICAgICAgICAgICAgPFRleHQ+e2l0ZW0udGl0bGV9PC9UZXh0PlxuICAgKiAgICAgICAgICAgPC9WaWV3PlxuICAgKiAgICAgICAgIDwvVG91Y2hhYmxlSGlnaGxpZ2h0PlxuICAgKiAgICAgICApfVxuICAgKiAgICAgLz5cbiAgICpcbiAgICogUHJvdmlkZXMgYWRkaXRpb25hbCBtZXRhZGF0YSBsaWtlIGBpbmRleGAgaWYgeW91IG5lZWQgaXQsIGFzIHdlbGwgYXMgYSBtb3JlIGdlbmVyaWNcbiAgICogYHNlcGFyYXRvcnMudXBkYXRlUHJvcHNgIGZ1bmN0aW9uIHdoaWNoIGxldCdzIHlvdSBzZXQgd2hhdGV2ZXIgcHJvcHMgeW91IHdhbnQgdG8gY2hhbmdlIHRoZVxuICAgKiByZW5kZXJpbmcgb2YgZWl0aGVyIHRoZSBsZWFkaW5nIHNlcGFyYXRvciBvciB0cmFpbGluZyBzZXBhcmF0b3IgaW4gY2FzZSB0aGUgbW9yZSBjb21tb25cbiAgICogYGhpZ2hsaWdodGAgYW5kIGB1bmhpZ2hsaWdodGAgKHdoaWNoIHNldCB0aGUgYGhpZ2hsaWdodGVkOiBib29sZWFuYCBwcm9wKSBhcmUgaW5zdWZmaWNpZW50IGZvclxuICAgKiB5b3VyIHVzZS1jYXNlLlxuICAgKi9cbiAgTGlzdEl0ZW1Db21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBSZW5kZXJlZCB3aGVuIHRoZSBsaXN0IGlzIGVtcHR5LiBDYW4gYmUgYSBSZWFjdCBDb21wb25lbnQgQ2xhc3MsIGEgcmVuZGVyIGZ1bmN0aW9uLCBvclxuICAgKiBhIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAqL1xuICBMaXN0RW1wdHlDb21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBSZW5kZXJlZCBhdCB0aGUgYm90dG9tIG9mIGFsbCB0aGUgaXRlbXMuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcywgYSByZW5kZXIgZnVuY3Rpb24sIG9yXG4gICAqIGEgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIExpc3RGb290ZXJDb21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBTdHlsaW5nIGZvciBpbnRlcm5hbCBWaWV3IGZvciBMaXN0Rm9vdGVyQ29tcG9uZW50XG4gICAqL1xuICBMaXN0Rm9vdGVyQ29tcG9uZW50U3R5bGU/OiBWaWV3U3R5bGVQcm9wLFxuICAvKipcbiAgICogUmVuZGVyZWQgYXQgdGhlIHRvcCBvZiBhbGwgdGhlIGl0ZW1zLiBDYW4gYmUgYSBSZWFjdCBDb21wb25lbnQgQ2xhc3MsIGEgcmVuZGVyIGZ1bmN0aW9uLCBvclxuICAgKiBhIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAqL1xuICBMaXN0SGVhZGVyQ29tcG9uZW50PzogPyhSZWFjdC5Db21wb25lbnRUeXBlPGFueT4gfCBSZWFjdC5FbGVtZW50PGFueT4pLFxuICAvKipcbiAgICogU3R5bGluZyBmb3IgaW50ZXJuYWwgVmlldyBmb3IgTGlzdEhlYWRlckNvbXBvbmVudFxuICAgKi9cbiAgTGlzdEhlYWRlckNvbXBvbmVudFN0eWxlPzogVmlld1N0eWxlUHJvcCxcbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgbGlzdC4gSWYgdGhlcmUgYXJlIG11bHRpcGxlIFZpcnR1YWxpemVkTGlzdHMgYXQgdGhlIHNhbWUgbGV2ZWwgb2ZcbiAgICogbmVzdGluZyB3aXRoaW4gYW5vdGhlciBWaXJ0dWFsaXplZExpc3QsIHRoaXMga2V5IGlzIG5lY2Vzc2FyeSBmb3IgdmlydHVhbGl6YXRpb24gdG9cbiAgICogd29yayBwcm9wZXJseS5cbiAgICovXG4gIGxpc3RLZXk/OiBzdHJpbmcsXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmVuZGVyIGluIGVhY2ggaW5jcmVtZW50YWwgcmVuZGVyIGJhdGNoLiBUaGUgbW9yZSByZW5kZXJlZCBhdFxuICAgKiBvbmNlLCB0aGUgYmV0dGVyIHRoZSBmaWxsIHJhdGUsIGJ1dCByZXNwb25zaXZlbmVzcyBtYXkgc3VmZmVyIGJlY2F1c2UgcmVuZGVyaW5nIGNvbnRlbnQgbWF5XG4gICAqIGludGVyZmVyZSB3aXRoIHJlc3BvbmRpbmcgdG8gYnV0dG9uIHRhcHMgb3Igb3RoZXIgaW50ZXJhY3Rpb25zLlxuICAgKi9cbiAgbWF4VG9SZW5kZXJQZXJCYXRjaD86ID9udW1iZXIsXG4gIC8qKlxuICAgKiBDYWxsZWQgb25jZSB3aGVuIHRoZSBzY3JvbGwgcG9zaXRpb24gZ2V0cyB3aXRoaW4gYG9uRW5kUmVhY2hlZFRocmVzaG9sZGAgb2YgdGhlIHJlbmRlcmVkXG4gICAqIGNvbnRlbnQuXG4gICAqL1xuICBvbkVuZFJlYWNoZWQ/OiA/KGluZm86IHtkaXN0YW5jZUZyb21FbmQ6IG51bWJlciwgLi4ufSkgPT4gdm9pZCxcbiAgLyoqXG4gICAqIEhvdyBmYXIgZnJvbSB0aGUgZW5kIChpbiB1bml0cyBvZiB2aXNpYmxlIGxlbmd0aCBvZiB0aGUgbGlzdCkgdGhlIGJvdHRvbSBlZGdlIG9mIHRoZVxuICAgKiBsaXN0IG11c3QgYmUgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb250ZW50IHRvIHRyaWdnZXIgdGhlIGBvbkVuZFJlYWNoZWRgIGNhbGxiYWNrLlxuICAgKiBUaHVzIGEgdmFsdWUgb2YgMC41IHdpbGwgdHJpZ2dlciBgb25FbmRSZWFjaGVkYCB3aGVuIHRoZSBlbmQgb2YgdGhlIGNvbnRlbnQgaXNcbiAgICogd2l0aGluIGhhbGYgdGhlIHZpc2libGUgbGVuZ3RoIG9mIHRoZSBsaXN0LlxuICAgKi9cbiAgb25FbmRSZWFjaGVkVGhyZXNob2xkPzogP251bWJlcixcbiAgLyoqXG4gICAqIElmIHByb3ZpZGVkLCBhIHN0YW5kYXJkIFJlZnJlc2hDb250cm9sIHdpbGwgYmUgYWRkZWQgZm9yIFwiUHVsbCB0byBSZWZyZXNoXCIgZnVuY3Rpb25hbGl0eS4gTWFrZVxuICAgKiBzdXJlIHRvIGFsc28gc2V0IHRoZSBgcmVmcmVzaGluZ2AgcHJvcCBjb3JyZWN0bHkuXG4gICAqL1xuICBvblJlZnJlc2g/OiA/KCkgPT4gdm9pZCxcbiAgLyoqXG4gICAqIFVzZWQgdG8gaGFuZGxlIGZhaWx1cmVzIHdoZW4gc2Nyb2xsaW5nIHRvIGFuIGluZGV4IHRoYXQgaGFzIG5vdCBiZWVuIG1lYXN1cmVkIHlldC4gUmVjb21tZW5kZWRcbiAgICogYWN0aW9uIGlzIHRvIGVpdGhlciBjb21wdXRlIHlvdXIgb3duIG9mZnNldCBhbmQgYHNjcm9sbFRvYCBpdCwgb3Igc2Nyb2xsIGFzIGZhciBhcyBwb3NzaWJsZSBhbmRcbiAgICogdGhlbiB0cnkgYWdhaW4gYWZ0ZXIgbW9yZSBpdGVtcyBoYXZlIGJlZW4gcmVuZGVyZWQuXG4gICAqL1xuICBvblNjcm9sbFRvSW5kZXhGYWlsZWQ/OiA/KGluZm86IHtcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIGhpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXg6IG51bWJlcixcbiAgICBhdmVyYWdlSXRlbUxlbmd0aDogbnVtYmVyLFxuICAgIC4uLlxuICB9KSA9PiB2b2lkLFxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIHZpZXdhYmlsaXR5IG9mIHJvd3MgY2hhbmdlcywgYXMgZGVmaW5lZCBieSB0aGVcbiAgICogYHZpZXdhYmlsaXR5Q29uZmlnYCBwcm9wLlxuICAgKi9cbiAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZD86ID8oaW5mbzoge1xuICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgY2hhbmdlZDogQXJyYXk8Vmlld1Rva2VuPixcbiAgICAuLi5cbiAgfSkgPT4gdm9pZCxcbiAgcGVyc2lzdGVudFNjcm9sbGJhcj86ID9ib29sZWFuLFxuICAvKipcbiAgICogU2V0IHRoaXMgd2hlbiBvZmZzZXQgaXMgbmVlZGVkIGZvciB0aGUgbG9hZGluZyBpbmRpY2F0b3IgdG8gc2hvdyBjb3JyZWN0bHkuXG4gICAqL1xuICBwcm9ncmVzc1ZpZXdPZmZzZXQ/OiBudW1iZXIsXG4gIC8qKlxuICAgKiBBIGN1c3RvbSByZWZyZXNoIGNvbnRyb2wgZWxlbWVudC4gV2hlbiBzZXQsIGl0IG92ZXJyaWRlcyB0aGUgZGVmYXVsdFxuICAgKiA8UmVmcmVzaENvbnRyb2w+IGNvbXBvbmVudCBidWlsdCBpbnRlcm5hbGx5LiBUaGUgb25SZWZyZXNoIGFuZCByZWZyZXNoaW5nXG4gICAqIHByb3BzIGFyZSBhbHNvIGlnbm9yZWQuIE9ubHkgd29ya3MgZm9yIHZlcnRpY2FsIFZpcnR1YWxpemVkTGlzdC5cbiAgICovXG4gIHJlZnJlc2hDb250cm9sPzogP1JlYWN0LkVsZW1lbnQ8YW55PixcbiAgLyoqXG4gICAqIFNldCB0aGlzIHRydWUgd2hpbGUgd2FpdGluZyBmb3IgbmV3IGRhdGEgZnJvbSBhIHJlZnJlc2guXG4gICAqL1xuICByZWZyZXNoaW5nPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBOb3RlOiBtYXkgaGF2ZSBidWdzIChtaXNzaW5nIGNvbnRlbnQpIGluIHNvbWUgY2lyY3Vtc3RhbmNlcyAtIHVzZSBhdCB5b3VyIG93biByaXNrLlxuICAgKlxuICAgKiBUaGlzIG1heSBpbXByb3ZlIHNjcm9sbCBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgbGlzdHMuXG4gICAqL1xuICByZW1vdmVDbGlwcGVkU3Vidmlld3M/OiBib29sZWFuLFxuICAvKipcbiAgICogUmVuZGVyIGEgY3VzdG9tIHNjcm9sbCBjb21wb25lbnQsIGUuZy4gd2l0aCBhIGRpZmZlcmVudGx5IHN0eWxlZCBgUmVmcmVzaENvbnRyb2xgLlxuICAgKi9cbiAgcmVuZGVyU2Nyb2xsQ29tcG9uZW50PzogKHByb3BzOiBPYmplY3QpID0+IFJlYWN0LkVsZW1lbnQ8YW55PixcbiAgLyoqXG4gICAqIEFtb3VudCBvZiB0aW1lIGJldHdlZW4gbG93LXByaSBpdGVtIHJlbmRlciBiYXRjaGVzLCBlLmcuIGZvciByZW5kZXJpbmcgaXRlbXMgcXVpdGUgYSB3YXlzIG9mZlxuICAgKiBzY3JlZW4uIFNpbWlsYXIgZmlsbCByYXRlL3Jlc3BvbnNpdmVuZXNzIHRyYWRlb2ZmIGFzIGBtYXhUb1JlbmRlclBlckJhdGNoYC5cbiAgICovXG4gIHVwZGF0ZUNlbGxzQmF0Y2hpbmdQZXJpb2Q/OiA/bnVtYmVyLFxuICAvKipcbiAgICogU2VlIGBWaWV3YWJpbGl0eUhlbHBlcmAgZm9yIGZsb3cgdHlwZSBhbmQgZnVydGhlciBkb2N1bWVudGF0aW9uLlxuICAgKi9cbiAgdmlld2FiaWxpdHlDb25maWc/OiBWaWV3YWJpbGl0eUNvbmZpZyxcbiAgLyoqXG4gICAqIExpc3Qgb2YgVmlld2FiaWxpdHlDb25maWcvb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCBwYWlycy4gQSBzcGVjaWZpYyBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkXG4gICAqIHdpbGwgYmUgY2FsbGVkIHdoZW4gaXRzIGNvcnJlc3BvbmRpbmcgVmlld2FiaWxpdHlDb25maWcncyBjb25kaXRpb25zIGFyZSBtZXQuXG4gICAqL1xuICB2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnM/OiBBcnJheTxWaWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcj4sXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSB2aXNpYmxlIGFyZWEsIGluIHVuaXRzIG9mXG4gICAqIHZpc2libGUgbGVuZ3Rocy4gU28gaWYgeW91ciBsaXN0IGZpbGxzIHRoZSBzY3JlZW4sIHRoZW4gYHdpbmRvd1NpemU9ezIxfWAgKHRoZSBkZWZhdWx0KSB3aWxsXG4gICAqIHJlbmRlciB0aGUgdmlzaWJsZSBzY3JlZW4gYXJlYSBwbHVzIHVwIHRvIDEwIHNjcmVlbnMgYWJvdmUgYW5kIDEwIGJlbG93IHRoZSB2aWV3cG9ydC4gUmVkdWNpbmdcbiAgICogdGhpcyBudW1iZXIgd2lsbCByZWR1Y2UgbWVtb3J5IGNvbnN1bXB0aW9uIGFuZCBtYXkgaW1wcm92ZSBwZXJmb3JtYW5jZSwgYnV0IHdpbGwgaW5jcmVhc2UgdGhlXG4gICAqIGNoYW5jZSB0aGF0IGZhc3Qgc2Nyb2xsaW5nIG1heSByZXZlYWwgbW9tZW50YXJ5IGJsYW5rIGFyZWFzIG9mIHVucmVuZGVyZWQgY29udGVudC5cbiAgICovXG4gIHdpbmRvd1NpemU/OiA/bnVtYmVyLFxuICAvKipcbiAgICogVGhlIGxlZ2FjeSBpbXBsZW1lbnRhdGlvbiBpcyBubyBsb25nZXIgc3VwcG9ydGVkLlxuICAgKi9cbiAgbGVnYWN5SW1wbGVtZW50YXRpb24/OiBlbXB0eSxcbnx9O1xuXG50eXBlIFByb3BzID0ge3xcbiAgLi4uUmVhY3QuRWxlbWVudENvbmZpZzx0eXBlb2YgU2Nyb2xsVmlldz4sXG4gIC4uLlJlcXVpcmVkUHJvcHMsXG4gIC4uLk9wdGlvbmFsUHJvcHMsXG58fTtcblxubGV0IF91c2VkSW5kZXhGb3JLZXkgPSBmYWxzZTtcbmxldCBfa2V5bGVzc0l0ZW1Db21wb25lbnROYW1lOiBzdHJpbmcgPSAnJztcblxudHlwZSBTdGF0ZSA9IHtcbiAgZmlyc3Q6IG51bWJlcixcbiAgbGFzdDogbnVtYmVyLFxufTtcblxuLyoqXG4gKiBEZWZhdWx0IFByb3BzIEhlbHBlciBGdW5jdGlvbnNcbiAqIFVzZSB0aGUgZm9sbG93aW5nIGhlbHBlciBmdW5jdGlvbnMgZm9yIGRlZmF1bHQgdmFsdWVzXG4gKi9cblxuLy8gaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG5mdW5jdGlvbiBob3Jpem9udGFsT3JEZWZhdWx0KGhvcml6b250YWw6ID9ib29sZWFuKSB7XG4gIHJldHVybiBob3Jpem9udGFsID8/IGZhbHNlO1xufVxuXG4vLyBpbml0aWFsTnVtVG9SZW5kZXJPckRlZmF1bHQodGhpcy5wcm9wcy5pbml0aWFsTnVtVG9SZW5kZXJPckRlZmF1bHQpXG5mdW5jdGlvbiBpbml0aWFsTnVtVG9SZW5kZXJPckRlZmF1bHQoaW5pdGlhbE51bVRvUmVuZGVyOiA/bnVtYmVyKSB7XG4gIHJldHVybiBpbml0aWFsTnVtVG9SZW5kZXIgPz8gMTA7XG59XG5cbi8vIG1heFRvUmVuZGVyUGVyQmF0Y2hPckRlZmF1bHQodGhpcy5wcm9wcy5tYXhUb1JlbmRlclBlckJhdGNoKVxuZnVuY3Rpb24gbWF4VG9SZW5kZXJQZXJCYXRjaE9yRGVmYXVsdChtYXhUb1JlbmRlclBlckJhdGNoOiA/bnVtYmVyKSB7XG4gIHJldHVybiBtYXhUb1JlbmRlclBlckJhdGNoID8/IDEwO1xufVxuXG4vLyBvbkVuZFJlYWNoZWRUaHJlc2hvbGRPckRlZmF1bHQodGhpcy5wcm9wcy5vbkVuZFJlYWNoZWRUaHJlc2hvbGQpXG5mdW5jdGlvbiBvbkVuZFJlYWNoZWRUaHJlc2hvbGRPckRlZmF1bHQob25FbmRSZWFjaGVkVGhyZXNob2xkOiA/bnVtYmVyKSB7XG4gIHJldHVybiBvbkVuZFJlYWNoZWRUaHJlc2hvbGQgPz8gMjtcbn1cblxuLy8gc2Nyb2xsRXZlbnRUaHJvdHRsZU9yRGVmYXVsdCh0aGlzLnByb3BzLnNjcm9sbEV2ZW50VGhyb3R0bGUpXG5mdW5jdGlvbiBzY3JvbGxFdmVudFRocm90dGxlT3JEZWZhdWx0KHNjcm9sbEV2ZW50VGhyb3R0bGU6ID9udW1iZXIpIHtcbiAgcmV0dXJuIHNjcm9sbEV2ZW50VGhyb3R0bGUgPz8gNTA7XG59XG5cbi8vIHdpbmRvd1NpemVPckRlZmF1bHQodGhpcy5wcm9wcy53aW5kb3dTaXplKVxuZnVuY3Rpb24gd2luZG93U2l6ZU9yRGVmYXVsdCh3aW5kb3dTaXplOiA/bnVtYmVyKSB7XG4gIHJldHVybiB3aW5kb3dTaXplID8/IDIxO1xufVxuXG4vKipcbiAqIEJhc2UgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBtb3JlIGNvbnZlbmllbnQgW2A8RmxhdExpc3Q+YF0oaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9mbGF0bGlzdC5odG1sKVxuICogYW5kIFtgPFNlY3Rpb25MaXN0PmBdKGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3Mvc2VjdGlvbmxpc3QuaHRtbCkgY29tcG9uZW50cywgd2hpY2ggYXJlIGFsc28gYmV0dGVyXG4gKiBkb2N1bWVudGVkLiBJbiBnZW5lcmFsLCB0aGlzIHNob3VsZCBvbmx5IHJlYWxseSBiZSB1c2VkIGlmIHlvdSBuZWVkIG1vcmUgZmxleGliaWxpdHkgdGhhblxuICogYEZsYXRMaXN0YCBwcm92aWRlcywgZS5nLiBmb3IgdXNlIHdpdGggaW1tdXRhYmxlIGRhdGEgaW5zdGVhZCBvZiBwbGFpbiBhcnJheXMuXG4gKlxuICogVmlydHVhbGl6YXRpb24gbWFzc2l2ZWx5IGltcHJvdmVzIG1lbW9yeSBjb25zdW1wdGlvbiBhbmQgcGVyZm9ybWFuY2Ugb2YgbGFyZ2UgbGlzdHMgYnlcbiAqIG1haW50YWluaW5nIGEgZmluaXRlIHJlbmRlciB3aW5kb3cgb2YgYWN0aXZlIGl0ZW1zIGFuZCByZXBsYWNpbmcgYWxsIGl0ZW1zIG91dHNpZGUgb2YgdGhlIHJlbmRlclxuICogd2luZG93IHdpdGggYXBwcm9wcmlhdGVseSBzaXplZCBibGFuayBzcGFjZS4gVGhlIHdpbmRvdyBhZGFwdHMgdG8gc2Nyb2xsaW5nIGJlaGF2aW9yLCBhbmQgaXRlbXNcbiAqIGFyZSByZW5kZXJlZCBpbmNyZW1lbnRhbGx5IHdpdGggbG93LXByaSAoYWZ0ZXIgYW55IHJ1bm5pbmcgaW50ZXJhY3Rpb25zKSBpZiB0aGV5IGFyZSBmYXIgZnJvbSB0aGVcbiAqIHZpc2libGUgYXJlYSwgb3Igd2l0aCBoaS1wcmkgb3RoZXJ3aXNlIHRvIG1pbmltaXplIHRoZSBwb3RlbnRpYWwgb2Ygc2VlaW5nIGJsYW5rIHNwYWNlLlxuICpcbiAqIFNvbWUgY2F2ZWF0czpcbiAqXG4gKiAtIEludGVybmFsIHN0YXRlIGlzIG5vdCBwcmVzZXJ2ZWQgd2hlbiBjb250ZW50IHNjcm9sbHMgb3V0IG9mIHRoZSByZW5kZXIgd2luZG93LiBNYWtlIHN1cmUgYWxsXG4gKiAgIHlvdXIgZGF0YSBpcyBjYXB0dXJlZCBpbiB0aGUgaXRlbSBkYXRhIG9yIGV4dGVybmFsIHN0b3JlcyBsaWtlIEZsdXgsIFJlZHV4LCBvciBSZWxheS5cbiAqIC0gVGhpcyBpcyBhIGBQdXJlQ29tcG9uZW50YCB3aGljaCBtZWFucyB0aGF0IGl0IHdpbGwgbm90IHJlLXJlbmRlciBpZiBgcHJvcHNgIHJlbWFpbiBzaGFsbG93LVxuICogICBlcXVhbC4gTWFrZSBzdXJlIHRoYXQgZXZlcnl0aGluZyB5b3VyIGByZW5kZXJJdGVtYCBmdW5jdGlvbiBkZXBlbmRzIG9uIGlzIHBhc3NlZCBhcyBhIHByb3BcbiAqICAgKGUuZy4gYGV4dHJhRGF0YWApIHRoYXQgaXMgbm90IGA9PT1gIGFmdGVyIHVwZGF0ZXMsIG90aGVyd2lzZSB5b3VyIFVJIG1heSBub3QgdXBkYXRlIG9uXG4gKiAgIGNoYW5nZXMuIFRoaXMgaW5jbHVkZXMgdGhlIGBkYXRhYCBwcm9wIGFuZCBwYXJlbnQgY29tcG9uZW50IHN0YXRlLlxuICogLSBJbiBvcmRlciB0byBjb25zdHJhaW4gbWVtb3J5IGFuZCBlbmFibGUgc21vb3RoIHNjcm9sbGluZywgY29udGVudCBpcyByZW5kZXJlZCBhc3luY2hyb25vdXNseVxuICogICBvZmZzY3JlZW4uIFRoaXMgbWVhbnMgaXQncyBwb3NzaWJsZSB0byBzY3JvbGwgZmFzdGVyIHRoYW4gdGhlIGZpbGwgcmF0ZSBhbmRzIG1vbWVudGFyaWx5IHNlZVxuICogICBibGFuayBjb250ZW50LiBUaGlzIGlzIGEgdHJhZGVvZmYgdGhhdCBjYW4gYmUgYWRqdXN0ZWQgdG8gc3VpdCB0aGUgbmVlZHMgb2YgZWFjaCBhcHBsaWNhdGlvbixcbiAqICAgYW5kIHdlIGFyZSB3b3JraW5nIG9uIGltcHJvdmluZyBpdCBiZWhpbmQgdGhlIHNjZW5lcy5cbiAqIC0gQnkgZGVmYXVsdCwgdGhlIGxpc3QgbG9va3MgZm9yIGEgYGtleWAgb3IgYGlkYCBwcm9wIG9uIGVhY2ggaXRlbSBhbmQgdXNlcyB0aGF0IGZvciB0aGUgUmVhY3Qga2V5LlxuICogICBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHByb3ZpZGUgYSBjdXN0b20gYGtleUV4dHJhY3RvcmAgcHJvcC5cbiAqIC0gQXMgYW4gZWZmb3J0IHRvIHJlbW92ZSBkZWZhdWx0UHJvcHMsIHVzZSBoZWxwZXIgZnVuY3Rpb25zIHdoZW4gcmVmZXJlbmNpbmcgY2VydGFpbiBwcm9wc1xuICpcbiAqL1xuY2xhc3MgVmlydHVhbGl6ZWRMaXN0IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgc3RhdGljIGNvbnRleHRUeXBlOiB0eXBlb2YgVmlydHVhbGl6ZWRMaXN0Q29udGV4dCA9IFZpcnR1YWxpemVkTGlzdENvbnRleHQ7XG5cbiAgLy8gc2Nyb2xsVG9FbmQgbWF5IGJlIGphbmt5IHdpdGhvdXQgZ2V0SXRlbUxheW91dCBwcm9wXG4gIHNjcm9sbFRvRW5kKHBhcmFtcz86ID97YW5pbWF0ZWQ/OiA/Ym9vbGVhbiwgLi4ufSkge1xuICAgIGNvbnN0IGFuaW1hdGVkID0gcGFyYW1zID8gcGFyYW1zLmFuaW1hdGVkIDogdHJ1ZTtcbiAgICBjb25zdCB2ZXJ5TGFzdCA9IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSkgLSAxO1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHZlcnlMYXN0KTtcbiAgICBjb25zdCBvZmZzZXQgPSBNYXRoLm1heChcbiAgICAgIDAsXG4gICAgICBmcmFtZS5vZmZzZXQgK1xuICAgICAgICBmcmFtZS5sZW5ndGggK1xuICAgICAgICB0aGlzLl9mb290ZXJMZW5ndGggLVxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGgsXG4gICAgKTtcblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8gPT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnTm8gc2Nyb2xsVG8gbWV0aG9kIHByb3ZpZGVkLiBUaGlzIG1heSBiZSBiZWNhdXNlIHlvdSBoYXZlIHR3byBuZXN0ZWQgJyArXG4gICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdHMgd2l0aCB0aGUgc2FtZSBvcmllbnRhdGlvbiwgb3IgYmVjYXVzZSB5b3UgYXJlICcgK1xuICAgICAgICAgICd1c2luZyBhIGN1c3RvbSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCBpbXBsZW1lbnQgc2Nyb2xsVG8uJyxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvKFxuICAgICAgaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG4gICAgICAgID8ge3g6IG9mZnNldCwgYW5pbWF0ZWR9XG4gICAgICAgIDoge3k6IG9mZnNldCwgYW5pbWF0ZWR9LFxuICAgICk7XG4gIH1cblxuICAvLyBzY3JvbGxUb0luZGV4IG1heSBiZSBqYW5reSB3aXRob3V0IGdldEl0ZW1MYXlvdXQgcHJvcFxuICBzY3JvbGxUb0luZGV4KHBhcmFtczoge1xuICAgIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICB2aWV3T2Zmc2V0PzogbnVtYmVyLFxuICAgIHZpZXdQb3NpdGlvbj86IG51bWJlcixcbiAgICAuLi5cbiAgfSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRhdGEsXG4gICAgICBob3Jpem9udGFsLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgZ2V0SXRlbUxheW91dCxcbiAgICAgIG9uU2Nyb2xsVG9JbmRleEZhaWxlZCxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7YW5pbWF0ZWQsIGluZGV4LCB2aWV3T2Zmc2V0LCB2aWV3UG9zaXRpb259ID0gcGFyYW1zO1xuICAgIGludmFyaWFudChcbiAgICAgIGluZGV4ID49IDAsXG4gICAgICBgc2Nyb2xsVG9JbmRleCBvdXQgb2YgcmFuZ2U6IHJlcXVlc3RlZCBpbmRleCAke2luZGV4fSBidXQgbWluaW11bSBpcyAwYCxcbiAgICApO1xuICAgIGludmFyaWFudChcbiAgICAgIGdldEl0ZW1Db3VudChkYXRhKSA+PSAxLFxuICAgICAgYHNjcm9sbFRvSW5kZXggb3V0IG9mIHJhbmdlOiBpdGVtIGxlbmd0aCAke2dldEl0ZW1Db3VudChcbiAgICAgICAgZGF0YSxcbiAgICAgICl9IGJ1dCBtaW5pbXVtIGlzIDFgLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgaW5kZXggPCBnZXRJdGVtQ291bnQoZGF0YSksXG4gICAgICBgc2Nyb2xsVG9JbmRleCBvdXQgb2YgcmFuZ2U6IHJlcXVlc3RlZCBpbmRleCAke2luZGV4fSBpcyBvdXQgb2YgMCB0byAke2dldEl0ZW1Db3VudChcbiAgICAgICAgZGF0YSxcbiAgICAgICkgLSAxfWAsXG4gICAgKTtcbiAgICBpZiAoIWdldEl0ZW1MYXlvdXQgJiYgaW5kZXggPiB0aGlzLl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4KSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgICEhb25TY3JvbGxUb0luZGV4RmFpbGVkLFxuICAgICAgICAnc2Nyb2xsVG9JbmRleCBzaG91bGQgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGdldEl0ZW1MYXlvdXQgb3Igb25TY3JvbGxUb0luZGV4RmFpbGVkLCAnICtcbiAgICAgICAgICAnb3RoZXJ3aXNlIHRoZXJlIGlzIG5vIHdheSB0byBrbm93IHRoZSBsb2NhdGlvbiBvZiBvZmZzY3JlZW4gaW5kaWNlcyBvciBoYW5kbGUgZmFpbHVyZXMuJyxcbiAgICAgICk7XG4gICAgICBvblNjcm9sbFRvSW5kZXhGYWlsZWQoe1xuICAgICAgICBhdmVyYWdlSXRlbUxlbmd0aDogdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGgsXG4gICAgICAgIGhpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXg6IHRoaXMuX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXgsXG4gICAgICAgIGluZGV4LFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGluZGV4KTtcbiAgICBjb25zdCBvZmZzZXQgPVxuICAgICAgTWF0aC5tYXgoXG4gICAgICAgIDAsXG4gICAgICAgIGZyYW1lLm9mZnNldCAtXG4gICAgICAgICAgKHZpZXdQb3NpdGlvbiB8fCAwKSAqXG4gICAgICAgICAgICAodGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoIC0gZnJhbWUubGVuZ3RoKSxcbiAgICAgICkgLSAodmlld09mZnNldCB8fCAwKTtcblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8gPT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnTm8gc2Nyb2xsVG8gbWV0aG9kIHByb3ZpZGVkLiBUaGlzIG1heSBiZSBiZWNhdXNlIHlvdSBoYXZlIHR3byBuZXN0ZWQgJyArXG4gICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdHMgd2l0aCB0aGUgc2FtZSBvcmllbnRhdGlvbiwgb3IgYmVjYXVzZSB5b3UgYXJlICcgK1xuICAgICAgICAgICd1c2luZyBhIGN1c3RvbSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCBpbXBsZW1lbnQgc2Nyb2xsVG8uJyxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvKFxuICAgICAgaG9yaXpvbnRhbCA/IHt4OiBvZmZzZXQsIGFuaW1hdGVkfSA6IHt5OiBvZmZzZXQsIGFuaW1hdGVkfSxcbiAgICApO1xuICB9XG5cbiAgLy8gc2Nyb2xsVG9JdGVtIG1heSBiZSBqYW5reSB3aXRob3V0IGdldEl0ZW1MYXlvdXQgcHJvcC4gUmVxdWlyZWQgbGluZWFyIHNjYW4gdGhyb3VnaCBpdGVtcyAtXG4gIC8vIHVzZSBzY3JvbGxUb0luZGV4IGluc3RlYWQgaWYgcG9zc2libGUuXG4gIHNjcm9sbFRvSXRlbShwYXJhbXM6IHtcbiAgICBhbmltYXRlZD86ID9ib29sZWFuLFxuICAgIGl0ZW06IEl0ZW0sXG4gICAgdmlld1Bvc2l0aW9uPzogbnVtYmVyLFxuICAgIC4uLlxuICB9KSB7XG4gICAgY29uc3Qge2l0ZW19ID0gcGFyYW1zO1xuICAgIGNvbnN0IHtkYXRhLCBnZXRJdGVtLCBnZXRJdGVtQ291bnR9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpdGVtQ291bnQgPSBnZXRJdGVtQ291bnQoZGF0YSk7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGl0ZW1Db3VudDsgaW5kZXgrKykge1xuICAgICAgaWYgKGdldEl0ZW0oZGF0YSwgaW5kZXgpID09PSBpdGVtKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh7Li4ucGFyYW1zLCBpbmRleH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRvIGEgc3BlY2lmaWMgY29udGVudCBwaXhlbCBvZmZzZXQgaW4gdGhlIGxpc3QuXG4gICAqXG4gICAqIFBhcmFtIGBvZmZzZXRgIGV4cGVjdHMgdGhlIG9mZnNldCB0byBzY3JvbGwgdG8uXG4gICAqIEluIGNhc2Ugb2YgYGhvcml6b250YWxgIGlzIHRydWUsIHRoZSBvZmZzZXQgaXMgdGhlIHgtdmFsdWUsXG4gICAqIGluIGFueSBvdGhlciBjYXNlIHRoZSBvZmZzZXQgaXMgdGhlIHktdmFsdWUuXG4gICAqXG4gICAqIFBhcmFtIGBhbmltYXRlZGAgKGB0cnVlYCBieSBkZWZhdWx0KSBkZWZpbmVzIHdoZXRoZXIgdGhlIGxpc3RcbiAgICogc2hvdWxkIGRvIGFuIGFuaW1hdGlvbiB3aGlsZSBzY3JvbGxpbmcuXG4gICAqL1xuICBzY3JvbGxUb09mZnNldChwYXJhbXM6IHthbmltYXRlZD86ID9ib29sZWFuLCBvZmZzZXQ6IG51bWJlciwgLi4ufSkge1xuICAgIGNvbnN0IHthbmltYXRlZCwgb2Zmc2V0fSA9IHBhcmFtcztcblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8gPT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnTm8gc2Nyb2xsVG8gbWV0aG9kIHByb3ZpZGVkLiBUaGlzIG1heSBiZSBiZWNhdXNlIHlvdSBoYXZlIHR3byBuZXN0ZWQgJyArXG4gICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdHMgd2l0aCB0aGUgc2FtZSBvcmllbnRhdGlvbiwgb3IgYmVjYXVzZSB5b3UgYXJlICcgK1xuICAgICAgICAgICd1c2luZyBhIGN1c3RvbSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCBpbXBsZW1lbnQgc2Nyb2xsVG8uJyxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvKFxuICAgICAgaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG4gICAgICAgID8ge3g6IG9mZnNldCwgYW5pbWF0ZWR9XG4gICAgICAgIDoge3k6IG9mZnNldCwgYW5pbWF0ZWR9LFxuICAgICk7XG4gIH1cblxuICByZWNvcmRJbnRlcmFjdGlvbigpIHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLmZvckVhY2godCA9PiB7XG4gICAgICB0LnZpZXdhYmlsaXR5SGVscGVyLnJlY29yZEludGVyYWN0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyh0aGlzLnByb3BzLmRhdGEpO1xuICB9XG5cbiAgZmxhc2hTY3JvbGxJbmRpY2F0b3JzKCkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3Njcm9sbFJlZi5mbGFzaFNjcm9sbEluZGljYXRvcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIGhhbmRsZSB0byB0aGUgdW5kZXJseWluZyBzY3JvbGwgcmVzcG9uZGVyLlxuICAgKiBOb3RlIHRoYXQgYHRoaXMuX3Njcm9sbFJlZmAgbWlnaHQgbm90IGJlIGEgYFNjcm9sbFZpZXdgLCBzbyB3ZVxuICAgKiBuZWVkIHRvIGNoZWNrIHRoYXQgaXQgcmVzcG9uZHMgdG8gYGdldFNjcm9sbFJlc3BvbmRlcmAgYmVmb3JlIGNhbGxpbmcgaXQuXG4gICAqL1xuICBnZXRTY3JvbGxSZXNwb25kZXIoKTogP1Njcm9sbFJlc3BvbmRlclR5cGUge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgJiYgdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbFJlc3BvbmRlcikge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxSZXNwb25kZXIoKTtcbiAgICB9XG4gIH1cblxuICBnZXRTY3JvbGxhYmxlTm9kZSgpOiA/bnVtYmVyIHtcbiAgICBpZiAodGhpcy5fc2Nyb2xsUmVmICYmIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxhYmxlTm9kZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxhYmxlTm9kZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUmVhY3ROYXRpdmUuZmluZE5vZGVIYW5kbGUodGhpcy5fc2Nyb2xsUmVmKTtcbiAgICB9XG4gIH1cblxuICBnZXRTY3JvbGxSZWYoKTpcbiAgICB8ID9SZWFjdC5FbGVtZW50UmVmPHR5cGVvZiBTY3JvbGxWaWV3PlxuICAgIHwgP1JlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIFZpZXc+IHtcbiAgICBpZiAodGhpcy5fc2Nyb2xsUmVmICYmIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxSZWYpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxSZWYuZ2V0U2Nyb2xsUmVmKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxSZWY7XG4gICAgfVxuICB9XG5cbiAgc2V0TmF0aXZlUHJvcHMocHJvcHM6IE9iamVjdCkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYpIHtcbiAgICAgIHRoaXMuX3Njcm9sbFJlZi5zZXROYXRpdmVQcm9wcyhwcm9wcyk7XG4gICAgfVxuICB9XG5cbiAgX2dldENlbGxLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0Py5jZWxsS2V5IHx8ICdyb290TGlzdCc7XG4gIH1cblxuICBfZ2V0TGlzdEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmxpc3RLZXkgfHwgdGhpcy5fZ2V0Q2VsbEtleSgpO1xuICB9XG5cbiAgX2dldERlYnVnSW5mbygpOiBMaXN0RGVidWdJbmZvIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGlzdEtleTogdGhpcy5fZ2V0TGlzdEtleSgpLFxuICAgICAgY2VsbEtleTogdGhpcy5fZ2V0Q2VsbEtleSgpLFxuICAgICAgaG9yaXpvbnRhbDogaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpLFxuICAgICAgcGFyZW50OiB0aGlzLmNvbnRleHQ/LmRlYnVnSW5mbyxcbiAgICB9O1xuICB9XG5cbiAgX2dldFNjcm9sbE1ldHJpY3MgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1ldHJpY3M7XG4gIH07XG5cbiAgaGFzTW9yZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGFzTW9yZTtcbiAgfVxuXG4gIF9nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBfZ2V0TmVzdGVkQ2hpbGRTdGF0ZSA9IChrZXk6IHN0cmluZyk6ID9DaGlsZExpc3RTdGF0ZSA9PiB7XG4gICAgY29uc3QgZXhpc3RpbmdDaGlsZERhdGEgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChrZXkpO1xuICAgIHJldHVybiBleGlzdGluZ0NoaWxkRGF0YSAmJiBleGlzdGluZ0NoaWxkRGF0YS5zdGF0ZTtcbiAgfTtcblxuICBfcmVnaXN0ZXJBc05lc3RlZENoaWxkID0gKGNoaWxkTGlzdDoge1xuICAgIGNlbGxLZXk6IHN0cmluZyxcbiAgICBrZXk6IHN0cmluZyxcbiAgICByZWY6IFZpcnR1YWxpemVkTGlzdCxcbiAgICBwYXJlbnREZWJ1Z0luZm86IExpc3REZWJ1Z0luZm8sXG4gICAgLi4uXG4gIH0pOiA/Q2hpbGRMaXN0U3RhdGUgPT4ge1xuICAgIC8vIFJlZ2lzdGVyIHRoZSBtYXBwaW5nIGJldHdlZW4gdGhpcyBjaGlsZCBrZXkgYW5kIHRoZSBjZWxsS2V5IGZvciBpdHMgY2VsbFxuICAgIGNvbnN0IGNoaWxkTGlzdHNJbkNlbGwgPVxuICAgICAgdGhpcy5fY2VsbEtleXNUb0NoaWxkTGlzdEtleXMuZ2V0KGNoaWxkTGlzdC5jZWxsS2V5KSB8fCBuZXcgU2V0KCk7XG4gICAgY2hpbGRMaXN0c0luQ2VsbC5hZGQoY2hpbGRMaXN0LmtleSk7XG4gICAgdGhpcy5fY2VsbEtleXNUb0NoaWxkTGlzdEtleXMuc2V0KGNoaWxkTGlzdC5jZWxsS2V5LCBjaGlsZExpc3RzSW5DZWxsKTtcbiAgICBjb25zdCBleGlzdGluZ0NoaWxkRGF0YSA9IHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZ2V0KGNoaWxkTGlzdC5rZXkpO1xuICAgIGlmIChleGlzdGluZ0NoaWxkRGF0YSAmJiBleGlzdGluZ0NoaWxkRGF0YS5yZWYgIT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICdBIFZpcnR1YWxpemVkTGlzdCBjb250YWlucyBhIGNlbGwgd2hpY2ggaXRzZWxmIGNvbnRhaW5zICcgK1xuICAgICAgICAgICdtb3JlIHRoYW4gb25lIFZpcnR1YWxpemVkTGlzdCBvZiB0aGUgc2FtZSBvcmllbnRhdGlvbiBhcyB0aGUgcGFyZW50ICcgK1xuICAgICAgICAgICdsaXN0LiBZb3UgbXVzdCBwYXNzIGEgdW5pcXVlIGxpc3RLZXkgcHJvcCB0byBlYWNoIHNpYmxpbmcgbGlzdC5cXG5cXG4nICtcbiAgICAgICAgICBkZXNjcmliZU5lc3RlZExpc3RzKHtcbiAgICAgICAgICAgIC4uLmNoaWxkTGlzdCxcbiAgICAgICAgICAgIC8vIFdlJ3JlIGNhbGxlZCBmcm9tIHRoZSBjaGlsZCdzIGNvbXBvbmVudERpZE1vdW50LCBzbyBpdCdzIHNhZmUgdG9cbiAgICAgICAgICAgIC8vIHJlYWQgdGhlIGNoaWxkJ3MgcHJvcHMgaGVyZSAoYWxiZWl0IHdlaXJkKS5cbiAgICAgICAgICAgIGhvcml6b250YWw6ICEhY2hpbGRMaXN0LnJlZi5wcm9wcy5ob3Jpem9udGFsLFxuICAgICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5zZXQoY2hpbGRMaXN0LmtleSwge1xuICAgICAgcmVmOiBjaGlsZExpc3QucmVmLFxuICAgICAgc3RhdGU6IG51bGwsXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5faGFzSW50ZXJhY3RlZCkge1xuICAgICAgY2hpbGRMaXN0LnJlZi5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH1cbiAgfTtcblxuICBfdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQgPSAoY2hpbGRMaXN0OiB7XG4gICAga2V5OiBzdHJpbmcsXG4gICAgc3RhdGU6IENoaWxkTGlzdFN0YXRlLFxuICAgIC4uLlxuICB9KTogdm9pZCA9PiB7XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5zZXQoY2hpbGRMaXN0LmtleSwge1xuICAgICAgcmVmOiBudWxsLFxuICAgICAgc3RhdGU6IGNoaWxkTGlzdC5zdGF0ZSxcbiAgICB9KTtcbiAgfTtcblxuICBzdGF0ZTogU3RhdGU7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIGludmFyaWFudChcbiAgICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgICAgIXByb3BzLm9uU2Nyb2xsIHx8ICFwcm9wcy5vblNjcm9sbC5fX2lzTmF0aXZlLFxuICAgICAgJ0NvbXBvbmVudHMgYmFzZWQgb24gVmlydHVhbGl6ZWRMaXN0IG11c3QgYmUgd3JhcHBlZCB3aXRoIEFuaW1hdGVkLmNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50ICcgK1xuICAgICAgICAndG8gc3VwcG9ydCBuYXRpdmUgb25TY3JvbGwgZXZlbnRzIHdpdGggdXNlTmF0aXZlRHJpdmVyJyxcbiAgICApO1xuICAgIGludmFyaWFudChcbiAgICAgIHdpbmRvd1NpemVPckRlZmF1bHQocHJvcHMud2luZG93U2l6ZSkgPiAwLFxuICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogVGhlIHdpbmRvd1NpemUgcHJvcCBtdXN0IGJlIHByZXNlbnQgYW5kIHNldCB0byBhIHZhbHVlIGdyZWF0ZXIgdGhhbiAwLicsXG4gICAgKTtcblxuICAgIHRoaXMuX2ZpbGxSYXRlSGVscGVyID0gbmV3IEZpbGxSYXRlSGVscGVyKHRoaXMuX2dldEZyYW1lTWV0cmljcyk7XG4gICAgdGhpcy5fdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIgPSBuZXcgQmF0Y2hpbmF0b3IoXG4gICAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyLFxuICAgICAgdGhpcy5wcm9wcy51cGRhdGVDZWxsc0JhdGNoaW5nUGVyaW9kID8/IDUwLFxuICAgICk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMpIHtcbiAgICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzID0gdGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMubWFwKFxuICAgICAgICBwYWlyID0+ICh7XG4gICAgICAgICAgdmlld2FiaWxpdHlIZWxwZXI6IG5ldyBWaWV3YWJpbGl0eUhlbHBlcihwYWlyLnZpZXdhYmlsaXR5Q29uZmlnKSxcbiAgICAgICAgICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiBwYWlyLm9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMucHVzaCh7XG4gICAgICAgIHZpZXdhYmlsaXR5SGVscGVyOiBuZXcgVmlld2FiaWxpdHlIZWxwZXIodGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZyksXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdXG4gICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IHRoaXMucHJvcHMub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBpbml0aWFsU3RhdGUgPSB7XG4gICAgICBmaXJzdDogdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggfHwgMCxcbiAgICAgIGxhc3Q6XG4gICAgICAgIE1hdGgubWluKFxuICAgICAgICAgIHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSksXG4gICAgICAgICAgKHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4IHx8IDApICtcbiAgICAgICAgICAgIGluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdCh0aGlzLnByb3BzLmluaXRpYWxOdW1Ub1JlbmRlciksXG4gICAgICAgICkgLSAxLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIGNvbnN0IHN0b3JlZFN0YXRlID0gdGhpcy5jb250ZXh0LmdldE5lc3RlZENoaWxkU3RhdGUodGhpcy5fZ2V0TGlzdEtleSgpKTtcbiAgICAgIGlmIChzdG9yZWRTdGF0ZSkge1xuICAgICAgICBpbml0aWFsU3RhdGUgPSBzdG9yZWRTdGF0ZTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0b3JlZFN0YXRlO1xuICAgICAgICB0aGlzLl9mcmFtZXMgPSBzdG9yZWRTdGF0ZS5mcmFtZXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgdGhpcy5jb250ZXh0LnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCh7XG4gICAgICAgIGNlbGxLZXk6IHRoaXMuX2dldENlbGxLZXkoKSxcbiAgICAgICAga2V5OiB0aGlzLl9nZXRMaXN0S2V5KCksXG4gICAgICAgIHJlZjogdGhpcyxcbiAgICAgICAgLy8gTk9URTogV2hlbiB0aGUgY2hpbGQgbW91bnRzIChoZXJlKSBpdCdzIG5vdCBuZWNlc3NhcmlseSBzYWZlIHRvIHJlYWRcbiAgICAgICAgLy8gdGhlIHBhcmVudCdzIHByb3BzLiBUaGlzIGlzIHdoeSB3ZSBleHBsaWNpdGx5IHByb3BhZ2F0ZSBkZWJ1Z0luZm9cbiAgICAgICAgLy8gXCJkb3duXCIgdmlhIGNvbnRleHQgYW5kIFwidXBcIiBhZ2FpbiB2aWEgdGhpcyBtZXRob2QgY2FsbCBvbiB0aGVcbiAgICAgICAgLy8gcGFyZW50LlxuICAgICAgICBwYXJlbnREZWJ1Z0luZm86IHRoaXMuY29udGV4dC5kZWJ1Z0luZm8sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIHRoaXMuY29udGV4dC51bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCh7XG4gICAgICAgIGtleTogdGhpcy5fZ2V0TGlzdEtleSgpLFxuICAgICAgICBzdGF0ZToge1xuICAgICAgICAgIGZpcnN0OiB0aGlzLnN0YXRlLmZpcnN0LFxuICAgICAgICAgIGxhc3Q6IHRoaXMuc3RhdGUubGFzdCxcbiAgICAgICAgICBmcmFtZXM6IHRoaXMuX2ZyYW1lcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKG51bGwpO1xuICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyLmRpc3Bvc2Uoe2Fib3J0OiB0cnVlfSk7XG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XG4gICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5kaXNwb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIuZGVhY3RpdmF0ZUFuZEZsdXNoKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5ld1Byb3BzOiBQcm9wcywgcHJldlN0YXRlOiBTdGF0ZSk6IFN0YXRlIHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbUNvdW50fSA9IG5ld1Byb3BzO1xuICAgIGNvbnN0IG1heFRvUmVuZGVyUGVyQmF0Y2ggPSBtYXhUb1JlbmRlclBlckJhdGNoT3JEZWZhdWx0KFxuICAgICAgbmV3UHJvcHMubWF4VG9SZW5kZXJQZXJCYXRjaCxcbiAgICApO1xuICAgIC8vIGZpcnN0IGFuZCBsYXN0IGNvdWxkIGJlIHN0YWxlIChlLmcuIGlmIGEgbmV3LCBzaG9ydGVyIGl0ZW1zIHByb3BzIGlzIHBhc3NlZCBpbiksIHNvIHdlIG1ha2VcbiAgICAvLyBzdXJlIHdlJ3JlIHJlbmRlcmluZyBhIHJlYXNvbmFibGUgcmFuZ2UgaGVyZS5cbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3Q6IE1hdGgubWF4KFxuICAgICAgICAwLFxuICAgICAgICBNYXRoLm1pbihwcmV2U3RhdGUuZmlyc3QsIGdldEl0ZW1Db3VudChkYXRhKSAtIDEgLSBtYXhUb1JlbmRlclBlckJhdGNoKSxcbiAgICAgICksXG4gICAgICBsYXN0OiBNYXRoLm1heCgwLCBNYXRoLm1pbihwcmV2U3RhdGUubGFzdCwgZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSkpLFxuICAgIH07XG4gIH1cblxuICBfcHVzaENlbGxzKFxuICAgIGNlbGxzOiBBcnJheTxPYmplY3Q+LFxuICAgIHN0aWNreUhlYWRlckluZGljZXM6IEFycmF5PG51bWJlcj4sXG4gICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wczogU2V0PG51bWJlcj4sXG4gICAgZmlyc3Q6IG51bWJlcixcbiAgICBsYXN0OiBudW1iZXIsXG4gICAgaW52ZXJzaW9uU3R5bGU6IFZpZXdTdHlsZVByb3AsXG4gICkge1xuICAgIGNvbnN0IHtcbiAgICAgIENlbGxSZW5kZXJlckNvbXBvbmVudCxcbiAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQsXG4gICAgICBkYXRhLFxuICAgICAgZ2V0SXRlbSxcbiAgICAgIGdldEl0ZW1Db3VudCxcbiAgICAgIGhvcml6b250YWwsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qgc3RpY2t5T2Zmc2V0ID0gdGhpcy5wcm9wcy5MaXN0SGVhZGVyQ29tcG9uZW50ID8gMSA6IDA7XG4gICAgY29uc3QgZW5kID0gZ2V0SXRlbUNvdW50KGRhdGEpIC0gMTtcbiAgICBsZXQgcHJldkNlbGxLZXk7XG4gICAgbGFzdCA9IE1hdGgubWluKGVuZCwgbGFzdCk7XG4gICAgZm9yIChsZXQgaWkgPSBmaXJzdDsgaWkgPD0gbGFzdDsgaWkrKykge1xuICAgICAgY29uc3QgaXRlbSA9IGdldEl0ZW0oZGF0YSwgaWkpO1xuICAgICAgY29uc3Qga2V5ID0gdGhpcy5fa2V5RXh0cmFjdG9yKGl0ZW0sIGlpKTtcbiAgICAgIHRoaXMuX2luZGljZXNUb0tleXMuc2V0KGlpLCBrZXkpO1xuICAgICAgaWYgKHN0aWNreUluZGljZXNGcm9tUHJvcHMuaGFzKGlpICsgc3RpY2t5T2Zmc2V0KSkge1xuICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLnB1c2goY2VsbHMubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgIDxDZWxsUmVuZGVyZXJcbiAgICAgICAgICBDZWxsUmVuZGVyZXJDb21wb25lbnQ9e0NlbGxSZW5kZXJlckNvbXBvbmVudH1cbiAgICAgICAgICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50PXtpaSA8IGVuZCA/IEl0ZW1TZXBhcmF0b3JDb21wb25lbnQgOiB1bmRlZmluZWR9XG4gICAgICAgICAgY2VsbEtleT17a2V5fVxuICAgICAgICAgIGZpbGxSYXRlSGVscGVyPXt0aGlzLl9maWxsUmF0ZUhlbHBlcn1cbiAgICAgICAgICBob3Jpem9udGFsPXtob3Jpem9udGFsfVxuICAgICAgICAgIGluZGV4PXtpaX1cbiAgICAgICAgICBpbnZlcnNpb25TdHlsZT17aW52ZXJzaW9uU3R5bGV9XG4gICAgICAgICAgaXRlbT17aXRlbX1cbiAgICAgICAgICBrZXk9e2tleX1cbiAgICAgICAgICBwcmV2Q2VsbEtleT17cHJldkNlbGxLZXl9XG4gICAgICAgICAgb25VcGRhdGVTZXBhcmF0b3JzPXt0aGlzLl9vblVwZGF0ZVNlcGFyYXRvcnN9XG4gICAgICAgICAgb25MYXlvdXQ9e2UgPT4gdGhpcy5fb25DZWxsTGF5b3V0KGUsIGtleSwgaWkpfVxuICAgICAgICAgIG9uVW5tb3VudD17dGhpcy5fb25DZWxsVW5tb3VudH1cbiAgICAgICAgICBwYXJlbnRQcm9wcz17dGhpcy5wcm9wc31cbiAgICAgICAgICByZWY9e3JlZiA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jZWxsUmVmc1trZXldID0gcmVmO1xuICAgICAgICAgIH19XG4gICAgICAgIC8+LFxuICAgICAgKTtcbiAgICAgIHByZXZDZWxsS2V5ID0ga2V5O1xuICAgIH1cbiAgfVxuXG4gIF9vblVwZGF0ZVNlcGFyYXRvcnMgPSAoa2V5czogQXJyYXk8P3N0cmluZz4sIG5ld1Byb3BzOiBPYmplY3QpID0+IHtcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IHJlZiA9IGtleSAhPSBudWxsICYmIHRoaXMuX2NlbGxSZWZzW2tleV07XG4gICAgICByZWYgJiYgcmVmLnVwZGF0ZVNlcGFyYXRvclByb3BzKG5ld1Byb3BzKTtcbiAgICB9KTtcbiAgfTtcblxuICBfaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRpc2FibGVWaXJ0dWFsaXphdGlvbiB8fCBmYWxzZTtcbiAgfVxuXG4gIF9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbmVzdGVkQ29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICByZXR1cm4gISEoXG4gICAgICBuZXN0ZWRDb250ZXh0ICYmXG4gICAgICAhIW5lc3RlZENvbnRleHQuaG9yaXpvbnRhbCA9PT0gaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG4gICAgKTtcbiAgfVxuXG4gIF9nZXRTcGFjZXJLZXkgPSAoaXNWZXJ0aWNhbDogYm9vbGVhbik6IHN0cmluZyA9PlxuICAgIGlzVmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgX2tleUV4dHJhY3RvcihpdGVtOiBJdGVtLCBpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMucHJvcHMua2V5RXh0cmFjdG9yICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmtleUV4dHJhY3RvcihpdGVtLCBpbmRleCk7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5ID0gZGVmYXVsdEtleUV4dHJhY3RvcihpdGVtLCBpbmRleCk7XG4gICAgaWYgKGtleSA9PT0gU3RyaW5nKGluZGV4KSkge1xuICAgICAgX3VzZWRJbmRleEZvcktleSA9IHRydWU7XG4gICAgICBpZiAoaXRlbS50eXBlICYmIGl0ZW0udHlwZS5kaXNwbGF5TmFtZSkge1xuICAgICAgICBfa2V5bGVzc0l0ZW1Db21wb25lbnROYW1lID0gaXRlbS50eXBlLmRpc3BsYXlOYW1lO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBjb25zdCBmbGF0U3R5bGVzID0gZmxhdHRlblN0eWxlKHRoaXMucHJvcHMuY29udGVudENvbnRhaW5lclN0eWxlKTtcbiAgICAgIGlmIChmbGF0U3R5bGVzICE9IG51bGwgJiYgZmxhdFN0eWxlcy5mbGV4V3JhcCA9PT0gJ3dyYXAnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAnYGZsZXhXcmFwOiBgd3JhcGBgIGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCB0aGUgYFZpcnR1YWxpemVkTGlzdGAgY29tcG9uZW50cy4nICtcbiAgICAgICAgICAgICdDb25zaWRlciB1c2luZyBgbnVtQ29sdW1uc2Agd2l0aCBgRmxhdExpc3RgIGluc3RlYWQuJyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgTGlzdEVtcHR5Q29tcG9uZW50LFxuICAgICAgTGlzdEZvb3RlckNvbXBvbmVudCxcbiAgICAgIExpc3RIZWFkZXJDb21wb25lbnQsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge2RhdGEsIGhvcml6b250YWx9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQgPSB0aGlzLl9pc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQoKTtcbiAgICBjb25zdCBpbnZlcnNpb25TdHlsZSA9IHRoaXMucHJvcHMuaW52ZXJ0ZWRcbiAgICAgID8gaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG4gICAgICAgID8gc3R5bGVzLmhvcml6b250YWxseUludmVydGVkXG4gICAgICAgIDogc3R5bGVzLnZlcnRpY2FsbHlJbnZlcnRlZFxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IGNlbGxzID0gW107XG4gICAgY29uc3Qgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyA9IG5ldyBTZXQodGhpcy5wcm9wcy5zdGlja3lIZWFkZXJJbmRpY2VzKTtcbiAgICBjb25zdCBzdGlja3lIZWFkZXJJbmRpY2VzID0gW107XG4gICAgaWYgKExpc3RIZWFkZXJDb21wb25lbnQpIHtcbiAgICAgIGlmIChzdGlja3lJbmRpY2VzRnJvbVByb3BzLmhhcygwKSkge1xuICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLnB1c2goMCk7XG4gICAgICB9XG4gICAgICBjb25zdCBlbGVtZW50ID0gUmVhY3QuaXNWYWxpZEVsZW1lbnQoTGlzdEhlYWRlckNvbXBvbmVudCkgPyAoXG4gICAgICAgIExpc3RIZWFkZXJDb21wb25lbnRcbiAgICAgICkgOiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVbbm90LWEtY29tcG9uZW50XVxuICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlLWFyZ11cbiAgICAgICAgPExpc3RIZWFkZXJDb21wb25lbnQgLz5cbiAgICAgICk7XG4gICAgICBjZWxscy5wdXNoKFxuICAgICAgICA8VmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlclxuICAgICAgICAgIGNlbGxLZXk9e3RoaXMuX2dldENlbGxLZXkoKSArICctaGVhZGVyJ31cbiAgICAgICAgICBrZXk9XCIkaGVhZGVyXCI+XG4gICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgIG9uTGF5b3V0PXt0aGlzLl9vbkxheW91dEhlYWRlcn1cbiAgICAgICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmNvbXBvc2UoXG4gICAgICAgICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLkxpc3RIZWFkZXJDb21wb25lbnRTdHlsZSxcbiAgICAgICAgICAgICl9PlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlXSAtIFR5cGluZyBSZWFjdE5hdGl2ZUNvbXBvbmVudCByZXZlYWxlZCBlcnJvcnNcbiAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgPC9WaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyPixcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1Db3VudCA9IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KGRhdGEpO1xuICAgIGlmIChpdGVtQ291bnQgPiAwKSB7XG4gICAgICBfdXNlZEluZGV4Rm9yS2V5ID0gZmFsc2U7XG4gICAgICBfa2V5bGVzc0l0ZW1Db21wb25lbnROYW1lID0gJyc7XG4gICAgICBjb25zdCBzcGFjZXJLZXkgPSB0aGlzLl9nZXRTcGFjZXJLZXkoIWhvcml6b250YWwpO1xuICAgICAgY29uc3QgbGFzdEluaXRpYWxJbmRleCA9IHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4XG4gICAgICAgID8gLTFcbiAgICAgICAgOiBpbml0aWFsTnVtVG9SZW5kZXJPckRlZmF1bHQodGhpcy5wcm9wcy5pbml0aWFsTnVtVG9SZW5kZXIpIC0gMTtcbiAgICAgIGNvbnN0IHtmaXJzdCwgbGFzdH0gPSB0aGlzLnN0YXRlO1xuICAgICAgdGhpcy5fcHVzaENlbGxzKFxuICAgICAgICBjZWxscyxcbiAgICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcyxcbiAgICAgICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyxcbiAgICAgICAgMCxcbiAgICAgICAgbGFzdEluaXRpYWxJbmRleCxcbiAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICApO1xuICAgICAgY29uc3QgZmlyc3RBZnRlckluaXRpYWwgPSBNYXRoLm1heChsYXN0SW5pdGlhbEluZGV4ICsgMSwgZmlyc3QpO1xuICAgICAgaWYgKCFpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQgJiYgZmlyc3QgPiBsYXN0SW5pdGlhbEluZGV4ICsgMSkge1xuICAgICAgICBsZXQgaW5zZXJ0ZWRTdGlja3lTcGFjZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN0aWNreUluZGljZXNGcm9tUHJvcHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICBjb25zdCBzdGlja3lPZmZzZXQgPSBMaXN0SGVhZGVyQ29tcG9uZW50ID8gMSA6IDA7XG4gICAgICAgICAgLy8gU2VlIGlmIHRoZXJlIGFyZSBhbnkgc3RpY2t5IGhlYWRlcnMgaW4gdGhlIHZpcnR1YWxpemVkIHNwYWNlIHRoYXQgd2UgbmVlZCB0byByZW5kZXIuXG4gICAgICAgICAgZm9yIChsZXQgaWkgPSBmaXJzdEFmdGVySW5pdGlhbCAtIDE7IGlpID4gbGFzdEluaXRpYWxJbmRleDsgaWktLSkge1xuICAgICAgICAgICAgaWYgKHN0aWNreUluZGljZXNGcm9tUHJvcHMuaGFzKGlpICsgc3RpY2t5T2Zmc2V0KSkge1xuICAgICAgICAgICAgICBjb25zdCBpbml0QmxvY2sgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3gobGFzdEluaXRpYWxJbmRleCk7XG4gICAgICAgICAgICAgIGNvbnN0IHN0aWNreUJsb2NrID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGlpKTtcbiAgICAgICAgICAgICAgY29uc3QgbGVhZFNwYWNlID1cbiAgICAgICAgICAgICAgICBzdGlja3lCbG9jay5vZmZzZXQgLVxuICAgICAgICAgICAgICAgIGluaXRCbG9jay5vZmZzZXQgLVxuICAgICAgICAgICAgICAgICh0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCA/IDAgOiBpbml0QmxvY2subGVuZ3RoKTtcbiAgICAgICAgICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgICAgICAgICA8VmlldyBrZXk9XCIkc3RpY2t5X2xlYWRcIiBzdHlsZT17e1tzcGFjZXJLZXldOiBsZWFkU3BhY2V9fSAvPixcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgdGhpcy5fcHVzaENlbGxzKFxuICAgICAgICAgICAgICAgIGNlbGxzLFxuICAgICAgICAgICAgICAgIHN0aWNreUhlYWRlckluZGljZXMsXG4gICAgICAgICAgICAgICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyxcbiAgICAgICAgICAgICAgICBpaSxcbiAgICAgICAgICAgICAgICBpaSxcbiAgICAgICAgICAgICAgICBpbnZlcnNpb25TdHlsZSxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgdHJhaWxTcGFjZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGZpcnN0KS5vZmZzZXQgLVxuICAgICAgICAgICAgICAgIChzdGlja3lCbG9jay5vZmZzZXQgKyBzdGlja3lCbG9jay5sZW5ndGgpO1xuICAgICAgICAgICAgICBjZWxscy5wdXNoKFxuICAgICAgICAgICAgICAgIDxWaWV3IGtleT1cIiRzdGlja3lfdHJhaWxcIiBzdHlsZT17e1tzcGFjZXJLZXldOiB0cmFpbFNwYWNlfX0gLz4sXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGluc2VydGVkU3RpY2t5U3BhY2VyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaW5zZXJ0ZWRTdGlja3lTcGFjZXIpIHtcbiAgICAgICAgICBjb25zdCBpbml0QmxvY2sgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3gobGFzdEluaXRpYWxJbmRleCk7XG4gICAgICAgICAgY29uc3QgZmlyc3RTcGFjZSA9XG4gICAgICAgICAgICB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3goZmlyc3QpLm9mZnNldCAtXG4gICAgICAgICAgICAoaW5pdEJsb2NrLm9mZnNldCArIGluaXRCbG9jay5sZW5ndGgpO1xuICAgICAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgICAgICA8VmlldyBrZXk9XCIkbGVhZF9zcGFjZXJcIiBzdHlsZT17e1tzcGFjZXJLZXldOiBmaXJzdFNwYWNlfX0gLz4sXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fcHVzaENlbGxzKFxuICAgICAgICBjZWxscyxcbiAgICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcyxcbiAgICAgICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyxcbiAgICAgICAgZmlyc3RBZnRlckluaXRpYWwsXG4gICAgICAgIGxhc3QsXG4gICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgKTtcbiAgICAgIGlmICghdGhpcy5faGFzV2FybmVkLmtleXMgJiYgX3VzZWRJbmRleEZvcktleSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogbWlzc2luZyBrZXlzIGZvciBpdGVtcywgbWFrZSBzdXJlIHRvIHNwZWNpZnkgYSBrZXkgb3IgaWQgcHJvcGVydHkgb24gZWFjaCAnICtcbiAgICAgICAgICAgICdpdGVtIG9yIHByb3ZpZGUgYSBjdXN0b20ga2V5RXh0cmFjdG9yLicsXG4gICAgICAgICAgX2tleWxlc3NJdGVtQ29tcG9uZW50TmFtZSxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5faGFzV2FybmVkLmtleXMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQgJiYgbGFzdCA8IGl0ZW1Db3VudCAtIDEpIHtcbiAgICAgICAgY29uc3QgbGFzdEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGxhc3QpO1xuICAgICAgICAvLyBXaXRob3V0IGdldEl0ZW1MYXlvdXQsIHdlIGxpbWl0IG91ciB0YWlsIHNwYWNlciB0byB0aGUgX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXggdG9cbiAgICAgICAgLy8gcHJldmVudCB0aGUgdXNlciBmb3IgaHlwZXJzY3JvbGxpbmcgaW50byB1bi1tZWFzdXJlZCBhcmVhIGJlY2F1c2Ugb3RoZXJ3aXNlIGNvbnRlbnQgd2lsbFxuICAgICAgICAvLyBsaWtlbHkganVtcCBhcm91bmQgYXMgaXQgcmVuZGVycyBpbiBhYm92ZSB0aGUgdmlld3BvcnQuXG4gICAgICAgIGNvbnN0IGVuZCA9IHRoaXMucHJvcHMuZ2V0SXRlbUxheW91dFxuICAgICAgICAgID8gaXRlbUNvdW50IC0gMVxuICAgICAgICAgIDogTWF0aC5taW4oaXRlbUNvdW50IC0gMSwgdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCk7XG4gICAgICAgIGNvbnN0IGVuZEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGVuZCk7XG4gICAgICAgIGNvbnN0IHRhaWxTcGFjZXJMZW5ndGggPVxuICAgICAgICAgIGVuZEZyYW1lLm9mZnNldCArXG4gICAgICAgICAgZW5kRnJhbWUubGVuZ3RoIC1cbiAgICAgICAgICAobGFzdEZyYW1lLm9mZnNldCArIGxhc3RGcmFtZS5sZW5ndGgpO1xuICAgICAgICBjZWxscy5wdXNoKFxuICAgICAgICAgIDxWaWV3IGtleT1cIiR0YWlsX3NwYWNlclwiIHN0eWxlPXt7W3NwYWNlcktleV06IHRhaWxTcGFjZXJMZW5ndGh9fSAvPixcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKExpc3RFbXB0eUNvbXBvbmVudCkge1xuICAgICAgY29uc3QgZWxlbWVudDogUmVhY3QuRWxlbWVudDxhbnk+ID0gKChSZWFjdC5pc1ZhbGlkRWxlbWVudChcbiAgICAgICAgTGlzdEVtcHR5Q29tcG9uZW50LFxuICAgICAgKSA/IChcbiAgICAgICAgTGlzdEVtcHR5Q29tcG9uZW50XG4gICAgICApIDogKFxuICAgICAgICAvLyAkRmxvd0ZpeE1lW25vdC1hLWNvbXBvbmVudF1cbiAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZS1hcmddXG4gICAgICAgIDxMaXN0RW1wdHlDb21wb25lbnQgLz5cbiAgICAgICkpOiBhbnkpO1xuICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgUmVhY3QuY2xvbmVFbGVtZW50KGVsZW1lbnQsIHtcbiAgICAgICAgICBrZXk6ICckZW1wdHknLFxuICAgICAgICAgIG9uTGF5b3V0OiBldmVudCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vbkxheW91dEVtcHR5KGV2ZW50KTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnByb3BzLm9uTGF5b3V0KSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQucHJvcHMub25MYXlvdXQoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3R5bGU6IFN0eWxlU2hlZXQuY29tcG9zZShpbnZlcnNpb25TdHlsZSwgZWxlbWVudC5wcm9wcy5zdHlsZSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKExpc3RGb290ZXJDb21wb25lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBSZWFjdC5pc1ZhbGlkRWxlbWVudChMaXN0Rm9vdGVyQ29tcG9uZW50KSA/IChcbiAgICAgICAgTGlzdEZvb3RlckNvbXBvbmVudFxuICAgICAgKSA6IChcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtub3QtYS1jb21wb25lbnRdXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGUtYXJnXVxuICAgICAgICA8TGlzdEZvb3RlckNvbXBvbmVudCAvPlxuICAgICAgKTtcbiAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgIDxWaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyXG4gICAgICAgICAgY2VsbEtleT17dGhpcy5fZ2V0Rm9vdGVyQ2VsbEtleSgpfVxuICAgICAgICAgIGtleT1cIiRmb290ZXJcIj5cbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgb25MYXlvdXQ9e3RoaXMuX29uTGF5b3V0Rm9vdGVyfVxuICAgICAgICAgICAgc3R5bGU9e1N0eWxlU2hlZXQuY29tcG9zZShcbiAgICAgICAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuTGlzdEZvb3RlckNvbXBvbmVudFN0eWxlLFxuICAgICAgICAgICAgKX0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdIC0gVHlwaW5nIFJlYWN0TmF0aXZlQ29tcG9uZW50IHJldmVhbGVkIGVycm9yc1xuICAgICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICA8L1ZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXI+LFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3Qgc2Nyb2xsUHJvcHMgPSB7XG4gICAgICAuLi50aGlzLnByb3BzLFxuICAgICAgb25Db250ZW50U2l6ZUNoYW5nZTogdGhpcy5fb25Db250ZW50U2l6ZUNoYW5nZSxcbiAgICAgIG9uTGF5b3V0OiB0aGlzLl9vbkxheW91dCxcbiAgICAgIG9uU2Nyb2xsOiB0aGlzLl9vblNjcm9sbCxcbiAgICAgIG9uU2Nyb2xsQmVnaW5EcmFnOiB0aGlzLl9vblNjcm9sbEJlZ2luRHJhZyxcbiAgICAgIG9uU2Nyb2xsRW5kRHJhZzogdGhpcy5fb25TY3JvbGxFbmREcmFnLFxuICAgICAgb25Nb21lbnR1bVNjcm9sbEJlZ2luOiB0aGlzLl9vbk1vbWVudHVtU2Nyb2xsQmVnaW4sXG4gICAgICBvbk1vbWVudHVtU2Nyb2xsRW5kOiB0aGlzLl9vbk1vbWVudHVtU2Nyb2xsRW5kLFxuICAgICAgc2Nyb2xsRXZlbnRUaHJvdHRsZTogc2Nyb2xsRXZlbnRUaHJvdHRsZU9yRGVmYXVsdChcbiAgICAgICAgdGhpcy5wcm9wcy5zY3JvbGxFdmVudFRocm90dGxlLFxuICAgICAgKSwgLy8gVE9ETzogQW5kcm9pZCBzdXBwb3J0XG4gICAgICBpbnZlcnRTdGlja3lIZWFkZXJzOlxuICAgICAgICB0aGlzLnByb3BzLmludmVydFN0aWNreUhlYWRlcnMgIT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gdGhpcy5wcm9wcy5pbnZlcnRTdGlja3lIZWFkZXJzXG4gICAgICAgICAgOiB0aGlzLnByb3BzLmludmVydGVkLFxuICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcyxcbiAgICAgIHN0eWxlOiBpbnZlcnNpb25TdHlsZVxuICAgICAgICA/IFtpbnZlcnNpb25TdHlsZSwgdGhpcy5wcm9wcy5zdHlsZV1cbiAgICAgICAgOiB0aGlzLnByb3BzLnN0eWxlLFxuICAgIH07XG5cbiAgICB0aGlzLl9oYXNNb3JlID1cbiAgICAgIHRoaXMuc3RhdGUubGFzdCA8IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSkgLSAxO1xuXG4gICAgY29uc3QgaW5uZXJSZXQgPSAoXG4gICAgICA8VmlydHVhbGl6ZWRMaXN0Q29udGV4dFByb3ZpZGVyXG4gICAgICAgIHZhbHVlPXt7XG4gICAgICAgICAgY2VsbEtleTogbnVsbCxcbiAgICAgICAgICBnZXRTY3JvbGxNZXRyaWNzOiB0aGlzLl9nZXRTY3JvbGxNZXRyaWNzLFxuICAgICAgICAgIGhvcml6b250YWw6IGhvcml6b250YWxPckRlZmF1bHQodGhpcy5wcm9wcy5ob3Jpem9udGFsKSxcbiAgICAgICAgICBnZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmOiB0aGlzLl9nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmLFxuICAgICAgICAgIGdldE5lc3RlZENoaWxkU3RhdGU6IHRoaXMuX2dldE5lc3RlZENoaWxkU3RhdGUsXG4gICAgICAgICAgcmVnaXN0ZXJBc05lc3RlZENoaWxkOiB0aGlzLl9yZWdpc3RlckFzTmVzdGVkQ2hpbGQsXG4gICAgICAgICAgdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IHRoaXMuX3VucmVnaXN0ZXJBc05lc3RlZENoaWxkLFxuICAgICAgICAgIGRlYnVnSW5mbzogdGhpcy5fZ2V0RGVidWdJbmZvKCksXG4gICAgICAgIH19PlxuICAgICAgICB7UmVhY3QuY2xvbmVFbGVtZW50KFxuICAgICAgICAgIChcbiAgICAgICAgICAgIHRoaXMucHJvcHMucmVuZGVyU2Nyb2xsQ29tcG9uZW50IHx8XG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0UmVuZGVyU2Nyb2xsQ29tcG9uZW50XG4gICAgICAgICAgKShzY3JvbGxQcm9wcyksXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVmOiB0aGlzLl9jYXB0dXJlU2Nyb2xsUmVmLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2VsbHMsXG4gICAgICAgICl9XG4gICAgICA8L1ZpcnR1YWxpemVkTGlzdENvbnRleHRQcm92aWRlcj5cbiAgICApO1xuICAgIGxldCByZXQgPSBpbm5lclJldDtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgcmV0ID0gKFxuICAgICAgICA8U2Nyb2xsVmlldy5Db250ZXh0LkNvbnN1bWVyPlxuICAgICAgICAgIHtzY3JvbGxDb250ZXh0ID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc2Nyb2xsQ29udGV4dCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICFzY3JvbGxDb250ZXh0Lmhvcml6b250YWwgPT09XG4gICAgICAgICAgICAgICAgIWhvcml6b250YWxPckRlZmF1bHQodGhpcy5wcm9wcy5ob3Jpem9udGFsKSAmJlxuICAgICAgICAgICAgICAhdGhpcy5faGFzV2FybmVkLm5lc3RpbmcgJiZcbiAgICAgICAgICAgICAgdGhpcy5jb250ZXh0ID09IG51bGxcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAvLyBUT0RPIChUNDY1NDcwNDQpOiB1c2UgUmVhY3Qud2FybiBvbmNlIDE2LjkgaXMgc3luYydkOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvcHVsbC8xNTE3MFxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdWaXJ0dWFsaXplZExpc3RzIHNob3VsZCBuZXZlciBiZSBuZXN0ZWQgaW5zaWRlIHBsYWluIFNjcm9sbFZpZXdzIHdpdGggdGhlIHNhbWUgJyArXG4gICAgICAgICAgICAgICAgICAnb3JpZW50YXRpb24gYmVjYXVzZSBpdCBjYW4gYnJlYWsgd2luZG93aW5nIGFuZCBvdGhlciBmdW5jdGlvbmFsaXR5IC0gdXNlIGFub3RoZXIgJyArXG4gICAgICAgICAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0LWJhY2tlZCBjb250YWluZXIgaW5zdGVhZC4nLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLl9oYXNXYXJuZWQubmVzdGluZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJSZXQ7XG4gICAgICAgICAgfX1cbiAgICAgICAgPC9TY3JvbGxWaWV3LkNvbnRleHQuQ29uc3VtZXI+XG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5kZWJ1Zykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5kZWJ1Z30+XG4gICAgICAgICAge3JldH1cbiAgICAgICAgICB7dGhpcy5fcmVuZGVyRGVidWdPdmVybGF5KCl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMpIHtcbiAgICBjb25zdCB7ZGF0YSwgZXh0cmFEYXRhfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGRhdGEgIT09IHByZXZQcm9wcy5kYXRhIHx8IGV4dHJhRGF0YSAhPT0gcHJldlByb3BzLmV4dHJhRGF0YSkge1xuICAgICAgLy8gY2xlYXIgdGhlIHZpZXdhYmxlSW5kaWNlcyBjYWNoZSB0byBhbHNvIHRyaWdnZXJcbiAgICAgIC8vIHRoZSBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkIGNhbGxiYWNrIHdpdGggdGhlIG5ldyBkYXRhXG4gICAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5mb3JFYWNoKHR1cGxlID0+IHtcbiAgICAgICAgdHVwbGUudmlld2FiaWxpdHlIZWxwZXIucmVzZXRWaWV3YWJsZUluZGljZXMoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBUaGUgYHRoaXMuX2hpUHJpSW5Qcm9ncmVzc2AgaXMgZ3VhcmFudGVlaW5nIGEgaGlQcmkgY2VsbCB1cGRhdGUgd2lsbCBvbmx5IGhhcHBlblxuICAgIC8vIG9uY2UgcGVyIGZpYmVyIHVwZGF0ZS4gVGhlIGBfc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlYCB3aWxsIHNldCBpdCB0byB0cnVlXG4gICAgLy8gaWYgYSBoaVByaSB1cGRhdGUgbmVlZHMgdG8gcGVyZm9ybS4gSWYgYGNvbXBvbmVudERpZFVwZGF0ZWAgaXMgdHJpZ2dlcmVkIHdpdGhcbiAgICAvLyBgdGhpcy5faGlQcmlJblByb2dyZXNzPXRydWVgLCBtZWFucyBpdCdzIHRyaWdnZXJlZCBieSB0aGUgaGlQcmkgdXBkYXRlLiBUaGVcbiAgICAvLyBgX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZWAgd2lsbCBjaGVjayB0aGlzIGNvbmRpdGlvbiBhbmQgbm90IHBlcmZvcm1cbiAgICAvLyBhbm90aGVyIGhpUHJpIHVwZGF0ZS5cbiAgICBjb25zdCBoaVByaUluUHJvZ3Jlc3MgPSB0aGlzLl9oaVByaUluUHJvZ3Jlc3M7XG4gICAgdGhpcy5fc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCk7XG4gICAgLy8gTWFrZSBzdXJlIHNldHRpbmcgYHRoaXMuX2hpUHJpSW5Qcm9ncmVzc2AgYmFjayB0byBmYWxzZSBhZnRlciBgY29tcG9uZW50RGlkVXBkYXRlYFxuICAgIC8vIGlzIHRyaWdnZXJlZCB3aXRoIGB0aGlzLl9oaVByaUluUHJvZ3Jlc3MgPSB0cnVlYFxuICAgIGlmIChoaVByaUluUHJvZ3Jlc3MpIHtcbiAgICAgIHRoaXMuX2hpUHJpSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9hdmVyYWdlQ2VsbExlbmd0aCA9IDA7XG4gIC8vIE1hcHMgYSBjZWxsIGtleSB0byB0aGUgc2V0IG9mIGtleXMgZm9yIGFsbCBvdXRlcm1vc3QgY2hpbGQgbGlzdHMgd2l0aGluIHRoYXQgY2VsbFxuICBfY2VsbEtleXNUb0NoaWxkTGlzdEtleXM6IE1hcDxzdHJpbmcsIFNldDxzdHJpbmc+PiA9IG5ldyBNYXAoKTtcbiAgX2NlbGxSZWZzID0ge307XG4gIF9maWxsUmF0ZUhlbHBlcjogRmlsbFJhdGVIZWxwZXI7XG4gIF9mcmFtZXMgPSB7fTtcbiAgX2Zvb3Rlckxlbmd0aCA9IDA7XG4gIF9oYXNEb25lSW5pdGlhbFNjcm9sbCA9IGZhbHNlO1xuICBfaGFzSW50ZXJhY3RlZCA9IGZhbHNlO1xuICBfaGFzTW9yZSA9IGZhbHNlO1xuICBfaGFzV2FybmVkID0ge307XG4gIF9oZWFkZXJMZW5ndGggPSAwO1xuICBfaGlQcmlJblByb2dyZXNzOiBib29sZWFuID0gZmFsc2U7IC8vIGZsYWcgdG8gcHJldmVudCBpbmZpbml0ZSBoaVByaSBjZWxsIGxpbWl0IHVwZGF0ZVxuICBfaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCA9IDA7XG4gIF9pbmRpY2VzVG9LZXlzOiBNYXA8bnVtYmVyLCBzdHJpbmc+ID0gbmV3IE1hcCgpO1xuICBfbmVzdGVkQ2hpbGRMaXN0czogTWFwPFxuICAgIHN0cmluZyxcbiAgICB7XG4gICAgICByZWY6ID9WaXJ0dWFsaXplZExpc3QsXG4gICAgICBzdGF0ZTogP0NoaWxkTGlzdFN0YXRlLFxuICAgICAgLi4uXG4gICAgfSxcbiAgPiA9IG5ldyBNYXAoKTtcbiAgX29mZnNldEZyb21QYXJlbnRWaXJ0dWFsaXplZExpc3Q6IG51bWJlciA9IDA7XG4gIF9wcmV2UGFyZW50T2Zmc2V0OiBudW1iZXIgPSAwO1xuICBfc2Nyb2xsTWV0cmljcyA9IHtcbiAgICBjb250ZW50TGVuZ3RoOiAwLFxuICAgIGRPZmZzZXQ6IDAsXG4gICAgZHQ6IDEwLFxuICAgIG9mZnNldDogMCxcbiAgICB0aW1lc3RhbXA6IDAsXG4gICAgdmVsb2NpdHk6IDAsXG4gICAgdmlzaWJsZUxlbmd0aDogMCxcbiAgfTtcbiAgX3Njcm9sbFJlZjogP1JlYWN0LkVsZW1lbnRSZWY8YW55PiA9IG51bGw7XG4gIF9zZW50RW5kRm9yQ29udGVudExlbmd0aCA9IDA7XG4gIF90b3RhbENlbGxMZW5ndGggPSAwO1xuICBfdG90YWxDZWxsc01lYXN1cmVkID0gMDtcbiAgX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyOiBCYXRjaGluYXRvcjtcbiAgX3ZpZXdhYmlsaXR5VHVwbGVzOiBBcnJheTxWaWV3YWJpbGl0eUhlbHBlckNhbGxiYWNrVHVwbGU+ID0gW107XG5cbiAgX2NhcHR1cmVTY3JvbGxSZWYgPSByZWYgPT4ge1xuICAgIHRoaXMuX3Njcm9sbFJlZiA9IHJlZjtcbiAgfTtcblxuICBfY29tcHV0ZUJsYW5rbmVzcygpIHtcbiAgICB0aGlzLl9maWxsUmF0ZUhlbHBlci5jb21wdXRlQmxhbmtuZXNzKFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHRoaXMuc3RhdGUsXG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLFxuICAgICk7XG4gIH1cblxuICBfZGVmYXVsdFJlbmRlclNjcm9sbENvbXBvbmVudCA9IHByb3BzID0+IHtcbiAgICBjb25zdCBvblJlZnJlc2ggPSBwcm9wcy5vblJlZnJlc2g7XG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gLSBUeXBpbmcgUmVhY3ROYXRpdmVDb21wb25lbnQgcmV2ZWFsZWQgZXJyb3JzXG4gICAgICByZXR1cm4gPFZpZXcgey4uLnByb3BzfSAvPjtcbiAgICB9IGVsc2UgaWYgKG9uUmVmcmVzaCkge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICB0eXBlb2YgcHJvcHMucmVmcmVzaGluZyA9PT0gJ2Jvb2xlYW4nLFxuICAgICAgICAnYHJlZnJlc2hpbmdgIHByb3AgbXVzdCBiZSBzZXQgYXMgYSBib29sZWFuIGluIG9yZGVyIHRvIHVzZSBgb25SZWZyZXNoYCwgYnV0IGdvdCBgJyArXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvcHMucmVmcmVzaGluZyA/PyAndW5kZWZpbmVkJykgK1xuICAgICAgICAgICdgJyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gSW52YWxpZCBwcm9wIHVzYWdlXG4gICAgICAgIDxTY3JvbGxWaWV3XG4gICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgIHJlZnJlc2hDb250cm9sPXtcbiAgICAgICAgICAgIHByb3BzLnJlZnJlc2hDb250cm9sID09IG51bGwgPyAoXG4gICAgICAgICAgICAgIDxSZWZyZXNoQ29udHJvbFxuICAgICAgICAgICAgICAgIHJlZnJlc2hpbmc9e3Byb3BzLnJlZnJlc2hpbmd9XG4gICAgICAgICAgICAgICAgb25SZWZyZXNoPXtvblJlZnJlc2h9XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NWaWV3T2Zmc2V0PXtwcm9wcy5wcm9ncmVzc1ZpZXdPZmZzZXR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICBwcm9wcy5yZWZyZXNoQ29udHJvbFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXSBJbnZhbGlkIHByb3AgdXNhZ2VcbiAgICAgIHJldHVybiA8U2Nyb2xsVmlldyB7Li4ucHJvcHN9IC8+O1xuICAgIH1cbiAgfTtcblxuICBfb25DZWxsTGF5b3V0KGUsIGNlbGxLZXksIGluZGV4KSB7XG4gICAgY29uc3QgbGF5b3V0ID0gZS5uYXRpdmVFdmVudC5sYXlvdXQ7XG4gICAgY29uc3QgbmV4dCA9IHtcbiAgICAgIG9mZnNldDogdGhpcy5fc2VsZWN0T2Zmc2V0KGxheW91dCksXG4gICAgICBsZW5ndGg6IHRoaXMuX3NlbGVjdExlbmd0aChsYXlvdXQpLFxuICAgICAgaW5kZXgsXG4gICAgICBpbkxheW91dDogdHJ1ZSxcbiAgICB9O1xuICAgIGNvbnN0IGN1cnIgPSB0aGlzLl9mcmFtZXNbY2VsbEtleV07XG4gICAgaWYgKFxuICAgICAgIWN1cnIgfHxcbiAgICAgIG5leHQub2Zmc2V0ICE9PSBjdXJyLm9mZnNldCB8fFxuICAgICAgbmV4dC5sZW5ndGggIT09IGN1cnIubGVuZ3RoIHx8XG4gICAgICBpbmRleCAhPT0gY3Vyci5pbmRleFxuICAgICkge1xuICAgICAgdGhpcy5fdG90YWxDZWxsTGVuZ3RoICs9IG5leHQubGVuZ3RoIC0gKGN1cnIgPyBjdXJyLmxlbmd0aCA6IDApO1xuICAgICAgdGhpcy5fdG90YWxDZWxsc01lYXN1cmVkICs9IGN1cnIgPyAwIDogMTtcbiAgICAgIHRoaXMuX2F2ZXJhZ2VDZWxsTGVuZ3RoID1cbiAgICAgICAgdGhpcy5fdG90YWxDZWxsTGVuZ3RoIC8gdGhpcy5fdG90YWxDZWxsc01lYXN1cmVkO1xuICAgICAgdGhpcy5fZnJhbWVzW2NlbGxLZXldID0gbmV4dDtcbiAgICAgIHRoaXMuX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXggPSBNYXRoLm1heChcbiAgICAgICAgdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCxcbiAgICAgICAgaW5kZXgsXG4gICAgICApO1xuICAgICAgdGhpcy5fc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ZyYW1lc1tjZWxsS2V5XS5pbkxheW91dCA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5fdHJpZ2dlclJlbWVhc3VyZUZvckNoaWxkTGlzdHNJbkNlbGwoY2VsbEtleSk7XG5cbiAgICB0aGlzLl9jb21wdXRlQmxhbmtuZXNzKCk7XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyh0aGlzLnByb3BzLmRhdGEpO1xuICB9XG5cbiAgX29uQ2VsbFVubW91bnQgPSAoY2VsbEtleTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgY3VyciA9IHRoaXMuX2ZyYW1lc1tjZWxsS2V5XTtcbiAgICBpZiAoY3Vycikge1xuICAgICAgdGhpcy5fZnJhbWVzW2NlbGxLZXldID0gey4uLmN1cnIsIGluTGF5b3V0OiBmYWxzZX07XG4gICAgfVxuICB9O1xuXG4gIF90cmlnZ2VyUmVtZWFzdXJlRm9yQ2hpbGRMaXN0c0luQ2VsbChjZWxsS2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBjaGlsZExpc3RLZXlzID0gdGhpcy5fY2VsbEtleXNUb0NoaWxkTGlzdEtleXMuZ2V0KGNlbGxLZXkpO1xuICAgIGlmIChjaGlsZExpc3RLZXlzKSB7XG4gICAgICBmb3IgKGxldCBjaGlsZEtleSBvZiBjaGlsZExpc3RLZXlzKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkTGlzdCA9IHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZ2V0KGNoaWxkS2V5KTtcbiAgICAgICAgY2hpbGRMaXN0ICYmXG4gICAgICAgICAgY2hpbGRMaXN0LnJlZiAmJlxuICAgICAgICAgIGNoaWxkTGlzdC5yZWYubWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG1lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QoKTogdm9pZCB7XG4gICAgLy8gVE9ETyAoVDM1NTc0NTM4KTogZmluZE5vZGVIYW5kbGUgc29tZXRpbWVzIGNyYXNoZXMgd2l0aCBcIlVuYWJsZSB0byBmaW5kXG4gICAgLy8gbm9kZSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50XCIgZHVyaW5nIHNjcm9sbGluZ1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMuX3Njcm9sbFJlZikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBXZSBhcmUgYXNzdW1pbmcgdGhhdCBnZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmKCkuZ2V0U2Nyb2xsUmVmKClcbiAgICAgIC8vIGlzIGEgbm9uLW51bGwgcmVmZXJlbmNlIHRvIGEgU2Nyb2xsVmlld1xuICAgICAgdGhpcy5fc2Nyb2xsUmVmLm1lYXN1cmVMYXlvdXQoXG4gICAgICAgIHRoaXMuY29udGV4dC5nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmKCkuZ2V0U2Nyb2xsUmVmKCksXG4gICAgICAgICh4LCB5LCB3aWR0aCwgaGVpZ2h0KSA9PiB7XG4gICAgICAgICAgdGhpcy5fb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdCA9IHRoaXMuX3NlbGVjdE9mZnNldCh7eCwgeX0pO1xuICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MuY29udGVudExlbmd0aCA9IHRoaXMuX3NlbGVjdExlbmd0aCh7XG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBzY3JvbGxNZXRyaWNzID0gdGhpcy5fY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3MoXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuZ2V0U2Nyb2xsTWV0cmljcygpLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBtZXRyaWNzQ2hhbmdlZCA9XG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggIT09IHNjcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCB8fFxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQgIT09IHNjcm9sbE1ldHJpY3Mub2Zmc2V0O1xuXG4gICAgICAgICAgaWYgKG1ldHJpY3NDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggPSBzY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGg7XG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLm9mZnNldCA9IHNjcm9sbE1ldHJpY3Mub2Zmc2V0O1xuXG4gICAgICAgICAgICAvLyBJZiBtZXRyaWNzIG9mIHRoZSBzY3JvbGxWaWV3IGNoYW5nZWQsIHRoZW4gd2UgdHJpZ2dlcmVkIHJlbWVhc3VyZSBmb3IgY2hpbGQgbGlzdFxuICAgICAgICAgICAgLy8gdG8gZW5zdXJlIFZpcnR1YWxpemVkTGlzdCBoYXMgdGhlIHJpZ2h0IGluZm9ybWF0aW9uLlxuICAgICAgICAgICAgdGhpcy5fY2VsbEtleXNUb0NoaWxkTGlzdEtleXMuZm9yRWFjaChjaGlsZExpc3RLZXlzID0+IHtcbiAgICAgICAgICAgICAgaWYgKGNoaWxkTGlzdEtleXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjaGlsZEtleSBvZiBjaGlsZExpc3RLZXlzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZExpc3QgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChjaGlsZEtleSk7XG4gICAgICAgICAgICAgICAgICBjaGlsZExpc3QgJiZcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0LnJlZiAmJlxuICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3QucmVmLm1lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIFwiVmlydHVhbGl6ZWRMaXN0OiBFbmNvdW50ZXJlZCBhbiBlcnJvciB3aGlsZSBtZWFzdXJpbmcgYSBsaXN0J3NcIiArXG4gICAgICAgICAgICAgICcgb2Zmc2V0IGZyb20gaXRzIGNvbnRhaW5pbmcgVmlydHVhbGl6ZWRMaXN0LicsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ21lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QgdGhyZXcgYW4gZXJyb3InLFxuICAgICAgICBlcnJvci5zdGFjayxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgX29uTGF5b3V0ID0gKGU6IE9iamVjdCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgLy8gTmVlZCB0byBhZGp1c3Qgb3VyIHNjcm9sbCBtZXRyaWNzIHRvIGJlIHJlbGF0aXZlIHRvIG91ciBjb250YWluaW5nXG4gICAgICAvLyBWaXJ0dWFsaXplZExpc3QgYmVmb3JlIHdlIGNhbiBtYWtlIGNsYWltcyBhYm91dCBsaXN0IGl0ZW0gdmlld2FiaWxpdHlcbiAgICAgIHRoaXMubWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoXG4gICAgICAgIGUubmF0aXZlRXZlbnQubGF5b3V0LFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5vbkxheW91dCAmJiB0aGlzLnByb3BzLm9uTGF5b3V0KGUpO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICAgIHRoaXMuX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpO1xuICB9O1xuXG4gIF9vbkxheW91dEVtcHR5ID0gZSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkxheW91dCAmJiB0aGlzLnByb3BzLm9uTGF5b3V0KGUpO1xuICB9O1xuXG4gIF9nZXRGb290ZXJDZWxsS2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2dldENlbGxLZXkoKSArICctZm9vdGVyJztcbiAgfVxuXG4gIF9vbkxheW91dEZvb3RlciA9IGUgPT4ge1xuICAgIHRoaXMuX3RyaWdnZXJSZW1lYXN1cmVGb3JDaGlsZExpc3RzSW5DZWxsKHRoaXMuX2dldEZvb3RlckNlbGxLZXkoKSk7XG4gICAgdGhpcy5fZm9vdGVyTGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQubGF5b3V0KTtcbiAgfTtcblxuICBfb25MYXlvdXRIZWFkZXIgPSBlID0+IHtcbiAgICB0aGlzLl9oZWFkZXJMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5sYXlvdXQpO1xuICB9O1xuXG4gIF9yZW5kZXJEZWJ1Z092ZXJsYXkoKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplID1cbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCAvXG4gICAgICAodGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoIHx8IDEpO1xuICAgIGNvbnN0IGZyYW1lc0luTGF5b3V0ID0gW107XG4gICAgY29uc3QgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQodGhpcy5wcm9wcy5kYXRhKTtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgaXRlbUNvdW50OyBpaSsrKSB7XG4gICAgICBjb25zdCBmcmFtZSA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChpaSk7XG4gICAgICAvKiAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gKD49MC42OC4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnRcbiAgICAgICAqIHN1cHByZXNzZXMgYW4gZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjY4IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZVxuICAgICAgICogZXJyb3IgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICBpZiAoZnJhbWUuaW5MYXlvdXQpIHtcbiAgICAgICAgZnJhbWVzSW5MYXlvdXQucHVzaChmcmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHdpbmRvd1RvcCA9IHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveCh0aGlzLnN0YXRlLmZpcnN0KS5vZmZzZXQ7XG4gICAgY29uc3QgZnJhbWVMYXN0ID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHRoaXMuc3RhdGUubGFzdCk7XG4gICAgY29uc3Qgd2luZG93TGVuID0gZnJhbWVMYXN0Lm9mZnNldCArIGZyYW1lTGFzdC5sZW5ndGggLSB3aW5kb3dUb3A7XG4gICAgY29uc3QgdmlzVG9wID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQ7XG4gICAgY29uc3QgdmlzTGVuID0gdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmRlYnVnT3ZlcmxheUJhc2UsIHN0eWxlcy5kZWJ1Z092ZXJsYXldfT5cbiAgICAgICAge2ZyYW1lc0luTGF5b3V0Lm1hcCgoZiwgaWkpID0+IChcbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAga2V5PXsnZicgKyBpaX1cbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy5kZWJ1Z092ZXJsYXlCYXNlLFxuICAgICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5RnJhbWUsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b3A6IGYub2Zmc2V0ICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZi5sZW5ndGggKiBub3JtYWxpemUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpfVxuICAgICAgICA8Vmlld1xuICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5QmFzZSxcbiAgICAgICAgICAgIHN0eWxlcy5kZWJ1Z092ZXJsYXlGcmFtZUxhc3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvcDogd2luZG93VG9wICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvd0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cbiAgICAgICAgPFZpZXdcbiAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgc3R5bGVzLmRlYnVnT3ZlcmxheUJhc2UsXG4gICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5RnJhbWVWaXMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvcDogdmlzVG9wICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHZpc0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cbiAgICAgIDwvVmlldz5cbiAgICApO1xuICB9XG5cbiAgX3NlbGVjdExlbmd0aChcbiAgICBtZXRyaWNzOiAkUmVhZE9ubHk8e1xuICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgLi4uXG4gICAgfT4sXG4gICk6IG51bWJlciB7XG4gICAgcmV0dXJuICFob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbClcbiAgICAgID8gbWV0cmljcy5oZWlnaHRcbiAgICAgIDogbWV0cmljcy53aWR0aDtcbiAgfVxuXG4gIF9zZWxlY3RPZmZzZXQoXG4gICAgbWV0cmljczogJFJlYWRPbmx5PHtcbiAgICAgIHg6IG51bWJlcixcbiAgICAgIHk6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0+LFxuICApOiBudW1iZXIge1xuICAgIHJldHVybiAhaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpID8gbWV0cmljcy55IDogbWV0cmljcy54O1xuICB9XG5cbiAgX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgb25FbmRSZWFjaGVkLFxuICAgICAgb25FbmRSZWFjaGVkVGhyZXNob2xkLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHtjb250ZW50TGVuZ3RoLCB2aXNpYmxlTGVuZ3RoLCBvZmZzZXR9ID0gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgICBjb25zdCBkaXN0YW5jZUZyb21FbmQgPSBjb250ZW50TGVuZ3RoIC0gdmlzaWJsZUxlbmd0aCAtIG9mZnNldDtcbiAgICBjb25zdCB0aHJlc2hvbGQgPVxuICAgICAgb25FbmRSZWFjaGVkVGhyZXNob2xkICE9IG51bGwgPyBvbkVuZFJlYWNoZWRUaHJlc2hvbGQgKiB2aXNpYmxlTGVuZ3RoIDogMjtcbiAgICBpZiAoXG4gICAgICBvbkVuZFJlYWNoZWQgJiZcbiAgICAgIHRoaXMuc3RhdGUubGFzdCA9PT0gZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSAmJlxuICAgICAgZGlzdGFuY2VGcm9tRW5kIDwgdGhyZXNob2xkICYmXG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGggIT09IHRoaXMuX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoXG4gICAgKSB7XG4gICAgICAvLyBPbmx5IGNhbGwgb25FbmRSZWFjaGVkIG9uY2UgZm9yIGEgZ2l2ZW4gY29udGVudCBsZW5ndGhcbiAgICAgIHRoaXMuX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoO1xuICAgICAgb25FbmRSZWFjaGVkKHtkaXN0YW5jZUZyb21FbmR9KTtcbiAgICB9IGVsc2UgaWYgKGRpc3RhbmNlRnJvbUVuZCA+IHRocmVzaG9sZCkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgc2Nyb2xscyBhd2F5IGZyb20gdGhlIGVuZCBhbmQgYmFjayBhZ2FpbiBjYXVzZVxuICAgICAgLy8gYW4gb25FbmRSZWFjaGVkIHRvIGJlIHRyaWdnZXJlZCBhZ2FpblxuICAgICAgdGhpcy5fc2VudEVuZEZvckNvbnRlbnRMZW5ndGggPSAwO1xuICAgIH1cbiAgfVxuXG4gIF9vbkNvbnRlbnRTaXplQ2hhbmdlID0gKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB7XG4gICAgaWYgKFxuICAgICAgd2lkdGggPiAwICYmXG4gICAgICBoZWlnaHQgPiAwICYmXG4gICAgICB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCAhPSBudWxsICYmXG4gICAgICB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCA+IDAgJiZcbiAgICAgICF0aGlzLl9oYXNEb25lSW5pdGlhbFNjcm9sbFxuICAgICkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY29udGVudE9mZnNldCA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh7XG4gICAgICAgICAgYW5pbWF0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGluZGV4OiB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9oYXNEb25lSW5pdGlhbFNjcm9sbCA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLm9uQ29udGVudFNpemVDaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25Db250ZW50U2l6ZUNoYW5nZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKHtoZWlnaHQsIHdpZHRofSk7XG4gICAgdGhpcy5fc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCk7XG4gICAgdGhpcy5fbWF5YmVDYWxsT25FbmRSZWFjaGVkKCk7XG4gIH07XG5cbiAgLyogVHJhbnNsYXRlcyBtZXRyaWNzIGZyb20gYSBzY3JvbGwgZXZlbnQgaW4gYSBwYXJlbnQgVmlydHVhbGl6ZWRMaXN0IGludG9cbiAgICogY29vcmRpbmF0ZXMgcmVsYXRpdmUgdG8gdGhlIGNoaWxkIGxpc3QuXG4gICAqL1xuICBfY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3MgPSAobWV0cmljczoge1xuICAgIHZpc2libGVMZW5ndGg6IG51bWJlcixcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICAuLi5cbiAgfSkgPT4ge1xuICAgIC8vIE9mZnNldCBvZiB0aGUgdG9wIG9mIHRoZSBuZXN0ZWQgbGlzdCByZWxhdGl2ZSB0byB0aGUgdG9wIG9mIGl0cyBwYXJlbnQncyB2aWV3cG9ydFxuICAgIGNvbnN0IG9mZnNldCA9IG1ldHJpY3Mub2Zmc2V0IC0gdGhpcy5fb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdDtcbiAgICAvLyBDaGlsZCdzIHZpc2libGUgbGVuZ3RoIGlzIHRoZSBzYW1lIGFzIGl0cyBwYXJlbnQnc1xuICAgIGNvbnN0IHZpc2libGVMZW5ndGggPSBtZXRyaWNzLnZpc2libGVMZW5ndGg7XG4gICAgY29uc3QgZE9mZnNldCA9IG9mZnNldCAtIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0O1xuICAgIGNvbnN0IGNvbnRlbnRMZW5ndGggPSB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGg7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgICBvZmZzZXQsXG4gICAgICBkT2Zmc2V0LFxuICAgIH07XG4gIH07XG5cbiAgX29uU2Nyb2xsID0gKGU6IE9iamVjdCkgPT4ge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgY2hpbGRMaXN0LnJlZiAmJiBjaGlsZExpc3QucmVmLl9vblNjcm9sbChlKTtcbiAgICB9KTtcbiAgICBpZiAodGhpcy5wcm9wcy5vblNjcm9sbCkge1xuICAgICAgdGhpcy5wcm9wcy5vblNjcm9sbChlKTtcbiAgICB9XG4gICAgY29uc3QgdGltZXN0YW1wID0gZS50aW1lU3RhbXA7XG4gICAgbGV0IHZpc2libGVMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5sYXlvdXRNZWFzdXJlbWVudCk7XG4gICAgbGV0IGNvbnRlbnRMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5jb250ZW50U2l6ZSk7XG4gICAgbGV0IG9mZnNldCA9IHRoaXMuX3NlbGVjdE9mZnNldChlLm5hdGl2ZUV2ZW50LmNvbnRlbnRPZmZzZXQpO1xuICAgIGxldCBkT2Zmc2V0ID0gb2Zmc2V0IC0gdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQ7XG5cbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIGlmICh0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gSWdub3JlIHNjcm9sbCBldmVudHMgdW50aWwgb25MYXlvdXQgaGFzIGJlZW4gY2FsbGVkIGFuZCB3ZVxuICAgICAgICAvLyBrbm93IG91ciBvZmZzZXQgZnJvbSBvdXIgb2Zmc2V0IGZyb20gb3VyIHBhcmVudFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAoe1xuICAgICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgICBjb250ZW50TGVuZ3RoLFxuICAgICAgICBvZmZzZXQsXG4gICAgICAgIGRPZmZzZXQsXG4gICAgICB9ID0gdGhpcy5fY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3Moe1xuICAgICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgICBvZmZzZXQsXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgY29uc3QgZHQgPSB0aGlzLl9zY3JvbGxNZXRyaWNzLnRpbWVzdGFtcFxuICAgICAgPyBNYXRoLm1heCgxLCB0aW1lc3RhbXAgLSB0aGlzLl9zY3JvbGxNZXRyaWNzLnRpbWVzdGFtcClcbiAgICAgIDogMTtcbiAgICBjb25zdCB2ZWxvY2l0eSA9IGRPZmZzZXQgLyBkdDtcblxuICAgIGlmIChcbiAgICAgIGR0ID4gNTAwICYmXG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLmR0ID4gNTAwICYmXG4gICAgICBjb250ZW50TGVuZ3RoID4gNSAqIHZpc2libGVMZW5ndGggJiZcbiAgICAgICF0aGlzLl9oYXNXYXJuZWQucGVyZlxuICAgICkge1xuICAgICAgaW5mb0xvZyhcbiAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogWW91IGhhdmUgYSBsYXJnZSBsaXN0IHRoYXQgaXMgc2xvdyB0byB1cGRhdGUgLSBtYWtlIHN1cmUgeW91ciAnICtcbiAgICAgICAgICAncmVuZGVySXRlbSBmdW5jdGlvbiByZW5kZXJzIGNvbXBvbmVudHMgdGhhdCBmb2xsb3cgUmVhY3QgcGVyZm9ybWFuY2UgYmVzdCBwcmFjdGljZXMgJyArXG4gICAgICAgICAgJ2xpa2UgUHVyZUNvbXBvbmVudCwgc2hvdWxkQ29tcG9uZW50VXBkYXRlLCBldGMuJyxcbiAgICAgICAge2R0LCBwcmV2RHQ6IHRoaXMuX3Njcm9sbE1ldHJpY3MuZHQsIGNvbnRlbnRMZW5ndGh9LFxuICAgICAgKTtcbiAgICAgIHRoaXMuX2hhc1dhcm5lZC5wZXJmID0gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5fc2Nyb2xsTWV0cmljcyA9IHtcbiAgICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgICBkdCxcbiAgICAgIGRPZmZzZXQsXG4gICAgICBvZmZzZXQsXG4gICAgICB0aW1lc3RhbXAsXG4gICAgICB2ZWxvY2l0eSxcbiAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgfTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKHRoaXMucHJvcHMuZGF0YSk7XG4gICAgaWYgKCF0aGlzLnByb3BzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpO1xuICAgIGlmICh2ZWxvY2l0eSAhPT0gMCkge1xuICAgICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIuYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgdGhpcy5fY29tcHV0ZUJsYW5rbmVzcygpO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICB9O1xuXG4gIF9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKSB7XG4gICAgY29uc3Qge2ZpcnN0LCBsYXN0fSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3Qge29mZnNldCwgdmlzaWJsZUxlbmd0aCwgdmVsb2NpdHl9ID0gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgICBjb25zdCBpdGVtQ291bnQgPSB0aGlzLnByb3BzLmdldEl0ZW1Db3VudCh0aGlzLnByb3BzLmRhdGEpO1xuICAgIGxldCBoaVByaSA9IGZhbHNlO1xuICAgIGNvbnN0IG9uRW5kUmVhY2hlZFRocmVzaG9sZCA9IG9uRW5kUmVhY2hlZFRocmVzaG9sZE9yRGVmYXVsdChcbiAgICAgIHRoaXMucHJvcHMub25FbmRSZWFjaGVkVGhyZXNob2xkLFxuICAgICk7XG4gICAgY29uc3Qgc2Nyb2xsaW5nVGhyZXNob2xkID0gKG9uRW5kUmVhY2hlZFRocmVzaG9sZCAqIHZpc2libGVMZW5ndGgpIC8gMjtcbiAgICAvLyBNYXJrIGFzIGhpZ2ggcHJpb3JpdHkgaWYgd2UncmUgY2xvc2UgdG8gdGhlIHN0YXJ0IG9mIHRoZSBmaXJzdCBpdGVtXG4gICAgLy8gQnV0IG9ubHkgaWYgdGhlcmUgYXJlIGl0ZW1zIGJlZm9yZSB0aGUgZmlyc3QgcmVuZGVyZWQgaXRlbVxuICAgIGlmIChmaXJzdCA+IDApIHtcbiAgICAgIGNvbnN0IGRpc3RUb3AgPSBvZmZzZXQgLSB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3goZmlyc3QpLm9mZnNldDtcbiAgICAgIGhpUHJpID1cbiAgICAgICAgaGlQcmkgfHwgZGlzdFRvcCA8IDAgfHwgKHZlbG9jaXR5IDwgLTIgJiYgZGlzdFRvcCA8IHNjcm9sbGluZ1RocmVzaG9sZCk7XG4gICAgfVxuICAgIC8vIE1hcmsgYXMgaGlnaCBwcmlvcml0eSBpZiB3ZSdyZSBjbG9zZSB0byB0aGUgZW5kIG9mIHRoZSBsYXN0IGl0ZW1cbiAgICAvLyBCdXQgb25seSBpZiB0aGVyZSBhcmUgaXRlbXMgYWZ0ZXIgdGhlIGxhc3QgcmVuZGVyZWQgaXRlbVxuICAgIGlmIChsYXN0IDwgaXRlbUNvdW50IC0gMSkge1xuICAgICAgY29uc3QgZGlzdEJvdHRvbSA9XG4gICAgICAgIHRoaXMuX2dldEZyYW1lTWV0cmljc0FwcHJveChsYXN0KS5vZmZzZXQgLSAob2Zmc2V0ICsgdmlzaWJsZUxlbmd0aCk7XG4gICAgICBoaVByaSA9XG4gICAgICAgIGhpUHJpIHx8XG4gICAgICAgIGRpc3RCb3R0b20gPCAwIHx8XG4gICAgICAgICh2ZWxvY2l0eSA+IDIgJiYgZGlzdEJvdHRvbSA8IHNjcm9sbGluZ1RocmVzaG9sZCk7XG4gICAgfVxuICAgIC8vIE9ubHkgdHJpZ2dlciBoaWdoLXByaW9yaXR5IHVwZGF0ZXMgaWYgd2UndmUgYWN0dWFsbHkgcmVuZGVyZWQgY2VsbHMsXG4gICAgLy8gYW5kIHdpdGggdGhhdCBzaXplIGVzdGltYXRlLCBhY2N1cmF0ZWx5IGNvbXB1dGUgaG93IG1hbnkgY2VsbHMgd2Ugc2hvdWxkIHJlbmRlci5cbiAgICAvLyBPdGhlcndpc2UsIGl0IHdvdWxkIGp1c3QgcmVuZGVyIGFzIG1hbnkgY2VsbHMgYXMgaXQgY2FuIChvZiB6ZXJvIGRpbWVuc2lvbiksXG4gICAgLy8gZWFjaCB0aW1lIHRocm91Z2ggYXR0ZW1wdGluZyB0byByZW5kZXIgbW9yZSAobGltaXRlZCBieSBtYXhUb1JlbmRlclBlckJhdGNoKSxcbiAgICAvLyBzdGFydmluZyB0aGUgcmVuZGVyZXIgZnJvbSBhY3R1YWxseSBsYXlpbmcgb3V0IHRoZSBvYmplY3RzIGFuZCBjb21wdXRpbmcgX2F2ZXJhZ2VDZWxsTGVuZ3RoLlxuICAgIC8vIElmIHRoaXMgaXMgdHJpZ2dlcmVkIGluIGFuIGBjb21wb25lbnREaWRVcGRhdGVgIGZvbGxvd2VkIGJ5IGEgaGlQcmkgY2VsbFRvUmVuZGVyVXBkYXRlXG4gICAgLy8gV2Ugc2hvdWxkbid0IGRvIGFub3RoZXIgaGlwcmkgY2VsbFRvUmVuZGVyVXBkYXRlXG4gICAgaWYgKFxuICAgICAgaGlQcmkgJiZcbiAgICAgICh0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCB8fCB0aGlzLnByb3BzLmdldEl0ZW1MYXlvdXQpICYmXG4gICAgICAhdGhpcy5faGlQcmlJblByb2dyZXNzXG4gICAgKSB7XG4gICAgICB0aGlzLl9oaVByaUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgLy8gRG9uJ3Qgd29ycnkgYWJvdXQgaW50ZXJhY3Rpb25zIHdoZW4gc2Nyb2xsaW5nIHF1aWNrbHk7IGZvY3VzIG9uIGZpbGxpbmcgY29udGVudCBhcyBmYXN0XG4gICAgICAvLyBhcyBwb3NzaWJsZS5cbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyLmRpc3Bvc2Uoe2Fib3J0OiB0cnVlfSk7XG4gICAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyLnNjaGVkdWxlKCk7XG4gICAgfVxuICB9XG5cbiAgX29uU2Nyb2xsQmVnaW5EcmFnID0gKGUpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5fb25TY3JvbGxCZWdpbkRyYWcoZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XG4gICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX2hhc0ludGVyYWN0ZWQgPSB0cnVlO1xuICAgIHRoaXMucHJvcHMub25TY3JvbGxCZWdpbkRyYWcgJiYgdGhpcy5wcm9wcy5vblNjcm9sbEJlZ2luRHJhZyhlKTtcbiAgfTtcblxuICBfb25TY3JvbGxFbmREcmFnID0gKGUpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5fb25TY3JvbGxFbmREcmFnKGUpO1xuICAgIH0pO1xuICAgIGNvbnN0IHt2ZWxvY2l0eX0gPSBlLm5hdGl2ZUV2ZW50O1xuICAgIGlmICh2ZWxvY2l0eSkge1xuICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52ZWxvY2l0eSA9IHRoaXMuX3NlbGVjdE9mZnNldCh2ZWxvY2l0eSk7XG4gICAgfVxuICAgIHRoaXMuX2NvbXB1dGVCbGFua25lc3MoKTtcbiAgICB0aGlzLnByb3BzLm9uU2Nyb2xsRW5kRHJhZyAmJiB0aGlzLnByb3BzLm9uU2Nyb2xsRW5kRHJhZyhlKTtcbiAgfTtcblxuICBfb25Nb21lbnR1bVNjcm9sbEJlZ2luID0gKGUpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5fb25Nb21lbnR1bVNjcm9sbEJlZ2luKGUpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEJlZ2luICYmIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEJlZ2luKGUpO1xuICB9O1xuXG4gIF9vbk1vbWVudHVtU2Nyb2xsRW5kID0gKGUpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5fb25Nb21lbnR1bVNjcm9sbEVuZChlKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZlbG9jaXR5ID0gMDtcbiAgICB0aGlzLl9jb21wdXRlQmxhbmtuZXNzKCk7XG4gICAgdGhpcy5wcm9wcy5vbk1vbWVudHVtU2Nyb2xsRW5kICYmIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEVuZChlKTtcbiAgfTtcblxuICBfdXBkYXRlQ2VsbHNUb1JlbmRlciA9ICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBkYXRhLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgb25FbmRSZWFjaGVkVGhyZXNob2xkOiBfb25FbmRSZWFjaGVkVGhyZXNob2xkLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IG9uRW5kUmVhY2hlZFRocmVzaG9sZCA9IG9uRW5kUmVhY2hlZFRocmVzaG9sZE9yRGVmYXVsdChcbiAgICAgIF9vbkVuZFJlYWNoZWRUaHJlc2hvbGQsXG4gICAgKTtcbiAgICBjb25zdCBpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQgPSB0aGlzLl9pc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQoKTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKGRhdGEpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+IHtcbiAgICAgIGxldCBuZXdTdGF0ZTtcbiAgICAgIGNvbnN0IHtjb250ZW50TGVuZ3RoLCBvZmZzZXQsIHZpc2libGVMZW5ndGh9ID0gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgICAgIGlmICghaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkKSB7XG4gICAgICAgIC8vIElmIHdlIHJ1biB0aGlzIHdpdGggYm9ndXMgZGF0YSwgd2UnbGwgZm9yY2UtcmVuZGVyIHdpbmRvdyB7Zmlyc3Q6IDAsIGxhc3Q6IDB9LFxuICAgICAgICAvLyBhbmQgd2lwZSBvdXQgdGhlIGluaXRpYWxOdW1Ub1JlbmRlciByZW5kZXJlZCBlbGVtZW50cy5cbiAgICAgICAgLy8gU28gbGV0J3Mgd2FpdCB1bnRpbCB0aGUgc2Nyb2xsIHZpZXcgbWV0cmljcyBoYXZlIGJlZW4gc2V0IHVwLiBBbmQgdW50aWwgdGhlbixcbiAgICAgICAgLy8gd2Ugd2lsbCB0cnVzdCB0aGUgaW5pdGlhbE51bVRvUmVuZGVyIHN1Z2dlc3Rpb25cbiAgICAgICAgaWYgKHZpc2libGVMZW5ndGggPiAwICYmIGNvbnRlbnRMZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIG5vbi16ZXJvIGluaXRpYWxTY3JvbGxJbmRleCBhbmQgcnVuIHRoaXMgYmVmb3JlIHdlJ3ZlIHNjcm9sbGVkLFxuICAgICAgICAgIC8vIHdlJ2xsIHdpcGUgb3V0IHRoZSBpbml0aWFsTnVtVG9SZW5kZXIgcmVuZGVyZWQgZWxlbWVudHMgc3RhcnRpbmcgYXQgaW5pdGlhbFNjcm9sbEluZGV4LlxuICAgICAgICAgIC8vIFNvIGxldCdzIHdhaXQgdW50aWwgd2UndmUgc2Nyb2xsZWQgdGhlIHZpZXcgdG8gdGhlIHJpZ2h0IHBsYWNlLiBBbmQgdW50aWwgdGhlbixcbiAgICAgICAgICAvLyB3ZSB3aWxsIHRydXN0IHRoZSBpbml0aWFsU2Nyb2xsSW5kZXggc3VnZ2VzdGlvbi5cbiAgICAgICAgICBpZiAoIXRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4IHx8IHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0KSB7XG4gICAgICAgICAgICBuZXdTdGF0ZSA9IGNvbXB1dGVXaW5kb3dlZFJlbmRlckxpbWl0cyhcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kYXRhLFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmdldEl0ZW1Db3VudCxcbiAgICAgICAgICAgICAgbWF4VG9SZW5kZXJQZXJCYXRjaE9yRGVmYXVsdCh0aGlzLnByb3BzLm1heFRvUmVuZGVyUGVyQmF0Y2gpLFxuICAgICAgICAgICAgICB3aW5kb3dTaXplT3JEZWZhdWx0KHRoaXMucHJvcHMud2luZG93U2l6ZSksXG4gICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgICB0aGlzLl9nZXRGcmFtZU1ldHJpY3NBcHByb3gsXG4gICAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VGcm9tRW5kID0gY29udGVudExlbmd0aCAtIHZpc2libGVMZW5ndGggLSBvZmZzZXQ7XG4gICAgICAgIGNvbnN0IHJlbmRlckFoZWFkID1cbiAgICAgICAgICBkaXN0YW5jZUZyb21FbmQgPCBvbkVuZFJlYWNoZWRUaHJlc2hvbGQgKiB2aXNpYmxlTGVuZ3RoXG4gICAgICAgICAgICA/IG1heFRvUmVuZGVyUGVyQmF0Y2hPckRlZmF1bHQodGhpcy5wcm9wcy5tYXhUb1JlbmRlclBlckJhdGNoKVxuICAgICAgICAgICAgOiAwO1xuICAgICAgICBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICBmaXJzdDogMCxcbiAgICAgICAgICBsYXN0OiBNYXRoLm1pbihzdGF0ZS5sYXN0ICsgcmVuZGVyQWhlYWQsIGdldEl0ZW1Db3VudChkYXRhKSAtIDEpLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKG5ld1N0YXRlICYmIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuc2l6ZSA+IDApIHtcbiAgICAgICAgY29uc3QgbmV3Rmlyc3QgPSBuZXdTdGF0ZS5maXJzdDtcbiAgICAgICAgY29uc3QgbmV3TGFzdCA9IG5ld1N0YXRlLmxhc3Q7XG4gICAgICAgIC8vIElmIHNvbWUgY2VsbCBpbiB0aGUgbmV3IHN0YXRlIGhhcyBhIGNoaWxkIGxpc3QgaW4gaXQsIHdlIHNob3VsZCBvbmx5IHJlbmRlclxuICAgICAgICAvLyB1cCB0aHJvdWdoIHRoYXQgaXRlbSwgc28gdGhhdCB3ZSBnaXZlIHRoYXQgbGlzdCBhIGNoYW5jZSB0byByZW5kZXIuXG4gICAgICAgIC8vIE90aGVyd2lzZSB0aGVyZSdzIGNodXJuIGZyb20gbXVsdGlwbGUgY2hpbGQgbGlzdHMgbW91bnRpbmcgYW5kIHVuLW1vdW50aW5nXG4gICAgICAgIC8vIHRoZWlyIGl0ZW1zLlxuICAgICAgICBmb3IgKGxldCBpaSA9IG5ld0ZpcnN0OyBpaSA8PSBuZXdMYXN0OyBpaSsrKSB7XG4gICAgICAgICAgY29uc3QgY2VsbEtleUZvckluZGV4ID0gdGhpcy5faW5kaWNlc1RvS2V5cy5nZXQoaWkpO1xuICAgICAgICAgIGNvbnN0IGNoaWxkTGlzdEtleXMgPVxuICAgICAgICAgICAgY2VsbEtleUZvckluZGV4ICYmXG4gICAgICAgICAgICB0aGlzLl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cy5nZXQoY2VsbEtleUZvckluZGV4KTtcbiAgICAgICAgICBpZiAoIWNoaWxkTGlzdEtleXMpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgc29tZUNoaWxkSGFzTW9yZSA9IGZhbHNlO1xuICAgICAgICAgIC8vIEZvciBlYWNoIGNlbGwsIG5lZWQgdG8gY2hlY2sgd2hldGhlciBhbnkgY2hpbGQgbGlzdCBpbiBpdCBoYXMgbW9yZSBlbGVtZW50cyB0byByZW5kZXJcbiAgICAgICAgICBmb3IgKGxldCBjaGlsZEtleSBvZiBjaGlsZExpc3RLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZExpc3QgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChjaGlsZEtleSk7XG4gICAgICAgICAgICBpZiAoY2hpbGRMaXN0ICYmIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5oYXNNb3JlKCkpIHtcbiAgICAgICAgICAgICAgc29tZUNoaWxkSGFzTW9yZSA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc29tZUNoaWxkSGFzTW9yZSkge1xuICAgICAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdXNlXVxuICAgICAgICAgICAgbmV3U3RhdGUubGFzdCA9IGlpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIG5ld1N0YXRlICE9IG51bGwgJiZcbiAgICAgICAgbmV3U3RhdGUuZmlyc3QgPT09IHN0YXRlLmZpcnN0ICYmXG4gICAgICAgIG5ld1N0YXRlLmxhc3QgPT09IHN0YXRlLmxhc3RcbiAgICAgICkge1xuICAgICAgICBuZXdTdGF0ZSA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfSk7XG4gIH07XG5cbiAgX2NyZWF0ZVZpZXdUb2tlbiA9IChpbmRleDogbnVtYmVyLCBpc1ZpZXdhYmxlOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3Qge2RhdGEsIGdldEl0ZW19ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpdGVtID0gZ2V0SXRlbShkYXRhLCBpbmRleCk7XG4gICAgcmV0dXJuIHtpbmRleCwgaXRlbSwga2V5OiB0aGlzLl9rZXlFeHRyYWN0b3IoaXRlbSwgaW5kZXgpLCBpc1ZpZXdhYmxlfTtcbiAgfTtcblxuICBfZ2V0RnJhbWVNZXRyaWNzQXBwcm94ID0gKFxuICAgIGluZGV4OiBudW1iZXIsXG4gICk6IHtcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICAuLi5cbiAgfSA9PiB7XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3MoaW5kZXgpO1xuICAgIGlmIChmcmFtZSAmJiBmcmFtZS5pbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgIC8vIGNoZWNrIGZvciBpbnZhbGlkIGZyYW1lcyBkdWUgdG8gcm93IHJlLW9yZGVyaW5nXG4gICAgICByZXR1cm4gZnJhbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHtnZXRJdGVtTGF5b3V0fSA9IHRoaXMucHJvcHM7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgICFnZXRJdGVtTGF5b3V0LFxuICAgICAgICAnU2hvdWxkIG5vdCBoYXZlIHRvIGVzdGltYXRlIGZyYW1lcyB3aGVuIGEgbWVhc3VyZW1lbnQgbWV0cmljcyBmdW5jdGlvbiBpcyBwcm92aWRlZCcsXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVuZ3RoOiB0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCxcbiAgICAgICAgb2Zmc2V0OiB0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCAqIGluZGV4LFxuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgX2dldEZyYW1lTWV0cmljcyA9IChcbiAgICBpbmRleDogbnVtYmVyLFxuICApOiA/e1xuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9mZnNldDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgaW5MYXlvdXQ/OiBib29sZWFuLFxuICAgIC4uLlxuICB9ID0+IHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbSwgZ2V0SXRlbUNvdW50LCBnZXRJdGVtTGF5b3V0fSA9IHRoaXMucHJvcHM7XG4gICAgaW52YXJpYW50KFxuICAgICAgZ2V0SXRlbUNvdW50KGRhdGEpID4gaW5kZXgsXG4gICAgICAnVHJpZWQgdG8gZ2V0IGZyYW1lIGZvciBvdXQgb2YgcmFuZ2UgaW5kZXggJyArIGluZGV4LFxuICAgICk7XG4gICAgY29uc3QgaXRlbSA9IGdldEl0ZW0oZGF0YSwgaW5kZXgpO1xuICAgIGxldCBmcmFtZSA9IGl0ZW0gJiYgdGhpcy5fZnJhbWVzW3RoaXMuX2tleUV4dHJhY3RvcihpdGVtLCBpbmRleCldO1xuICAgIGlmICghZnJhbWUgfHwgZnJhbWUuaW5kZXggIT09IGluZGV4KSB7XG4gICAgICBpZiAoZ2V0SXRlbUxheW91dCkge1xuICAgICAgICBmcmFtZSA9IGdldEl0ZW1MYXlvdXQoZGF0YSwgaW5kZXgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKiAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gKD49MC42My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnRcbiAgICAgKiBzdXBwcmVzc2VzIGFuIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42MyB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3JcbiAgICAgKiBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICByZXR1cm4gZnJhbWU7XG4gIH07XG5cbiAgX3VwZGF0ZVZpZXdhYmxlSXRlbXMoZGF0YTogYW55KSB7XG4gICAgY29uc3Qge2dldEl0ZW1Db3VudH0gPSB0aGlzLnByb3BzO1xuXG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XG4gICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5vblVwZGF0ZShcbiAgICAgICAgZ2V0SXRlbUNvdW50KGRhdGEpLFxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLm9mZnNldCxcbiAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoLFxuICAgICAgICB0aGlzLl9nZXRGcmFtZU1ldHJpY3MsXG4gICAgICAgIHRoaXMuX2NyZWF0ZVZpZXdUb2tlbixcbiAgICAgICAgdHVwbGUub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgICAgdGhpcy5zdGF0ZSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbn1cblxudHlwZSBDZWxsUmVuZGVyZXJQcm9wcyA9IHtcbiAgQ2VsbFJlbmRlcmVyQ29tcG9uZW50PzogP1JlYWN0LkNvbXBvbmVudFR5cGU8YW55PixcbiAgSXRlbVNlcGFyYXRvckNvbXBvbmVudDogP1JlYWN0LkNvbXBvbmVudFR5cGU8XG4gICAgYW55IHwge2hpZ2hsaWdodGVkOiBib29sZWFuLCBsZWFkaW5nSXRlbTogP0l0ZW19LFxuICA+LFxuICBjZWxsS2V5OiBzdHJpbmcsXG4gIGZpbGxSYXRlSGVscGVyOiBGaWxsUmF0ZUhlbHBlcixcbiAgaG9yaXpvbnRhbDogP2Jvb2xlYW4sXG4gIGluZGV4OiBudW1iZXIsXG4gIGludmVyc2lvblN0eWxlOiBWaWV3U3R5bGVQcm9wLFxuICBpdGVtOiBJdGVtLFxuICAvLyBUaGlzIGlzIGV4dHJhY3RlZCBieSBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyXG4gIG9uTGF5b3V0OiAoZXZlbnQ6IE9iamVjdCkgPT4gdm9pZCxcbiAgb25Vbm1vdW50OiAoY2VsbEtleTogc3RyaW5nKSA9PiB2b2lkLFxuICBvblVwZGF0ZVNlcGFyYXRvcnM6IChjZWxsS2V5czogQXJyYXk8P3N0cmluZz4sIHByb3BzOiBPYmplY3QpID0+IHZvaWQsXG4gIHBhcmVudFByb3BzOiB7XG4gICAgLy8gZS5nLiBoZWlnaHQsIHksXG4gICAgZ2V0SXRlbUxheW91dD86IChcbiAgICAgIGRhdGE6IGFueSxcbiAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgKSA9PiB7XG4gICAgICBsZW5ndGg6IG51bWJlcixcbiAgICAgIG9mZnNldDogbnVtYmVyLFxuICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0sXG4gICAgcmVuZGVySXRlbT86ID9SZW5kZXJJdGVtVHlwZTxJdGVtPixcbiAgICBMaXN0SXRlbUNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuRWxlbWVudDxhbnk+KSxcbiAgICAuLi5cbiAgfSxcbiAgcHJldkNlbGxLZXk6ID9zdHJpbmcsXG4gIC4uLlxufTtcblxudHlwZSBDZWxsUmVuZGVyZXJTdGF0ZSA9IHtcbiAgc2VwYXJhdG9yUHJvcHM6ICRSZWFkT25seTx7fFxuICAgIGhpZ2hsaWdodGVkOiBib29sZWFuLFxuICAgIGxlYWRpbmdJdGVtOiA/SXRlbSxcbiAgfH0+LFxuICAuLi5cbn07XG5cbmNsYXNzIENlbGxSZW5kZXJlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxcbiAgQ2VsbFJlbmRlcmVyUHJvcHMsXG4gIENlbGxSZW5kZXJlclN0YXRlLFxuPiB7XG4gIHN0YXRlID0ge1xuICAgIHNlcGFyYXRvclByb3BzOiB7XG4gICAgICBoaWdobGlnaHRlZDogZmFsc2UsXG4gICAgICBsZWFkaW5nSXRlbTogdGhpcy5wcm9wcy5pdGVtLFxuICAgIH0sXG4gIH07XG5cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhcbiAgICBwcm9wczogQ2VsbFJlbmRlcmVyUHJvcHMsXG4gICAgcHJldlN0YXRlOiBDZWxsUmVuZGVyZXJTdGF0ZSxcbiAgKTogP0NlbGxSZW5kZXJlclN0YXRlIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VwYXJhdG9yUHJvcHM6IHtcbiAgICAgICAgLi4ucHJldlN0YXRlLnNlcGFyYXRvclByb3BzLFxuICAgICAgICBsZWFkaW5nSXRlbTogcHJvcHMuaXRlbSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIFRPRE86IGNvbnNpZGVyIGZhY3RvcmluZyBzZXBhcmF0b3Igc3R1ZmYgb3V0IG9mIFZpcnR1YWxpemVkTGlzdCBpbnRvIEZsYXRMaXN0IHNpbmNlIGl0J3Mgbm90XG4gIC8vIHJldXNlZCBieSBTZWN0aW9uTGlzdCBhbmQgd2UgY2FuIGtlZXAgVmlydHVhbGl6ZWRMaXN0IHNpbXBsZXIuXG4gIF9zZXBhcmF0b3JzID0ge1xuICAgIGhpZ2hsaWdodDogKCkgPT4ge1xuICAgICAgY29uc3Qge2NlbGxLZXksIHByZXZDZWxsS2V5fSA9IHRoaXMucHJvcHM7XG4gICAgICB0aGlzLnByb3BzLm9uVXBkYXRlU2VwYXJhdG9ycyhbY2VsbEtleSwgcHJldkNlbGxLZXldLCB7XG4gICAgICAgIGhpZ2hsaWdodGVkOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSxcbiAgICB1bmhpZ2hsaWdodDogKCkgPT4ge1xuICAgICAgY29uc3Qge2NlbGxLZXksIHByZXZDZWxsS2V5fSA9IHRoaXMucHJvcHM7XG4gICAgICB0aGlzLnByb3BzLm9uVXBkYXRlU2VwYXJhdG9ycyhbY2VsbEtleSwgcHJldkNlbGxLZXldLCB7XG4gICAgICAgIGhpZ2hsaWdodGVkOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdXBkYXRlUHJvcHM6IChzZWxlY3Q6ICdsZWFkaW5nJyB8ICd0cmFpbGluZycsIG5ld1Byb3BzOiBPYmplY3QpID0+IHtcbiAgICAgIGNvbnN0IHtjZWxsS2V5LCBwcmV2Q2VsbEtleX0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVNlcGFyYXRvcnMoXG4gICAgICAgIFtzZWxlY3QgPT09ICdsZWFkaW5nJyA/IHByZXZDZWxsS2V5IDogY2VsbEtleV0sXG4gICAgICAgIG5ld1Byb3BzLFxuICAgICAgKTtcbiAgICB9LFxuICB9O1xuXG4gIHVwZGF0ZVNlcGFyYXRvclByb3BzKG5ld1Byb3BzOiBPYmplY3QpIHtcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XG4gICAgICBzZXBhcmF0b3JQcm9wczogey4uLnN0YXRlLnNlcGFyYXRvclByb3BzLCAuLi5uZXdQcm9wc30sXG4gICAgfSkpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5wcm9wcy5vblVubW91bnQodGhpcy5wcm9wcy5jZWxsS2V5KTtcbiAgfVxuXG4gIF9yZW5kZXJFbGVtZW50KHJlbmRlckl0ZW0sIExpc3RJdGVtQ29tcG9uZW50LCBpdGVtLCBpbmRleCkge1xuICAgIGlmIChyZW5kZXJJdGVtICYmIExpc3RJdGVtQ29tcG9uZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdWaXJ0dWFsaXplZExpc3Q6IEJvdGggTGlzdEl0ZW1Db21wb25lbnQgYW5kIHJlbmRlckl0ZW0gcHJvcHMgYXJlIHByZXNlbnQuIExpc3RJdGVtQ29tcG9uZW50IHdpbGwgdGFrZScgK1xuICAgICAgICAgICcgcHJlY2VkZW5jZSBvdmVyIHJlbmRlckl0ZW0uJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKExpc3RJdGVtQ29tcG9uZW50KSB7XG4gICAgICAvKiAkRmxvd0ZpeE1lW25vdC1hLWNvbXBvbmVudF0gKD49MC4xMDguMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpc1xuICAgICAgICogY29tbWVudCBzdXBwcmVzc2VzIGFuIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC4xMDggd2FzIGRlcGxveWVkLiBUb1xuICAgICAgICogc2VlIHRoZSBlcnJvciwgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICAvKiAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlLWFyZ10gKD49MC4xMDguMCBzaXRlPXJlYWN0X25hdGl2ZV9mYilcbiAgICAgICAqIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC4xMDggd2FzIGRlcGxveWVkLlxuICAgICAgICogVG8gc2VlIHRoZSBlcnJvciwgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbUNvbXBvbmVudCwge1xuICAgICAgICBpdGVtLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgc2VwYXJhdG9yczogdGhpcy5fc2VwYXJhdG9ycyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZW5kZXJJdGVtKSB7XG4gICAgICByZXR1cm4gcmVuZGVySXRlbSh7XG4gICAgICAgIGl0ZW0sXG4gICAgICAgIGluZGV4LFxuICAgICAgICBzZXBhcmF0b3JzOiB0aGlzLl9zZXBhcmF0b3JzLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaW52YXJpYW50KFxuICAgICAgZmFsc2UsXG4gICAgICAnVmlydHVhbGl6ZWRMaXN0OiBFaXRoZXIgTGlzdEl0ZW1Db21wb25lbnQgb3IgcmVuZGVySXRlbSBwcm9wcyBhcmUgcmVxdWlyZWQgYnV0IG5vbmUgd2VyZSBmb3VuZC4nLFxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgQ2VsbFJlbmRlcmVyQ29tcG9uZW50LFxuICAgICAgSXRlbVNlcGFyYXRvckNvbXBvbmVudCxcbiAgICAgIGZpbGxSYXRlSGVscGVyLFxuICAgICAgaG9yaXpvbnRhbCxcbiAgICAgIGl0ZW0sXG4gICAgICBpbmRleCxcbiAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgcGFyZW50UHJvcHMsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge3JlbmRlckl0ZW0sIGdldEl0ZW1MYXlvdXQsIExpc3RJdGVtQ29tcG9uZW50fSA9IHBhcmVudFByb3BzO1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJFbGVtZW50KFxuICAgICAgcmVuZGVySXRlbSxcbiAgICAgIExpc3RJdGVtQ29tcG9uZW50LFxuICAgICAgaXRlbSxcbiAgICAgIGluZGV4LFxuICAgICk7XG5cbiAgICBjb25zdCBvbkxheW91dCA9XG4gICAgICAvKiAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gKD49MC42OC4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnRcbiAgICAgICAqIHN1cHByZXNzZXMgYW4gZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjY4IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZVxuICAgICAgICogZXJyb3IgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICBnZXRJdGVtTGF5b3V0ICYmICFwYXJlbnRQcm9wcy5kZWJ1ZyAmJiAhZmlsbFJhdGVIZWxwZXIuZW5hYmxlZCgpXG4gICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgIDogdGhpcy5wcm9wcy5vbkxheW91dDtcbiAgICAvLyBOT1RFOiB0aGF0IHdoZW4gdGhpcyBpcyBhIHN0aWNreSBoZWFkZXIsIGBvbkxheW91dGAgd2lsbCBnZXQgYXV0b21hdGljYWxseSBleHRyYWN0ZWQgYW5kXG4gICAgLy8gY2FsbGVkIGV4cGxpY2l0bHkgYnkgYFNjcm9sbFZpZXdTdGlja3lIZWFkZXJgLlxuICAgIGNvbnN0IGl0ZW1TZXBhcmF0b3IgPSBJdGVtU2VwYXJhdG9yQ29tcG9uZW50ICYmIChcbiAgICAgIDxJdGVtU2VwYXJhdG9yQ29tcG9uZW50IHsuLi50aGlzLnN0YXRlLnNlcGFyYXRvclByb3BzfSAvPlxuICAgICk7XG4gICAgY29uc3QgY2VsbFN0eWxlID0gaW52ZXJzaW9uU3R5bGVcbiAgICAgID8gaG9yaXpvbnRhbFxuICAgICAgICA/IFtzdHlsZXMucm93UmV2ZXJzZSwgaW52ZXJzaW9uU3R5bGVdXG4gICAgICAgIDogW3N0eWxlcy5jb2x1bW5SZXZlcnNlLCBpbnZlcnNpb25TdHlsZV1cbiAgICAgIDogaG9yaXpvbnRhbFxuICAgICAgPyBbc3R5bGVzLnJvdywgaW52ZXJzaW9uU3R5bGVdXG4gICAgICA6IGludmVyc2lvblN0eWxlO1xuICAgIGNvbnN0IHJlc3VsdCA9ICFDZWxsUmVuZGVyZXJDb21wb25lbnQgPyAoXG4gICAgICAvKiAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlLWFyZ10gKD49MC44OS4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSAqXG4gICAgICAgIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC44OSB3YXMgZGVwbG95ZWQuICpcbiAgICAgICAgVG8gc2VlIHRoZSBlcnJvciwgZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICA8VmlldyBzdHlsZT17Y2VsbFN0eWxlfSBvbkxheW91dD17b25MYXlvdXR9PlxuICAgICAgICB7ZWxlbWVudH1cbiAgICAgICAge2l0ZW1TZXBhcmF0b3J9XG4gICAgICA8L1ZpZXc+XG4gICAgKSA6IChcbiAgICAgIDxDZWxsUmVuZGVyZXJDb21wb25lbnRcbiAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgIHN0eWxlPXtjZWxsU3R5bGV9XG4gICAgICAgIG9uTGF5b3V0PXtvbkxheW91dH0+XG4gICAgICAgIHtlbGVtZW50fVxuICAgICAgICB7aXRlbVNlcGFyYXRvcn1cbiAgICAgIDwvQ2VsbFJlbmRlcmVyQ29tcG9uZW50PlxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXIgY2VsbEtleT17dGhpcy5wcm9wcy5jZWxsS2V5fT5cbiAgICAgICAge3Jlc3VsdH1cbiAgICAgIDwvVmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlcj5cbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlc2NyaWJlTmVzdGVkTGlzdHMoY2hpbGRMaXN0OiB7XG4gICtjZWxsS2V5OiBzdHJpbmcsXG4gICtrZXk6IHN0cmluZyxcbiAgK3JlZjogVmlydHVhbGl6ZWRMaXN0LFxuICArcGFyZW50RGVidWdJbmZvOiBMaXN0RGVidWdJbmZvLFxuICAraG9yaXpvbnRhbDogYm9vbGVhbixcbiAgLi4uXG59KSB7XG4gIGxldCB0cmFjZSA9XG4gICAgJ1ZpcnR1YWxpemVkTGlzdCB0cmFjZTpcXG4nICtcbiAgICBgICBDaGlsZCAoJHtjaGlsZExpc3QuaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCd9KTpcXG5gICtcbiAgICBgICAgIGxpc3RLZXk6ICR7Y2hpbGRMaXN0LmtleX1cXG5gICtcbiAgICBgICAgIGNlbGxLZXk6ICR7Y2hpbGRMaXN0LmNlbGxLZXl9YDtcblxuICBsZXQgZGVidWdJbmZvID0gY2hpbGRMaXN0LnBhcmVudERlYnVnSW5mbztcbiAgd2hpbGUgKGRlYnVnSW5mbykge1xuICAgIHRyYWNlICs9XG4gICAgICBgXFxuICBQYXJlbnQgKCR7ZGVidWdJbmZvLmhvcml6b250YWwgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnfSk6XFxuYCArXG4gICAgICBgICAgIGxpc3RLZXk6ICR7ZGVidWdJbmZvLmxpc3RLZXl9XFxuYCArXG4gICAgICBgICAgIGNlbGxLZXk6ICR7ZGVidWdJbmZvLmNlbGxLZXl9YDtcbiAgICBkZWJ1Z0luZm8gPSBkZWJ1Z0luZm8ucGFyZW50O1xuICB9XG4gIHJldHVybiB0cmFjZTtcbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICB2ZXJ0aWNhbGx5SW52ZXJ0ZWQ6IHtcbiAgICB0cmFuc2Zvcm06IFt7c2NhbGVZOiAtMX1dLFxuICB9LFxuICBob3Jpem9udGFsbHlJbnZlcnRlZDoge1xuICAgIHRyYW5zZm9ybTogW3tzY2FsZVg6IC0xfV0sXG4gIH0sXG4gIHJvdzoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICB9LFxuICByb3dSZXZlcnNlOiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3Jvdy1yZXZlcnNlJyxcbiAgfSxcbiAgY29sdW1uUmV2ZXJzZToge1xuICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZScsXG4gIH0sXG4gIGRlYnVnOiB7XG4gICAgZmxleDogMSxcbiAgfSxcbiAgZGVidWdPdmVybGF5QmFzZToge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgfSxcbiAgZGVidWdPdmVybGF5OiB7XG4gICAgYm90dG9tOiAwLFxuICAgIHdpZHRoOiAyMCxcbiAgICBib3JkZXJDb2xvcjogJ2JsdWUnLFxuICAgIGJvcmRlcldpZHRoOiAxLFxuICB9LFxuICBkZWJ1Z092ZXJsYXlGcmFtZToge1xuICAgIGxlZnQ6IDAsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnb3JhbmdlJyxcbiAgfSxcbiAgZGVidWdPdmVybGF5RnJhbWVMYXN0OiB7XG4gICAgbGVmdDogMCxcbiAgICBib3JkZXJDb2xvcjogJ2dyZWVuJyxcbiAgICBib3JkZXJXaWR0aDogMixcbiAgfSxcbiAgZGVidWdPdmVybGF5RnJhbWVWaXM6IHtcbiAgICBsZWZ0OiAwLFxuICAgIGJvcmRlckNvbG9yOiAncmVkJyxcbiAgICBib3JkZXJXaWR0aDogMixcbiAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpcnR1YWxpemVkTGlzdDtcbiJdfQ==