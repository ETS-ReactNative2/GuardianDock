71307ff686b9b9c0639f09903b7e01de
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _NativeAnimatedModule = _interopRequireDefault(require("./NativeAnimatedModule"));

var _NativeAnimatedTurboModule = _interopRequireDefault(require("./NativeAnimatedTurboModule"));

var _NativeEventEmitter = _interopRequireDefault(require("../EventEmitter/NativeEventEmitter"));

var _Platform = _interopRequireDefault(require("../Utilities/Platform"));

var _invariant = _interopRequireDefault(require("invariant"));

var NativeAnimatedModule = _Platform.default.OS === 'ios' && global.RN$Bridgeless === true ? _NativeAnimatedTurboModule.default : _NativeAnimatedModule.default;
var __nativeAnimatedNodeTagCount = 1;
var __nativeAnimationIdCount = 1;
var nativeEventEmitter;
var waitingForQueuedOperations = new Set();
var queueOperations = false;
var queue = [];
var API = {
  getValue: function getValue(tag, saveValueCallback) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      NativeAnimatedModule.getValue(tag, saveValueCallback);
    });
  },
  setWaitingForIdentifier: function setWaitingForIdentifier(id) {
    waitingForQueuedOperations.add(id);
    queueOperations = true;
  },
  unsetWaitingForIdentifier: function unsetWaitingForIdentifier(id) {
    waitingForQueuedOperations.delete(id);

    if (waitingForQueuedOperations.size === 0) {
      queueOperations = false;
      API.disableQueue();
    }
  },
  disableQueue: function disableQueue() {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');

    if (_Platform.default.OS === 'android') {
      NativeAnimatedModule.startOperationBatch();
    }

    for (var q = 0, l = queue.length; q < l; q++) {
      queue[q]();
    }

    queue.length = 0;

    if (_Platform.default.OS === 'android') {
      NativeAnimatedModule.finishOperationBatch();
    }
  },
  queueOperation: function queueOperation(fn) {
    if (queueOperations) {
      queue.push(fn);
    } else {
      fn();
    }
  },
  createAnimatedNode: function createAnimatedNode(tag, config) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.createAnimatedNode(tag, config);
    });
  },
  startListeningToAnimatedNodeValue: function startListeningToAnimatedNodeValue(tag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.startListeningToAnimatedNodeValue(tag);
    });
  },
  stopListeningToAnimatedNodeValue: function stopListeningToAnimatedNodeValue(tag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.stopListeningToAnimatedNodeValue(tag);
    });
  },
  connectAnimatedNodes: function connectAnimatedNodes(parentTag, childTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.connectAnimatedNodes(parentTag, childTag);
    });
  },
  disconnectAnimatedNodes: function disconnectAnimatedNodes(parentTag, childTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.disconnectAnimatedNodes(parentTag, childTag);
    });
  },
  startAnimatingNode: function startAnimatingNode(animationId, nodeTag, config, endCallback) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.startAnimatingNode(animationId, nodeTag, config, endCallback);
    });
  },
  stopAnimation: function stopAnimation(animationId) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.stopAnimation(animationId);
    });
  },
  setAnimatedNodeValue: function setAnimatedNodeValue(nodeTag, value) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.setAnimatedNodeValue(nodeTag, value);
    });
  },
  setAnimatedNodeOffset: function setAnimatedNodeOffset(nodeTag, offset) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.setAnimatedNodeOffset(nodeTag, offset);
    });
  },
  flattenAnimatedNodeOffset: function flattenAnimatedNodeOffset(nodeTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.flattenAnimatedNodeOffset(nodeTag);
    });
  },
  extractAnimatedNodeOffset: function extractAnimatedNodeOffset(nodeTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.extractAnimatedNodeOffset(nodeTag);
    });
  },
  connectAnimatedNodeToView: function connectAnimatedNodeToView(nodeTag, viewTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.connectAnimatedNodeToView(nodeTag, viewTag);
    });
  },
  disconnectAnimatedNodeFromView: function disconnectAnimatedNodeFromView(nodeTag, viewTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.disconnectAnimatedNodeFromView(nodeTag, viewTag);
    });
  },
  restoreDefaultValues: function restoreDefaultValues(nodeTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');

    if (NativeAnimatedModule.restoreDefaultValues != null) {
      API.queueOperation(function () {
        return NativeAnimatedModule.restoreDefaultValues(nodeTag);
      });
    }
  },
  dropAnimatedNode: function dropAnimatedNode(tag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.dropAnimatedNode(tag);
    });
  },
  addAnimatedEventToView: function addAnimatedEventToView(viewTag, eventName, eventMapping) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.addAnimatedEventToView(viewTag, eventName, eventMapping);
    });
  },
  removeAnimatedEventFromView: function removeAnimatedEventFromView(viewTag, eventName, animatedNodeTag) {
    (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
    API.queueOperation(function () {
      return NativeAnimatedModule.removeAnimatedEventFromView(viewTag, eventName, animatedNodeTag);
    });
  }
};
var SUPPORTED_STYLES = {
  opacity: true,
  transform: true,
  borderRadius: true,
  borderBottomEndRadius: true,
  borderBottomLeftRadius: true,
  borderBottomRightRadius: true,
  borderBottomStartRadius: true,
  borderTopEndRadius: true,
  borderTopLeftRadius: true,
  borderTopRightRadius: true,
  borderTopStartRadius: true,
  elevation: true,
  zIndex: true,
  shadowOpacity: true,
  shadowRadius: true,
  scaleX: true,
  scaleY: true,
  translateX: true,
  translateY: true
};
var SUPPORTED_TRANSFORMS = {
  translateX: true,
  translateY: true,
  scale: true,
  scaleX: true,
  scaleY: true,
  rotate: true,
  rotateX: true,
  rotateY: true,
  rotateZ: true,
  perspective: true
};
var SUPPORTED_INTERPOLATION_PARAMS = {
  inputRange: true,
  outputRange: true,
  extrapolate: true,
  extrapolateRight: true,
  extrapolateLeft: true
};

function addWhitelistedStyleProp(prop) {
  SUPPORTED_STYLES[prop] = true;
}

function addWhitelistedTransformProp(prop) {
  SUPPORTED_TRANSFORMS[prop] = true;
}

function addWhitelistedInterpolationParam(param) {
  SUPPORTED_INTERPOLATION_PARAMS[param] = true;
}

function validateTransform(configs) {
  configs.forEach(function (config) {
    if (!SUPPORTED_TRANSFORMS.hasOwnProperty(config.property)) {
      throw new Error("Property '" + config.property + "' is not supported by native animated module");
    }
  });
}

function validateStyles(styles) {
  for (var _key in styles) {
    if (!SUPPORTED_STYLES.hasOwnProperty(_key)) {
      throw new Error("Style property '" + _key + "' is not supported by native animated module");
    }
  }
}

function validateInterpolation(config) {
  for (var _key2 in config) {
    if (!SUPPORTED_INTERPOLATION_PARAMS.hasOwnProperty(_key2)) {
      throw new Error("Interpolation property '" + _key2 + "' is not supported by native animated module");
    }
  }
}

function generateNewNodeTag() {
  return __nativeAnimatedNodeTagCount++;
}

function generateNewAnimationId() {
  return __nativeAnimationIdCount++;
}

function assertNativeAnimatedModule() {
  (0, _invariant.default)(NativeAnimatedModule, 'Native animated module is not available');
}

var _warnedMissingNativeAnimated = false;

function shouldUseNativeDriver(config) {
  if (config.useNativeDriver == null) {
    console.warn('Animated: `useNativeDriver` was not specified. This is a required ' + 'option and must be explicitly set to `true` or `false`');
  }

  if (config.useNativeDriver === true && !NativeAnimatedModule) {
    if (!_warnedMissingNativeAnimated) {
      console.warn('Animated: `useNativeDriver` is not supported because the native ' + 'animated module is missing. Falling back to JS-based animation. To ' + 'resolve this, add `RCTAnimation` module to this app, or remove ' + '`useNativeDriver`. ' + 'Make sure to run `bundle exec pod install` first. Read more about autolinking: https://github.com/react-native-community/cli/blob/master/docs/autolinking.md');
      _warnedMissingNativeAnimated = true;
    }

    return false;
  }

  return config.useNativeDriver || false;
}

function transformDataType(value) {
  if (typeof value !== 'string') {
    return value;
  }

  if (/deg$/.test(value)) {
    var degrees = parseFloat(value) || 0;
    var radians = degrees * Math.PI / 180.0;
    return radians;
  } else {
    return value;
  }
}

module.exports = {
  API: API,
  addWhitelistedStyleProp: addWhitelistedStyleProp,
  addWhitelistedTransformProp: addWhitelistedTransformProp,
  addWhitelistedInterpolationParam: addWhitelistedInterpolationParam,
  validateStyles: validateStyles,
  validateTransform: validateTransform,
  validateInterpolation: validateInterpolation,
  generateNewNodeTag: generateNewNodeTag,
  generateNewAnimationId: generateNewAnimationId,
  assertNativeAnimatedModule: assertNativeAnimatedModule,
  shouldUseNativeDriver: shouldUseNativeDriver,
  transformDataType: transformDataType,

  get nativeEventEmitter() {
    if (!nativeEventEmitter) {
      nativeEventEmitter = new _NativeEventEmitter.default(_Platform.default.OS !== 'ios' ? null : NativeAnimatedModule);
    }

    return nativeEventEmitter;
  }

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdGl2ZUFuaW1hdGVkSGVscGVyLmpzIl0sIm5hbWVzIjpbIk5hdGl2ZUFuaW1hdGVkTW9kdWxlIiwiUGxhdGZvcm0iLCJPUyIsImdsb2JhbCIsIlJOJEJyaWRnZWxlc3MiLCJOYXRpdmVBbmltYXRlZFR1cmJvTW9kdWxlIiwiTmF0aXZlQW5pbWF0ZWROb25UdXJib01vZHVsZSIsIl9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQiLCJfX25hdGl2ZUFuaW1hdGlvbklkQ291bnQiLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJ3YWl0aW5nRm9yUXVldWVkT3BlcmF0aW9ucyIsIlNldCIsInF1ZXVlT3BlcmF0aW9ucyIsInF1ZXVlIiwiQVBJIiwiZ2V0VmFsdWUiLCJ0YWciLCJzYXZlVmFsdWVDYWxsYmFjayIsInF1ZXVlT3BlcmF0aW9uIiwic2V0V2FpdGluZ0ZvcklkZW50aWZpZXIiLCJpZCIsImFkZCIsInVuc2V0V2FpdGluZ0ZvcklkZW50aWZpZXIiLCJkZWxldGUiLCJzaXplIiwiZGlzYWJsZVF1ZXVlIiwic3RhcnRPcGVyYXRpb25CYXRjaCIsInEiLCJsIiwibGVuZ3RoIiwiZmluaXNoT3BlcmF0aW9uQmF0Y2giLCJmbiIsInB1c2giLCJjcmVhdGVBbmltYXRlZE5vZGUiLCJjb25maWciLCJzdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUiLCJzdG9wTGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSIsImNvbm5lY3RBbmltYXRlZE5vZGVzIiwicGFyZW50VGFnIiwiY2hpbGRUYWciLCJkaXNjb25uZWN0QW5pbWF0ZWROb2RlcyIsInN0YXJ0QW5pbWF0aW5nTm9kZSIsImFuaW1hdGlvbklkIiwibm9kZVRhZyIsImVuZENhbGxiYWNrIiwic3RvcEFuaW1hdGlvbiIsInNldEFuaW1hdGVkTm9kZVZhbHVlIiwidmFsdWUiLCJzZXRBbmltYXRlZE5vZGVPZmZzZXQiLCJvZmZzZXQiLCJmbGF0dGVuQW5pbWF0ZWROb2RlT2Zmc2V0IiwiZXh0cmFjdEFuaW1hdGVkTm9kZU9mZnNldCIsImNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXciLCJ2aWV3VGFnIiwiZGlzY29ubmVjdEFuaW1hdGVkTm9kZUZyb21WaWV3IiwicmVzdG9yZURlZmF1bHRWYWx1ZXMiLCJkcm9wQW5pbWF0ZWROb2RlIiwiYWRkQW5pbWF0ZWRFdmVudFRvVmlldyIsImV2ZW50TmFtZSIsImV2ZW50TWFwcGluZyIsInJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyIsImFuaW1hdGVkTm9kZVRhZyIsIlNVUFBPUlRFRF9TVFlMRVMiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwiYm9yZGVyUmFkaXVzIiwiYm9yZGVyQm90dG9tRW5kUmFkaXVzIiwiYm9yZGVyQm90dG9tTGVmdFJhZGl1cyIsImJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzIiwiYm9yZGVyQm90dG9tU3RhcnRSYWRpdXMiLCJib3JkZXJUb3BFbmRSYWRpdXMiLCJib3JkZXJUb3BMZWZ0UmFkaXVzIiwiYm9yZGVyVG9wUmlnaHRSYWRpdXMiLCJib3JkZXJUb3BTdGFydFJhZGl1cyIsImVsZXZhdGlvbiIsInpJbmRleCIsInNoYWRvd09wYWNpdHkiLCJzaGFkb3dSYWRpdXMiLCJzY2FsZVgiLCJzY2FsZVkiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsIlNVUFBPUlRFRF9UUkFOU0ZPUk1TIiwic2NhbGUiLCJyb3RhdGUiLCJyb3RhdGVYIiwicm90YXRlWSIsInJvdGF0ZVoiLCJwZXJzcGVjdGl2ZSIsIlNVUFBPUlRFRF9JTlRFUlBPTEFUSU9OX1BBUkFNUyIsImlucHV0UmFuZ2UiLCJvdXRwdXRSYW5nZSIsImV4dHJhcG9sYXRlIiwiZXh0cmFwb2xhdGVSaWdodCIsImV4dHJhcG9sYXRlTGVmdCIsImFkZFdoaXRlbGlzdGVkU3R5bGVQcm9wIiwicHJvcCIsImFkZFdoaXRlbGlzdGVkVHJhbnNmb3JtUHJvcCIsImFkZFdoaXRlbGlzdGVkSW50ZXJwb2xhdGlvblBhcmFtIiwicGFyYW0iLCJ2YWxpZGF0ZVRyYW5zZm9ybSIsImNvbmZpZ3MiLCJmb3JFYWNoIiwiaGFzT3duUHJvcGVydHkiLCJwcm9wZXJ0eSIsIkVycm9yIiwidmFsaWRhdGVTdHlsZXMiLCJzdHlsZXMiLCJrZXkiLCJ2YWxpZGF0ZUludGVycG9sYXRpb24iLCJnZW5lcmF0ZU5ld05vZGVUYWciLCJnZW5lcmF0ZU5ld0FuaW1hdGlvbklkIiwiYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUiLCJfd2FybmVkTWlzc2luZ05hdGl2ZUFuaW1hdGVkIiwic2hvdWxkVXNlTmF0aXZlRHJpdmVyIiwidXNlTmF0aXZlRHJpdmVyIiwiY29uc29sZSIsIndhcm4iLCJ0cmFuc2Zvcm1EYXRhVHlwZSIsInRlc3QiLCJkZWdyZWVzIiwicGFyc2VGbG9hdCIsInJhZGlhbnMiLCJNYXRoIiwiUEkiLCJtb2R1bGUiLCJleHBvcnRzIiwiTmF0aXZlRXZlbnRFbWl0dGVyIl0sIm1hcHBpbmdzIjoiOztBQVVBOztBQUNBOztBQUNBOztBQUNBOztBQVNBOztBQUdBLElBQU1BLG9CQUFvQixHQUN4QkMsa0JBQVNDLEVBQVQsS0FBZ0IsS0FBaEIsSUFBeUJDLE1BQU0sQ0FBQ0MsYUFBUCxLQUF5QixJQUFsRCxHQUNJQyxrQ0FESixHQUVJQyw2QkFITjtBQUtBLElBQUlDLDRCQUE0QixHQUFHLENBQW5DO0FBQ0EsSUFBSUMsd0JBQXdCLEdBQUcsQ0FBL0I7QUFFQSxJQUFJQyxrQkFBSjtBQUVBLElBQUlDLDBCQUEwQixHQUFHLElBQUlDLEdBQUosRUFBakM7QUFDQSxJQUFJQyxlQUFlLEdBQUcsS0FBdEI7QUFDQSxJQUFJQyxLQUF3QixHQUFHLEVBQS9CO0FBTUEsSUFBTUMsR0FBRyxHQUFHO0FBQ1ZDLEVBQUFBLFFBQVEsRUFBRSxrQkFDUkMsR0FEUSxFQUVSQyxpQkFGUSxFQUdGO0FBQ04sNEJBQVVqQixvQkFBVixFQUFnQyx5Q0FBaEM7QUFDQWMsSUFBQUEsR0FBRyxDQUFDSSxjQUFKLENBQW1CLFlBQU07QUFDdkJsQixNQUFBQSxvQkFBb0IsQ0FBQ2UsUUFBckIsQ0FBOEJDLEdBQTlCLEVB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IGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IE5hdGl2ZUFuaW1hdGVkTm9uVHVyYm9Nb2R1bGUgZnJvbSAnLi9OYXRpdmVBbmltYXRlZE1vZHVsZSc7XG5pbXBvcnQgTmF0aXZlQW5pbWF0ZWRUdXJib01vZHVsZSBmcm9tICcuL05hdGl2ZUFuaW1hdGVkVHVyYm9Nb2R1bGUnO1xuaW1wb3J0IE5hdGl2ZUV2ZW50RW1pdHRlciBmcm9tICcuLi9FdmVudEVtaXR0ZXIvTmF0aXZlRXZlbnRFbWl0dGVyJztcbmltcG9ydCBQbGF0Zm9ybSBmcm9tICcuLi9VdGlsaXRpZXMvUGxhdGZvcm0nO1xuaW1wb3J0IHR5cGUge0V2ZW50Q29uZmlnfSBmcm9tICcuL0FuaW1hdGVkRXZlbnQnO1xuaW1wb3J0IHR5cGUge1xuICBFdmVudE1hcHBpbmcsXG4gIEFuaW1hdGVkTm9kZUNvbmZpZyxcbiAgQW5pbWF0aW5nTm9kZUNvbmZpZyxcbn0gZnJvbSAnLi9OYXRpdmVBbmltYXRlZE1vZHVsZSc7XG5pbXBvcnQgdHlwZSB7QW5pbWF0aW9uQ29uZmlnLCBFbmRDYWxsYmFja30gZnJvbSAnLi9hbmltYXRpb25zL0FuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7SW50ZXJwb2xhdGlvbkNvbmZpZ1R5cGV9IGZyb20gJy4vbm9kZXMvQW5pbWF0ZWRJbnRlcnBvbGF0aW9uJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcblxuLy8gVE9ETyBUNjk0MzcxNTIgQHBldGV0aGVoZWF0IC0gRGVsZXRlIHRoaXMgZm9yayB3aGVuIEZhYnJpYyBzaGlwcyB0byAxMDAlLlxuY29uc3QgTmF0aXZlQW5pbWF0ZWRNb2R1bGUgPVxuICBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgJiYgZ2xvYmFsLlJOJEJyaWRnZWxlc3MgPT09IHRydWVcbiAgICA/IE5hdGl2ZUFuaW1hdGVkVHVyYm9Nb2R1bGVcbiAgICA6IE5hdGl2ZUFuaW1hdGVkTm9uVHVyYm9Nb2R1bGU7XG5cbmxldCBfX25hdGl2ZUFuaW1hdGVkTm9kZVRhZ0NvdW50ID0gMTsgLyogdXNlZCBmb3IgYW5pbWF0ZWQgbm9kZXMgKi9cbmxldCBfX25hdGl2ZUFuaW1hdGlvbklkQ291bnQgPSAxOyAvKiB1c2VkIGZvciBzdGFydGVkIGFuaW1hdGlvbnMgKi9cblxubGV0IG5hdGl2ZUV2ZW50RW1pdHRlcjtcblxubGV0IHdhaXRpbmdGb3JRdWV1ZWRPcGVyYXRpb25zID0gbmV3IFNldCgpO1xubGV0IHF1ZXVlT3BlcmF0aW9ucyA9IGZhbHNlO1xubGV0IHF1ZXVlOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xuXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVycyBhcm91bmQgTmF0aXZlQW5pbWF0ZWRNb2R1bGUgdG8gcHJvdmlkZSBmbG93IGFuZCBhdXRvY29tcGxldGUgc3VwcG9ydCBmb3JcbiAqIHRoZSBuYXRpdmUgbW9kdWxlIG1ldGhvZHNcbiAqL1xuY29uc3QgQVBJID0ge1xuICBnZXRWYWx1ZTogZnVuY3Rpb24oXG4gICAgdGFnOiBudW1iZXIsXG4gICAgc2F2ZVZhbHVlQ2FsbGJhY2s6ICh2YWx1ZTogbnVtYmVyKSA9PiB2b2lkLFxuICApOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT4ge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuZ2V0VmFsdWUodGFnLCBzYXZlVmFsdWVDYWxsYmFjayk7XG4gICAgfSk7XG4gIH0sXG4gIHNldFdhaXRpbmdGb3JJZGVudGlmaWVyOiBmdW5jdGlvbihpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgd2FpdGluZ0ZvclF1ZXVlZE9wZXJhdGlvbnMuYWRkKGlkKTtcbiAgICBxdWV1ZU9wZXJhdGlvbnMgPSB0cnVlO1xuICB9LFxuICB1bnNldFdhaXRpbmdGb3JJZGVudGlmaWVyOiBmdW5jdGlvbihpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgd2FpdGluZ0ZvclF1ZXVlZE9wZXJhdGlvbnMuZGVsZXRlKGlkKTtcblxuICAgIGlmICh3YWl0aW5nRm9yUXVldWVkT3BlcmF0aW9ucy5zaXplID09PSAwKSB7XG4gICAgICBxdWV1ZU9wZXJhdGlvbnMgPSBmYWxzZTtcbiAgICAgIEFQSS5kaXNhYmxlUXVldWUoKTtcbiAgICB9XG4gIH0sXG4gIGRpc2FibGVRdWV1ZTogZnVuY3Rpb24oKTogdm9pZCB7XG4gICAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG5cbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RhcnRPcGVyYXRpb25CYXRjaCgpO1xuICAgIH1cbiAgICBmb3IgKGxldCBxID0gMCwgbCA9IHF1ZXVlLmxlbmd0aDsgcSA8IGw7IHErKykge1xuICAgICAgcXVldWVbcV0oKTtcbiAgICB9XG4gICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuZmluaXNoT3BlcmF0aW9uQmF0Y2goKTtcbiAgICB9XG4gIH0sXG4gIHF1ZXVlT3BlcmF0aW9uOiAoZm46ICgpID0+IHZvaWQpOiB2b2lkID0+IHtcbiAgICBpZiAocXVldWVPcGVyYXRpb25zKSB7XG4gICAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm4oKTtcbiAgICB9XG4gIH0sXG4gIGNyZWF0ZUFuaW1hdGVkTm9kZTogZnVuY3Rpb24odGFnOiBudW1iZXIsIGNvbmZpZzogQW5pbWF0ZWROb2RlQ29uZmlnKTogdm9pZCB7XG4gICAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKCgpID0+XG4gICAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jcmVhdGVBbmltYXRlZE5vZGUodGFnLCBjb25maWcpLFxuICAgICk7XG4gIH0sXG4gIHN0YXJ0TGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZTogZnVuY3Rpb24odGFnOiBudW1iZXIpIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT5cbiAgICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnN0YXJ0TGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSh0YWcpLFxuICAgICk7XG4gIH0sXG4gIHN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlOiBmdW5jdGlvbih0YWc6IG51bWJlcikge1xuICAgIGludmFyaWFudChOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIEFQSS5xdWV1ZU9wZXJhdGlvbigoKSA9PlxuICAgICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RvcExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUodGFnKSxcbiAgICApO1xuICB9LFxuICBjb25uZWN0QW5pbWF0ZWROb2RlczogZnVuY3Rpb24ocGFyZW50VGFnOiBudW1iZXIsIGNoaWxkVGFnOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT5cbiAgICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmNvbm5lY3RBbmltYXRlZE5vZGVzKHBhcmVudFRhZywgY2hpbGRUYWcpLFxuICAgICk7XG4gIH0sXG4gIGRpc2Nvbm5lY3RBbmltYXRlZE5vZGVzOiBmdW5jdGlvbihwYXJlbnRUYWc6IG51bWJlciwgY2hpbGRUYWc6IG51bWJlcik6IHZvaWQge1xuICAgIGludmFyaWFudChOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIEFQSS5xdWV1ZU9wZXJhdGlvbigoKSA9PlxuICAgICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuZGlzY29ubmVjdEFuaW1hdGVkTm9kZXMocGFyZW50VGFnLCBjaGlsZFRhZyksXG4gICAgKTtcbiAgfSxcbiAgc3RhcnRBbmltYXRpbmdOb2RlOiBmdW5jdGlvbihcbiAgICBhbmltYXRpb25JZDogbnVtYmVyLFxuICAgIG5vZGVUYWc6IG51bWJlcixcbiAgICBjb25maWc6IEFuaW1hdGluZ05vZGVDb25maWcsXG4gICAgZW5kQ2FsbGJhY2s6IEVuZENhbGxiYWNrLFxuICApOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT5cbiAgICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnN0YXJ0QW5pbWF0aW5nTm9kZShcbiAgICAgICAgYW5pbWF0aW9uSWQsXG4gICAgICAgIG5vZGVUYWcsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgZW5kQ2FsbGJhY2ssXG4gICAgICApLFxuICAgICk7XG4gIH0sXG4gIHN0b3BBbmltYXRpb246IGZ1bmN0aW9uKGFuaW1hdGlvbklkOiBudW1iZXIpIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT4gTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RvcEFuaW1hdGlvbihhbmltYXRpb25JZCkpO1xuICB9LFxuICBzZXRBbmltYXRlZE5vZGVWYWx1ZTogZnVuY3Rpb24obm9kZVRhZzogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKCgpID0+XG4gICAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5zZXRBbmltYXRlZE5vZGVWYWx1ZShub2RlVGFnLCB2YWx1ZSksXG4gICAgKTtcbiAgfSxcbiAgc2V0QW5pbWF0ZWROb2RlT2Zmc2V0OiBmdW5jdGlvbihub2RlVGFnOiBudW1iZXIsIG9mZnNldDogbnVtYmVyKTogdm9pZCB7XG4gICAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKCgpID0+XG4gICAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5zZXRBbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZywgb2Zmc2V0KSxcbiAgICApO1xuICB9LFxuICBmbGF0dGVuQW5pbWF0ZWROb2RlT2Zmc2V0OiBmdW5jdGlvbihub2RlVGFnOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT5cbiAgICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyksXG4gICAgKTtcbiAgfSxcbiAgZXh0cmFjdEFuaW1hdGVkTm9kZU9mZnNldDogZnVuY3Rpb24obm9kZVRhZzogbnVtYmVyKTogdm9pZCB7XG4gICAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKCgpID0+XG4gICAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5leHRyYWN0QW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWcpLFxuICAgICk7XG4gIH0sXG4gIGNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXc6IGZ1bmN0aW9uKG5vZGVUYWc6IG51bWJlciwgdmlld1RhZzogbnVtYmVyKTogdm9pZCB7XG4gICAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKCgpID0+XG4gICAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jb25uZWN0QW5pbWF0ZWROb2RlVG9WaWV3KG5vZGVUYWcsIHZpZXdUYWcpLFxuICAgICk7XG4gIH0sXG4gIGRpc2Nvbm5lY3RBbmltYXRlZE5vZGVGcm9tVmlldzogZnVuY3Rpb24oXG4gICAgbm9kZVRhZzogbnVtYmVyLFxuICAgIHZpZXdUYWc6IG51bWJlcixcbiAgKTogdm9pZCB7XG4gICAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgQVBJLnF1ZXVlT3BlcmF0aW9uKCgpID0+XG4gICAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5kaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXcobm9kZVRhZywgdmlld1RhZyksXG4gICAgKTtcbiAgfSxcbiAgcmVzdG9yZURlZmF1bHRWYWx1ZXM6IGZ1bmN0aW9uKG5vZGVUYWc6IG51bWJlcik6IHZvaWQge1xuICAgIGludmFyaWFudChOYXRpdmVBbmltYXRlZE1vZHVsZSwgJ05hdGl2ZSBhbmltYXRlZCBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIC8vIEJhY2t3YXJkcyBjb21wYXQgd2l0aCBvbGRlciBuYXRpdmUgcnVudGltZXMsIGNhbiBiZSByZW1vdmVkIGxhdGVyLlxuICAgIGlmIChOYXRpdmVBbmltYXRlZE1vZHVsZS5yZXN0b3JlRGVmYXVsdFZhbHVlcyAhPSBudWxsKSB7XG4gICAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT5cbiAgICAgICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUucmVzdG9yZURlZmF1bHRWYWx1ZXMobm9kZVRhZyksXG4gICAgICApO1xuICAgIH1cbiAgfSxcbiAgZHJvcEFuaW1hdGVkTm9kZTogZnVuY3Rpb24odGFnOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT4gTmF0aXZlQW5pbWF0ZWRNb2R1bGUuZHJvcEFuaW1hdGVkTm9kZSh0YWcpKTtcbiAgfSxcbiAgYWRkQW5pbWF0ZWRFdmVudFRvVmlldzogZnVuY3Rpb24oXG4gICAgdmlld1RhZzogbnVtYmVyLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGV2ZW50TWFwcGluZzogRXZlbnRNYXBwaW5nLFxuICApIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT5cbiAgICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmFkZEFuaW1hdGVkRXZlbnRUb1ZpZXcoXG4gICAgICAgIHZpZXdUYWcsXG4gICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgZXZlbnRNYXBwaW5nLFxuICAgICAgKSxcbiAgICApO1xuICB9LFxuICByZW1vdmVBbmltYXRlZEV2ZW50RnJvbVZpZXcoXG4gICAgdmlld1RhZzogbnVtYmVyLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGFuaW1hdGVkTm9kZVRhZzogbnVtYmVyLFxuICApIHtcbiAgICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICBBUEkucXVldWVPcGVyYXRpb24oKCkgPT5cbiAgICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyhcbiAgICAgICAgdmlld1RhZyxcbiAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICBhbmltYXRlZE5vZGVUYWcsXG4gICAgICApLFxuICAgICk7XG4gIH0sXG59O1xuXG4vKipcbiAqIFN0eWxlcyBhbGxvd2VkIGJ5IHRoZSBuYXRpdmUgYW5pbWF0ZWQgaW1wbGVtZW50YXRpb24uXG4gKlxuICogSW4gZ2VuZXJhbCBuYXRpdmUgYW5pbWF0ZWQgaW1wbGVtZW50YXRpb24gc2hvdWxkIHN1cHBvcnQgYW55IG51bWVyaWMgcHJvcGVydHkgdGhhdCBkb2Vzbid0IG5lZWRcbiAqIHRvIGJlIHVwZGF0ZWQgdGhyb3VnaCB0aGUgc2hhZG93IHZpZXcgaGllcmFyY2h5IChhbGwgbm9uLWxheW91dCBwcm9wZXJ0aWVzKS5cbiAqL1xuY29uc3QgU1VQUE9SVEVEX1NUWUxFUyA9IHtcbiAgb3BhY2l0eTogdHJ1ZSxcbiAgdHJhbnNmb3JtOiB0cnVlLFxuICBib3JkZXJSYWRpdXM6IHRydWUsXG4gIGJvcmRlckJvdHRvbUVuZFJhZGl1czogdHJ1ZSxcbiAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogdHJ1ZSxcbiAgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXM6IHRydWUsXG4gIGJvcmRlckJvdHRvbVN0YXJ0UmFkaXVzOiB0cnVlLFxuICBib3JkZXJUb3BFbmRSYWRpdXM6IHRydWUsXG4gIGJvcmRlclRvcExlZnRSYWRpdXM6IHRydWUsXG4gIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiB0cnVlLFxuICBib3JkZXJUb3BTdGFydFJhZGl1czogdHJ1ZSxcbiAgZWxldmF0aW9uOiB0cnVlLFxuICB6SW5kZXg6IHRydWUsXG4gIC8qIGlvcyBzdHlsZXMgKi9cbiAgc2hhZG93T3BhY2l0eTogdHJ1ZSxcbiAgc2hhZG93UmFkaXVzOiB0cnVlLFxuICAvKiBsZWdhY3kgYW5kcm9pZCB0cmFuc2Zvcm0gcHJvcGVydGllcyAqL1xuICBzY2FsZVg6IHRydWUsXG4gIHNjYWxlWTogdHJ1ZSxcbiAgdHJhbnNsYXRlWDogdHJ1ZSxcbiAgdHJhbnNsYXRlWTogdHJ1ZSxcbn07XG5cbmNvbnN0IFNVUFBPUlRFRF9UUkFOU0ZPUk1TID0ge1xuICB0cmFuc2xhdGVYOiB0cnVlLFxuICB0cmFuc2xhdGVZOiB0cnVlLFxuICBzY2FsZTogdHJ1ZSxcbiAgc2NhbGVYOiB0cnVlLFxuICBzY2FsZVk6IHRydWUsXG4gIHJvdGF0ZTogdHJ1ZSxcbiAgcm90YXRlWDogdHJ1ZSxcbiAgcm90YXRlWTogdHJ1ZSxcbiAgcm90YXRlWjogdHJ1ZSxcbiAgcGVyc3BlY3RpdmU6IHRydWUsXG59O1xuXG5jb25zdCBTVVBQT1JURURfSU5URVJQT0xBVElPTl9QQVJBTVMgPSB7XG4gIGlucHV0UmFuZ2U6IHRydWUsXG4gIG91dHB1dFJhbmdlOiB0cnVlLFxuICBleHRyYXBvbGF0ZTogdHJ1ZSxcbiAgZXh0cmFwb2xhdGVSaWdodDogdHJ1ZSxcbiAgZXh0cmFwb2xhdGVMZWZ0OiB0cnVlLFxufTtcblxuZnVuY3Rpb24gYWRkV2hpdGVsaXN0ZWRTdHlsZVByb3AocHJvcDogc3RyaW5nKTogdm9pZCB7XG4gIFNVUFBPUlRFRF9TVFlMRVNbcHJvcF0gPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBhZGRXaGl0ZWxpc3RlZFRyYW5zZm9ybVByb3AocHJvcDogc3RyaW5nKTogdm9pZCB7XG4gIFNVUFBPUlRFRF9UUkFOU0ZPUk1TW3Byb3BdID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gYWRkV2hpdGVsaXN0ZWRJbnRlcnBvbGF0aW9uUGFyYW0ocGFyYW06IHN0cmluZyk6IHZvaWQge1xuICBTVVBQT1JURURfSU5URVJQT0xBVElPTl9QQVJBTVNbcGFyYW1dID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVUcmFuc2Zvcm0oXG4gIGNvbmZpZ3M6IEFycmF5PFxuICAgIHwge1xuICAgICAgICB0eXBlOiAnYW5pbWF0ZWQnLFxuICAgICAgICBwcm9wZXJ0eTogc3RyaW5nLFxuICAgICAgICBub2RlVGFnOiA/bnVtYmVyLFxuICAgICAgICAuLi5cbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgdHlwZTogJ3N0YXRpYycsXG4gICAgICAgIHByb3BlcnR5OiBzdHJpbmcsXG4gICAgICAgIHZhbHVlOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIC4uLlxuICAgICAgfSxcbiAgPixcbik6IHZvaWQge1xuICBjb25maWdzLmZvckVhY2goY29uZmlnID0+IHtcbiAgICBpZiAoIVNVUFBPUlRFRF9UUkFOU0ZPUk1TLmhhc093blByb3BlcnR5KGNvbmZpZy5wcm9wZXJ0eSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFByb3BlcnR5ICcke2NvbmZpZy5wcm9wZXJ0eX0nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgbmF0aXZlIGFuaW1hdGVkIG1vZHVsZWAsXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU3R5bGVzKHN0eWxlczoge1trZXk6IHN0cmluZ106ID9udW1iZXIsIC4uLn0pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XG4gICAgaWYgKCFTVVBQT1JURURfU1RZTEVTLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFN0eWxlIHByb3BlcnR5ICcke2tleX0nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgbmF0aXZlIGFuaW1hdGVkIG1vZHVsZWAsXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUludGVycG9sYXRpb24oY29uZmlnOiBJbnRlcnBvbGF0aW9uQ29uZmlnVHlwZSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IGtleSBpbiBjb25maWcpIHtcbiAgICBpZiAoIVNVUFBPUlRFRF9JTlRFUlBPTEFUSU9OX1BBUkFNUy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnRlcnBvbGF0aW9uIHByb3BlcnR5ICcke2tleX0nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgbmF0aXZlIGFuaW1hdGVkIG1vZHVsZWAsXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU5ld05vZGVUYWcoKTogbnVtYmVyIHtcbiAgcmV0dXJuIF9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQrKztcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVOZXdBbmltYXRpb25JZCgpOiBudW1iZXIge1xuICByZXR1cm4gX19uYXRpdmVBbmltYXRpb25JZENvdW50Kys7XG59XG5cbmZ1bmN0aW9uIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk6IHZvaWQge1xuICBpbnZhcmlhbnQoTmF0aXZlQW5pbWF0ZWRNb2R1bGUsICdOYXRpdmUgYW5pbWF0ZWQgbW9kdWxlIGlzIG5vdCBhdmFpbGFibGUnKTtcbn1cblxubGV0IF93YXJuZWRNaXNzaW5nTmF0aXZlQW5pbWF0ZWQgPSBmYWxzZTtcblxuZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlRHJpdmVyKFxuICBjb25maWc6IHsuLi5BbmltYXRpb25Db25maWcsIC4uLn0gfCBFdmVudENvbmZpZyxcbik6IGJvb2xlYW4ge1xuICBpZiAoY29uZmlnLnVzZU5hdGl2ZURyaXZlciA9PSBudWxsKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgJ0FuaW1hdGVkOiBgdXNlTmF0aXZlRHJpdmVyYCB3YXMgbm90IHNwZWNpZmllZC4gVGhpcyBpcyBhIHJlcXVpcmVkICcgK1xuICAgICAgICAnb3B0aW9uIGFuZCBtdXN0IGJlIGV4cGxpY2l0bHkgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgJyxcbiAgICApO1xuICB9XG5cbiAgaWYgKGNvbmZpZy51c2VOYXRpdmVEcml2ZXIgPT09IHRydWUgJiYgIU5hdGl2ZUFuaW1hdGVkTW9kdWxlKSB7XG4gICAgaWYgKCFfd2FybmVkTWlzc2luZ05hdGl2ZUFuaW1hdGVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdBbmltYXRlZDogYHVzZU5hdGl2ZURyaXZlcmAgaXMgbm90IHN1cHBvcnRlZCBiZWNhdXNlIHRoZSBuYXRpdmUgJyArXG4gICAgICAgICAgJ2FuaW1hdGVkIG1vZHVsZSBpcyBtaXNzaW5nLiBGYWxsaW5nIGJhY2sgdG8gSlMtYmFzZWQgYW5pbWF0aW9uLiBUbyAnICtcbiAgICAgICAgICAncmVzb2x2ZSB0aGlzLCBhZGQgYFJDVEFuaW1hdGlvbmAgbW9kdWxlIHRvIHRoaXMgYXBwLCBvciByZW1vdmUgJyArXG4gICAgICAgICAgJ2B1c2VOYXRpdmVEcml2ZXJgLiAnICtcbiAgICAgICAgICAnTWFrZSBzdXJlIHRvIHJ1biBgYnVuZGxlIGV4ZWMgcG9kIGluc3RhbGxgIGZpcnN0LiBSZWFkIG1vcmUgYWJvdXQgYXV0b2xpbmtpbmc6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1uYXRpdmUtY29tbXVuaXR5L2NsaS9ibG9iL21hc3Rlci9kb2NzL2F1dG9saW5raW5nLm1kJyxcbiAgICAgICk7XG4gICAgICBfd2FybmVkTWlzc2luZ05hdGl2ZUFuaW1hdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGNvbmZpZy51c2VOYXRpdmVEcml2ZXIgfHwgZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybURhdGFUeXBlKHZhbHVlOiBudW1iZXIgfCBzdHJpbmcpOiBudW1iZXIgfCBzdHJpbmcge1xuICAvLyBDaGFuZ2UgdGhlIHN0cmluZyB0eXBlIHRvIG51bWJlciB0eXBlIHNvIHdlIGNhbiByZXVzZSB0aGUgc2FtZSBsb2dpYyBpblxuICAvLyBpT1MgYW5kIEFuZHJvaWQgcGxhdGZvcm1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKC9kZWckLy50ZXN0KHZhbHVlKSkge1xuICAgIGNvbnN0IGRlZ3JlZXMgPSBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwO1xuICAgIGNvbnN0IHJhZGlhbnMgPSAoZGVncmVlcyAqIE1hdGguUEkpIC8gMTgwLjA7XG4gICAgcmV0dXJuIHJhZGlhbnM7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBBUEksXG4gIGFkZFdoaXRlbGlzdGVkU3R5bGVQcm9wLFxuICBhZGRXaGl0ZWxpc3RlZFRyYW5zZm9ybVByb3AsXG4gIGFkZFdoaXRlbGlzdGVkSW50ZXJwb2xhdGlvblBhcmFtLFxuICB2YWxpZGF0ZVN0eWxlcyxcbiAgdmFsaWRhdGVUcmFuc2Zvcm0sXG4gIHZhbGlkYXRlSW50ZXJwb2xhdGlvbixcbiAgZ2VuZXJhdGVOZXdOb2RlVGFnLFxuICBnZW5lcmF0ZU5ld0FuaW1hdGlvbklkLFxuICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSxcbiAgc2hvdWxkVXNlTmF0aXZlRHJpdmVyLFxuICB0cmFuc2Zvcm1EYXRhVHlwZSxcbiAgLy8gJEZsb3dFeHBlY3RlZEVycm9yW3Vuc2FmZS1nZXR0ZXJzLXNldHRlcnNdIC0gdW5zYWZlIGdldHRlciBsaW50IHN1cHByZXNpb25cbiAgLy8gJEZsb3dFeHBlY3RlZEVycm9yW21pc3NpbmctdHlwZS1hcmddIC0gdW5zYWZlIGdldHRlciBsaW50IHN1cHByZXNpb25cbiAgZ2V0IG5hdGl2ZUV2ZW50RW1pdHRlcigpOiBOYXRpdmVFdmVudEVtaXR0ZXIge1xuICAgIGlmICghbmF0aXZlRXZlbnRFbWl0dGVyKSB7XG4gICAgICBuYXRpdmVFdmVudEVtaXR0ZXIgPSBuZXcgTmF0aXZlRXZlbnRFbWl0dGVyKFxuICAgICAgICAvLyBUODg3MTUwNjM6IE5hdGl2ZUV2ZW50RW1pdHRlciBvbmx5IHVzZWQgdGhpcyBwYXJhbWV0ZXIgb24gaU9TLiBOb3cgaXQgdXNlcyBpdCBvbiBhbGwgcGxhdGZvcm1zLCBzbyB0aGlzIGNvZGUgd2FzIG1vZGlmaWVkIGF1dG9tYXRpY2FsbHkgdG8gcHJlc2VydmUgaXRzIGJlaGF2aW9yXG4gICAgICAgIC8vIElmIHlvdSB3YW50IHRvIHVzZSB0aGUgbmF0aXZlIG1vZHVsZSBvbiBvdGhlciBwbGF0Zm9ybXMsIHBsZWFzZSByZW1vdmUgdGhpcyBjb25kaXRpb24gYW5kIHRlc3QgaXRzIGJlaGF2aW9yXG4gICAgICAgIFBsYXRmb3JtLk9TICE9PSAnaW9zJyA/IG51bGwgOiBOYXRpdmVBbmltYXRlZE1vZHVsZSxcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBuYXRpdmVFdmVudEVtaXR0ZXI7XG4gIH0sXG59O1xuIl19