dc31a9dc7285ee74dd4e02a26c96acea
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.deepmerge = factory());
})(this, function () {
  'use strict';

  var isMergeableObject = function isMergeableObject(value) {
    return isNonNullObject(value) && !isSpecial(value);
  };

  function isNonNullObject(value) {
    return !!value && typeof value === 'object';
  }

  function isSpecial(value) {
    var stringValue = Object.prototype.toString.call(value);
    return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isReactElement(value);
  }

  var canUseSymbol = typeof Symbol === 'function' && Symbol.for;
  var REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;

  function isReactElement(value) {
    return value.$$typeof === REACT_ELEMENT_TYPE;
  }

  function emptyTarget(val) {
    return Array.isArray(val) ? [] : {};
  }

  function cloneUnlessOtherwiseSpecified(value, options) {
    return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;
  }

  function defaultArrayMerge(target, source, options) {
    return target.concat(source).map(function (element) {
      return cloneUnlessOtherwiseSpecified(element, options);
    });
  }

  function getMergeFunction(key, options) {
    if (!options.customMerge) {
      return deepmerge;
    }

    var customMerge = options.customMerge(key);
    return typeof customMerge === 'function' ? customMerge : deepmerge;
  }

  function getEnumerableOwnPropertySymbols(target) {
    return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {
      return target.propertyIsEnumerable(symbol);
    }) : [];
  }

  function getKeys(target) {
    return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));
  }

  function mergeObject(target, source, options) {
    var destination = {};

    if (options.isMergeableObject(target)) {
      getKeys(target).forEach(function (key) {
        destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);
      });
    }

    getKeys(source).forEach(function (key) {
      if (!options.isMergeableObject(source[key]) || !target[key]) {
        destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);
      } else {
        destination[key] = getMergeFunction(key, options)(target[key], source[key], options);
      }
    });
    return destination;
  }

  function deepmerge(target, source, options) {
    options = options || {};
    options.arrayMerge = options.arrayMerge || defaultArrayMerge;
    options.isMergeableObject = options.isMergeableObject || isMergeableObject;
    var sourceIsArray = Array.isArray(source);
    var targetIsArray = Array.isArray(target);
    var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;

    if (!sourceAndTargetTypesMatch) {
      return cloneUnlessOtherwiseSpecified(source, options);
    } else if (sourceIsArray) {
      return options.arrayMerge(target, source, options);
    } else {
      return mergeObject(target, source, options);
    }
  }

  deepmerge.all = function deepmergeAll(array, options) {
    if (!Array.isArray(array)) {
      throw new Error('first argument should be an array');
    }

    return array.reduce(function (prev, next) {
      return deepmerge(prev, next, options);
    }, {});
  };

  var deepmerge_1 = deepmerge;
  return deepmerge_1;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVtZC5qcyJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJkZWVwbWVyZ2UiLCJpc01lcmdlYWJsZU9iamVjdCIsInZhbHVlIiwiaXNOb25OdWxsT2JqZWN0IiwiaXNTcGVjaWFsIiwic3RyaW5nVmFsdWUiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJpc1JlYWN0RWxlbWVudCIsImNhblVzZVN5bWJvbCIsIlN5bWJvbCIsImZvciIsIlJFQUNUX0VMRU1FTlRfVFlQRSIsIiQkdHlwZW9mIiwiZW1wdHlUYXJnZXQiLCJ2YWwiLCJBcnJheSIsImlzQXJyYXkiLCJjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZCIsIm9wdGlvbnMiLCJjbG9uZSIsImRlZmF1bHRBcnJheU1lcmdlIiwidGFyZ2V0Iiwic291cmNlIiwiY29uY2F0IiwibWFwIiwiZWxlbWVudCIsImdldE1lcmdlRnVuY3Rpb24iLCJrZXkiLCJjdXN0b21NZXJnZSIsImdldEVudW1lcmFibGVPd25Qcm9wZXJ0eVN5bWJvbHMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJmaWx0ZXIiLCJzeW1ib2wiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImdldEtleXMiLCJrZXlzIiwibWVyZ2VPYmplY3QiLCJkZXN0aW5hdGlvbiIsImZvckVhY2giLCJhcnJheU1lcmdlIiwic291cmNlSXNBcnJheSIsInRhcmdldElzQXJyYXkiLCJzb3VyY2VBbmRUYXJnZXRUeXBlc01hdGNoIiwiYWxsIiwiZGVlcG1lcmdlQWxsIiwiYXJyYXkiLCJFcnJvciIsInJlZHVjZSIsInByZXYiLCJuZXh0IiwiZGVlcG1lcmdlXzEiXSwibWFwcGluZ3MiOiJBQUFDLFdBQVVBLE1BQVYsRUFBa0JDLE9BQWxCLEVBQTJCO0FBQzNCLFNBQU9DLE9BQVAsS0FBbUIsUUFBbkIsSUFBK0IsT0FBT0MsTUFBUCxLQUFrQixXQUFq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TixDQUFjNkIsS0FBZCxDQUFMLEVBQTJCO0FBQzFCLFlBQU0sSUFBSUMsS0FBSixDQUFVLG1DQUFWLENBQU47QUFDQTs7QUFFRCxXQUFPRCxLQUFLLENBQUNFLE1BQU4sQ0FBYSxVQUFTQyxJQUFULEVBQWVDLElBQWYsRUFBcUI7QUFDeEMsYUFBT3BELFNBQVMsQ0FBQ21ELElBQUQsRUFBT0MsSUFBUCxFQUFhL0IsT0FBYixDQUFoQjtBQUNBLEtBRk0sRUFFSixFQUZJLENBQVA7QUFHQSxHQVJEOztBQVVBLE1BQUlnQyxXQUFXLEdBQUdyRCxTQUFsQjtBQUVBLFNBQU9xRCxXQUFQO0FBRUEsQ0FwSEEsQ0FBRCIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuZGVlcG1lcmdlID0gZmFjdG9yeSgpKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cblx0dmFyIGlzTWVyZ2VhYmxlT2JqZWN0ID0gZnVuY3Rpb24gaXNNZXJnZWFibGVPYmplY3QodmFsdWUpIHtcblx0XHRyZXR1cm4gaXNOb25OdWxsT2JqZWN0KHZhbHVlKVxuXHRcdFx0JiYgIWlzU3BlY2lhbCh2YWx1ZSlcblx0fTtcblxuXHRmdW5jdGlvbiBpc05vbk51bGxPYmplY3QodmFsdWUpIHtcblx0XHRyZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG5cdH1cblxuXHRmdW5jdGlvbiBpc1NwZWNpYWwodmFsdWUpIHtcblx0XHR2YXIgc3RyaW5nVmFsdWUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG5cdFx0cmV0dXJuIHN0cmluZ1ZhbHVlID09PSAnW29iamVjdCBSZWdFeHBdJ1xuXHRcdFx0fHwgc3RyaW5nVmFsdWUgPT09ICdbb2JqZWN0IERhdGVdJ1xuXHRcdFx0fHwgaXNSZWFjdEVsZW1lbnQodmFsdWUpXG5cdH1cblxuXHQvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvYjVhYzk2M2ZiNzkxZDEyOThlN2YzOTYyMzYzODNiYzk1NWY5MTZjMS9zcmMvaXNvbW9ycGhpYy9jbGFzc2ljL2VsZW1lbnQvUmVhY3RFbGVtZW50LmpzI0wyMS1MMjVcblx0dmFyIGNhblVzZVN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmZvcjtcblx0dmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IGNhblVzZVN5bWJvbCA/IFN5bWJvbC5mb3IoJ3JlYWN0LmVsZW1lbnQnKSA6IDB4ZWFjNztcblxuXHRmdW5jdGlvbiBpc1JlYWN0RWxlbWVudCh2YWx1ZSkge1xuXHRcdHJldHVybiB2YWx1ZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFXG5cdH1cblxuXHRmdW5jdGlvbiBlbXB0eVRhcmdldCh2YWwpIHtcblx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpID8gW10gOiB7fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQodmFsdWUsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gKG9wdGlvbnMuY2xvbmUgIT09IGZhbHNlICYmIG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QodmFsdWUpKVxuXHRcdFx0PyBkZWVwbWVyZ2UoZW1wdHlUYXJnZXQodmFsdWUpLCB2YWx1ZSwgb3B0aW9ucylcblx0XHRcdDogdmFsdWVcblx0fVxuXG5cdGZ1bmN0aW9uIGRlZmF1bHRBcnJheU1lcmdlKHRhcmdldCwgc291cmNlLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRhcmdldC5jb25jYXQoc291cmNlKS5tYXAoZnVuY3Rpb24oZWxlbWVudCkge1xuXHRcdFx0cmV0dXJuIGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKGVsZW1lbnQsIG9wdGlvbnMpXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldE1lcmdlRnVuY3Rpb24oa2V5LCBvcHRpb25zKSB7XG5cdFx0aWYgKCFvcHRpb25zLmN1c3RvbU1lcmdlKSB7XG5cdFx0XHRyZXR1cm4gZGVlcG1lcmdlXG5cdFx0fVxuXHRcdHZhciBjdXN0b21NZXJnZSA9IG9wdGlvbnMuY3VzdG9tTWVyZ2Uoa2V5KTtcblx0XHRyZXR1cm4gdHlwZW9mIGN1c3RvbU1lcmdlID09PSAnZnVuY3Rpb24nID8gY3VzdG9tTWVyZ2UgOiBkZWVwbWVyZ2Vcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEVudW1lcmFibGVPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSB7XG5cdFx0cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHNcblx0XHRcdD8gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpLmZpbHRlcihmdW5jdGlvbihzeW1ib2wpIHtcblx0XHRcdFx0cmV0dXJuIHRhcmdldC5wcm9wZXJ0eUlzRW51bWVyYWJsZShzeW1ib2wpXG5cdFx0XHR9KVxuXHRcdFx0OiBbXVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0S2V5cyh0YXJnZXQpIHtcblx0XHRyZXR1cm4gT2JqZWN0LmtleXModGFyZ2V0KS5jb25jYXQoZ2V0RW51bWVyYWJsZU93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKVxuXHR9XG5cblx0ZnVuY3Rpb24gbWVyZ2VPYmplY3QodGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpIHtcblx0XHR2YXIgZGVzdGluYXRpb24gPSB7fTtcblx0XHRpZiAob3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdCh0YXJnZXQpKSB7XG5cdFx0XHRnZXRLZXlzKHRhcmdldCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0ZGVzdGluYXRpb25ba2V5XSA9IGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKHRhcmdldFtrZXldLCBvcHRpb25zKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRnZXRLZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdGlmICghb3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdChzb3VyY2Vba2V5XSkgfHwgIXRhcmdldFtrZXldKSB7XG5cdFx0XHRcdGRlc3RpbmF0aW9uW2tleV0gPSBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZChzb3VyY2Vba2V5XSwgb3B0aW9ucyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZXN0aW5hdGlvbltrZXldID0gZ2V0TWVyZ2VGdW5jdGlvbihrZXksIG9wdGlvbnMpKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgb3B0aW9ucyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGRlc3RpbmF0aW9uXG5cdH1cblxuXHRmdW5jdGlvbiBkZWVwbWVyZ2UodGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpIHtcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XHRvcHRpb25zLmFycmF5TWVyZ2UgPSBvcHRpb25zLmFycmF5TWVyZ2UgfHwgZGVmYXVsdEFycmF5TWVyZ2U7XG5cdFx0b3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdCA9IG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QgfHwgaXNNZXJnZWFibGVPYmplY3Q7XG5cblx0XHR2YXIgc291cmNlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoc291cmNlKTtcblx0XHR2YXIgdGFyZ2V0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkodGFyZ2V0KTtcblx0XHR2YXIgc291cmNlQW5kVGFyZ2V0VHlwZXNNYXRjaCA9IHNvdXJjZUlzQXJyYXkgPT09IHRhcmdldElzQXJyYXk7XG5cblx0XHRpZiAoIXNvdXJjZUFuZFRhcmdldFR5cGVzTWF0Y2gpIHtcblx0XHRcdHJldHVybiBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZChzb3VyY2UsIG9wdGlvbnMpXG5cdFx0fSBlbHNlIGlmIChzb3VyY2VJc0FycmF5KSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucy5hcnJheU1lcmdlKHRhcmdldCwgc291cmNlLCBvcHRpb25zKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbWVyZ2VPYmplY3QodGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpXG5cdFx0fVxuXHR9XG5cblx0ZGVlcG1lcmdlLmFsbCA9IGZ1bmN0aW9uIGRlZXBtZXJnZUFsbChhcnJheSwgb3B0aW9ucykge1xuXHRcdGlmICghQXJyYXkuaXNBcnJheShhcnJheSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignZmlyc3QgYXJndW1lbnQgc2hvdWxkIGJlIGFuIGFycmF5Jylcblx0XHR9XG5cblx0XHRyZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uKHByZXYsIG5leHQpIHtcblx0XHRcdHJldHVybiBkZWVwbWVyZ2UocHJldiwgbmV4dCwgb3B0aW9ucylcblx0XHR9LCB7fSlcblx0fTtcblxuXHR2YXIgZGVlcG1lcmdlXzEgPSBkZWVwbWVyZ2U7XG5cblx0cmV0dXJuIGRlZXBtZXJnZV8xO1xuXG59KSk7XG4iXX0=