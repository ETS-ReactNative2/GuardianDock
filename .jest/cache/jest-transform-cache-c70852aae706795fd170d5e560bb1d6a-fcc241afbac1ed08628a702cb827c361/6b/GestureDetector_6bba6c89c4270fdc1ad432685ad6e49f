e55cb586fe62aec481224bda7fa5f6fc
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault2(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault2(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault2(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault2(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault2(require("@babel/runtime/helpers/getPrototypeOf"));

var _toConsumableArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/toConsumableArray"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GestureDetector = void 0;

var _react = _interopRequireWildcard(require("react"));

var _gesture = require("./gesture");

var _reanimatedWrapper = require("./reanimatedWrapper");

var _handlersRegistry = require("../handlersRegistry");

var _RNGestureHandlerModule = _interopRequireDefault(require("../../RNGestureHandlerModule"));

var _gestureHandlerCommon = require("../gestureHandlerCommon");

var _gestureStateManager = require("./gestureStateManager");

var _FlingGestureHandler = require("../FlingGestureHandler");

var _ForceTouchGestureHandler = require("../ForceTouchGestureHandler");

var _LongPressGestureHandler = require("../LongPressGestureHandler");

var _PanGestureHandler = require("../PanGestureHandler");

var _TapGestureHandler = require("../TapGestureHandler");

var _State = require("../../State");

var _EventType = require("../../EventType");

var _ActionType = require("../../ActionType");

var _utils = require("../../utils");

var _getShadowNodeFromRef = require("../../getShadowNodeFromRef");

var _Reanimated$default$c, _Reanimated$default;

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

var ALLOWED_PROPS = [].concat((0, _toConsumableArray2.default)(_gestureHandlerCommon.baseGestureHandlerWithMonitorProps), (0, _toConsumableArray2.default)(_TapGestureHandler.tapGestureHandlerProps), (0, _toConsumableArray2.default)(_PanGestureHandler.panGestureHandlerProps), (0, _toConsumableArray2.default)(_PanGestureHandler.panGestureHandlerCustomNativeProps), (0, _toConsumableArray2.default)(_LongPressGestureHandler.longPressGestureHandlerProps), (0, _toConsumableArray2.default)(_ForceTouchGestureHandler.forceTouchGestureHandlerProps), (0, _toConsumableArray2.default)(_FlingGestureHandler.flingGestureHandlerProps));

function convertToHandlerTag(ref) {
  if (typeof ref === 'number') {
    return ref;
  } else if (ref instanceof _gesture.BaseGesture) {
    return ref.handlerTag;
  } else {
    var _ref$current$handlerT, _ref$current;

    return (_ref$current$handlerT = (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.handlerTag) !== null && _ref$current$handlerT !== void 0 ? _ref$current$handlerT : -1;
  }
}

function extractValidHandlerTags(interactionGroup) {
  var _interactionGroup$map, _interactionGroup$map2;

  return (_interactionGroup$map = interactionGroup === null || interactionGroup === void 0 ? void 0 : (_interactionGroup$map2 = interactionGroup.map(convertToHandlerTag)) === null || _interactionGroup$map2 === void 0 ? void 0 : _interactionGroup$map2.filter(function (tag) {
    return tag > 0;
  })) !== null && _interactionGroup$map !== void 0 ? _interactionGroup$map : [];
}

function dropHandlers(preparedGesture) {
  for (var _iterator = _createForOfIteratorHelperLoose(preparedGesture.config), _step; !(_step = _iterator()).done;) {
    var handler = _step.value;

    _RNGestureHandlerModule.default.dropGestureHandler(handler.handlerTag);

    (0, _handlersRegistry.unregisterHandler)(handler.handlerTag, handler.config.testId);
  }
}

function checkGestureCallbacksForWorklets(gesture) {
  if (gesture.config.runOnJS) {
    return;
  }

  var areSomeNotWorklets = gesture.handlers.isWorklet.includes(false);
  var areSomeWorklets = gesture.handlers.isWorklet.includes(true);

  if (areSomeNotWorklets && areSomeWorklets) {
    console.error((0, _utils.tagMessage)("Some of the callbacks in the gesture are worklets and some are not. Either make sure that all calbacks are marked as 'worklet' if you wish to run them on the UI thread or use '.runOnJS(true)' modifier on the gesture explicitly to run all callbacks on the JS thread."));
  }
}

function attachHandlers(_ref) {
  var preparedGesture = _ref.preparedGesture,
      gestureConfig = _ref.gestureConfig,
      gesture = _ref.gesture,
      viewTag = _ref.viewTag;

  if (!preparedGesture.firstExecution) {
    gestureConfig === null || gestureConfig === void 0 ? void 0 : gestureConfig.initialize();
  } else {
    preparedGesture.firstExecution = false;
  }

  setImmediate(function () {
    gestureConfig === null || gestureConfig === void 0 ? void 0 : gestureConfig.prepare();
  });

  var _loop = function _loop(handler) {
    checkGestureCallbacksForWorklets(handler);

    _RNGestureHandlerModule.default.createGestureHandler(handler.handlerName, handler.handlerTag, (0, _gestureHandlerCommon.filterConfig)(handler.config, ALLOWED_PROPS));

    (0, _handlersRegistry.registerHandler)(handler.handlerTag, handler, handler.config.testId);
    setImmediate(function () {
      var requireToFail = [];

      if (handler.config.requireToFail) {
        requireToFail = extractValidHandlerTags(handler.config.requireToFail);
      }

      var simultaneousWith = [];

      if (handler.config.simultaneousWith) {
        simultaneousWith = extractValidHandlerTags(handler.config.simultaneousWith);
      }

      _RNGestureHandlerModule.default.updateGestureHandler(handler.handlerTag, (0, _gestureHandlerCommon.filterConfig)(handler.config, ALLOWED_PROPS, {
        simultaneousHandlers: simultaneousWith,
        waitFor: requireToFail
      }));
    });
  };

  for (var _iterator2 = _createForOfIteratorHelperLoose(gesture), _step2; !(_step2 = _iterator2()).done;) {
    var handler = _step2.value;

    _loop(handler);
  }

  preparedGesture.config = gesture;

  for (var _iterator3 = _createForOfIteratorHelperLoose(preparedGesture.config), _step3; !(_step3 = _iterator3()).done;) {
    var _gesture2 = _step3.value;
    var actionType = _gesture2.shouldUseReanimated ? _ActionType.ActionType.REANIMATED_WORKLET : _ActionType.ActionType.JS_FUNCTION_NEW_API;

    _RNGestureHandlerModule.default.attachGestureHandler(_gesture2.handlerTag, viewTag, actionType);
  }

  if (preparedGesture.animatedHandlers) {
    var isAnimatedGesture = function isAnimatedGesture(g) {
      return g.shouldUseReanimated;
    };

    preparedGesture.animatedHandlers.value = gesture.filter(isAnimatedGesture).map(function (g) {
      return g.handlers;
    });
  }
}

function updateHandlers(preparedGesture, gestureConfig, gesture) {
  gestureConfig === null || gestureConfig === void 0 ? void 0 : gestureConfig.prepare();

  for (var i = 0; i < gesture.length; i++) {
    var handler = preparedGesture.config[i];
    checkGestureCallbacksForWorklets(handler);

    if (gesture[i].handlerTag !== handler.handlerTag) {
      gesture[i].handlerTag = handler.handlerTag;
      gesture[i].handlers.handlerTag = handler.handlerTag;
    }
  }

  setImmediate(function () {
    for (var _i = 0; _i < gesture.length; _i++) {
      var _handler = preparedGesture.config[_i];
      _handler.config = gesture[_i].config;
      _handler.handlers = gesture[_i].handlers;
      var requireToFail = extractValidHandlerTags(_handler.config.requireToFail);
      var simultaneousWith = extractValidHandlerTags(_handler.config.simultaneousWith);

      _RNGestureHandlerModule.default.updateGestureHandler(_handler.handlerTag, (0, _gestureHandlerCommon.filterConfig)(_handler.config, ALLOWED_PROPS, {
        simultaneousHandlers: simultaneousWith,
        waitFor: requireToFail
      }));

      (0, _handlersRegistry.registerHandler)(_handler.handlerTag, _handler, _handler.config.testId);
    }

    if (preparedGesture.animatedHandlers) {
      preparedGesture.animatedHandlers.value = preparedGesture.config.filter(function (g) {
        return g.shouldUseReanimated;
      }).map(function (g) {
        return g.handlers;
      });
    }
  });
}

function needsToReattach(preparedGesture, gesture) {
  if (gesture.length !== preparedGesture.config.length) {
    return true;
  }

  for (var i = 0; i < gesture.length; i++) {
    if (gesture[i].handlerName !== preparedGesture.config[i].handlerName || gesture[i].shouldUseReanimated !== preparedGesture.config[i].shouldUseReanimated) {
      return true;
    }
  }

  return false;
}

function useAnimatedGesture(preparedGesture, needsRebuild) {
  if (!_reanimatedWrapper.Reanimated) {
    return;
  }

  var isStateChangeEvent = function () {
    var _f = function _f(event) {
      return event.oldState != null;
    };

    _f._closure = {};
    _f.asString = "function isStateChangeEvent(event){return event.oldState!=null;}";
    _f.__workletHash = 13883357260557;
    _f.__location = "/home/nom4d/delivery/GuardianDock/node_modules/react-native-gesture-handler/lib/commonjs/handlers/gestures/GestureDetector.js (216:2)";

    global.__reanimatedWorkletInit(_f);

    return _f;
  }();

  var isTouchEvent = function () {
    var _f = function _f(event) {
      return event.eventType != null;
    };

    _f._closure = {};
    _f.asString = "function isTouchEvent(event){return event.eventType!=null;}";
    _f.__workletHash = 15872269086045;
    _f.__location = "/home/nom4d/delivery/GuardianDock/node_modules/react-native-gesture-handler/lib/commonjs/handlers/gestures/GestureDetector.js (222:2)";

    global.__reanimatedWorkletInit(_f);

    return _f;
  }();

  var getHandler = function () {
    var _f = function _f(type, gesture) {
      switch (type) {
        case _gesture.CALLBACK_TYPE.BEGAN:
          return gesture.onBegin;

        case _gesture.CALLBACK_TYPE.START:
          return gesture.onStart;

        case _gesture.CALLBACK_TYPE.UPDATE:
          return gesture.onUpdate;

        case _gesture.CALLBACK_TYPE.CHANGE:
          return gesture.onChange;

        case _gesture.CALLBACK_TYPE.END:
          return gesture.onEnd;

        case _gesture.CALLBACK_TYPE.FINALIZE:
          return gesture.onFinalize;

        case _gesture.CALLBACK_TYPE.TOUCHES_DOWN:
          return gesture.onTouchesDown;

        case _gesture.CALLBACK_TYPE.TOUCHES_MOVE:
          return gesture.onTouchesMove;

        case _gesture.CALLBACK_TYPE.TOUCHES_UP:
          return gesture.onTouchesUp;

        case _gesture.CALLBACK_TYPE.TOUCHES_CANCELLED:
          return gesture.onTouchesCancelled;
      }
    };

    _f._closure = {
      _gesture: {
        CALLBACK_TYPE: {
          BEGAN: _gesture.CALLBACK_TYPE.BEGAN,
          START: _gesture.CALLBACK_TYPE.START,
          UPDATE: _gesture.CALLBACK_TYPE.UPDATE,
          CHANGE: _gesture.CALLBACK_TYPE.CHANGE,
          END: _gesture.CALLBACK_TYPE.END,
          FINALIZE: _gesture.CALLBACK_TYPE.FINALIZE,
          TOUCHES_DOWN: _gesture.CALLBACK_TYPE.TOUCHES_DOWN,
          TOUCHES_MOVE: _gesture.CALLBACK_TYPE.TOUCHES_MOVE,
          TOUCHES_UP: _gesture.CALLBACK_TYPE.TOUCHES_UP,
          TOUCHES_CANCELLED: _gesture.CALLBACK_TYPE.TOUCHES_CANCELLED
        }
      }
    };
    _f.asString = "function getHandler(type,gesture){const{_gesture}=jsThis._closure;{switch(type){case _gesture.CALLBACK_TYPE.BEGAN:return gesture.onBegin;case _gesture.CALLBACK_TYPE.START:return gesture.onStart;case _gesture.CALLBACK_TYPE.UPDATE:return gesture.onUpdate;case _gesture.CALLBACK_TYPE.CHANGE:return gesture.onChange;case _gesture.CALLBACK_TYPE.END:return gesture.onEnd;case _gesture.CALLBACK_TYPE.FINALIZE:return gesture.onFinalize;case _gesture.CALLBACK_TYPE.TOUCHES_DOWN:return gesture.onTouchesDown;case _gesture.CALLBACK_TYPE.TOUCHES_MOVE:return gesture.onTouchesMove;case _gesture.CALLBACK_TYPE.TOUCHES_UP:return gesture.onTouchesUp;case _gesture.CALLBACK_TYPE.TOUCHES_CANCELLED:return gesture.onTouchesCancelled;}}}";
    _f.__workletHash = 10244107023838;
    _f.__location = "/home/nom4d/delivery/GuardianDock/node_modules/react-native-gesture-handler/lib/commonjs/handlers/gestures/GestureDetector.js (228:2)";

    global.__reanimatedWorkletInit(_f);

    return _f;
  }();

  var touchEventTypeToCallbackType = function () {
    var _f = function _f(eventType) {
      switch (eventType) {
        case _EventType.EventType.TOUCHES_DOWN:
          return _gesture.CALLBACK_TYPE.TOUCHES_DOWN;

        case _EventType.EventType.TOUCHES_MOVE:
          return _gesture.CALLBACK_TYPE.TOUCHES_MOVE;

        case _EventType.EventType.TOUCHES_UP:
          return _gesture.CALLBACK_TYPE.TOUCHES_UP;

        case _EventType.EventType.TOUCHES_CANCELLED:
          return _gesture.CALLBACK_TYPE.TOUCHES_CANCELLED;
      }

      return _gesture.CALLBACK_TYPE.UNDEFINED;
    };

    _f._closure = {
      _EventType: {
        EventType: {
          TOUCHES_DOWN: _EventType.EventType.TOUCHES_DOWN,
          TOUCHES_MOVE: _EventType.EventType.TOUCHES_MOVE,
          TOUCHES_UP: _EventType.EventType.TOUCHES_UP,
          TOUCHES_CANCELLED: _EventType.EventType.TOUCHES_CANCELLED
        }
      },
      _gesture: {
        CALLBACK_TYPE: {
          TOUCHES_DOWN: _gesture.CALLBACK_TYPE.TOUCHES_DOWN,
          TOUCHES_MOVE: _gesture.CALLBACK_TYPE.TOUCHES_MOVE,
          TOUCHES_UP: _gesture.CALLBACK_TYPE.TOUCHES_UP,
          TOUCHES_CANCELLED: _gesture.CALLBACK_TYPE.TOUCHES_CANCELLED,
          UNDEFINED: _gesture.CALLBACK_TYPE.UNDEFINED
        }
      }
    };
    _f.asString = "function touchEventTypeToCallbackType(eventType){const{_EventType,_gesture}=jsThis._closure;{switch(eventType){case _EventType.EventType.TOUCHES_DOWN:return _gesture.CALLBACK_TYPE.TOUCHES_DOWN;case _EventType.EventType.TOUCHES_MOVE:return _gesture.CALLBACK_TYPE.TOUCHES_MOVE;case _EventType.EventType.TOUCHES_UP:return _gesture.CALLBACK_TYPE.TOUCHES_UP;case _EventType.EventType.TOUCHES_CANCELLED:return _gesture.CALLBACK_TYPE.TOUCHES_CANCELLED;}return _gesture.CALLBACK_TYPE.UNDEFINED;}}";
    _f.__workletHash = 11890356655602;
    _f.__location = "/home/nom4d/delivery/GuardianDock/node_modules/react-native-gesture-handler/lib/commonjs/handlers/gestures/GestureDetector.js (264:2)";

    global.__reanimatedWorkletInit(_f);

    return _f;
  }();

  var runWorklet = function () {
    var _f = function _f(type, gesture, event) {
      var handler = getHandler(type, gesture);

      if (gesture.isWorklet[type]) {
        for (var _len = arguments.length, args = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {
          args[_key - 3] = arguments[_key];
        }

        handler === null || handler === void 0 ? void 0 : handler.apply(void 0, [event].concat(args));
      } else if (handler) {
        console.warn((0, _utils.tagMessage)('Animated gesture callback must be a worklet'));
      }
    };

    _f._closure = {
      getHandler: getHandler,
      _utils: {
        tagMessage: _utils.tagMessage
      }
    };
    _f.asString = "function runWorklet(type,gesture,event,...args){const{getHandler,_utils}=jsThis._closure;{const handler=getHandler(type,gesture);if(gesture.isWorklet[type]){handler===null||handler===void 0?void 0:handler(event,...args);}else if(handler){console.warn((0,_utils.tagMessage)('Animated gesture callback must be a worklet'));}}}";
    _f.__workletHash = 1985407898573;
    _f.__location = "/home/nom4d/delivery/GuardianDock/node_modules/react-native-gesture-handler/lib/commonjs/handlers/gestures/GestureDetector.js (284:2)";

    global.__reanimatedWorkletInit(_f);

    return _f;
  }();

  var sharedHandlersCallbacks = _reanimatedWrapper.Reanimated.useSharedValue(null);

  var lastUpdateEvent = _reanimatedWrapper.Reanimated.useSharedValue([]);

  var stateControllers = [];

  var callback = function () {
    var _f = function _f(event) {
      var currentCallback = sharedHandlersCallbacks.value;

      if (!currentCallback) {
        return;
      }

      for (var i = 0; i < currentCallback.length; i++) {
        var gesture = currentCallback[i];

        if (event.handlerTag === gesture.handlerTag) {
          if (isStateChangeEvent(event)) {
            if (event.oldState === _State.State.UNDETERMINED && event.state === _State.State.BEGAN) {
              runWorklet(_gesture.CALLBACK_TYPE.BEGAN, gesture, event);
            } else if ((event.oldState === _State.State.BEGAN || event.oldState === _State.State.UNDETERMINED) && event.state === _State.State.ACTIVE) {
              runWorklet(_gesture.CALLBACK_TYPE.START, gesture, event);
              lastUpdateEvent.value[gesture.handlerTag] = undefined;
            } else if (event.oldState !== event.state && event.state === _State.State.END) {
              if (event.oldState === _State.State.ACTIVE) {
                runWorklet(_gesture.CALLBACK_TYPE.END, gesture, event, true);
              }

              runWorklet(_gesture.CALLBACK_TYPE.FINALIZE, gesture, event, true);
            } else if ((event.state === _State.State.FAILED || event.state === _State.State.CANCELLED) && event.state !== event.oldState) {
              if (event.oldState === _State.State.ACTIVE) {
                runWorklet(_gesture.CALLBACK_TYPE.END, gesture, event, false);
              }

              runWorklet(_gesture.CALLBACK_TYPE.FINALIZE, gesture, event, false);
            }
          } else if (isTouchEvent(event)) {
            if (!stateControllers[i]) {
              stateControllers[i] = _gestureStateManager.GestureStateManager.create(event.handlerTag);
            }

            if (event.eventType !== _EventType.EventType.UNDETERMINED) {
              runWorklet(touchEventTypeToCallbackType(event.eventType), gesture, event, stateControllers[i]);
            }
          } else {
            runWorklet(_gesture.CALLBACK_TYPE.UPDATE, gesture, event);

            if (gesture.onChange && gesture.changeEventCalculator) {
              var _gesture$changeEventC;

              runWorklet(_gesture.CALLBACK_TYPE.CHANGE, gesture, (_gesture$changeEventC = gesture.changeEventCalculator) === null || _gesture$changeEventC === void 0 ? void 0 : _gesture$changeEventC.call(gesture, event, lastUpdateEvent.value[gesture.handlerTag]));
              lastUpdateEvent.value[gesture.handlerTag] = event;
            }
          }
        }
      }
    };

    _f._closure = {
      sharedHandlersCallbacks: sharedHandlersCallbacks,
      isStateChangeEvent: isStateChangeEvent,
      _State: {
        State: {
          UNDETERMINED: _State.State.UNDETERMINED,
          BEGAN: _State.State.BEGAN,
          ACTIVE: _State.State.ACTIVE,
          END: _State.State.END,
          FAILED: _State.State.FAILED,
          CANCELLED: _State.State.CANCELLED
        }
      },
      runWorklet: runWorklet,
      _gesture: {
        CALLBACK_TYPE: {
          BEGAN: _gesture.CALLBACK_TYPE.BEGAN,
          START: _gesture.CALLBACK_TYPE.START,
          END: _gesture.CALLBACK_TYPE.END,
          FINALIZE: _gesture.CALLBACK_TYPE.FINALIZE,
          UPDATE: _gesture.CALLBACK_TYPE.UPDATE,
          CHANGE: _gesture.CALLBACK_TYPE.CHANGE
        }
      },
      lastUpdateEvent: lastUpdateEvent,
      isTouchEvent: isTouchEvent,
      stateControllers: stateControllers,
      _gestureStateManager: {
        GestureStateManager: {
          create: _gestureStateManager.GestureStateManager.create
        }
      },
      _EventType: {
        EventType: {
          UNDETERMINED: _EventType.EventType.UNDETERMINED
        }
      },
      touchEventTypeToCallbackType: touchEventTypeToCallbackType
    };
    _f.asString = "function _f(event){const{sharedHandlersCallbacks,isStateChangeEvent,_State,runWorklet,_gesture,lastUpdateEvent,isTouchEvent,stateControllers,_gestureStateManager,_EventType,touchEventTypeToCallbackType}=jsThis._closure;{const currentCallback=sharedHandlersCallbacks.value;if(!currentCallback){return;}for(let i=0;i<currentCallback.length;i++){const gesture=currentCallback[i];if(event.handlerTag===gesture.handlerTag){if(isStateChangeEvent(event)){if(event.oldState===_State.State.UNDETERMINED&&event.state===_State.State.BEGAN){runWorklet(_gesture.CALLBACK_TYPE.BEGAN,gesture,event);}else if((event.oldState===_State.State.BEGAN||event.oldState===_State.State.UNDETERMINED)&&event.state===_State.State.ACTIVE){runWorklet(_gesture.CALLBACK_TYPE.START,gesture,event);lastUpdateEvent.value[gesture.handlerTag]=undefined;}else if(event.oldState!==event.state&&event.state===_State.State.END){if(event.oldState===_State.State.ACTIVE){runWorklet(_gesture.CALLBACK_TYPE.END,gesture,event,true);}runWorklet(_gesture.CALLBACK_TYPE.FINALIZE,gesture,event,true);}else if((event.state===_State.State.FAILED||event.state===_State.State.CANCELLED)&&event.state!==event.oldState){if(event.oldState===_State.State.ACTIVE){runWorklet(_gesture.CALLBACK_TYPE.END,gesture,event,false);}runWorklet(_gesture.CALLBACK_TYPE.FINALIZE,gesture,event,false);}}else if(isTouchEvent(event)){if(!stateControllers[i]){stateControllers[i]=_gestureStateManager.GestureStateManager.create(event.handlerTag);}if(event.eventType!==_EventType.EventType.UNDETERMINED){runWorklet(touchEventTypeToCallbackType(event.eventType),gesture,event,stateControllers[i]);}}else{runWorklet(_gesture.CALLBACK_TYPE.UPDATE,gesture,event);if(gesture.onChange&&gesture.changeEventCalculator){var _gesture$changeEventC;runWorklet(_gesture.CALLBACK_TYPE.CHANGE,gesture,(_gesture$changeEventC=gesture.changeEventCalculator)===null||_gesture$changeEventC===void 0?void 0:_gesture$changeEventC.call(gesture,event,lastUpdateEvent.value[gesture.handlerTag]));lastUpdateEvent.value[gesture.handlerTag]=event;}}}}}}";
    _f.__workletHash = 1576047656941;
    _f.__location = "/home/nom4d/delivery/GuardianDock/node_modules/react-native-gesture-handler/lib/commonjs/handlers/gestures/GestureDetector.js (309:19)";

    global.__reanimatedWorkletInit(_f);

    return _f;
  }();

  var event = _reanimatedWrapper.Reanimated.useEvent(callback, ['onGestureHandlerStateChange', 'onGestureHandlerEvent'], needsRebuild);

  preparedGesture.animatedEventHandler = event;
  preparedGesture.animatedHandlers = sharedHandlersCallbacks;
}

var GestureDetector = function GestureDetector(props) {
  var _gestureConfig$toGest, _gestureConfig$toGest2;

  var gestureConfig = props.gesture;
  var gesture = (_gestureConfig$toGest = gestureConfig === null || gestureConfig === void 0 ? void 0 : (_gestureConfig$toGest2 = gestureConfig.toGestureArray) === null || _gestureConfig$toGest2 === void 0 ? void 0 : _gestureConfig$toGest2.call(gestureConfig)) !== null && _gestureConfig$toGest !== void 0 ? _gestureConfig$toGest : [];
  var useReanimatedHook = gesture.some(function (g) {
    return g.shouldUseReanimated;
  });
  var viewRef = (0, _react.useRef)(null);
  var firstRenderRef = (0, _react.useRef)(true);

  var preparedGesture = _react.default.useRef({
    config: gesture,
    animatedEventHandler: null,
    animatedHandlers: null,
    firstExecution: true,
    useReanimatedHook: useReanimatedHook
  }).current;

  if (useReanimatedHook !== preparedGesture.useReanimatedHook) {
    throw new Error((0, _utils.tagMessage)('You cannot change the thread the callbacks are ran on while the app is running'));
  }

  var needsToRebuildReanimatedEvent = preparedGesture.firstExecution || needsToReattach(preparedGesture, gesture);

  if (preparedGesture.firstExecution) {
    var _gestureConfig$initia;

    gestureConfig === null || gestureConfig === void 0 ? void 0 : (_gestureConfig$initia = gestureConfig.initialize) === null || _gestureConfig$initia === void 0 ? void 0 : _gestureConfig$initia.call(gestureConfig);
  }

  if (useReanimatedHook) {
    useAnimatedGesture(preparedGesture, needsToRebuildReanimatedEvent);
  }

  (0, _react.useEffect)(function () {
    firstRenderRef.current = true;
    var viewTag = (0, _gestureHandlerCommon.findNodeHandle)(viewRef.current);
    attachHandlers({
      preparedGesture: preparedGesture,
      gestureConfig: gestureConfig,
      gesture: gesture,
      viewTag: viewTag
    });
    return function () {
      dropHandlers(preparedGesture);
    };
  }, []);
  (0, _react.useEffect)(function () {
    if (!firstRenderRef.current) {
      var viewTag = (0, _gestureHandlerCommon.findNodeHandle)(viewRef.current);

      if (needsToReattach(preparedGesture, gesture)) {
        dropHandlers(preparedGesture);
        attachHandlers({
          preparedGesture: preparedGesture,
          gestureConfig: gestureConfig,
          gesture: gesture,
          viewTag: viewTag
        });
      } else {
        updateHandlers(preparedGesture, gestureConfig, gesture);
      }
    } else {
      firstRenderRef.current = false;
    }
  }, [props]);

  var refFunction = function refFunction(ref) {
    if (ref !== null) {
      viewRef.current = ref;

      if ((0, _utils.isFabric)()) {
        var node = (0, _getShadowNodeFromRef.getShadowNodeFromRef)(ref);

        if (global.isFormsStackingContext(node) === false) {
          setImmediate(function () {
            console.error((0, _utils.tagMessage)('GestureDetector has received a child that may get view-flattened. ' + '\nTo prevent it from misbehaving you need to wrap the child with a `<View collapsable={false}>`.'));
          });
        }
      }
    }
  };

  if (useReanimatedHook) {
    return _react.default.createElement(AnimatedWrap, {
      ref: refFunction,
      onGestureHandlerEvent: preparedGesture.animatedEventHandler
    }, props.children);
  } else {
    return _react.default.createElement(Wrap, {
      ref: refFunction
    }, props.children);
  }
};

exports.GestureDetector = GestureDetector;

var Wrap = function (_react$default$Compon) {
  (0, _inherits2.default)(Wrap, _react$default$Compon);

  var _super = _createSuper(Wrap);

  function Wrap() {
    (0, _classCallCheck2.default)(this, Wrap);
    return _super.apply(this, arguments);
  }

  (0, _createClass2.default)(Wrap, [{
    key: "render",
    value: function render() {
      var child = _react.default.Children.only(this.props.children);

      return _react.default.cloneElement(child, {
        collapsable: false
      }, child.props.children);
    }
  }]);
  return Wrap;
}(_react.default.Component);

var AnimatedWrap = (_Reanimated$default$c = _reanimatedWrapper.Reanimated === null || _reanimatedWrapper.Reanimated === void 0 ? void 0 : (_Reanimated$default = _reanimatedWrapper.Reanimated.default) === null || _Reanimated$default === void 0 ? void 0 : _Reanimated$default.createAnimatedComponent(Wrap)) !== null && _Reanimated$default$c !== void 0 ? _Reanimated$default$c : Wrap;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU16SSxTQUFHLEVBQUVpSTtBQUFYLE9BQXlCWCxLQUFLLENBQUNrQixRQUEvQixDQUFQO0FBQ0Q7QUE3R0k7Ozs7SUFnSERDLEk7Ozs7Ozs7Ozs7OztXQUNKQyxrQkFBUztBQU1QLFVBQU1DLEtBQVUsR0FBR2QsZUFBTWUsUUFBTmYsQ0FBZWdCLElBQWZoQixDQUFvQixLQUFLUCxLQUFMLENBQVdrQixRQUEvQlgsQ0FBbkI7O0FBQ0EsYUFBT0EsZUFBTWlCLFlBQU5qQixDQUNMYyxLQURLZCxFQUVMO0FBQUVrQixtQkFBVyxFQUFFO0FBQWYsT0FGS2xCLEVBSUxjLEtBQUssQ0FBQ3JCLEtBQU5xQixDQUFZSCxRQUpQWCxDQUFQO0FBTUQ7OztFQWRnQkEsZUFBTW1CLFM7O0FBaUJ6QixJQUFNVixZQUFZLDRCQUFHNUUsa0NBQUgsSUFBR0Esc0NBQUgsTUFBR0EsR0FBSCxNQUFHQSxHQUFILHVCQUFHQSw4QkFBWXVGLE9BQWYsd0RBQUdDLG9CQUFxQkMsdUJBQXJCLENBQTZDVixJQUE3QyxDQUFILHlFQUF5REEsSUFBM0UiLCJuYW1lcyI6WyJBTExPV0VEX1BST1BTIiwiYmFzZUdlc3R1cmVIYW5kbGVyV2l0aE1vbml0b3JQcm9wcyIsInRhcEdlc3R1cmVIYW5kbGVyUHJvcHMiLCJwYW5HZXN0dXJlSGFuZGxlclByb3BzIiwicGFuR2VzdHVyZUhhbmRsZXJDdXN0b21OYXRpdmVQcm9wcyIsImxvbmdQcmVzc0dlc3R1cmVIYW5kbGVyUHJvcHMiLCJmb3JjZVRvdWNoR2VzdHVyZUhhbmRsZXJQcm9wcyIsImZsaW5nR2VzdHVyZUhhbmRsZXJQcm9wcyIsImNvbnZlcnRUb0hhbmRsZXJUYWciLCJyZWYiLCJCYXNlR2VzdHVyZSIsImhhbmRsZXJUYWciLCJjdXJyZW50IiwiX3JlZiRjdXJyZW50IiwiZXh0cmFjdFZhbGlkSGFuZGxlclRhZ3MiLCJpbnRlcmFjdGlvbkdyb3VwIiwibWFwIiwiX2ludGVyYWN0aW9uR3JvdXAkbWFwMiIsImZpbHRlciIsInRhZyIsImRyb3BIYW5kbGVycyIsInByZXBhcmVkR2VzdHVyZSIsImNvbmZpZyIsImhhbmRsZXIiLCJSTkdlc3R1cmVIYW5kbGVyTW9kdWxlIiwiZHJvcEdlc3R1cmVIYW5kbGVyIiwidGVzdElkIiwiY2hlY2tHZXN0dXJlQ2FsbGJhY2tzRm9yV29ya2xldHMiLCJnZXN0dXJlIiwicnVuT25KUyIsImFyZVNvbWVOb3RXb3JrbGV0cyIsImhhbmRsZXJzIiwiaXNXb3JrbGV0IiwiaW5jbHVkZXMiLCJhcmVTb21lV29ya2xldHMiLCJjb25zb2xlIiwiZXJyb3IiLCJhdHRhY2hIYW5kbGVycyIsImdlc3R1cmVDb25maWciLCJ2aWV3VGFnIiwiZmlyc3RFeGVjdXRpb24iLCJpbml0aWFsaXplIiwic2V0SW1tZWRpYXRlIiwicHJlcGFyZSIsImNyZWF0ZUdlc3R1cmVIYW5kbGVyIiwiaGFuZGxlck5hbWUiLCJyZXF1aXJlVG9GYWlsIiwic2ltdWx0YW5lb3VzV2l0aCIsInVwZGF0ZUdlc3R1cmVIYW5kbGVyIiwic2ltdWx0YW5lb3VzSGFuZGxlcnMiLCJ3YWl0Rm9yIiwiYWN0aW9uVHlwZSIsInNob3VsZFVzZVJlYW5pbWF0ZWQiLCJBY3Rpb25UeXBlIiwiUkVBTklNQVRFRF9XT1JLTEVUIiwiSlNfRlVOQ1RJT05fTkVXX0FQSSIsImF0dGFjaEdlc3R1cmVIYW5kbGVyIiwiYW5pbWF0ZWRIYW5kbGVycyIsImlzQW5pbWF0ZWRHZXN0dXJlIiwiZyIsInZhbHVlIiwidXBkYXRlSGFuZGxlcnMiLCJpIiwibGVuZ3RoIiwibmVlZHNUb1JlYXR0YWNoIiwidXNlQW5pbWF0ZWRHZXN0dXJlIiwibmVlZHNSZWJ1aWxkIiwiUmVhbmltYXRlZCIsImlzU3RhdGVDaGFuZ2VFdmVudCIsImV2ZW50Iiwib2xkU3RhdGUiLCJpc1RvdWNoRXZlbnQiLCJldmVudFR5cGUiLCJnZXRIYW5kbGVyIiwidHlwZSIsIkNBTExCQUNLX1RZUEUiLCJCRUdBTiIsIm9uQmVnaW4iLCJTVEFSVCIsIm9uU3RhcnQiLCJVUERBVEUiLCJvblVwZGF0ZSIsIkNIQU5HRSIsIm9uQ2hhbmdlIiwiRU5EIiwib25FbmQiLCJGSU5BTElaRSIsIm9uRmluYWxpemUiLCJUT1VDSEVTX0RPV04iLCJvblRvdWNoZXNEb3duIiwiVE9VQ0hFU19NT1ZFIiwib25Ub3VjaGVzTW92ZSIsIlRPVUNIRVNfVVAiLCJvblRvdWNoZXNVcCIsIlRPVUNIRVNfQ0FOQ0VMTEVEIiwib25Ub3VjaGVzQ2FuY2VsbGVkIiwiX2dlc3R1cmUiLCJ0b3VjaEV2ZW50VHlwZVRvQ2FsbGJhY2tUeXBlIiwiRXZlbnRUeXBlIiwiVU5ERUZJTkVEIiwiX0V2ZW50VHlwZSIsInJ1bldvcmtsZXQiLCJhcmdzIiwid2FybiIsIl91dGlscyIsInNoYXJlZEhhbmRsZXJzQ2FsbGJhY2tzIiwidXNlU2hhcmVkVmFsdWUiLCJsYXN0VXBkYXRlRXZlbnQiLCJzdGF0ZUNvbnRyb2xsZXJzIiwiY2FsbGJhY2siLCJjdXJyZW50Q2FsbGJhY2siLCJTdGF0ZSIsIlVOREVURVJNSU5FRCIsInN0YXRlIiwiQUNUSVZFIiwidW5kZWZpbmVkIiwiRkFJTEVEIiwiQ0FOQ0VMTEVEIiwiR2VzdHVyZVN0YXRlTWFuYWdlciIsImNyZWF0ZSIsImNoYW5nZUV2ZW50Q2FsY3VsYXRvciIsIl9nZXN0dXJlJGNoYW5nZUV2ZW50QyIsIl9TdGF0ZSIsIl9nZXN0dXJlU3RhdGVNYW5hZ2VyIiwidXNlRXZlbnQiLCJhbmltYXRlZEV2ZW50SGFuZGxlciIsIkdlc3R1cmVEZXRlY3RvciIsInByb3BzIiwidG9HZXN0dXJlQXJyYXkiLCJfZ2VzdHVyZUNvbmZpZyR0b0dlc3QyIiwidXNlUmVhbmltYXRlZEhvb2siLCJzb21lIiwidmlld1JlZiIsImZpcnN0UmVuZGVyUmVmIiwiUmVhY3QiLCJ1c2VSZWYiLCJFcnJvciIsIm5lZWRzVG9SZWJ1aWxkUmVhbmltYXRlZEV2ZW50IiwicmVmRnVuY3Rpb24iLCJub2RlIiwiZ2xvYmFsIiwiaXNGb3Jtc1N0YWNraW5nQ29udGV4dCIsIl9yZWFjdCIsIkFuaW1hdGVkV3JhcCIsIm9uR2VzdHVyZUhhbmRsZXJFdmVudCIsImNoaWxkcmVuIiwiV3JhcCIsInJlbmRlciIsImNoaWxkIiwiQ2hpbGRyZW4iLCJvbmx5IiwiY2xvbmVFbGVtZW50IiwiY29sbGFwc2FibGUiLCJDb21wb25lbnQiLCJkZWZhdWx0IiwiX1JlYW5pbWF0ZWQkZGVmYXVsdCIsImNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50Il0sInNvdXJjZXMiOlsiR2VzdHVyZURldGVjdG9yLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBHZXN0dXJlVHlwZSxcbiAgSGFuZGxlckNhbGxiYWNrcyxcbiAgQmFzZUdlc3R1cmUsXG4gIEdlc3R1cmVSZWYsXG4gIENBTExCQUNLX1RZUEUsXG59IGZyb20gJy4vZ2VzdHVyZSc7XG5pbXBvcnQgeyBSZWFuaW1hdGVkLCBTaGFyZWRWYWx1ZSB9IGZyb20gJy4vcmVhbmltYXRlZFdyYXBwZXInO1xuaW1wb3J0IHsgcmVnaXN0ZXJIYW5kbGVyLCB1bnJlZ2lzdGVySGFuZGxlciB9IGZyb20gJy4uL2hhbmRsZXJzUmVnaXN0cnknO1xuaW1wb3J0IFJOR2VzdHVyZUhhbmRsZXJNb2R1bGUgZnJvbSAnLi4vLi4vUk5HZXN0dXJlSGFuZGxlck1vZHVsZSc7XG5pbXBvcnQge1xuICBiYXNlR2VzdHVyZUhhbmRsZXJXaXRoTW9uaXRvclByb3BzLFxuICBmaWx0ZXJDb25maWcsXG4gIGZpbmROb2RlSGFuZGxlLFxuICBHZXN0dXJlVG91Y2hFdmVudCxcbiAgR2VzdHVyZVVwZGF0ZUV2ZW50LFxuICBHZXN0dXJlU3RhdGVDaGFuZ2VFdmVudCxcbn0gZnJvbSAnLi4vZ2VzdHVyZUhhbmRsZXJDb21tb24nO1xuaW1wb3J0IHtcbiAgR2VzdHVyZVN0YXRlTWFuYWdlcixcbiAgR2VzdHVyZVN0YXRlTWFuYWdlclR5cGUsXG59IGZyb20gJy4vZ2VzdHVyZVN0YXRlTWFuYWdlcic7XG5pbXBvcnQgeyBmbGluZ0dlc3R1cmVIYW5kbGVyUHJvcHMgfSBmcm9tICcuLi9GbGluZ0dlc3R1cmVIYW5kbGVyJztcbmltcG9ydCB7IGZvcmNlVG91Y2hHZXN0dXJlSGFuZGxlclByb3BzIH0gZnJvbSAnLi4vRm9yY2VUb3VjaEdlc3R1cmVIYW5kbGVyJztcbmltcG9ydCB7IGxvbmdQcmVzc0dlc3R1cmVIYW5kbGVyUHJvcHMgfSBmcm9tICcuLi9Mb25nUHJlc3NHZXN0dXJlSGFuZGxlcic7XG5pbXBvcnQge1xuICBwYW5HZXN0dXJlSGFuZGxlclByb3BzLFxuICBwYW5HZXN0dXJlSGFuZGxlckN1c3RvbU5hdGl2ZVByb3BzLFxufSBmcm9tICcuLi9QYW5HZXN0dXJlSGFuZGxlcic7XG5pbXBvcnQgeyB0YXBHZXN0dXJlSGFuZGxlclByb3BzIH0gZnJvbSAnLi4vVGFwR2VzdHVyZUhhbmRsZXInO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi8uLi9TdGF0ZSc7XG5pbXBvcnQgeyBFdmVudFR5cGUgfSBmcm9tICcuLi8uLi9FdmVudFR5cGUnO1xuaW1wb3J0IHsgQ29tcG9zZWRHZXN0dXJlIH0gZnJvbSAnLi9nZXN0dXJlQ29tcG9zaXRpb24nO1xuaW1wb3J0IHsgQWN0aW9uVHlwZSB9IGZyb20gJy4uLy4uL0FjdGlvblR5cGUnO1xuaW1wb3J0IHsgaXNGYWJyaWMsIHRhZ01lc3NhZ2UgfSBmcm9tICcuLi8uLi91dGlscyc7XG5pbXBvcnQgeyBnZXRTaGFkb3dOb2RlRnJvbVJlZiB9IGZyb20gJy4uLy4uL2dldFNoYWRvd05vZGVGcm9tUmVmJztcblxuZGVjbGFyZSBnbG9iYWwge1xuICBmdW5jdGlvbiBpc0Zvcm1zU3RhY2tpbmdDb250ZXh0KG5vZGU6IHVua25vd24pOiBib29sZWFuIHwgbnVsbDsgLy8gSlNJIGZ1bmN0aW9uXG59XG5cbmNvbnN0IEFMTE9XRURfUFJPUFMgPSBbXG4gIC4uLmJhc2VHZXN0dXJlSGFuZGxlcldpdGhNb25pdG9yUHJvcHMsXG4gIC4uLnRhcEdlc3R1cmVIYW5kbGVyUHJvcHMsXG4gIC4uLnBhbkdlc3R1cmVIYW5kbGVyUHJvcHMsXG4gIC4uLnBhbkdlc3R1cmVIYW5kbGVyQ3VzdG9tTmF0aXZlUHJvcHMsXG4gIC4uLmxvbmdQcmVzc0dlc3R1cmVIYW5kbGVyUHJvcHMsXG4gIC4uLmZvcmNlVG91Y2hHZXN0dXJlSGFuZGxlclByb3BzLFxuICAuLi5mbGluZ0dlc3R1cmVIYW5kbGVyUHJvcHMsXG5dO1xuXG5leHBvcnQgdHlwZSBHZXN0dXJlQ29uZmlnUmVmZXJlbmNlID0ge1xuICBjb25maWc6IEdlc3R1cmVUeXBlW107XG4gIGFuaW1hdGVkRXZlbnRIYW5kbGVyOiB1bmtub3duO1xuICBhbmltYXRlZEhhbmRsZXJzOiBTaGFyZWRWYWx1ZTxcbiAgICBIYW5kbGVyQ2FsbGJhY2tzPFJlY29yZDxzdHJpbmcsIHVua25vd24+PltdIHwgbnVsbFxuICA+IHwgbnVsbDtcbiAgZmlyc3RFeGVjdXRpb246IGJvb2xlYW47XG4gIHVzZVJlYW5pbWF0ZWRIb29rOiBib29sZWFuO1xufTtcblxuZnVuY3Rpb24gY29udmVydFRvSGFuZGxlclRhZyhyZWY6IEdlc3R1cmVSZWYpOiBudW1iZXIge1xuICBpZiAodHlwZW9mIHJlZiA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gcmVmO1xuICB9IGVsc2UgaWYgKHJlZiBpbnN0YW5jZW9mIEJhc2VHZXN0dXJlKSB7XG4gICAgcmV0dXJuIHJlZi5oYW5kbGVyVGFnO1xuICB9IGVsc2Uge1xuICAgIC8vIEB0cy1pZ25vcmUgaW4gdGhpcyBjYXNlIGl0IHNob3VsZCBiZSBhIHJlZiBlaXRoZXIgdG8gZ2VzdHVyZSBvYmplY3Qgb3JcbiAgICAvLyBhIGdlc3R1cmUgaGFuZGxlciBjb21wb25lbnQsIGluIGJvdGggY2FzZXMgaGFuZGxlclRhZyBwcm9wZXJ0eSBleGlzdHNcbiAgICByZXR1cm4gcmVmLmN1cnJlbnQ/LmhhbmRsZXJUYWcgPz8gLTE7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdFZhbGlkSGFuZGxlclRhZ3MoaW50ZXJhY3Rpb25Hcm91cDogR2VzdHVyZVJlZltdIHwgdW5kZWZpbmVkKSB7XG4gIHJldHVybiAoXG4gICAgaW50ZXJhY3Rpb25Hcm91cD8ubWFwKGNvbnZlcnRUb0hhbmRsZXJUYWcpPy5maWx0ZXIoKHRhZykgPT4gdGFnID4gMCkgPz8gW11cbiAgKTtcbn1cblxuZnVuY3Rpb24gZHJvcEhhbmRsZXJzKHByZXBhcmVkR2VzdHVyZTogR2VzdHVyZUNvbmZpZ1JlZmVyZW5jZSkge1xuICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgcHJlcGFyZWRHZXN0dXJlLmNvbmZpZykge1xuICAgIFJOR2VzdHVyZUhhbmRsZXJNb2R1bGUuZHJvcEdlc3R1cmVIYW5kbGVyKGhhbmRsZXIuaGFuZGxlclRhZyk7XG5cbiAgICB1bnJlZ2lzdGVySGFuZGxlcihoYW5kbGVyLmhhbmRsZXJUYWcsIGhhbmRsZXIuY29uZmlnLnRlc3RJZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tHZXN0dXJlQ2FsbGJhY2tzRm9yV29ya2xldHMoZ2VzdHVyZTogR2VzdHVyZVR5cGUpIHtcbiAgLy8gaWYgYSBnZXN0dXJlIGlzIGV4cGxpY2l0bHkgbWFya2VkIHRvIHJ1biBvbiB0aGUgSlMgdGhyZWFkIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hlY2tcbiAgLy8gaWYgY2FsbGJhY2tzIGFyZSB3b3JrbGV0cyBhcyB0aGUgdXNlciBpcyBhd2FyZSB0aGV5IHdpbGwgYmUgcmFuIG9uIHRoZSBKUyB0aHJlYWRcbiAgaWYgKGdlc3R1cmUuY29uZmlnLnJ1bk9uSlMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBhcmVTb21lTm90V29ya2xldHMgPSBnZXN0dXJlLmhhbmRsZXJzLmlzV29ya2xldC5pbmNsdWRlcyhmYWxzZSk7XG4gIGNvbnN0IGFyZVNvbWVXb3JrbGV0cyA9IGdlc3R1cmUuaGFuZGxlcnMuaXNXb3JrbGV0LmluY2x1ZGVzKHRydWUpO1xuXG4gIC8vIGlmIHNvbWUgb2YgdGhlIGNhbGxiYWNrcyBhcmUgd29ya2xldHMgYW5kIHNvbWUgYXJlIG5vdCwgYW5kIHRoZSBnZXN0dXJlIGlzIG5vdFxuICAvLyBleHBsaWNpdGx5IG1hcmtlZCB3aXRoIGAucnVuT25KUyh0cnVlKWAgc2hvdyBhbiBlcnJvclxuICBpZiAoYXJlU29tZU5vdFdvcmtsZXRzICYmIGFyZVNvbWVXb3JrbGV0cykge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICB0YWdNZXNzYWdlKFxuICAgICAgICBgU29tZSBvZiB0aGUgY2FsbGJhY2tzIGluIHRoZSBnZXN0dXJlIGFyZSB3b3JrbGV0cyBhbmQgc29tZSBhcmUgbm90LiBFaXRoZXIgbWFrZSBzdXJlIHRoYXQgYWxsIGNhbGJhY2tzIGFyZSBtYXJrZWQgYXMgJ3dvcmtsZXQnIGlmIHlvdSB3aXNoIHRvIHJ1biB0aGVtIG9uIHRoZSBVSSB0aHJlYWQgb3IgdXNlICcucnVuT25KUyh0cnVlKScgbW9kaWZpZXIgb24gdGhlIGdlc3R1cmUgZXhwbGljaXRseSB0byBydW4gYWxsIGNhbGxiYWNrcyBvbiB0aGUgSlMgdGhyZWFkLmBcbiAgICAgIClcbiAgICApO1xuICB9XG59XG5cbmludGVyZmFjZSBBdHRhY2hIYW5kbGVyc0NvbmZpZyB7XG4gIHByZXBhcmVkR2VzdHVyZTogR2VzdHVyZUNvbmZpZ1JlZmVyZW5jZTtcbiAgZ2VzdHVyZUNvbmZpZzogQ29tcG9zZWRHZXN0dXJlIHwgR2VzdHVyZVR5cGUgfCB1bmRlZmluZWQ7XG4gIGdlc3R1cmU6IEdlc3R1cmVUeXBlW107XG4gIHZpZXdUYWc6IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gYXR0YWNoSGFuZGxlcnMoe1xuICBwcmVwYXJlZEdlc3R1cmUsXG4gIGdlc3R1cmVDb25maWcsXG4gIGdlc3R1cmUsXG4gIHZpZXdUYWcsXG59OiBBdHRhY2hIYW5kbGVyc0NvbmZpZykge1xuICBpZiAoIXByZXBhcmVkR2VzdHVyZS5maXJzdEV4ZWN1dGlvbikge1xuICAgIGdlc3R1cmVDb25maWc/LmluaXRpYWxpemUoKTtcbiAgfSBlbHNlIHtcbiAgICBwcmVwYXJlZEdlc3R1cmUuZmlyc3RFeGVjdXRpb24gPSBmYWxzZTtcbiAgfVxuXG4gIC8vIHVzZSBzZXRJbW1lZGlhdGUgdG8gZXh0cmFjdCBoYW5kbGVyVGFncywgYmVjYXVzZSBhbGwgcmVmcyBzaG91bGQgYmUgaW5pdGlhbGl6ZWRcbiAgLy8gd2hlbiBpdCdzIHJhblxuICBzZXRJbW1lZGlhdGUoKCkgPT4ge1xuICAgIGdlc3R1cmVDb25maWc/LnByZXBhcmUoKTtcbiAgfSk7XG5cbiAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGdlc3R1cmUpIHtcbiAgICBjaGVja0dlc3R1cmVDYWxsYmFja3NGb3JXb3JrbGV0cyhoYW5kbGVyKTtcblxuICAgIFJOR2VzdHVyZUhhbmRsZXJNb2R1bGUuY3JlYXRlR2VzdHVyZUhhbmRsZXIoXG4gICAgICBoYW5kbGVyLmhhbmRsZXJOYW1lLFxuICAgICAgaGFuZGxlci5oYW5kbGVyVGFnLFxuICAgICAgZmlsdGVyQ29uZmlnKGhhbmRsZXIuY29uZmlnLCBBTExPV0VEX1BST1BTKVxuICAgICk7XG5cbiAgICByZWdpc3RlckhhbmRsZXIoaGFuZGxlci5oYW5kbGVyVGFnLCBoYW5kbGVyLCBoYW5kbGVyLmNvbmZpZy50ZXN0SWQpO1xuXG4gICAgLy8gdXNlIHNldEltbWVkaWF0ZSB0byBleHRyYWN0IGhhbmRsZXJUYWdzLCBiZWNhdXNlIGFsbCByZWZzIHNob3VsZCBiZSBpbml0aWFsaXplZFxuICAgIC8vIHdoZW4gaXQncyByYW5cbiAgICBzZXRJbW1lZGlhdGUoKCkgPT4ge1xuICAgICAgbGV0IHJlcXVpcmVUb0ZhaWw6IG51bWJlcltdID0gW107XG4gICAgICBpZiAoaGFuZGxlci5jb25maWcucmVxdWlyZVRvRmFpbCkge1xuICAgICAgICByZXF1aXJlVG9GYWlsID0gZXh0cmFjdFZhbGlkSGFuZGxlclRhZ3MoaGFuZGxlci5jb25maWcucmVxdWlyZVRvRmFpbCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBzaW11bHRhbmVvdXNXaXRoOiBudW1iZXJbXSA9IFtdO1xuICAgICAgaWYgKGhhbmRsZXIuY29uZmlnLnNpbXVsdGFuZW91c1dpdGgpIHtcbiAgICAgICAgc2ltdWx0YW5lb3VzV2l0aCA9IGV4dHJhY3RWYWxpZEhhbmRsZXJUYWdzKFxuICAgICAgICAgIGhhbmRsZXIuY29uZmlnLnNpbXVsdGFuZW91c1dpdGhcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgUk5HZXN0dXJlSGFuZGxlck1vZHVsZS51cGRhdGVHZXN0dXJlSGFuZGxlcihcbiAgICAgICAgaGFuZGxlci5oYW5kbGVyVGFnLFxuICAgICAgICBmaWx0ZXJDb25maWcoaGFuZGxlci5jb25maWcsIEFMTE9XRURfUFJPUFMsIHtcbiAgICAgICAgICBzaW11bHRhbmVvdXNIYW5kbGVyczogc2ltdWx0YW5lb3VzV2l0aCxcbiAgICAgICAgICB3YWl0Rm9yOiByZXF1aXJlVG9GYWlsLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuICBwcmVwYXJlZEdlc3R1cmUuY29uZmlnID0gZ2VzdHVyZTtcblxuICBmb3IgKGNvbnN0IGdlc3R1cmUgb2YgcHJlcGFyZWRHZXN0dXJlLmNvbmZpZykge1xuICAgIGNvbnN0IGFjdGlvblR5cGUgPSBnZXN0dXJlLnNob3VsZFVzZVJlYW5pbWF0ZWRcbiAgICAgID8gQWN0aW9uVHlwZS5SRUFOSU1BVEVEX1dPUktMRVRcbiAgICAgIDogQWN0aW9uVHlwZS5KU19GVU5DVElPTl9ORVdfQVBJO1xuXG4gICAgUk5HZXN0dXJlSGFuZGxlck1vZHVsZS5hdHRhY2hHZXN0dXJlSGFuZGxlcihcbiAgICAgIGdlc3R1cmUuaGFuZGxlclRhZyxcbiAgICAgIHZpZXdUYWcsXG4gICAgICBhY3Rpb25UeXBlXG4gICAgKTtcbiAgfVxuXG4gIGlmIChwcmVwYXJlZEdlc3R1cmUuYW5pbWF0ZWRIYW5kbGVycykge1xuICAgIGNvbnN0IGlzQW5pbWF0ZWRHZXN0dXJlID0gKGc6IEdlc3R1cmVUeXBlKSA9PiBnLnNob3VsZFVzZVJlYW5pbWF0ZWQ7XG5cbiAgICBwcmVwYXJlZEdlc3R1cmUuYW5pbWF0ZWRIYW5kbGVycy52YWx1ZSA9IChnZXN0dXJlXG4gICAgICAuZmlsdGVyKGlzQW5pbWF0ZWRHZXN0dXJlKVxuICAgICAgLm1hcCgoZykgPT4gZy5oYW5kbGVycykgYXMgdW5rbm93bikgYXMgSGFuZGxlckNhbGxiYWNrczxcbiAgICAgIFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gICAgPltdO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUhhbmRsZXJzKFxuICBwcmVwYXJlZEdlc3R1cmU6IEdlc3R1cmVDb25maWdSZWZlcmVuY2UsXG4gIGdlc3R1cmVDb25maWc6IENvbXBvc2VkR2VzdHVyZSB8IEdlc3R1cmVUeXBlIHwgdW5kZWZpbmVkLFxuICBnZXN0dXJlOiBHZXN0dXJlVHlwZVtdXG4pIHtcbiAgZ2VzdHVyZUNvbmZpZz8ucHJlcGFyZSgpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZ2VzdHVyZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGhhbmRsZXIgPSBwcmVwYXJlZEdlc3R1cmUuY29uZmlnW2ldO1xuICAgIGNoZWNrR2VzdHVyZUNhbGxiYWNrc0ZvcldvcmtsZXRzKGhhbmRsZXIpO1xuXG4gICAgLy8gb25seSB1cGRhdGUgaGFuZGxlclRhZyB3aGVuIGl0J3MgYWN0dWFsbHkgZGlmZmVyZW50LCBpdCBtYXkgYmUgdGhlIHNhbWVcbiAgICAvLyBpZiBnZXN0dXJlIGNvbmZpZyBvYmplY3QgaXMgd3JhcHBlZCB3aXRoIHVzZU1lbW9cbiAgICBpZiAoZ2VzdHVyZVtpXS5oYW5kbGVyVGFnICE9PSBoYW5kbGVyLmhhbmRsZXJUYWcpIHtcbiAgICAgIGdlc3R1cmVbaV0uaGFuZGxlclRhZyA9IGhhbmRsZXIuaGFuZGxlclRhZztcbiAgICAgIGdlc3R1cmVbaV0uaGFuZGxlcnMuaGFuZGxlclRhZyA9IGhhbmRsZXIuaGFuZGxlclRhZztcbiAgICB9XG4gIH1cblxuICAvLyB1c2Ugc2V0SW1tZWRpYXRlIHRvIGV4dHJhY3QgaGFuZGxlclRhZ3MsIGJlY2F1c2Ugd2hlbiBpdCdzIHJhbiwgYWxsIHJlZnMgc2hvdWxkIGJlIHVwZGF0ZWRcbiAgLy8gYW5kIGhhbmRsZXJUYWdzIGluIEJhc2VHZXN0dXJlIHJlZmVyZW5jZXMgc2hvdWxkIGJlIHVwZGF0ZWQgaW4gdGhlIGxvb3AgYWJvdmUgKHdlIG5lZWQgdG8gd2FpdFxuICAvLyBpbiBjYXNlIG9mIGV4dGVybmFsIHJlbGF0aW9ucylcbiAgc2V0SW1tZWRpYXRlKCgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdlc3R1cmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSBwcmVwYXJlZEdlc3R1cmUuY29uZmlnW2ldO1xuXG4gICAgICBoYW5kbGVyLmNvbmZpZyA9IGdlc3R1cmVbaV0uY29uZmlnO1xuICAgICAgaGFuZGxlci5oYW5kbGVycyA9IGdlc3R1cmVbaV0uaGFuZGxlcnM7XG5cbiAgICAgIGNvbnN0IHJlcXVpcmVUb0ZhaWwgPSBleHRyYWN0VmFsaWRIYW5kbGVyVGFncyhcbiAgICAgICAgaGFuZGxlci5jb25maWcucmVxdWlyZVRvRmFpbFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2ltdWx0YW5lb3VzV2l0aCA9IGV4dHJhY3RWYWxpZEhhbmRsZXJUYWdzKFxuICAgICAgICBoYW5kbGVyLmNvbmZpZy5zaW11bHRhbmVvdXNXaXRoXG4gICAgICApO1xuXG4gICAgICBSTkdlc3R1cmVIYW5kbGVyTW9kdWxlLnVwZGF0ZUdlc3R1cmVIYW5kbGVyKFxuICAgICAgICBoYW5kbGVyLmhhbmRsZXJUYWcsXG4gICAgICAgIGZpbHRlckNvbmZpZyhoYW5kbGVyLmNvbmZpZywgQUxMT1dFRF9QUk9QUywge1xuICAgICAgICAgIHNpbXVsdGFuZW91c0hhbmRsZXJzOiBzaW11bHRhbmVvdXNXaXRoLFxuICAgICAgICAgIHdhaXRGb3I6IHJlcXVpcmVUb0ZhaWwsXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICByZWdpc3RlckhhbmRsZXIoaGFuZGxlci5oYW5kbGVyVGFnLCBoYW5kbGVyLCBoYW5kbGVyLmNvbmZpZy50ZXN0SWQpO1xuICAgIH1cblxuICAgIGlmIChwcmVwYXJlZEdlc3R1cmUuYW5pbWF0ZWRIYW5kbGVycykge1xuICAgICAgcHJlcGFyZWRHZXN0dXJlLmFuaW1hdGVkSGFuZGxlcnMudmFsdWUgPSAocHJlcGFyZWRHZXN0dXJlLmNvbmZpZ1xuICAgICAgICAuZmlsdGVyKChnKSA9PiBnLnNob3VsZFVzZVJlYW5pbWF0ZWQpIC8vIGlnbm9yZSBnZXN0dXJlcyB0aGF0IHNob3VsZG4ndCBydW4gb24gVUlcbiAgICAgICAgLm1hcCgoZykgPT4gZy5oYW5kbGVycykgYXMgdW5rbm93bikgYXMgSGFuZGxlckNhbGxiYWNrczxcbiAgICAgICAgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICAgID5bXTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBuZWVkc1RvUmVhdHRhY2goXG4gIHByZXBhcmVkR2VzdHVyZTogR2VzdHVyZUNvbmZpZ1JlZmVyZW5jZSxcbiAgZ2VzdHVyZTogR2VzdHVyZVR5cGVbXVxuKSB7XG4gIGlmIChnZXN0dXJlLmxlbmd0aCAhPT0gcHJlcGFyZWRHZXN0dXJlLmNvbmZpZy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGdlc3R1cmUubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoXG4gICAgICBnZXN0dXJlW2ldLmhhbmRsZXJOYW1lICE9PSBwcmVwYXJlZEdlc3R1cmUuY29uZmlnW2ldLmhhbmRsZXJOYW1lIHx8XG4gICAgICBnZXN0dXJlW2ldLnNob3VsZFVzZVJlYW5pbWF0ZWQgIT09XG4gICAgICAgIHByZXBhcmVkR2VzdHVyZS5jb25maWdbaV0uc2hvdWxkVXNlUmVhbmltYXRlZFxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiB1c2VBbmltYXRlZEdlc3R1cmUoXG4gIHByZXBhcmVkR2VzdHVyZTogR2VzdHVyZUNvbmZpZ1JlZmVyZW5jZSxcbiAgbmVlZHNSZWJ1aWxkOiBib29sZWFuXG4pIHtcbiAgaWYgKCFSZWFuaW1hdGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNTdGF0ZUNoYW5nZUV2ZW50KFxuICAgIGV2ZW50OiBHZXN0dXJlVXBkYXRlRXZlbnQgfCBHZXN0dXJlU3RhdGVDaGFuZ2VFdmVudCB8IEdlc3R1cmVUb3VjaEV2ZW50XG4gICk6IGV2ZW50IGlzIEdlc3R1cmVTdGF0ZUNoYW5nZUV2ZW50IHtcbiAgICAnd29ya2xldCc7XG4gICAgLy8gQHRzLWlnbm9yZSBZZXMsIHRoZSBvbGRTdGF0ZSBwcm9wIGlzIG1pc3Npbmcgb24gR2VzdHVyZVRvdWNoRXZlbnQsIHRoYXQncyB0aGUgcG9pbnRcbiAgICByZXR1cm4gZXZlbnQub2xkU3RhdGUgIT0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVG91Y2hFdmVudChcbiAgICBldmVudDogR2VzdHVyZVVwZGF0ZUV2ZW50IHwgR2VzdHVyZVN0YXRlQ2hhbmdlRXZlbnQgfCBHZXN0dXJlVG91Y2hFdmVudFxuICApOiBldmVudCBpcyBHZXN0dXJlVG91Y2hFdmVudCB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIHJldHVybiBldmVudC5ldmVudFR5cGUgIT0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEhhbmRsZXIoXG4gICAgdHlwZTogQ0FMTEJBQ0tfVFlQRSxcbiAgICBnZXN0dXJlOiBIYW5kbGVyQ2FsbGJhY2tzPFJlY29yZDxzdHJpbmcsIHVua25vd24+PlxuICApIHtcbiAgICAnd29ya2xldCc7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIENBTExCQUNLX1RZUEUuQkVHQU46XG4gICAgICAgIHJldHVybiBnZXN0dXJlLm9uQmVnaW47XG4gICAgICBjYXNlIENBTExCQUNLX1RZUEUuU1RBUlQ6XG4gICAgICAgIHJldHVybiBnZXN0dXJlLm9uU3RhcnQ7XG4gICAgICBjYXNlIENBTExCQUNLX1RZUEUuVVBEQVRFOlxuICAgICAgICByZXR1cm4gZ2VzdHVyZS5vblVwZGF0ZTtcbiAgICAgIGNhc2UgQ0FMTEJBQ0tfVFlQRS5DSEFOR0U6XG4gICAgICAgIHJldHVybiBnZXN0dXJlLm9uQ2hhbmdlO1xuICAgICAgY2FzZSBDQUxMQkFDS19UWVBFLkVORDpcbiAgICAgICAgcmV0dXJuIGdlc3R1cmUub25FbmQ7XG4gICAgICBjYXNlIENBTExCQUNLX1RZUEUuRklOQUxJWkU6XG4gICAgICAgIHJldHVybiBnZXN0dXJlLm9uRmluYWxpemU7XG4gICAgICBjYXNlIENBTExCQUNLX1RZUEUuVE9VQ0hFU19ET1dOOlxuICAgICAgICByZXR1cm4gZ2VzdHVyZS5vblRvdWNoZXNEb3duO1xuICAgICAgY2FzZSBDQUxMQkFDS19UWVBFLlRPVUNIRVNfTU9WRTpcbiAgICAgICAgcmV0dXJuIGdlc3R1cmUub25Ub3VjaGVzTW92ZTtcbiAgICAgIGNhc2UgQ0FMTEJBQ0tfVFlQRS5UT1VDSEVTX1VQOlxuICAgICAgICByZXR1cm4gZ2VzdHVyZS5vblRvdWNoZXNVcDtcbiAgICAgIGNhc2UgQ0FMTEJBQ0tfVFlQRS5UT1VDSEVTX0NBTkNFTExFRDpcbiAgICAgICAgcmV0dXJuIGdlc3R1cmUub25Ub3VjaGVzQ2FuY2VsbGVkO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvdWNoRXZlbnRUeXBlVG9DYWxsYmFja1R5cGUoZXZlbnRUeXBlOiBFdmVudFR5cGUpOiBDQUxMQkFDS19UWVBFIHtcbiAgICAnd29ya2xldCc7XG4gICAgc3dpdGNoIChldmVudFR5cGUpIHtcbiAgICAgIGNhc2UgRXZlbnRUeXBlLlRPVUNIRVNfRE9XTjpcbiAgICAgICAgcmV0dXJuIENBTExCQUNLX1RZUEUuVE9VQ0hFU19ET1dOO1xuICAgICAgY2FzZSBFdmVudFR5cGUuVE9VQ0hFU19NT1ZFOlxuICAgICAgICByZXR1cm4gQ0FMTEJBQ0tfVFlQRS5UT1VDSEVTX01PVkU7XG4gICAgICBjYXNlIEV2ZW50VHlwZS5UT1VDSEVTX1VQOlxuICAgICAgICByZXR1cm4gQ0FMTEJBQ0tfVFlQRS5UT1VDSEVTX1VQO1xuICAgICAgY2FzZSBFdmVudFR5cGUuVE9VQ0hFU19DQU5DRUxMRUQ6XG4gICAgICAgIHJldHVybiBDQUxMQkFDS19UWVBFLlRPVUNIRVNfQ0FOQ0VMTEVEO1xuICAgIH1cbiAgICByZXR1cm4gQ0FMTEJBQ0tfVFlQRS5VTkRFRklORUQ7XG4gIH1cblxuICBmdW5jdGlvbiBydW5Xb3JrbGV0KFxuICAgIHR5cGU6IENBTExCQUNLX1RZUEUsXG4gICAgZ2VzdHVyZTogSGFuZGxlckNhbGxiYWNrczxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4sXG4gICAgZXZlbnQ6IEdlc3R1cmVTdGF0ZUNoYW5nZUV2ZW50IHwgR2VzdHVyZVVwZGF0ZUV2ZW50IHwgR2VzdHVyZVRvdWNoRXZlbnQsXG4gICAgLi4uYXJnczogYW55W11cbiAgKSB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIGNvbnN0IGhhbmRsZXIgPSBnZXRIYW5kbGVyKHR5cGUsIGdlc3R1cmUpO1xuICAgIGlmIChnZXN0dXJlLmlzV29ya2xldFt0eXBlXSkge1xuICAgICAgLy8gQHRzLWlnbm9yZSBMb2dpYyBiZWxvdyBtYWtlcyBzdXJlIHRoZSBjb3JyZWN0IGV2ZW50IGlzIHNlbmQgdG8gdGhlXG4gICAgICAvLyBjb3JyZWN0IGhhbmRsZXIuXG4gICAgICBoYW5kbGVyPy4oZXZlbnQsIC4uLmFyZ3MpO1xuICAgIH0gZWxzZSBpZiAoaGFuZGxlcikge1xuICAgICAgY29uc29sZS53YXJuKHRhZ01lc3NhZ2UoJ0FuaW1hdGVkIGdlc3R1cmUgY2FsbGJhY2sgbXVzdCBiZSBhIHdvcmtsZXQnKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gSG9va3MgYXJlIGNhbGxlZCBjb25kaXRpb25hbGx5LCBidXQgdGhlIGNvbmRpdGlvbiBpcyB3aGV0aGVyIHRoZVxuICAvLyByZWFjdC1uYXRpdmUtcmVhbmltYXRlZCBpcyBpbnN0YWxsZWQsIHdoaWNoIHNob3VsZG4ndCBjaGFuZ2Ugd2hpbGUgcnVubmluZ1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcbiAgY29uc3Qgc2hhcmVkSGFuZGxlcnNDYWxsYmFja3MgPSBSZWFuaW1hdGVkLnVzZVNoYXJlZFZhbHVlPFxuICAgIEhhbmRsZXJDYWxsYmFja3M8UmVjb3JkPHN0cmluZywgdW5rbm93bj4+W10gfCBudWxsXG4gID4obnVsbCk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL3J1bGVzLW9mLWhvb2tzXG4gIGNvbnN0IGxhc3RVcGRhdGVFdmVudCA9IFJlYW5pbWF0ZWQudXNlU2hhcmVkVmFsdWU8XG4gICAgKEdlc3R1cmVVcGRhdGVFdmVudCB8IHVuZGVmaW5lZClbXVxuICA+KFtdKTtcblxuICAvLyBub3QgZXZlcnkgZ2VzdHVyZSBuZWVkcyBhIHN0YXRlIGNvbnRyb2xsZXIsIGluaXQgdGhlbSBsYXppbHlcbiAgY29uc3Qgc3RhdGVDb250cm9sbGVyczogR2VzdHVyZVN0YXRlTWFuYWdlclR5cGVbXSA9IFtdO1xuXG4gIGNvbnN0IGNhbGxiYWNrID0gKFxuICAgIGV2ZW50OiBHZXN0dXJlU3RhdGVDaGFuZ2VFdmVudCB8IEdlc3R1cmVVcGRhdGVFdmVudCB8IEdlc3R1cmVUb3VjaEV2ZW50XG4gICkgPT4ge1xuICAgICd3b3JrbGV0JztcblxuICAgIGNvbnN0IGN1cnJlbnRDYWxsYmFjayA9IHNoYXJlZEhhbmRsZXJzQ2FsbGJhY2tzLnZhbHVlO1xuICAgIGlmICghY3VycmVudENhbGxiYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50Q2FsbGJhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGdlc3R1cmUgPSBjdXJyZW50Q2FsbGJhY2tbaV07XG5cbiAgICAgIGlmIChldmVudC5oYW5kbGVyVGFnID09PSBnZXN0dXJlLmhhbmRsZXJUYWcpIHtcbiAgICAgICAgaWYgKGlzU3RhdGVDaGFuZ2VFdmVudChldmVudCkpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5vbGRTdGF0ZSA9PT0gU3RhdGUuVU5ERVRFUk1JTkVEICYmXG4gICAgICAgICAgICBldmVudC5zdGF0ZSA9PT0gU3RhdGUuQkVHQU5cbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJ1bldvcmtsZXQoQ0FMTEJBQ0tfVFlQRS5CRUdBTiwgZ2VzdHVyZSwgZXZlbnQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAoZXZlbnQub2xkU3RhdGUgPT09IFN0YXRlLkJFR0FOIHx8XG4gICAgICAgICAgICAgIGV2ZW50Lm9sZFN0YXRlID09PSBTdGF0ZS5VTkRFVEVSTUlORUQpICYmXG4gICAgICAgICAgICBldmVudC5zdGF0ZSA9PT0gU3RhdGUuQUNUSVZFXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBydW5Xb3JrbGV0KENBTExCQUNLX1RZUEUuU1RBUlQsIGdlc3R1cmUsIGV2ZW50KTtcbiAgICAgICAgICAgIGxhc3RVcGRhdGVFdmVudC52YWx1ZVtnZXN0dXJlLmhhbmRsZXJUYWddID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBldmVudC5vbGRTdGF0ZSAhPT0gZXZlbnQuc3RhdGUgJiZcbiAgICAgICAgICAgIGV2ZW50LnN0YXRlID09PSBTdGF0ZS5FTkRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChldmVudC5vbGRTdGF0ZSA9PT0gU3RhdGUuQUNUSVZFKSB7XG4gICAgICAgICAgICAgIHJ1bldvcmtsZXQoQ0FMTEJBQ0tfVFlQRS5FTkQsIGdlc3R1cmUsIGV2ZW50LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJ1bldvcmtsZXQoQ0FMTEJBQ0tfVFlQRS5GSU5BTElaRSwgZ2VzdHVyZSwgZXZlbnQsIHRydWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAoZXZlbnQuc3RhdGUgPT09IFN0YXRlLkZBSUxFRCB8fCBldmVudC5zdGF0ZSA9PT0gU3RhdGUuQ0FOQ0VMTEVEKSAmJlxuICAgICAgICAgICAgZXZlbnQuc3RhdGUgIT09IGV2ZW50Lm9sZFN0YXRlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQub2xkU3RhdGUgPT09IFN0YXRlLkFDVElWRSkge1xuICAgICAgICAgICAgICBydW5Xb3JrbGV0KENBTExCQUNLX1RZUEUuRU5ELCBnZXN0dXJlLCBldmVudCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuV29ya2xldChDQUxMQkFDS19UWVBFLkZJTkFMSVpFLCBnZXN0dXJlLCBldmVudCwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc1RvdWNoRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgaWYgKCFzdGF0ZUNvbnRyb2xsZXJzW2ldKSB7XG4gICAgICAgICAgICBzdGF0ZUNvbnRyb2xsZXJzW2ldID0gR2VzdHVyZVN0YXRlTWFuYWdlci5jcmVhdGUoZXZlbnQuaGFuZGxlclRhZyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV2ZW50LmV2ZW50VHlwZSAhPT0gRXZlbnRUeXBlLlVOREVURVJNSU5FRCkge1xuICAgICAgICAgICAgcnVuV29ya2xldChcbiAgICAgICAgICAgICAgdG91Y2hFdmVudFR5cGVUb0NhbGxiYWNrVHlwZShldmVudC5ldmVudFR5cGUpLFxuICAgICAgICAgICAgICBnZXN0dXJlLFxuICAgICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgICAgc3RhdGVDb250cm9sbGVyc1tpXVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcnVuV29ya2xldChDQUxMQkFDS19UWVBFLlVQREFURSwgZ2VzdHVyZSwgZXZlbnQpO1xuXG4gICAgICAgICAgaWYgKGdlc3R1cmUub25DaGFuZ2UgJiYgZ2VzdHVyZS5jaGFuZ2VFdmVudENhbGN1bGF0b3IpIHtcbiAgICAgICAgICAgIHJ1bldvcmtsZXQoXG4gICAgICAgICAgICAgIENBTExCQUNLX1RZUEUuQ0hBTkdFLFxuICAgICAgICAgICAgICBnZXN0dXJlLFxuICAgICAgICAgICAgICBnZXN0dXJlLmNoYW5nZUV2ZW50Q2FsY3VsYXRvcj8uKFxuICAgICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVFdmVudC52YWx1ZVtnZXN0dXJlLmhhbmRsZXJUYWddXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxhc3RVcGRhdGVFdmVudC52YWx1ZVtnZXN0dXJlLmhhbmRsZXJUYWddID0gZXZlbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICBjb25zdCBldmVudCA9IFJlYW5pbWF0ZWQudXNlRXZlbnQoXG4gICAgY2FsbGJhY2ssXG4gICAgWydvbkdlc3R1cmVIYW5kbGVyU3RhdGVDaGFuZ2UnLCAnb25HZXN0dXJlSGFuZGxlckV2ZW50J10sXG4gICAgbmVlZHNSZWJ1aWxkXG4gICk7XG5cbiAgcHJlcGFyZWRHZXN0dXJlLmFuaW1hdGVkRXZlbnRIYW5kbGVyID0gZXZlbnQ7XG4gIHByZXBhcmVkR2VzdHVyZS5hbmltYXRlZEhhbmRsZXJzID0gc2hhcmVkSGFuZGxlcnNDYWxsYmFja3M7XG59XG5cbmludGVyZmFjZSBHZXN0dXJlRGV0ZWN0b3JQcm9wcyB7XG4gIGdlc3R1cmU/OiBDb21wb3NlZEdlc3R1cmUgfCBHZXN0dXJlVHlwZTtcbn1cbmV4cG9ydCBjb25zdCBHZXN0dXJlRGV0ZWN0b3I6IFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50PEdlc3R1cmVEZXRlY3RvclByb3BzPiA9IChcbiAgcHJvcHNcbikgPT4ge1xuICBjb25zdCBnZXN0dXJlQ29uZmlnID0gcHJvcHMuZ2VzdHVyZTtcbiAgY29uc3QgZ2VzdHVyZSA9IGdlc3R1cmVDb25maWc/LnRvR2VzdHVyZUFycmF5Py4oKSA/PyBbXTtcbiAgY29uc3QgdXNlUmVhbmltYXRlZEhvb2sgPSBnZXN0dXJlLnNvbWUoKGcpID0+IGcuc2hvdWxkVXNlUmVhbmltYXRlZCk7XG4gIGNvbnN0IHZpZXdSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGZpcnN0UmVuZGVyUmVmID0gdXNlUmVmKHRydWUpO1xuXG4gIGNvbnN0IHByZXBhcmVkR2VzdHVyZSA9IFJlYWN0LnVzZVJlZjxHZXN0dXJlQ29uZmlnUmVmZXJlbmNlPih7XG4gICAgY29uZmlnOiBnZXN0dXJlLFxuICAgIGFuaW1hdGVkRXZlbnRIYW5kbGVyOiBudWxsLFxuICAgIGFuaW1hdGVkSGFuZGxlcnM6IG51bGwsXG4gICAgZmlyc3RFeGVjdXRpb246IHRydWUsXG4gICAgdXNlUmVhbmltYXRlZEhvb2s6IHVzZVJlYW5pbWF0ZWRIb29rLFxuICB9KS5jdXJyZW50O1xuXG4gIGlmICh1c2VSZWFuaW1hdGVkSG9vayAhPT0gcHJlcGFyZWRHZXN0dXJlLnVzZVJlYW5pbWF0ZWRIb29rKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgdGFnTWVzc2FnZShcbiAgICAgICAgJ1lvdSBjYW5ub3QgY2hhbmdlIHRoZSB0aHJlYWQgdGhlIGNhbGxiYWNrcyBhcmUgcmFuIG9uIHdoaWxlIHRoZSBhcHAgaXMgcnVubmluZydcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgLy8gUmVhbmltYXRlZCBldmVudCBzaG91bGQgYmUgcmVidWlsdCBvbmx5IHdoZW4gZ2VzdHVyZXMgYXJlIHJlYXR0YWNoZWQsIG90aGVyd2lzZVxuICAvLyBjb25maWcgdXBkYXRlIHdpbGwgYmUgZW5vdWdoIGFzIGFsbCBuZWNlc3NhcnkgaXRlbXMgYXJlIHN0b3JlZCBpbiBzaGFyZWQgdmFsdWVzIGFueXdheVxuICBjb25zdCBuZWVkc1RvUmVidWlsZFJlYW5pbWF0ZWRFdmVudCA9XG4gICAgcHJlcGFyZWRHZXN0dXJlLmZpcnN0RXhlY3V0aW9uIHx8IG5lZWRzVG9SZWF0dGFjaChwcmVwYXJlZEdlc3R1cmUsIGdlc3R1cmUpO1xuXG4gIGlmIChwcmVwYXJlZEdlc3R1cmUuZmlyc3RFeGVjdXRpb24pIHtcbiAgICBnZXN0dXJlQ29uZmlnPy5pbml0aWFsaXplPy4oKTtcbiAgfVxuXG4gIGlmICh1c2VSZWFuaW1hdGVkSG9vaykge1xuICAgIC8vIFdoZXRoZXIgYW5pbWF0ZWRHZXN0dXJlIG9yIGdlc3R1cmUgaXMgdXNlZCBzaG91bGRuJ3QgY2hhbmdlIHdoaWxlIHRoZSBhcHAgaXMgcnVubmluZ1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICAgIHVzZUFuaW1hdGVkR2VzdHVyZShwcmVwYXJlZEdlc3R1cmUsIG5lZWRzVG9SZWJ1aWxkUmVhbmltYXRlZEV2ZW50KTtcbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmlyc3RSZW5kZXJSZWYuY3VycmVudCA9IHRydWU7XG4gICAgY29uc3Qgdmlld1RhZyA9IGZpbmROb2RlSGFuZGxlKHZpZXdSZWYuY3VycmVudCkgYXMgbnVtYmVyO1xuICAgIGF0dGFjaEhhbmRsZXJzKHtcbiAgICAgIHByZXBhcmVkR2VzdHVyZSxcbiAgICAgIGdlc3R1cmVDb25maWcsXG4gICAgICBnZXN0dXJlLFxuICAgICAgdmlld1RhZyxcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkcm9wSGFuZGxlcnMocHJlcGFyZWRHZXN0dXJlKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWZpcnN0UmVuZGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHZpZXdUYWcgPSBmaW5kTm9kZUhhbmRsZSh2aWV3UmVmLmN1cnJlbnQpIGFzIG51bWJlcjtcblxuICAgICAgaWYgKG5lZWRzVG9SZWF0dGFjaChwcmVwYXJlZEdlc3R1cmUsIGdlc3R1cmUpKSB7XG4gICAgICAgIGRyb3BIYW5kbGVycyhwcmVwYXJlZEdlc3R1cmUpO1xuICAgICAgICBhdHRhY2hIYW5kbGVycyh7XG4gICAgICAgICAgcHJlcGFyZWRHZXN0dXJlLFxuICAgICAgICAgIGdlc3R1cmVDb25maWcsXG4gICAgICAgICAgZ2VzdHVyZSxcbiAgICAgICAgICB2aWV3VGFnLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZUhhbmRsZXJzKHByZXBhcmVkR2VzdHVyZSwgZ2VzdHVyZUNvbmZpZywgZ2VzdHVyZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpcnN0UmVuZGVyUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9XG4gIH0sIFtwcm9wc10pO1xuXG4gIGNvbnN0IHJlZkZ1bmN0aW9uID0gKHJlZjogdW5rbm93bikgPT4ge1xuICAgIGlmIChyZWYgIT09IG51bGwpIHtcbiAgICAgIC8vQHRzLWlnbm9yZSBKdXN0IHNldHRpbmcgdGhlIHJlZlxuICAgICAgdmlld1JlZi5jdXJyZW50ID0gcmVmO1xuXG4gICAgICBpZiAoaXNGYWJyaWMoKSkge1xuICAgICAgICBjb25zdCBub2RlID0gZ2V0U2hhZG93Tm9kZUZyb21SZWYocmVmKTtcbiAgICAgICAgaWYgKGdsb2JhbC5pc0Zvcm1zU3RhY2tpbmdDb250ZXh0KG5vZGUpID09PSBmYWxzZSkge1xuICAgICAgICAgIHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAvLyBGb3Igc29tZSB3ZWlyZCByZWFzb24sIGNvbnNvbGUuZXJyb3Igb24gaU9TIGRlbGF5c1xuICAgICAgICAgICAgLy8gdGhlIGV4ZWN1dGlvbiBvZiBSTkdlc3R1cmVIYW5kbGVyTW9kdWxlLmF0dGFjaEdlc3R1cmVIYW5kbGVyLFxuICAgICAgICAgICAgLy8gc28gdGhhdCdzIHdoeSB3ZSB1c2Ugc2V0SW1tZWRpYXRlIGhlcmUuXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICB0YWdNZXNzYWdlKFxuICAgICAgICAgICAgICAgICdHZXN0dXJlRGV0ZWN0b3IgaGFzIHJlY2VpdmVkIGEgY2hpbGQgdGhhdCBtYXkgZ2V0IHZpZXctZmxhdHRlbmVkLiAnICtcbiAgICAgICAgICAgICAgICAgICdcXG5UbyBwcmV2ZW50IGl0IGZyb20gbWlzYmVoYXZpbmcgeW91IG5lZWQgdG8gd3JhcCB0aGUgY2hpbGQgd2l0aCBhIGA8VmlldyBjb2xsYXBzYWJsZT17ZmFsc2V9PmAuJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGlmICh1c2VSZWFuaW1hdGVkSG9vaykge1xuICAgIHJldHVybiAoXG4gICAgICA8QW5pbWF0ZWRXcmFwXG4gICAgICAgIHJlZj17cmVmRnVuY3Rpb259XG4gICAgICAgIG9uR2VzdHVyZUhhbmRsZXJFdmVudD17cHJlcGFyZWRHZXN0dXJlLmFuaW1hdGVkRXZlbnRIYW5kbGVyfT5cbiAgICAgICAge3Byb3BzLmNoaWxkcmVufVxuICAgICAgPC9BbmltYXRlZFdyYXA+XG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gPFdyYXAgcmVmPXtyZWZGdW5jdGlvbn0+e3Byb3BzLmNoaWxkcmVufTwvV3JhcD47XG4gIH1cbn07XG5cbmNsYXNzIFdyYXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8eyBvbkdlc3R1cmVIYW5kbGVyRXZlbnQ/OiB1bmtub3duIH0+IHtcbiAgcmVuZGVyKCkge1xuICAgIC8vIEkgZG9uJ3QgdGhpbmsgdGhhdCBmaWdodGluZyB3aXRoIHR5cGVzIG92ZXIgc3VjaCBhIHNpbXBsZSBmdW5jdGlvbiBpcyB3b3J0aCBpdFxuICAgIC8vIFRoZSBvbmx5IHRoaW5nIGl0IGRvZXMgaXMgYWRkICdjb2xsYXBzYWJsZTogZmFsc2UnIHRvIHRoZSBjaGlsZCBjb21wb25lbnRcbiAgICAvLyB0byBtYWtlIHN1cmUgaXQgaXMgaW4gdGhlIG5hdGl2ZSB2aWV3IGhpZXJhcmNoeSBzbyB0aGUgZGV0ZWN0b3IgY2FuIGZpbmRcbiAgICAvLyBjb3JyZWN0IHZpZXdUYWcgdG8gYXR0YWNoIHRvLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgY2hpbGQ6IGFueSA9IFJlYWN0LkNoaWxkcmVuLm9ubHkodGhpcy5wcm9wcy5jaGlsZHJlbik7XG4gICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChcbiAgICAgIGNoaWxkLFxuICAgICAgeyBjb2xsYXBzYWJsZTogZmFsc2UgfSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgIGNoaWxkLnByb3BzLmNoaWxkcmVuXG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBBbmltYXRlZFdyYXAgPSBSZWFuaW1hdGVkPy5kZWZhdWx0Py5jcmVhdGVBbmltYXRlZENvbXBvbmVudChXcmFwKSA/PyBXcmFwO1xuIl19