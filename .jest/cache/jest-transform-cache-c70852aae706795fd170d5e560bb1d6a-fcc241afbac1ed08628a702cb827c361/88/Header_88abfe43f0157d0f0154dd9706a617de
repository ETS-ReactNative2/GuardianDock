69f810e34465ec237367c9683e1829d5
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));

var _excluded = ["height", "minHeight", "maxHeight", "backgroundColor", "borderBottomColor", "borderBottomEndRadius", "borderBottomLeftRadius", "borderBottomRightRadius", "borderBottomStartRadius", "borderBottomWidth", "borderColor", "borderEndColor", "borderEndWidth", "borderLeftColor", "borderLeftWidth", "borderRadius", "borderRightColor", "borderRightWidth", "borderStartColor", "borderStartWidth", "borderStyle", "borderTopColor", "borderTopEndRadius", "borderTopLeftRadius", "borderTopRightRadius", "borderTopStartRadius", "borderTopWidth", "borderWidth", "boxShadow", "elevation", "shadowColor", "shadowOffset", "shadowOpacity", "shadowRadius", "opacity", "transform"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = Header;

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _reactNativeSafeAreaContext = require("react-native-safe-area-context");

var _getDefaultHeaderHeight = _interopRequireDefault(require("./getDefaultHeaderHeight"));

var _HeaderBackground = _interopRequireDefault(require("./HeaderBackground"));

var _HeaderShownContext = _interopRequireDefault(require("./HeaderShownContext"));

var _HeaderTitle = _interopRequireDefault(require("./HeaderTitle"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

var warnIfHeaderStylesDefined = function warnIfHeaderStylesDefined(styles) {
  Object.keys(styles).forEach(function (styleProp) {
    var value = styles[styleProp];

    if (styleProp === 'position' && value === 'absolute') {
      console.warn("position: 'absolute' is not supported on headerStyle. If you would like to render content under the header, use the 'headerTransparent' option.");
    } else if (value !== undefined) {
      console.warn(styleProp + " was given a value of " + value + ", this has no effect on headerStyle.");
    }
  });
};

function Header(props) {
  var insets = (0, _reactNativeSafeAreaContext.useSafeAreaInsets)();
  var frame = (0, _reactNativeSafeAreaContext.useSafeAreaFrame)();
  var isParentHeaderShown = React.useContext(_HeaderShownContext.default);
  var _props$layout = props.layout,
      layout = _props$layout === void 0 ? frame : _props$layout,
      _props$modal = props.modal,
      modal = _props$modal === void 0 ? false : _props$modal,
      title = props.title,
      customTitle = props.headerTitle,
      _props$headerTitleAli = props.headerTitleAlign,
      headerTitleAlign = _props$headerTitleAli === void 0 ? _reactNative.Platform.select({
    ios: 'center',
    default: 'left'
  }) : _props$headerTitleAli,
      headerLeft = props.headerLeft,
      headerLeftLabelVisible = props.headerLeftLabelVisible,
      headerTransparent = props.headerTransparent,
      headerTintColor = props.headerTintColor,
      headerBackground = props.headerBackground,
      headerRight = props.headerRight,
      titleAllowFontScaling = props.headerTitleAllowFontScaling,
      titleStyle = props.headerTitleStyle,
      leftContainerStyle = props.headerLeftContainerStyle,
      rightContainerStyle = props.headerRightContainerStyle,
      titleContainerStyle = props.headerTitleContainerStyle,
      backgroundContainerStyle = props.headerBackgroundContainerStyle,
      customHeaderStyle = props.headerStyle,
      headerShadowVisible = props.headerShadowVisible,
      headerPressColor = props.headerPressColor,
      headerPressOpacity = props.headerPressOpacity,
      _props$headerStatusBa = props.headerStatusBarHeight,
      headerStatusBarHeight = _props$headerStatusBa === void 0 ? isParentHeaderShown ? 0 : insets.top : _props$headerStatusBa;
  var defaultHeight = (0, _getDefaultHeaderHeight.default)(layout, modal, headerStatusBarHeight);

  var _reactNative$StyleShe = _reactNative.StyleSheet.flatten(customHeaderStyle || {}),
      _reactNative$StyleShe2 = _reactNative$StyleShe.height,
      height = _reactNative$StyleShe2 === void 0 ? defaultHeight : _reactNative$StyleShe2,
      minHeight = _reactNative$StyleShe.minHeight,
      maxHeight = _reactNative$StyleShe.maxHeight,
      backgroundColor = _reactNative$StyleShe.backgroundColor,
      borderBottomColor = _reactNative$StyleShe.borderBottomColor,
      borderBottomEndRadius = _reactNative$StyleShe.borderBottomEndRadius,
      borderBottomLeftRadius = _reactNative$StyleShe.borderBottomLeftRadius,
      borderBottomRightRadius = _reactNative$StyleShe.borderBottomRightRadius,
      borderBottomStartRadius = _reactNative$StyleShe.borderBottomStartRadius,
      borderBottomWidth = _reactNative$StyleShe.borderBottomWidth,
      borderColor = _reactNative$StyleShe.borderColor,
      borderEndColor = _reactNative$StyleShe.borderEndColor,
      borderEndWidth = _reactNative$StyleShe.borderEndWidth,
      borderLeftColor = _reactNative$StyleShe.borderLeftColor,
      borderLeftWidth = _reactNative$StyleShe.borderLeftWidth,
      borderRadius = _reactNative$StyleShe.borderRadius,
      borderRightColor = _reactNative$StyleShe.borderRightColor,
      borderRightWidth = _reactNative$StyleShe.borderRightWidth,
      borderStartColor = _reactNative$StyleShe.borderStartColor,
      borderStartWidth = _reactNative$StyleShe.borderStartWidth,
      borderStyle = _reactNative$StyleShe.borderStyle,
      borderTopColor = _reactNative$StyleShe.borderTopColor,
      borderTopEndRadius = _reactNative$StyleShe.borderTopEndRadius,
      borderTopLeftRadius = _reactNative$StyleShe.borderTopLeftRadius,
      borderTopRightRadius = _reactNative$StyleShe.borderTopRightRadius,
      borderTopStartRadius = _reactNative$StyleShe.borderTopStartRadius,
      borderTopWidth = _reactNative$StyleShe.borderTopWidth,
      borderWidth = _reactNative$StyleShe.borderWidth,
      boxShadow = _reactNative$StyleShe.boxShadow,
      elevation = _reactNative$StyleShe.elevation,
      shadowColor = _reactNative$StyleShe.shadowColor,
      shadowOffset = _reactNative$StyleShe.shadowOffset,
      shadowOpacity = _reactNative$StyleShe.shadowOpacity,
      shadowRadius = _reactNative$StyleShe.shadowRadius,
      opacity = _reactNative$StyleShe.opacity,
      transform = _reactNative$StyleShe.transform,
      unsafeStyles = (0, _objectWithoutProperties2.default)(_reactNative$StyleShe, _excluded);

  if (process.env.NODE_ENV !== 'production') {
    warnIfHeaderStylesDefined(unsafeStyles);
  }

  var safeStyles = {
    backgroundColor: backgroundColor,
    borderBottomColor: borderBottomColor,
    borderBottomEndRadius: borderBottomEndRadius,
    borderBottomLeftRadius: borderBottomLeftRadius,
    borderBottomRightRadius: borderBottomRightRadius,
    borderBottomStartRadius: borderBottomStartRadius,
    borderBottomWidth: borderBottomWidth,
    borderColor: borderColor,
    borderEndColor: borderEndColor,
    borderEndWidth: borderEndWidth,
    borderLeftColor: borderLeftColor,
    borderLeftWidth: borderLeftWidth,
    borderRadius: borderRadius,
    borderRightColor: borderRightColor,
    borderRightWidth: borderRightWidth,
    borderStartColor: borderStartColor,
    borderStartWidth: borderStartWidth,
    borderStyle: borderStyle,
    borderTopColor: borderTopColor,
    borderTopEndRadius: borderTopEndRadius,
    borderTopLeftRadius: borderTopLeftRadius,
    borderTopRightRadius: borderTopRightRadius,
    borderTopStartRadius: borderTopStartRadius,
    borderTopWidth: borderTopWidth,
    borderWidth: borderWidth,
    boxShadow: boxShadow,
    elevation: elevation,
    shadowColor: shadowColor,
    shadowOffset: shadowOffset,
    shadowOpacity: shadowOpacity,
    shadowRadius: shadowRadius,
    opacity: opacity,
    transform: transform
  };

  for (var styleProp in safeStyles) {
    if (safeStyles[styleProp] === undefined) {
      delete safeStyles[styleProp];
    }
  }

  var backgroundStyle = [safeStyles, headerShadowVisible === false && {
    elevation: 0,
    shadowOpacity: 0,
    borderBottomWidth: 0
  }];
  var leftButton = headerLeft ? headerLeft({
    tintColor: headerTintColor,
    pressColor: headerPressColor,
    pressOpacity: headerPressOpacity,
    labelVisible: headerLeftLabelVisible
  }) : null;
  var rightButton = headerRight ? headerRight({
    tintColor: headerTintColor,
    pressColor: headerPressColor,
    pressOpacity: headerPressOpacity
  }) : null;
  var headerTitle = typeof customTitle !== 'function' ? function (props) {
    return React.createElement(_HeaderTitle.default, props);
  } : customTitle;
  return React.createElement(React.Fragment, null, React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [_reactNative.StyleSheet.absoluteFill, {
      zIndex: 0
    }, backgroundContainerStyle]
  }, headerBackground ? headerBackground({
    style: backgroundStyle
  }) : headerTransparent ? null : React.createElement(_HeaderBackground.default, {
    style: backgroundStyle
  })), React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [{
      height: height,
      minHeight: minHeight,
      maxHeight: maxHeight,
      opacity: opacity,
      transform: transform
    }]
  }, React.createElement(_reactNative.View, {
    pointerEvents: "none",
    style: {
      height: headerStatusBarHeight
    }
  }), React.createElement(_reactNative.View, {
    pointerEvents: "box-none",
    style: styles.content
  }, React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [styles.left, headerTitleAlign === 'center' && styles.expand, {
      marginStart: insets.left
    }, leftContainerStyle]
  }, leftButton), React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [styles.title, {
      maxWidth: headerTitleAlign === 'center' ? layout.width - ((leftButton ? headerLeftLabelVisible !== false ? 80 : 32 : 16) + Math.max(insets.left, insets.right)) * 2 : layout.width - ((leftButton ? 72 : 16) + (rightButton ? 72 : 16) + insets.left - insets.right)
    }, titleContainerStyle]
  }, headerTitle({
    children: title,
    allowFontScaling: titleAllowFontScaling,
    tintColor: headerTintColor,
    style: titleStyle
  })), React.createElement(_reactNative.Animated.View, {
    pointerEvents: "box-none",
    style: [styles.right, styles.expand, {
      marginEnd: insets.right
    }, rightContainerStyle]
  }, rightButton))));
}

var styles = _reactNative.StyleSheet.create({
  content: {
    flex: 1,
    flexDirection: 'row',
    alignItems: 'stretch'
  },
  title: {
    marginHorizontal: 16,
    justifyContent: 'center'
  },
  left: {
    justifyContent: 'center',
    alignItems: 'flex-start'
  },
  right: {
    justifyContent: 'center',
    alignItems: 'flex-end'
  },
  expand: {
    flexGrow: 1,
    flexBasis: 0
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxLQUpUdkc7QUFaUixLQUZLLEVBb0JMd0IsbUJBcEJLO0FBRlQsS0F5QkdwQixXQUFXLENBQUM7QUFDWG9HLFlBQVEsRUFBRXRHLEtBREM7QUFFWHVHLG9CQUFnQixFQUFFekYscUJBRlA7QUFHWGlFLGFBQVMsRUFBRXBFLGVBSEE7QUFJWDhFLFNBQUssRUFBRXpFO0FBSkksR0FBRCxDQXpCZCxDQVpGLEVBNENFckIsb0JBQUMyRixzQkFBU0MsSUFBVjtBQUNFQyxpQkFBYSxFQUFDLFVBRGhCO0FBRUVDLFNBQUssRUFBRSxDQUNMNUcsTUFBTSxDQUFDd0gsS0FERixFQUVMeEgsTUFBTSxDQUFDa0gsTUFGRixFQUdMO0FBQUVTLGVBQVMsRUFBRWhILE1BQU0sQ0FBQzZHO0FBQXBCLEtBSEssRUFJTGpGLG1CQUpLO0FBRlQsS0FTRytELFdBVEgsQ0E1Q0YsQ0FMRixDQWZGLENBREY7QUFnRkQ7O0FBRUQsSUFBTXRHLE1BQU0sR0FBR3FELHdCQUFXdUUsTUFBWHZFLENBQWtCO0FBQy9CMkQsU0FBTyxFQUFFO0FBQ1BhLFFBQUksRUFBRSxDQURDO0FBRVBDLGlCQUFhLEVBQUUsS0FGUjtBQUdQQyxjQUFVLEVBQUU7QUFITCxHQURzQjtBQU0vQjVHLE9BQUssRUFBRTtBQUNMNkcsb0JBQWdCLEVBQUUsRUFEYjtBQUVMQyxrQkFBYyxFQUFFO0FBRlgsR0FOd0I7QUFVL0JoQixNQUFJLEVBQUU7QUFDSmdCLGtCQUFjLEVBQUUsUUFEWjtBQUVKRixjQUFVLEVBQUU7QUFGUixHQVZ5QjtBQWMvQlAsT0FBSyxFQUFFO0FBQ0xTLGtCQUFjLEVBQUUsUUFEWDtBQUVMRixjQUFVLEVBQUU7QUFGUCxHQWR3QjtBQWtCL0JiLFFBQU0sRUFBRTtBQUNOZ0IsWUFBUSxFQUFFLENBREo7QUFFTkMsYUFBUyxFQUFFO0FBRkw7QUFsQnVCLENBQWxCOUUsQ0FBZiIsIm5hbWVzIjpbIndhcm5JZkhlYWRlclN0eWxlc0RlZmluZWQiLCJzdHlsZXMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsInN0eWxlUHJvcCIsInZhbHVlIiwiY29uc29sZSIsIndhcm4iLCJ1bmRlZmluZWQiLCJIZWFkZXIiLCJwcm9wcyIsImluc2V0cyIsImZyYW1lIiwiaXNQYXJlbnRIZWFkZXJTaG93biIsIlJlYWN0IiwidXNlQ29udGV4dCIsIkhlYWRlclNob3duQ29udGV4dCIsImxheW91dCIsIm1vZGFsIiwidGl0bGUiLCJjdXN0b21UaXRsZSIsImhlYWRlclRpdGxlIiwiaGVhZGVyVGl0bGVBbGlnbiIsIlBsYXRmb3JtIiwic2VsZWN0IiwiaW9zIiwiZGVmYXVsdCIsImhlYWRlckxlZnQiLCJoZWFkZXJMZWZ0TGFiZWxWaXNpYmxlIiwiaGVhZGVyVHJhbnNwYXJlbnQiLCJoZWFkZXJUaW50Q29sb3IiLCJoZWFkZXJCYWNrZ3JvdW5kIiwiaGVhZGVyUmlnaHQiLCJ0aXRsZUFsbG93Rm9udFNjYWxpbmciLCJoZWFkZXJUaXRsZUFsbG93Rm9udFNjYWxpbmciLCJ0aXRsZVN0eWxlIiwiaGVhZGVyVGl0bGVTdHlsZSIsImxlZnRDb250YWluZXJTdHlsZSIsImhlYWRlckxlZnRDb250YWluZXJTdHlsZSIsInJpZ2h0Q29udGFpbmVyU3R5bGUiLCJoZWFkZXJSaWdodENvbnRhaW5lclN0eWxlIiwidGl0bGVDb250YWluZXJTdHlsZSIsImhlYWRlclRpdGxlQ29udGFpbmVyU3R5bGUiLCJiYWNrZ3JvdW5kQ29udGFpbmVyU3R5bGUiLCJoZWFkZXJCYWNrZ3JvdW5kQ29udGFpbmVyU3R5bGUiLCJjdXN0b21IZWFkZXJTdHlsZSIsImhlYWRlclN0eWxlIiwiaGVhZGVyU2hhZG93VmlzaWJsZSIsImhlYWRlclByZXNzQ29sb3IiLCJoZWFkZXJQcmVzc09wYWNpdHkiLCJoZWFkZXJTdGF0dXNCYXJIZWlnaHQiLCJ0b3AiLCJkZWZhdWx0SGVpZ2h0IiwiU3R5bGVTaGVldCIsImZsYXR0ZW4iLCJoZWlnaHQiLCJtaW5IZWlnaHQiLCJtYXhIZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJCb3R0b21Db2xvciIsImJvcmRlckJvdHRvbUVuZFJhZGl1cyIsImJvcmRlckJvdHRvbUxlZnRSYWRpdXMiLCJib3JkZXJCb3R0b21SaWdodFJhZGl1cyIsImJvcmRlckJvdHRvbVN0YXJ0UmFkaXVzIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3JkZXJDb2xvciIsImJvcmRlckVuZENvbG9yIiwiYm9yZGVyRW5kV2lkdGgiLCJib3JkZXJMZWZ0Q29sb3IiLCJib3JkZXJMZWZ0V2lkdGgiLCJib3JkZXJSYWRpdXMiLCJib3JkZXJSaWdodENvbG9yIiwiYm9yZGVyUmlnaHRXaWR0aCIsImJvcmRlclN0YXJ0Q29sb3IiLCJib3JkZXJTdGFydFdpZHRoIiwiYm9yZGVyU3R5bGUiLCJib3JkZXJUb3BDb2xvciIsImJvcmRlclRvcEVuZFJhZGl1cyIsImJvcmRlclRvcExlZnRSYWRpdXMiLCJib3JkZXJUb3BSaWdodFJhZGl1cyIsImJvcmRlclRvcFN0YXJ0UmFkaXVzIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJXaWR0aCIsImJveFNoYWRvdyIsImVsZXZhdGlvbiIsInNoYWRvd0NvbG9yIiwic2hhZG93T2Zmc2V0Iiwic2hhZG93T3BhY2l0eSIsInNoYWRvd1JhZGl1cyIsIm9wYWNpdHkiLCJ0cmFuc2Zvcm0iLCJ1bnNhZmVTdHlsZXMiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJzYWZlU3R5bGVzIiwiYmFja2dyb3VuZFN0eWxlIiwibGVmdEJ1dHRvbiIsInRpbnRDb2xvciIsInByZXNzQ29sb3IiLCJwcmVzc09wYWNpdHkiLCJsYWJlbFZpc2libGUiLCJyaWdodEJ1dHRvbiIsIl9IZWFkZXJUaXRsZSIsIkZyYWdtZW50IiwiX3JlYWN0TmF0aXZlIiwiVmlldyIsInBvaW50ZXJFdmVudHMiLCJzdHlsZSIsImFic29sdXRlRmlsbCIsInpJbmRleCIsIl9IZWFkZXJCYWNrZ3JvdW5kIiwiY29udGVudCIsImxlZnQiLCJleHBhbmQiLCJtYXJnaW5TdGFydCIsIm1heFdpZHRoIiwid2lkdGgiLCJNYXRoIiwibWF4IiwicmlnaHQiLCJjaGlsZHJlbiIsImFsbG93Rm9udFNjYWxpbmciLCJtYXJnaW5FbmQiLCJjcmVhdGUiLCJmbGV4IiwiZmxleERpcmVjdGlvbiIsImFsaWduSXRlbXMiLCJtYXJnaW5Ib3Jpem9udGFsIiwianVzdGlmeUNvbnRlbnQiLCJmbGV4R3JvdyIsImZsZXhCYXNpcyJdLCJzb3VyY2VzIjpbIkhlYWRlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQW5pbWF0ZWQsIFBsYXRmb3JtLCBTdHlsZVNoZWV0LCBWaWV3LCBWaWV3U3R5bGUgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHtcbiAgdXNlU2FmZUFyZWFGcmFtZSxcbiAgdXNlU2FmZUFyZWFJbnNldHMsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZS1zYWZlLWFyZWEtY29udGV4dCc7XG5cbmltcG9ydCB0eXBlIHsgSGVhZGVyT3B0aW9ucywgTGF5b3V0IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IGdldERlZmF1bHRIZWFkZXJIZWlnaHQgZnJvbSAnLi9nZXREZWZhdWx0SGVhZGVySGVpZ2h0JztcbmltcG9ydCBIZWFkZXJCYWNrZ3JvdW5kIGZyb20gJy4vSGVhZGVyQmFja2dyb3VuZCc7XG5pbXBvcnQgSGVhZGVyU2hvd25Db250ZXh0IGZyb20gJy4vSGVhZGVyU2hvd25Db250ZXh0JztcbmltcG9ydCBIZWFkZXJUaXRsZSBmcm9tICcuL0hlYWRlclRpdGxlJztcblxudHlwZSBQcm9wcyA9IEhlYWRlck9wdGlvbnMgJiB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBoZWFkZXIgaXMgaW4gYSBtb2RhbFxuICAgKi9cbiAgbW9kYWw/OiBib29sZWFuO1xuICAvKipcbiAgICogTGF5b3V0IG9mIHRoZSBzY3JlZW4uXG4gICAqL1xuICBsYXlvdXQ/OiBMYXlvdXQ7XG4gIC8qKlxuICAgKiBUaXRsZSB0ZXh0IGZvciB0aGUgaGVhZGVyLlxuICAgKi9cbiAgdGl0bGU6IHN0cmluZztcbn07XG5cbmNvbnN0IHdhcm5JZkhlYWRlclN0eWxlc0RlZmluZWQgPSAoc3R5bGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiB7XG4gIE9iamVjdC5rZXlzKHN0eWxlcykuZm9yRWFjaCgoc3R5bGVQcm9wKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBzdHlsZXNbc3R5bGVQcm9wXTtcblxuICAgIGlmIChzdHlsZVByb3AgPT09ICdwb3NpdGlvbicgJiYgdmFsdWUgPT09ICdhYnNvbHV0ZScpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJwb3NpdGlvbjogJ2Fic29sdXRlJyBpcyBub3Qgc3VwcG9ydGVkIG9uIGhlYWRlclN0eWxlLiBJZiB5b3Ugd291bGQgbGlrZSB0byByZW5kZXIgY29udGVudCB1bmRlciB0aGUgaGVhZGVyLCB1c2UgdGhlICdoZWFkZXJUcmFuc3BhcmVudCcgb3B0aW9uLlwiXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgJHtzdHlsZVByb3B9IHdhcyBnaXZlbiBhIHZhbHVlIG9mICR7dmFsdWV9LCB0aGlzIGhhcyBubyBlZmZlY3Qgb24gaGVhZGVyU3R5bGUuYFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSGVhZGVyKHByb3BzOiBQcm9wcykge1xuICBjb25zdCBpbnNldHMgPSB1c2VTYWZlQXJlYUluc2V0cygpO1xuICBjb25zdCBmcmFtZSA9IHVzZVNhZmVBcmVhRnJhbWUoKTtcblxuICBjb25zdCBpc1BhcmVudEhlYWRlclNob3duID0gUmVhY3QudXNlQ29udGV4dChIZWFkZXJTaG93bkNvbnRleHQpO1xuXG4gIGNvbnN0IHtcbiAgICBsYXlvdXQgPSBmcmFtZSxcbiAgICBtb2RhbCA9IGZhbHNlLFxuICAgIHRpdGxlLFxuICAgIGhlYWRlclRpdGxlOiBjdXN0b21UaXRsZSxcbiAgICBoZWFkZXJUaXRsZUFsaWduID0gUGxhdGZvcm0uc2VsZWN0KHtcbiAgICAgIGlvczogJ2NlbnRlcicsXG4gICAgICBkZWZhdWx0OiAnbGVmdCcsXG4gICAgfSksXG4gICAgaGVhZGVyTGVmdCxcbiAgICBoZWFkZXJMZWZ0TGFiZWxWaXNpYmxlLFxuICAgIGhlYWRlclRyYW5zcGFyZW50LFxuICAgIGhlYWRlclRpbnRDb2xvcixcbiAgICBoZWFkZXJCYWNrZ3JvdW5kLFxuICAgIGhlYWRlclJpZ2h0LFxuICAgIGhlYWRlclRpdGxlQWxsb3dGb250U2NhbGluZzogdGl0bGVBbGxvd0ZvbnRTY2FsaW5nLFxuICAgIGhlYWRlclRpdGxlU3R5bGU6IHRpdGxlU3R5bGUsXG4gICAgaGVhZGVyTGVmdENvbnRhaW5lclN0eWxlOiBsZWZ0Q29udGFpbmVyU3R5bGUsXG4gICAgaGVhZGVyUmlnaHRDb250YWluZXJTdHlsZTogcmlnaHRDb250YWluZXJTdHlsZSxcbiAgICBoZWFkZXJUaXRsZUNvbnRhaW5lclN0eWxlOiB0aXRsZUNvbnRhaW5lclN0eWxlLFxuICAgIGhlYWRlckJhY2tncm91bmRDb250YWluZXJTdHlsZTogYmFja2dyb3VuZENvbnRhaW5lclN0eWxlLFxuICAgIGhlYWRlclN0eWxlOiBjdXN0b21IZWFkZXJTdHlsZSxcbiAgICBoZWFkZXJTaGFkb3dWaXNpYmxlLFxuICAgIGhlYWRlclByZXNzQ29sb3IsXG4gICAgaGVhZGVyUHJlc3NPcGFjaXR5LFxuICAgIGhlYWRlclN0YXR1c0JhckhlaWdodCA9IGlzUGFyZW50SGVhZGVyU2hvd24gPyAwIDogaW5zZXRzLnRvcCxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSBnZXREZWZhdWx0SGVhZGVySGVpZ2h0KFxuICAgIGxheW91dCxcbiAgICBtb2RhbCxcbiAgICBoZWFkZXJTdGF0dXNCYXJIZWlnaHRcbiAgKTtcblxuICBjb25zdCB7XG4gICAgaGVpZ2h0ID0gZGVmYXVsdEhlaWdodCxcbiAgICBtaW5IZWlnaHQsXG4gICAgbWF4SGVpZ2h0LFxuICAgIGJhY2tncm91bmRDb2xvcixcbiAgICBib3JkZXJCb3R0b21Db2xvcixcbiAgICBib3JkZXJCb3R0b21FbmRSYWRpdXMsXG4gICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1cyxcbiAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1cyxcbiAgICBib3JkZXJCb3R0b21TdGFydFJhZGl1cyxcbiAgICBib3JkZXJCb3R0b21XaWR0aCxcbiAgICBib3JkZXJDb2xvcixcbiAgICBib3JkZXJFbmRDb2xvcixcbiAgICBib3JkZXJFbmRXaWR0aCxcbiAgICBib3JkZXJMZWZ0Q29sb3IsXG4gICAgYm9yZGVyTGVmdFdpZHRoLFxuICAgIGJvcmRlclJhZGl1cyxcbiAgICBib3JkZXJSaWdodENvbG9yLFxuICAgIGJvcmRlclJpZ2h0V2lkdGgsXG4gICAgYm9yZGVyU3RhcnRDb2xvcixcbiAgICBib3JkZXJTdGFydFdpZHRoLFxuICAgIGJvcmRlclN0eWxlLFxuICAgIGJvcmRlclRvcENvbG9yLFxuICAgIGJvcmRlclRvcEVuZFJhZGl1cyxcbiAgICBib3JkZXJUb3BMZWZ0UmFkaXVzLFxuICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzLFxuICAgIGJvcmRlclRvcFN0YXJ0UmFkaXVzLFxuICAgIGJvcmRlclRvcFdpZHRoLFxuICAgIGJvcmRlcldpZHRoLFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHdlYiBzdXBwb3J0IGZvciBzaGFkb3dcbiAgICBib3hTaGFkb3csXG4gICAgZWxldmF0aW9uLFxuICAgIHNoYWRvd0NvbG9yLFxuICAgIHNoYWRvd09mZnNldCxcbiAgICBzaGFkb3dPcGFjaXR5LFxuICAgIHNoYWRvd1JhZGl1cyxcbiAgICBvcGFjaXR5LFxuICAgIHRyYW5zZm9ybSxcbiAgICAuLi51bnNhZmVTdHlsZXNcbiAgfSA9IFN0eWxlU2hlZXQuZmxhdHRlbihjdXN0b21IZWFkZXJTdHlsZSB8fCB7fSkgYXMgVmlld1N0eWxlO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgd2FybklmSGVhZGVyU3R5bGVzRGVmaW5lZCh1bnNhZmVTdHlsZXMpO1xuICB9XG5cbiAgY29uc3Qgc2FmZVN0eWxlczogVmlld1N0eWxlID0ge1xuICAgIGJhY2tncm91bmRDb2xvcixcbiAgICBib3JkZXJCb3R0b21Db2xvcixcbiAgICBib3JkZXJCb3R0b21FbmRSYWRpdXMsXG4gICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1cyxcbiAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1cyxcbiAgICBib3JkZXJCb3R0b21TdGFydFJhZGl1cyxcbiAgICBib3JkZXJCb3R0b21XaWR0aCxcbiAgICBib3JkZXJDb2xvcixcbiAgICBib3JkZXJFbmRDb2xvcixcbiAgICBib3JkZXJFbmRXaWR0aCxcbiAgICBib3JkZXJMZWZ0Q29sb3IsXG4gICAgYm9yZGVyTGVmdFdpZHRoLFxuICAgIGJvcmRlclJhZGl1cyxcbiAgICBib3JkZXJSaWdodENvbG9yLFxuICAgIGJvcmRlclJpZ2h0V2lkdGgsXG4gICAgYm9yZGVyU3RhcnRDb2xvcixcbiAgICBib3JkZXJTdGFydFdpZHRoLFxuICAgIGJvcmRlclN0eWxlLFxuICAgIGJvcmRlclRvcENvbG9yLFxuICAgIGJvcmRlclRvcEVuZFJhZGl1cyxcbiAgICBib3JkZXJUb3BMZWZ0UmFkaXVzLFxuICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzLFxuICAgIGJvcmRlclRvcFN0YXJ0UmFkaXVzLFxuICAgIGJvcmRlclRvcFdpZHRoLFxuICAgIGJvcmRlcldpZHRoLFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGJveFNoYWRvdyBpcyBvbmx5IGZvciBXZWJcbiAgICBib3hTaGFkb3csXG4gICAgZWxldmF0aW9uLFxuICAgIHNoYWRvd0NvbG9yLFxuICAgIHNoYWRvd09mZnNldCxcbiAgICBzaGFkb3dPcGFjaXR5LFxuICAgIHNoYWRvd1JhZGl1cyxcbiAgICBvcGFjaXR5LFxuICAgIHRyYW5zZm9ybSxcbiAgfTtcblxuICAvLyBTZXR0aW5nIGEgcHJvcGVydHkgdG8gdW5kZWZpbmVkIHRyaWdnZXJzIGRlZmF1bHQgc3R5bGVcbiAgLy8gU28gd2UgbmVlZCB0byBmaWx0ZXIgdGhlbSBvdXRcbiAgLy8gVXNlcnMgY2FuIHVzZSBgbnVsbGAgaW5zdGVhZFxuICBmb3IgKGNvbnN0IHN0eWxlUHJvcCBpbiBzYWZlU3R5bGVzKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdHlwZXNjcmlwdCB3cm9uZ2x5IGNvbXBsYWlucyB0aGF0IHN0eWxlUHJvcCBjYW5ub3QgYmUgdXNlZCB0byBpbmRleCBzYWZlU3R5bGVzXG4gICAgaWYgKHNhZmVTdHlsZXNbc3R5bGVQcm9wXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWR5bmFtaWMtZGVsZXRlXG4gICAgICBkZWxldGUgc2FmZVN0eWxlc1tzdHlsZVByb3BdO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGJhY2tncm91bmRTdHlsZSA9IFtcbiAgICBzYWZlU3R5bGVzLFxuICAgIGhlYWRlclNoYWRvd1Zpc2libGUgPT09IGZhbHNlICYmIHtcbiAgICAgIGVsZXZhdGlvbjogMCxcbiAgICAgIHNoYWRvd09wYWNpdHk6IDAsXG4gICAgICBib3JkZXJCb3R0b21XaWR0aDogMCxcbiAgICB9LFxuICBdO1xuXG4gIGNvbnN0IGxlZnRCdXR0b24gPSBoZWFkZXJMZWZ0XG4gICAgPyBoZWFkZXJMZWZ0KHtcbiAgICAgICAgdGludENvbG9yOiBoZWFkZXJUaW50Q29sb3IsXG4gICAgICAgIHByZXNzQ29sb3I6IGhlYWRlclByZXNzQ29sb3IsXG4gICAgICAgIHByZXNzT3BhY2l0eTogaGVhZGVyUHJlc3NPcGFjaXR5LFxuICAgICAgICBsYWJlbFZpc2libGU6IGhlYWRlckxlZnRMYWJlbFZpc2libGUsXG4gICAgICB9KVxuICAgIDogbnVsbDtcblxuICBjb25zdCByaWdodEJ1dHRvbiA9IGhlYWRlclJpZ2h0XG4gICAgPyBoZWFkZXJSaWdodCh7XG4gICAgICAgIHRpbnRDb2xvcjogaGVhZGVyVGludENvbG9yLFxuICAgICAgICBwcmVzc0NvbG9yOiBoZWFkZXJQcmVzc0NvbG9yLFxuICAgICAgICBwcmVzc09wYWNpdHk6IGhlYWRlclByZXNzT3BhY2l0eSxcbiAgICAgIH0pXG4gICAgOiBudWxsO1xuXG4gIGNvbnN0IGhlYWRlclRpdGxlID1cbiAgICB0eXBlb2YgY3VzdG9tVGl0bGUgIT09ICdmdW5jdGlvbidcbiAgICAgID8gKHByb3BzOiBSZWFjdC5Db21wb25lbnRQcm9wczx0eXBlb2YgSGVhZGVyVGl0bGU+KSA9PiAoXG4gICAgICAgICAgPEhlYWRlclRpdGxlIHsuLi5wcm9wc30gLz5cbiAgICAgICAgKVxuICAgICAgOiBjdXN0b21UaXRsZTtcblxuICByZXR1cm4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgIHBvaW50ZXJFdmVudHM9XCJib3gtbm9uZVwiXG4gICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGwsXG4gICAgICAgICAgeyB6SW5kZXg6IDAgfSxcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29udGFpbmVyU3R5bGUsXG4gICAgICAgIF19XG4gICAgICA+XG4gICAgICAgIHtoZWFkZXJCYWNrZ3JvdW5kID8gKFxuICAgICAgICAgIGhlYWRlckJhY2tncm91bmQoeyBzdHlsZTogYmFja2dyb3VuZFN0eWxlIH0pXG4gICAgICAgICkgOiBoZWFkZXJUcmFuc3BhcmVudCA/IG51bGwgOiAoXG4gICAgICAgICAgPEhlYWRlckJhY2tncm91bmQgc3R5bGU9e2JhY2tncm91bmRTdHlsZX0gLz5cbiAgICAgICAgKX1cbiAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgIHBvaW50ZXJFdmVudHM9XCJib3gtbm9uZVwiXG4gICAgICAgIHN0eWxlPXtbeyBoZWlnaHQsIG1pbkhlaWdodCwgbWF4SGVpZ2h0LCBvcGFjaXR5LCB0cmFuc2Zvcm0gfV19XG4gICAgICA+XG4gICAgICAgIDxWaWV3IHBvaW50ZXJFdmVudHM9XCJub25lXCIgc3R5bGU9e3sgaGVpZ2h0OiBoZWFkZXJTdGF0dXNCYXJIZWlnaHQgfX0gLz5cbiAgICAgICAgPFZpZXcgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCIgc3R5bGU9e3N0eWxlcy5jb250ZW50fT5cbiAgICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgICAgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCJcbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy5sZWZ0LFxuICAgICAgICAgICAgICBoZWFkZXJUaXRsZUFsaWduID09PSAnY2VudGVyJyAmJiBzdHlsZXMuZXhwYW5kLFxuICAgICAgICAgICAgICB7IG1hcmdpblN0YXJ0OiBpbnNldHMubGVmdCB9LFxuICAgICAgICAgICAgICBsZWZ0Q29udGFpbmVyU3R5bGUsXG4gICAgICAgICAgICBdfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtsZWZ0QnV0dG9ufVxuICAgICAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgICAgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCJcbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy50aXRsZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEF2b2lkIHRoZSB0aXRsZSBmcm9tIGdvaW5nIG9mZnNjcmVlbiBvciBvdmVybGFwcGluZyBidXR0b25zXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6XG4gICAgICAgICAgICAgICAgICBoZWFkZXJUaXRsZUFsaWduID09PSAnY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICA/IGxheW91dC53aWR0aCAtXG4gICAgICAgICAgICAgICAgICAgICAgKChsZWZ0QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGhlYWRlckxlZnRMYWJlbFZpc2libGUgIT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gODBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAzMlxuICAgICAgICAgICAgICAgICAgICAgICAgOiAxNikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoaW5zZXRzLmxlZnQsIGluc2V0cy5yaWdodCkpICpcbiAgICAgICAgICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgICAgICAgOiBsYXlvdXQud2lkdGggLVxuICAgICAgICAgICAgICAgICAgICAgICgobGVmdEJ1dHRvbiA/IDcyIDogMTYpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChyaWdodEJ1dHRvbiA/IDcyIDogMTYpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc2V0cy5sZWZ0IC1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluc2V0cy5yaWdodCksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRpdGxlQ29udGFpbmVyU3R5bGUsXG4gICAgICAgICAgICBdfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtoZWFkZXJUaXRsZSh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiB0aXRsZSxcbiAgICAgICAgICAgICAgYWxsb3dGb250U2NhbGluZzogdGl0bGVBbGxvd0ZvbnRTY2FsaW5nLFxuICAgICAgICAgICAgICB0aW50Q29sb3I6IGhlYWRlclRpbnRDb2xvcixcbiAgICAgICAgICAgICAgc3R5bGU6IHRpdGxlU3R5bGUsXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgICAgIHBvaW50ZXJFdmVudHM9XCJib3gtbm9uZVwiXG4gICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICBzdHlsZXMucmlnaHQsXG4gICAgICAgICAgICAgIHN0eWxlcy5leHBhbmQsXG4gICAgICAgICAgICAgIHsgbWFyZ2luRW5kOiBpbnNldHMucmlnaHQgfSxcbiAgICAgICAgICAgICAgcmlnaHRDb250YWluZXJTdHlsZSxcbiAgICAgICAgICAgIF19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3JpZ2h0QnV0dG9ufVxuICAgICAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICAgICAgPC9WaWV3PlxuICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICk7XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGVudDoge1xuICAgIGZsZXg6IDEsXG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gICAgYWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuICB9LFxuICB0aXRsZToge1xuICAgIG1hcmdpbkhvcml6b250YWw6IDE2LFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgfSxcbiAgbGVmdDoge1xuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG4gIH0sXG4gIHJpZ2h0OiB7XG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGFsaWduSXRlbXM6ICdmbGV4LWVuZCcsXG4gIH0sXG4gIGV4cGFuZDoge1xuICAgIGZsZXhHcm93OiAxLFxuICAgIGZsZXhCYXNpczogMCxcbiAgfSxcbn0pO1xuIl19