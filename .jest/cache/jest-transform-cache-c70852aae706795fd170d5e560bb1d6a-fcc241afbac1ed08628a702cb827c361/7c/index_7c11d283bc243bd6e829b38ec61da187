faf5323c834381bdf872c2e089f63e05
'use strict';

var colorString = require('color-string');

var convert = require('color-convert');

var _slice = [].slice;
var skippedModels = ['keyword', 'gray', 'hex'];
var hashedModelKeys = {};
Object.keys(convert).forEach(function (model) {
  hashedModelKeys[_slice.call(convert[model].labels).sort().join('')] = model;
});
var limiters = {};

function Color(obj, model) {
  if (!(this instanceof Color)) {
    return new Color(obj, model);
  }

  if (model && model in skippedModels) {
    model = null;
  }

  if (model && !(model in convert)) {
    throw new Error('Unknown model: ' + model);
  }

  var i;
  var channels;

  if (obj == null) {
    this.model = 'rgb';
    this.color = [0, 0, 0];
    this.valpha = 1;
  } else if (obj instanceof Color) {
    this.model = obj.model;
    this.color = obj.color.slice();
    this.valpha = obj.valpha;
  } else if (typeof obj === 'string') {
    var result = colorString.get(obj);

    if (result === null) {
      throw new Error('Unable to parse color from string: ' + obj);
    }

    this.model = result.model;
    channels = convert[this.model].channels;
    this.color = result.value.slice(0, channels);
    this.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;
  } else if (obj.length) {
    this.model = model || 'rgb';
    channels = convert[this.model].channels;

    var newArr = _slice.call(obj, 0, channels);

    this.color = zeroArray(newArr, channels);
    this.valpha = typeof obj[channels] === 'number' ? obj[channels] : 1;
  } else if (typeof obj === 'number') {
    obj &= 0xFFFFFF;
    this.model = 'rgb';
    this.color = [obj >> 16 & 0xFF, obj >> 8 & 0xFF, obj & 0xFF];
    this.valpha = 1;
  } else {
    this.valpha = 1;
    var keys = Object.keys(obj);

    if ('alpha' in obj) {
      keys.splice(keys.indexOf('alpha'), 1);
      this.valpha = typeof obj.alpha === 'number' ? obj.alpha : 0;
    }

    var hashedKeys = keys.sort().join('');

    if (!(hashedKeys in hashedModelKeys)) {
      throw new Error('Unable to parse color from object: ' + JSON.stringify(obj));
    }

    this.model = hashedModelKeys[hashedKeys];
    var labels = convert[this.model].labels;
    var color = [];

    for (i = 0; i < labels.length; i++) {
      color.push(obj[labels[i]]);
    }

    this.color = zeroArray(color);
  }

  if (limiters[this.model]) {
    channels = convert[this.model].channels;

    for (i = 0; i < channels; i++) {
      var limit = limiters[this.model][i];

      if (limit) {
        this.color[i] = limit(this.color[i]);
      }
    }
  }

  this.valpha = Math.max(0, Math.min(1, this.valpha));

  if (Object.freeze) {
    Object.freeze(this);
  }
}

Color.prototype = {
  toString: function toString() {
    return this.string();
  },
  toJSON: function toJSON() {
    return this[this.model]();
  },
  string: function string(places) {
    var self = this.model in colorString.to ? this : this.rgb();
    self = self.round(typeof places === 'number' ? places : 1);
    var args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);
    return colorString.to[self.model](args);
  },
  percentString: function percentString(places) {
    var self = this.rgb().round(typeof places === 'number' ? places : 1);
    var args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);
    return colorString.to.rgb.percent(args);
  },
  array: function array() {
    return this.valpha === 1 ? this.color.slice() : this.color.concat(this.valpha);
  },
  object: function object() {
    var result = {};
    var channels = convert[this.model].channels;
    var labels = convert[this.model].labels;

    for (var i = 0; i < channels; i++) {
      result[labels[i]] = this.color[i];
    }

    if (this.valpha !== 1) {
      result.alpha = this.valpha;
    }

    return result;
  },
  unitArray: function unitArray() {
    var rgb = this.rgb().color;
    rgb[0] /= 255;
    rgb[1] /= 255;
    rgb[2] /= 255;

    if (this.valpha !== 1) {
      rgb.push(this.valpha);
    }

    return rgb;
  },
  unitObject: function unitObject() {
    var rgb = this.rgb().object();
    rgb.r /= 255;
    rgb.g /= 255;
    rgb.b /= 255;

    if (this.valpha !== 1) {
      rgb.alpha = this.valpha;
    }

    return rgb;
  },
  round: function round(places) {
    places = Math.max(places || 0, 0);
    return new Color(this.color.map(roundToPlace(places)).concat(this.valpha), this.model);
  },
  alpha: function alpha(val) {
    if (arguments.length) {
      return new Color(this.color.concat(Math.max(0, Math.min(1, val))), this.model);
    }

    return this.valpha;
  },
  red: getset('rgb', 0, maxfn(255)),
  green: getset('rgb', 1, maxfn(255)),
  blue: getset('rgb', 2, maxfn(255)),
  hue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, function (val) {
    return (val % 360 + 360) % 360;
  }),
  saturationl: getset('hsl', 1, maxfn(100)),
  lightness: getset('hsl', 2, maxfn(100)),
  saturationv: getset('hsv', 1, maxfn(100)),
  value: getset('hsv', 2, maxfn(100)),
  chroma: getset('hcg', 1, maxfn(100)),
  gray: getset('hcg', 2, maxfn(100)),
  white: getset('hwb', 1, maxfn(100)),
  wblack: getset('hwb', 2, maxfn(100)),
  cyan: getset('cmyk', 0, maxfn(100)),
  magenta: getset('cmyk', 1, maxfn(100)),
  yellow: getset('cmyk', 2, maxfn(100)),
  black: getset('cmyk', 3, maxfn(100)),
  x: getset('xyz', 0, maxfn(100)),
  y: getset('xyz', 1, maxfn(100)),
  z: getset('xyz', 2, maxfn(100)),
  l: getset('lab', 0, maxfn(100)),
  a: getset('lab', 1),
  b: getset('lab', 2),
  keyword: function keyword(val) {
    if (arguments.length) {
      return new Color(val);
    }

    return convert[this.model].keyword(this.color);
  },
  hex: function hex(val) {
    if (arguments.length) {
      return new Color(val);
    }

    return colorString.to.hex(this.rgb().round().color);
  },
  rgbNumber: function rgbNumber() {
    var rgb = this.rgb().color;
    return (rgb[0] & 0xFF) << 16 | (rgb[1] & 0xFF) << 8 | rgb[2] & 0xFF;
  },
  luminosity: function luminosity() {
    var rgb = this.rgb().color;
    var lum = [];

    for (var i = 0; i < rgb.length; i++) {
      var chan = rgb[i] / 255;
      lum[i] = chan <= 0.03928 ? chan / 12.92 : Math.pow((chan + 0.055) / 1.055, 2.4);
    }

    return 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];
  },
  contrast: function contrast(color2) {
    var lum1 = this.luminosity();
    var lum2 = color2.luminosity();

    if (lum1 > lum2) {
      return (lum1 + 0.05) / (lum2 + 0.05);
    }

    return (lum2 + 0.05) / (lum1 + 0.05);
  },
  level: function level(color2) {
    var contrastRatio = this.contrast(color2);

    if (contrastRatio >= 7.1) {
      return 'AAA';
    }

    return contrastRatio >= 4.5 ? 'AA' : '';
  },
  isDark: function isDark() {
    var rgb = this.rgb().color;
    var yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;
    return yiq < 128;
  },
  isLight: function isLight() {
    return !this.isDark();
  },
  negate: function negate() {
    var rgb = this.rgb();

    for (var i = 0; i < 3; i++) {
      rgb.color[i] = 255 - rgb.color[i];
    }

    return rgb;
  },
  lighten: function lighten(ratio) {
    var hsl = this.hsl();
    hsl.color[2] += hsl.color[2] * ratio;
    return hsl;
  },
  darken: function darken(ratio) {
    var hsl = this.hsl();
    hsl.color[2] -= hsl.color[2] * ratio;
    return hsl;
  },
  saturate: function saturate(ratio) {
    var hsl = this.hsl();
    hsl.color[1] += hsl.color[1] * ratio;
    return hsl;
  },
  desaturate: function desaturate(ratio) {
    var hsl = this.hsl();
    hsl.color[1] -= hsl.color[1] * ratio;
    return hsl;
  },
  whiten: function whiten(ratio) {
    var hwb = this.hwb();
    hwb.color[1] += hwb.color[1] * ratio;
    return hwb;
  },
  blacken: function blacken(ratio) {
    var hwb = this.hwb();
    hwb.color[2] += hwb.color[2] * ratio;
    return hwb;
  },
  grayscale: function grayscale() {
    var rgb = this.rgb().color;
    var val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;
    return Color.rgb(val, val, val);
  },
  fade: function fade(ratio) {
    return this.alpha(this.valpha - this.valpha * ratio);
  },
  opaquer: function opaquer(ratio) {
    return this.alpha(this.valpha + this.valpha * ratio);
  },
  rotate: function rotate(degrees) {
    var hsl = this.hsl();
    var hue = hsl.color[0];
    hue = (hue + degrees) % 360;
    hue = hue < 0 ? 360 + hue : hue;
    hsl.color[0] = hue;
    return hsl;
  },
  mix: function mix(mixinColor, weight) {
    if (!mixinColor || !mixinColor.rgb) {
      throw new Error('Argument to "mix" was not a Color instance, but rather an instance of ' + typeof mixinColor);
    }

    var color1 = mixinColor.rgb();
    var color2 = this.rgb();
    var p = weight === undefined ? 0.5 : weight;
    var w = 2 * p - 1;
    var a = color1.alpha() - color2.alpha();
    var w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;
    var w2 = 1 - w1;
    return Color.rgb(w1 * color1.red() + w2 * color2.red(), w1 * color1.green() + w2 * color2.green(), w1 * color1.blue() + w2 * color2.blue(), color1.alpha() * p + color2.alpha() * (1 - p));
  }
};
Object.keys(convert).forEach(function (model) {
  if (skippedModels.indexOf(model) !== -1) {
    return;
  }

  var channels = convert[model].channels;

  Color.prototype[model] = function () {
    if (this.model === model) {
      return new Color(this);
    }

    if (arguments.length) {
      return new Color(arguments, model);
    }

    var newAlpha = typeof arguments[channels] === 'number' ? channels : this.valpha;
    return new Color(assertArray(convert[this.model][model].raw(this.color)).concat(newAlpha), model);
  };

  Color[model] = function (color) {
    if (typeof color === 'number') {
      color = zeroArray(_slice.call(arguments), channels);
    }

    return new Color(color, model);
  };
});

function roundTo(num, places) {
  return Number(num.toFixed(places));
}

function roundToPlace(places) {
  return function (num) {
    return roundTo(num, places);
  };
}

function getset(model, channel, modifier) {
  model = Array.isArray(model) ? model : [model];
  model.forEach(function (m) {
    (limiters[m] || (limiters[m] = []))[channel] = modifier;
  });
  model = model[0];
  return function (val) {
    var result;

    if (arguments.length) {
      if (modifier) {
        val = modifier(val);
      }

      result = this[model]();
      result.color[channel] = val;
      return result;
    }

    result = this[model]().color[channel];

    if (modifier) {
      result = modifier(result);
    }

    return result;
  };
}

function maxfn(max) {
  return function (v) {
    return Math.max(0, Math.min(max, v));
  };
}

function assertArray(val) {
  return Array.isArray(val) ? val : [val];
}

function zeroArray(arr, length) {
  for (var i = 0; i < length; i++) {
    if (typeof arr[i] !== 'number') {
      arr[i] = 0;
    }
  }

  return arr;
}

module.exports = Color;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvbG9yU3RyaW5nIiwicmVxdWlyZSIsImNvbnZlcnQiLCJfc2xpY2UiLCJzbGljZSIsInNraXBwZWRNb2RlbHMiLCJoYXNoZWRNb2RlbEtleXMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsIm1vZGVsIiwiY2FsbCIsImxhYmVscyIsInNvcnQiLCJqb2luIiwibGltaXRlcnMiLCJDb2xvciIsIm9iaiIsIkVycm9yIiwiaSIsImNoYW5uZWxzIiwiY29sb3IiLCJ2YWxwaGEiLCJyZXN1bHQiLCJnZXQiLCJ2YWx1ZSIsImxlbmd0aCIsIm5ld0FyciIsInplcm9BcnJheSIsInNwbGljZSIsImluZGV4T2YiLCJhbHBoYSIsImhhc2hlZEtleXMiLCJKU09OIiwic3RyaW5naWZ5IiwicHVzaCIsImxpbWl0IiwiTWF0aCIsIm1heCIsIm1pbiIsImZyZWV6ZSIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwic3RyaW5nIiwidG9KU09OIiwicGxhY2VzIiwic2VsZiIsInRvIiwicmdiIiwicm91bmQiLCJhcmdzIiwiY29uY2F0IiwicGVyY2VudFN0cmluZyIsInBlcmNlbnQiLCJhcnJheSIsIm9iamVjdCIsInVuaXRBcnJheSIsInVuaXRPYmplY3QiLCJyIiwiZyIsImIiLCJtYXAiLCJyb3VuZFRvUGxhY2UiLCJ2YWwiLCJhcmd1bWVudHMiLCJyZWQiLCJnZXRzZXQiLCJtYXhmbiIsImdyZWVuIiwiYmx1ZSIsImh1ZSIsInNhdHVyYXRpb25sIiwibGlnaHRuZXNzIiwic2F0dXJhdGlvbnYiLCJjaHJvbWEiLCJncmF5Iiwid2hpdGUiLCJ3YmxhY2siLCJjeWFuIiwibWFnZW50YSIsInllbGxvdyIsImJsYWNrIiwieCIsInkiLCJ6IiwibCIsImEiLCJrZXl3b3JkIiwiaGV4IiwicmdiTnVtYmVyIiwibHVtaW5vc2l0eSIsImx1bSIsImNoYW4iLCJwb3ciLCJjb250cmFzdCIsImNvbG9yMiIsImx1bTEiLCJsdW0yIiwibGV2ZWwiLCJjb250cmFzdFJhdGlvIiwiaXNEYXJrIiwieWlxIiwiaXNMaWdodCIsIm5lZ2F0ZSIsImxpZ2h0ZW4iLCJyYXRpbyIsImhzbCIsImRhcmtlbiIsInNhdHVyYXRlIiwiZGVzYXR1cmF0ZSIsIndoaXRlbiIsImh3YiIsImJsYWNrZW4iLCJncmF5c2NhbGUiLCJmYWRlIiwib3BhcXVlciIsInJvdGF0ZSIsImRlZ3JlZXMiLCJtaXgiLCJtaXhpbkNvbG9yIiwid2VpZ2h0IiwiY29sb3IxIiwicCIsInVuZGVmaW5lZCIsInciLCJ3MSIsIncyIiwibmV3QWxwaGEiLCJhc3NlcnRBcnJheSIsInJhdyIsInJvdW5kVG8iLCJudW0iLCJOdW1iZXIiLCJ0b0ZpeGVkIiwiY2hhbm5lbCIsIm1vZGlmaWVyIiwiQXJyYXkiLCJpc0FycmF5IiwibSIsInYiLCJhcnIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFJQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxjQUFELENBQXpCOztBQUNBLElBQUlDLE9BQU8sR0FBR0QsT0FBTyxDQUFDLGVBQUQsQ0FBckI7O0FBRUEsSUFBSUUsTUFBTSxHQUFHLEdBQUdDLEtBQWhCO0FBRUEsSUFBSUMsYUFBYSxHQUFHLENBRW5CLFNBRm1CLEVBS25CLE1BTG1CLEVBUW5CLEtBUm1CLENBQXBCO0FBV0EsSUFBSUMsZUFBZSxHQUFHLEVBQXRCO0FBQ0FDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZTixPQUFaLEVBQXFCTyxPQUFyQixDQUE2QixVQUFVQyxLQUFWLEVBQWlCO0FBQzdDSixFQUFBQSxlQUFlLENBQUNILE1BQU0sQ0FBQ1EsSUFBUCxDQUFZVCxPQUFPLENBQUNRLEtBQUQsQ0FBUCxDQUFlRSxNQUEzQixFQUFtQ0MsSUFBbkMsR0FBMENDLElBQTFDLENBQStDLEVBQS9DLENBQUQsQ0FBZixHQUFzRUosS0FBdEU7QUFDQSxDQUZEO0FBSUEsSUFBSUssUUFBUSxHQUFHLEVBQWY7O0FBRUEsU0FBU0MsS0FBVCxDQUFlQyxHQUFmLEVBQW9CUCxLQUFwQixF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QU9BLE1BQVA7QUFDQSxHQW5CRDtBQW9CQTs7QUFFRCxTQUFTNEMsS0FBVCxDQUFlN0IsR0FBZixFQUFvQjtBQUNuQixTQUFPLFVBQVVxRyxDQUFWLEVBQWE7QUFDbkIsV0FBT3RHLElBQUksQ0FBQ0MsR0FBTCxDQUFTLENBQVQsRUFBWUQsSUFBSSxDQUFDRSxHQUFMLENBQVNELEdBQVQsRUFBY3FHLENBQWQsQ0FBWixDQUFQO0FBQ0EsR0FGRDtBQUdBOztBQUVELFNBQVNYLFdBQVQsQ0FBcUJqRSxHQUFyQixFQUEwQjtBQUN6QixTQUFPeUUsS0FBSyxDQUFDQyxPQUFOLENBQWMxRSxHQUFkLElBQXFCQSxHQUFyQixHQUEyQixDQUFDQSxHQUFELENBQWxDO0FBQ0E7O0FBRUQsU0FBU25DLFNBQVQsQ0FBbUJnSCxHQUFuQixFQUF3QmxILE1BQXhCLEVBQWdDO0FBQy9CLE9BQUssSUFBSVAsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR08sTUFBcEIsRUFBNEJQLENBQUMsRUFBN0IsRUFBaUM7QUFDaEMsUUFBSSxPQUFPeUgsR0FBRyxDQUFDekgsQ0FBRCxDQUFWLEtBQWtCLFFBQXRCLEVBQWdDO0FBQy9CeUgsTUFBQUEsR0FBRyxDQUFDekgsQ0FBRCxDQUFILEdBQVMsQ0FBVDtBQUNBO0FBQ0Q7O0FBRUQsU0FBT3lILEdBQVA7QUFDQTs7QUFFREMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCOUgsS0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBjb2xvclN0cmluZyA9IHJlcXVpcmUoJ2NvbG9yLXN0cmluZycpO1xudmFyIGNvbnZlcnQgPSByZXF1aXJlKCdjb2xvci1jb252ZXJ0Jyk7XG5cbnZhciBfc2xpY2UgPSBbXS5zbGljZTtcblxudmFyIHNraXBwZWRNb2RlbHMgPSBbXG5cdC8vIHRvIGJlIGhvbmVzdCwgSSBkb24ndCByZWFsbHkgZmVlbCBsaWtlIGtleXdvcmQgYmVsb25ncyBpbiBjb2xvciBjb252ZXJ0LCBidXQgZWguXG5cdCdrZXl3b3JkJyxcblxuXHQvLyBncmF5IGNvbmZsaWN0cyB3aXRoIHNvbWUgbWV0aG9kIG5hbWVzLCBhbmQgaGFzIGl0cyBvd24gbWV0aG9kIGRlZmluZWQuXG5cdCdncmF5JyxcblxuXHQvLyBzaG91bGRuJ3QgcmVhbGx5IGJlIGluIGNvbG9yLWNvbnZlcnQgZWl0aGVyLi4uXG5cdCdoZXgnXG5dO1xuXG52YXIgaGFzaGVkTW9kZWxLZXlzID0ge307XG5PYmplY3Qua2V5cyhjb252ZXJ0KS5mb3JFYWNoKGZ1bmN0aW9uIChtb2RlbCkge1xuXHRoYXNoZWRNb2RlbEtleXNbX3NsaWNlLmNhbGwoY29udmVydFttb2RlbF0ubGFiZWxzKS5zb3J0KCkuam9pbignJyldID0gbW9kZWw7XG59KTtcblxudmFyIGxpbWl0ZXJzID0ge307XG5cbmZ1bmN0aW9uIENvbG9yKG9iaiwgbW9kZWwpIHtcblx0aWYgKCEodGhpcyBpbnN0YW5jZW9mIENvbG9yKSkge1xuXHRcdHJldHVybiBuZXcgQ29sb3Iob2JqLCBtb2RlbCk7XG5cdH1cblxuXHRpZiAobW9kZWwgJiYgbW9kZWwgaW4gc2tpcHBlZE1vZGVscykge1xuXHRcdG1vZGVsID0gbnVsbDtcblx0fVxuXG5cdGlmIChtb2RlbCAmJiAhKG1vZGVsIGluIGNvbnZlcnQpKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1vZGVsOiAnICsgbW9kZWwpO1xuXHR9XG5cblx0dmFyIGk7XG5cdHZhciBjaGFubmVscztcblxuXHRpZiAob2JqID09IG51bGwpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lcS1udWxsLGVxZXFlcVxuXHRcdHRoaXMubW9kZWwgPSAncmdiJztcblx0XHR0aGlzLmNvbG9yID0gWzAsIDAsIDBdO1xuXHRcdHRoaXMudmFscGhhID0gMTtcblx0fSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBDb2xvcikge1xuXHRcdHRoaXMubW9kZWwgPSBvYmoubW9kZWw7XG5cdFx0dGhpcy5jb2xvciA9IG9iai5jb2xvci5zbGljZSgpO1xuXHRcdHRoaXMudmFscGhhID0gb2JqLnZhbHBoYTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuXHRcdHZhciByZXN1bHQgPSBjb2xvclN0cmluZy5nZXQob2JqKTtcblx0XHRpZiAocmVzdWx0ID09PSBudWxsKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBwYXJzZSBjb2xvciBmcm9tIHN0cmluZzogJyArIG9iaik7XG5cdFx0fVxuXG5cdFx0dGhpcy5tb2RlbCA9IHJlc3VsdC5tb2RlbDtcblx0XHRjaGFubmVscyA9IGNvbnZlcnRbdGhpcy5tb2RlbF0uY2hhbm5lbHM7XG5cdFx0dGhpcy5jb2xvciA9IHJlc3VsdC52YWx1ZS5zbGljZSgwLCBjaGFubmVscyk7XG5cdFx0dGhpcy52YWxwaGEgPSB0eXBlb2YgcmVzdWx0LnZhbHVlW2NoYW5uZWxzXSA9PT0gJ251bWJlcicgPyByZXN1bHQudmFsdWVbY2hhbm5lbHNdIDogMTtcblx0fSBlbHNlIGlmIChvYmoubGVuZ3RoKSB7XG5cdFx0dGhpcy5tb2RlbCA9IG1vZGVsIHx8ICdyZ2InO1xuXHRcdGNoYW5uZWxzID0gY29udmVydFt0aGlzLm1vZGVsXS5jaGFubmVscztcblx0XHR2YXIgbmV3QXJyID0gX3NsaWNlLmNhbGwob2JqLCAwLCBjaGFubmVscyk7XG5cdFx0dGhpcy5jb2xvciA9IHplcm9BcnJheShuZXdBcnIsIGNoYW5uZWxzKTtcblx0XHR0aGlzLnZhbHBoYSA9IHR5cGVvZiBvYmpbY2hhbm5lbHNdID09PSAnbnVtYmVyJyA/IG9ialtjaGFubmVsc10gOiAxO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdudW1iZXInKSB7XG5cdFx0Ly8gdGhpcyBpcyBhbHdheXMgUkdCIC0gY2FuIGJlIGNvbnZlcnRlZCBsYXRlciBvbi5cblx0XHRvYmogJj0gMHhGRkZGRkY7XG5cdFx0dGhpcy5tb2RlbCA9ICdyZ2InO1xuXHRcdHRoaXMuY29sb3IgPSBbXG5cdFx0XHQob2JqID4+IDE2KSAmIDB4RkYsXG5cdFx0XHQob2JqID4+IDgpICYgMHhGRixcblx0XHRcdG9iaiAmIDB4RkZcblx0XHRdO1xuXHRcdHRoaXMudmFscGhhID0gMTtcblx0fSBlbHNlIHtcblx0XHR0aGlzLnZhbHBoYSA9IDE7XG5cblx0XHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdFx0aWYgKCdhbHBoYScgaW4gb2JqKSB7XG5cdFx0XHRrZXlzLnNwbGljZShrZXlzLmluZGV4T2YoJ2FscGhhJyksIDEpO1xuXHRcdFx0dGhpcy52YWxwaGEgPSB0eXBlb2Ygb2JqLmFscGhhID09PSAnbnVtYmVyJyA/IG9iai5hbHBoYSA6IDA7XG5cdFx0fVxuXG5cdFx0dmFyIGhhc2hlZEtleXMgPSBrZXlzLnNvcnQoKS5qb2luKCcnKTtcblx0XHRpZiAoIShoYXNoZWRLZXlzIGluIGhhc2hlZE1vZGVsS2V5cykpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHBhcnNlIGNvbG9yIGZyb20gb2JqZWN0OiAnICsgSlNPTi5zdHJpbmdpZnkob2JqKSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5tb2RlbCA9IGhhc2hlZE1vZGVsS2V5c1toYXNoZWRLZXlzXTtcblxuXHRcdHZhciBsYWJlbHMgPSBjb252ZXJ0W3RoaXMubW9kZWxdLmxhYmVscztcblx0XHR2YXIgY29sb3IgPSBbXTtcblx0XHRmb3IgKGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb2xvci5wdXNoKG9ialtsYWJlbHNbaV1dKTtcblx0XHR9XG5cblx0XHR0aGlzLmNvbG9yID0gemVyb0FycmF5KGNvbG9yKTtcblx0fVxuXG5cdC8vIHBlcmZvcm0gbGltaXRhdGlvbnMgKGNsYW1waW5nLCBldGMuKVxuXHRpZiAobGltaXRlcnNbdGhpcy5tb2RlbF0pIHtcblx0XHRjaGFubmVscyA9IGNvbnZlcnRbdGhpcy5tb2RlbF0uY2hhbm5lbHM7XG5cdFx0Zm9yIChpID0gMDsgaSA8IGNoYW5uZWxzOyBpKyspIHtcblx0XHRcdHZhciBsaW1pdCA9IGxpbWl0ZXJzW3RoaXMubW9kZWxdW2ldO1xuXHRcdFx0aWYgKGxpbWl0KSB7XG5cdFx0XHRcdHRoaXMuY29sb3JbaV0gPSBsaW1pdCh0aGlzLmNvbG9yW2ldKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR0aGlzLnZhbHBoYSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHRoaXMudmFscGhhKSk7XG5cblx0aWYgKE9iamVjdC5mcmVlemUpIHtcblx0XHRPYmplY3QuZnJlZXplKHRoaXMpO1xuXHR9XG59XG5cbkNvbG9yLnByb3RvdHlwZSA9IHtcblx0dG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5zdHJpbmcoKTtcblx0fSxcblxuXHR0b0pTT046IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpc1t0aGlzLm1vZGVsXSgpO1xuXHR9LFxuXG5cdHN0cmluZzogZnVuY3Rpb24gKHBsYWNlcykge1xuXHRcdHZhciBzZWxmID0gdGhpcy5tb2RlbCBpbiBjb2xvclN0cmluZy50byA/IHRoaXMgOiB0aGlzLnJnYigpO1xuXHRcdHNlbGYgPSBzZWxmLnJvdW5kKHR5cGVvZiBwbGFjZXMgPT09ICdudW1iZXInID8gcGxhY2VzIDogMSk7XG5cdFx0dmFyIGFyZ3MgPSBzZWxmLnZhbHBoYSA9PT0gMSA/IHNlbGYuY29sb3IgOiBzZWxmLmNvbG9yLmNvbmNhdCh0aGlzLnZhbHBoYSk7XG5cdFx0cmV0dXJuIGNvbG9yU3RyaW5nLnRvW3NlbGYubW9kZWxdKGFyZ3MpO1xuXHR9LFxuXG5cdHBlcmNlbnRTdHJpbmc6IGZ1bmN0aW9uIChwbGFjZXMpIHtcblx0XHR2YXIgc2VsZiA9IHRoaXMucmdiKCkucm91bmQodHlwZW9mIHBsYWNlcyA9PT0gJ251bWJlcicgPyBwbGFjZXMgOiAxKTtcblx0XHR2YXIgYXJncyA9IHNlbGYudmFscGhhID09PSAxID8gc2VsZi5jb2xvciA6IHNlbGYuY29sb3IuY29uY2F0KHRoaXMudmFscGhhKTtcblx0XHRyZXR1cm4gY29sb3JTdHJpbmcudG8ucmdiLnBlcmNlbnQoYXJncyk7XG5cdH0sXG5cblx0YXJyYXk6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy52YWxwaGEgPT09IDEgPyB0aGlzLmNvbG9yLnNsaWNlKCkgOiB0aGlzLmNvbG9yLmNvbmNhdCh0aGlzLnZhbHBoYSk7XG5cdH0sXG5cblx0b2JqZWN0OiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHJlc3VsdCA9IHt9O1xuXHRcdHZhciBjaGFubmVscyA9IGNvbnZlcnRbdGhpcy5tb2RlbF0uY2hhbm5lbHM7XG5cdFx0dmFyIGxhYmVscyA9IGNvbnZlcnRbdGhpcy5tb2RlbF0ubGFiZWxzO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjaGFubmVsczsgaSsrKSB7XG5cdFx0XHRyZXN1bHRbbGFiZWxzW2ldXSA9IHRoaXMuY29sb3JbaV07XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMudmFscGhhICE9PSAxKSB7XG5cdFx0XHRyZXN1bHQuYWxwaGEgPSB0aGlzLnZhbHBoYTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LFxuXG5cdHVuaXRBcnJheTogZnVuY3Rpb24gKCkge1xuXHRcdHZhciByZ2IgPSB0aGlzLnJnYigpLmNvbG9yO1xuXHRcdHJnYlswXSAvPSAyNTU7XG5cdFx0cmdiWzFdIC89IDI1NTtcblx0XHRyZ2JbMl0gLz0gMjU1O1xuXG5cdFx0aWYgKHRoaXMudmFscGhhICE9PSAxKSB7XG5cdFx0XHRyZ2IucHVzaCh0aGlzLnZhbHBoYSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJnYjtcblx0fSxcblxuXHR1bml0T2JqZWN0OiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHJnYiA9IHRoaXMucmdiKCkub2JqZWN0KCk7XG5cdFx0cmdiLnIgLz0gMjU1O1xuXHRcdHJnYi5nIC89IDI1NTtcblx0XHRyZ2IuYiAvPSAyNTU7XG5cblx0XHRpZiAodGhpcy52YWxwaGEgIT09IDEpIHtcblx0XHRcdHJnYi5hbHBoYSA9IHRoaXMudmFscGhhO1xuXHRcdH1cblxuXHRcdHJldHVybiByZ2I7XG5cdH0sXG5cblx0cm91bmQ6IGZ1bmN0aW9uIChwbGFjZXMpIHtcblx0XHRwbGFjZXMgPSBNYXRoLm1heChwbGFjZXMgfHwgMCwgMCk7XG5cdFx0cmV0dXJuIG5ldyBDb2xvcih0aGlzLmNvbG9yLm1hcChyb3VuZFRvUGxhY2UocGxhY2VzKSkuY29uY2F0KHRoaXMudmFscGhhKSwgdGhpcy5tb2RlbCk7XG5cdH0sXG5cblx0YWxwaGE6IGZ1bmN0aW9uICh2YWwpIHtcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIG5ldyBDb2xvcih0aGlzLmNvbG9yLmNvbmNhdChNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2YWwpKSksIHRoaXMubW9kZWwpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnZhbHBoYTtcblx0fSxcblxuXHQvLyByZ2Jcblx0cmVkOiBnZXRzZXQoJ3JnYicsIDAsIG1heGZuKDI1NSkpLFxuXHRncmVlbjogZ2V0c2V0KCdyZ2InLCAxLCBtYXhmbigyNTUpKSxcblx0Ymx1ZTogZ2V0c2V0KCdyZ2InLCAyLCBtYXhmbigyNTUpKSxcblxuXHRodWU6IGdldHNldChbJ2hzbCcsICdoc3YnLCAnaHNsJywgJ2h3YicsICdoY2cnXSwgMCwgZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gKCh2YWwgJSAzNjApICsgMzYwKSAlIDM2MDsgfSksIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYnJhY2Utc3R5bGVcblxuXHRzYXR1cmF0aW9ubDogZ2V0c2V0KCdoc2wnLCAxLCBtYXhmbigxMDApKSxcblx0bGlnaHRuZXNzOiBnZXRzZXQoJ2hzbCcsIDIsIG1heGZuKDEwMCkpLFxuXG5cdHNhdHVyYXRpb252OiBnZXRzZXQoJ2hzdicsIDEsIG1heGZuKDEwMCkpLFxuXHR2YWx1ZTogZ2V0c2V0KCdoc3YnLCAyLCBtYXhmbigxMDApKSxcblxuXHRjaHJvbWE6IGdldHNldCgnaGNnJywgMSwgbWF4Zm4oMTAwKSksXG5cdGdyYXk6IGdldHNldCgnaGNnJywgMiwgbWF4Zm4oMTAwKSksXG5cblx0d2hpdGU6IGdldHNldCgnaHdiJywgMSwgbWF4Zm4oMTAwKSksXG5cdHdibGFjazogZ2V0c2V0KCdod2InLCAyLCBtYXhmbigxMDApKSxcblxuXHRjeWFuOiBnZXRzZXQoJ2NteWsnLCAwLCBtYXhmbigxMDApKSxcblx0bWFnZW50YTogZ2V0c2V0KCdjbXlrJywgMSwgbWF4Zm4oMTAwKSksXG5cdHllbGxvdzogZ2V0c2V0KCdjbXlrJywgMiwgbWF4Zm4oMTAwKSksXG5cdGJsYWNrOiBnZXRzZXQoJ2NteWsnLCAzLCBtYXhmbigxMDApKSxcblxuXHR4OiBnZXRzZXQoJ3h5eicsIDAsIG1heGZuKDEwMCkpLFxuXHR5OiBnZXRzZXQoJ3h5eicsIDEsIG1heGZuKDEwMCkpLFxuXHR6OiBnZXRzZXQoJ3h5eicsIDIsIG1heGZuKDEwMCkpLFxuXG5cdGw6IGdldHNldCgnbGFiJywgMCwgbWF4Zm4oMTAwKSksXG5cdGE6IGdldHNldCgnbGFiJywgMSksXG5cdGI6IGdldHNldCgnbGFiJywgMiksXG5cblx0a2V5d29yZDogZnVuY3Rpb24gKHZhbCkge1xuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKHZhbCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbnZlcnRbdGhpcy5tb2RlbF0ua2V5d29yZCh0aGlzLmNvbG9yKTtcblx0fSxcblxuXHRoZXg6IGZ1bmN0aW9uICh2YWwpIHtcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIG5ldyBDb2xvcih2YWwpO1xuXHRcdH1cblxuXHRcdHJldHVybiBjb2xvclN0cmluZy50by5oZXgodGhpcy5yZ2IoKS5yb3VuZCgpLmNvbG9yKTtcblx0fSxcblxuXHRyZ2JOdW1iZXI6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgcmdiID0gdGhpcy5yZ2IoKS5jb2xvcjtcblx0XHRyZXR1cm4gKChyZ2JbMF0gJiAweEZGKSA8PCAxNikgfCAoKHJnYlsxXSAmIDB4RkYpIDw8IDgpIHwgKHJnYlsyXSAmIDB4RkYpO1xuXHR9LFxuXG5cdGx1bWlub3NpdHk6IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9XQ0FHMjAvI3JlbGF0aXZlbHVtaW5hbmNlZGVmXG5cdFx0dmFyIHJnYiA9IHRoaXMucmdiKCkuY29sb3I7XG5cblx0XHR2YXIgbHVtID0gW107XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZ2IubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBjaGFuID0gcmdiW2ldIC8gMjU1O1xuXHRcdFx0bHVtW2ldID0gKGNoYW4gPD0gMC4wMzkyOCkgPyBjaGFuIC8gMTIuOTIgOiBNYXRoLnBvdygoKGNoYW4gKyAwLjA1NSkgLyAxLjA1NSksIDIuNCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIDAuMjEyNiAqIGx1bVswXSArIDAuNzE1MiAqIGx1bVsxXSArIDAuMDcyMiAqIGx1bVsyXTtcblx0fSxcblxuXHRjb250cmFzdDogZnVuY3Rpb24gKGNvbG9yMikge1xuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1dDQUcyMC8jY29udHJhc3QtcmF0aW9kZWZcblx0XHR2YXIgbHVtMSA9IHRoaXMubHVtaW5vc2l0eSgpO1xuXHRcdHZhciBsdW0yID0gY29sb3IyLmx1bWlub3NpdHkoKTtcblxuXHRcdGlmIChsdW0xID4gbHVtMikge1xuXHRcdFx0cmV0dXJuIChsdW0xICsgMC4wNSkgLyAobHVtMiArIDAuMDUpO1xuXHRcdH1cblxuXHRcdHJldHVybiAobHVtMiArIDAuMDUpIC8gKGx1bTEgKyAwLjA1KTtcblx0fSxcblxuXHRsZXZlbDogZnVuY3Rpb24gKGNvbG9yMikge1xuXHRcdHZhciBjb250cmFzdFJhdGlvID0gdGhpcy5jb250cmFzdChjb2xvcjIpO1xuXHRcdGlmIChjb250cmFzdFJhdGlvID49IDcuMSkge1xuXHRcdFx0cmV0dXJuICdBQUEnO1xuXHRcdH1cblxuXHRcdHJldHVybiAoY29udHJhc3RSYXRpbyA+PSA0LjUpID8gJ0FBJyA6ICcnO1xuXHR9LFxuXG5cdGlzRGFyazogZnVuY3Rpb24gKCkge1xuXHRcdC8vIFlJUSBlcXVhdGlvbiBmcm9tIGh0dHA6Ly8yNHdheXMub3JnLzIwMTAvY2FsY3VsYXRpbmctY29sb3ItY29udHJhc3Rcblx0XHR2YXIgcmdiID0gdGhpcy5yZ2IoKS5jb2xvcjtcblx0XHR2YXIgeWlxID0gKHJnYlswXSAqIDI5OSArIHJnYlsxXSAqIDU4NyArIHJnYlsyXSAqIDExNCkgLyAxMDAwO1xuXHRcdHJldHVybiB5aXEgPCAxMjg7XG5cdH0sXG5cblx0aXNMaWdodDogZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiAhdGhpcy5pc0RhcmsoKTtcblx0fSxcblxuXHRuZWdhdGU6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgcmdiID0gdGhpcy5yZ2IoKTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuXHRcdFx0cmdiLmNvbG9yW2ldID0gMjU1IC0gcmdiLmNvbG9yW2ldO1xuXHRcdH1cblx0XHRyZXR1cm4gcmdiO1xuXHR9LFxuXG5cdGxpZ2h0ZW46IGZ1bmN0aW9uIChyYXRpbykge1xuXHRcdHZhciBoc2wgPSB0aGlzLmhzbCgpO1xuXHRcdGhzbC5jb2xvclsyXSArPSBoc2wuY29sb3JbMl0gKiByYXRpbztcblx0XHRyZXR1cm4gaHNsO1xuXHR9LFxuXG5cdGRhcmtlbjogZnVuY3Rpb24gKHJhdGlvKSB7XG5cdFx0dmFyIGhzbCA9IHRoaXMuaHNsKCk7XG5cdFx0aHNsLmNvbG9yWzJdIC09IGhzbC5jb2xvclsyXSAqIHJhdGlvO1xuXHRcdHJldHVybiBoc2w7XG5cdH0sXG5cblx0c2F0dXJhdGU6IGZ1bmN0aW9uIChyYXRpbykge1xuXHRcdHZhciBoc2wgPSB0aGlzLmhzbCgpO1xuXHRcdGhzbC5jb2xvclsxXSArPSBoc2wuY29sb3JbMV0gKiByYXRpbztcblx0XHRyZXR1cm4gaHNsO1xuXHR9LFxuXG5cdGRlc2F0dXJhdGU6IGZ1bmN0aW9uIChyYXRpbykge1xuXHRcdHZhciBoc2wgPSB0aGlzLmhzbCgpO1xuXHRcdGhzbC5jb2xvclsxXSAtPSBoc2wuY29sb3JbMV0gKiByYXRpbztcblx0XHRyZXR1cm4gaHNsO1xuXHR9LFxuXG5cdHdoaXRlbjogZnVuY3Rpb24gKHJhdGlvKSB7XG5cdFx0dmFyIGh3YiA9IHRoaXMuaHdiKCk7XG5cdFx0aHdiLmNvbG9yWzFdICs9IGh3Yi5jb2xvclsxXSAqIHJhdGlvO1xuXHRcdHJldHVybiBod2I7XG5cdH0sXG5cblx0YmxhY2tlbjogZnVuY3Rpb24gKHJhdGlvKSB7XG5cdFx0dmFyIGh3YiA9IHRoaXMuaHdiKCk7XG5cdFx0aHdiLmNvbG9yWzJdICs9IGh3Yi5jb2xvclsyXSAqIHJhdGlvO1xuXHRcdHJldHVybiBod2I7XG5cdH0sXG5cblx0Z3JheXNjYWxlOiBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HcmF5c2NhbGUjQ29udmVydGluZ19jb2xvcl90b19ncmF5c2NhbGVcblx0XHR2YXIgcmdiID0gdGhpcy5yZ2IoKS5jb2xvcjtcblx0XHR2YXIgdmFsID0gcmdiWzBdICogMC4zICsgcmdiWzFdICogMC41OSArIHJnYlsyXSAqIDAuMTE7XG5cdFx0cmV0dXJuIENvbG9yLnJnYih2YWwsIHZhbCwgdmFsKTtcblx0fSxcblxuXHRmYWRlOiBmdW5jdGlvbiAocmF0aW8pIHtcblx0XHRyZXR1cm4gdGhpcy5hbHBoYSh0aGlzLnZhbHBoYSAtICh0aGlzLnZhbHBoYSAqIHJhdGlvKSk7XG5cdH0sXG5cblx0b3BhcXVlcjogZnVuY3Rpb24gKHJhdGlvKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWxwaGEodGhpcy52YWxwaGEgKyAodGhpcy52YWxwaGEgKiByYXRpbykpO1xuXHR9LFxuXG5cdHJvdGF0ZTogZnVuY3Rpb24gKGRlZ3JlZXMpIHtcblx0XHR2YXIgaHNsID0gdGhpcy5oc2woKTtcblx0XHR2YXIgaHVlID0gaHNsLmNvbG9yWzBdO1xuXHRcdGh1ZSA9IChodWUgKyBkZWdyZWVzKSAlIDM2MDtcblx0XHRodWUgPSBodWUgPCAwID8gMzYwICsgaHVlIDogaHVlO1xuXHRcdGhzbC5jb2xvclswXSA9IGh1ZTtcblx0XHRyZXR1cm4gaHNsO1xuXHR9LFxuXG5cdG1peDogZnVuY3Rpb24gKG1peGluQ29sb3IsIHdlaWdodCkge1xuXHRcdC8vIHBvcnRlZCBmcm9tIHNhc3MgaW1wbGVtZW50YXRpb24gaW4gQ1xuXHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYXNzL2xpYnNhc3MvYmxvYi8wZTZiNGEyODUwMDkyMzU2YWEzZWNlMDdjNmIyNDlmMDIyMWNhY2VkL2Z1bmN0aW9ucy5jcHAjTDIwOVxuXHRcdGlmICghbWl4aW5Db2xvciB8fCAhbWl4aW5Db2xvci5yZ2IpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignQXJndW1lbnQgdG8gXCJtaXhcIiB3YXMgbm90IGEgQ29sb3IgaW5zdGFuY2UsIGJ1dCByYXRoZXIgYW4gaW5zdGFuY2Ugb2YgJyArIHR5cGVvZiBtaXhpbkNvbG9yKTtcblx0XHR9XG5cdFx0dmFyIGNvbG9yMSA9IG1peGluQ29sb3IucmdiKCk7XG5cdFx0dmFyIGNvbG9yMiA9IHRoaXMucmdiKCk7XG5cdFx0dmFyIHAgPSB3ZWlnaHQgPT09IHVuZGVmaW5lZCA/IDAuNSA6IHdlaWdodDtcblxuXHRcdHZhciB3ID0gMiAqIHAgLSAxO1xuXHRcdHZhciBhID0gY29sb3IxLmFscGhhKCkgLSBjb2xvcjIuYWxwaGEoKTtcblxuXHRcdHZhciB3MSA9ICgoKHcgKiBhID09PSAtMSkgPyB3IDogKHcgKyBhKSAvICgxICsgdyAqIGEpKSArIDEpIC8gMi4wO1xuXHRcdHZhciB3MiA9IDEgLSB3MTtcblxuXHRcdHJldHVybiBDb2xvci5yZ2IoXG5cdFx0XHRcdHcxICogY29sb3IxLnJlZCgpICsgdzIgKiBjb2xvcjIucmVkKCksXG5cdFx0XHRcdHcxICogY29sb3IxLmdyZWVuKCkgKyB3MiAqIGNvbG9yMi5ncmVlbigpLFxuXHRcdFx0XHR3MSAqIGNvbG9yMS5ibHVlKCkgKyB3MiAqIGNvbG9yMi5ibHVlKCksXG5cdFx0XHRcdGNvbG9yMS5hbHBoYSgpICogcCArIGNvbG9yMi5hbHBoYSgpICogKDEgLSBwKSk7XG5cdH1cbn07XG5cbi8vIG1vZGVsIGNvbnZlcnNpb24gbWV0aG9kcyBhbmQgc3RhdGljIGNvbnN0cnVjdG9yc1xuT2JqZWN0LmtleXMoY29udmVydCkuZm9yRWFjaChmdW5jdGlvbiAobW9kZWwpIHtcblx0aWYgKHNraXBwZWRNb2RlbHMuaW5kZXhPZihtb2RlbCkgIT09IC0xKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0dmFyIGNoYW5uZWxzID0gY29udmVydFttb2RlbF0uY2hhbm5lbHM7XG5cblx0Ly8gY29udmVyc2lvbiBtZXRob2RzXG5cdENvbG9yLnByb3RvdHlwZVttb2RlbF0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHRoaXMubW9kZWwgPT09IG1vZGVsKSB7XG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKHRoaXMpO1xuXHRcdH1cblxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKGFyZ3VtZW50cywgbW9kZWwpO1xuXHRcdH1cblxuXHRcdHZhciBuZXdBbHBoYSA9IHR5cGVvZiBhcmd1bWVudHNbY2hhbm5lbHNdID09PSAnbnVtYmVyJyA/IGNoYW5uZWxzIDogdGhpcy52YWxwaGE7XG5cdFx0cmV0dXJuIG5ldyBDb2xvcihhc3NlcnRBcnJheShjb252ZXJ0W3RoaXMubW9kZWxdW21vZGVsXS5yYXcodGhpcy5jb2xvcikpLmNvbmNhdChuZXdBbHBoYSksIG1vZGVsKTtcblx0fTtcblxuXHQvLyAnc3RhdGljJyBjb25zdHJ1Y3Rpb24gbWV0aG9kc1xuXHRDb2xvclttb2RlbF0gPSBmdW5jdGlvbiAoY29sb3IpIHtcblx0XHRpZiAodHlwZW9mIGNvbG9yID09PSAnbnVtYmVyJykge1xuXHRcdFx0Y29sb3IgPSB6ZXJvQXJyYXkoX3NsaWNlLmNhbGwoYXJndW1lbnRzKSwgY2hhbm5lbHMpO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV3IENvbG9yKGNvbG9yLCBtb2RlbCk7XG5cdH07XG59KTtcblxuZnVuY3Rpb24gcm91bmRUbyhudW0sIHBsYWNlcykge1xuXHRyZXR1cm4gTnVtYmVyKG51bS50b0ZpeGVkKHBsYWNlcykpO1xufVxuXG5mdW5jdGlvbiByb3VuZFRvUGxhY2UocGxhY2VzKSB7XG5cdHJldHVybiBmdW5jdGlvbiAobnVtKSB7XG5cdFx0cmV0dXJuIHJvdW5kVG8obnVtLCBwbGFjZXMpO1xuXHR9O1xufVxuXG5mdW5jdGlvbiBnZXRzZXQobW9kZWwsIGNoYW5uZWwsIG1vZGlmaWVyKSB7XG5cdG1vZGVsID0gQXJyYXkuaXNBcnJheShtb2RlbCkgPyBtb2RlbCA6IFttb2RlbF07XG5cblx0bW9kZWwuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuXHRcdChsaW1pdGVyc1ttXSB8fCAobGltaXRlcnNbbV0gPSBbXSkpW2NoYW5uZWxdID0gbW9kaWZpZXI7XG5cdH0pO1xuXG5cdG1vZGVsID0gbW9kZWxbMF07XG5cblx0cmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcblx0XHR2YXIgcmVzdWx0O1xuXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRcdGlmIChtb2RpZmllcikge1xuXHRcdFx0XHR2YWwgPSBtb2RpZmllcih2YWwpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXN1bHQgPSB0aGlzW21vZGVsXSgpO1xuXHRcdFx0cmVzdWx0LmNvbG9yW2NoYW5uZWxdID0gdmFsO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cblx0XHRyZXN1bHQgPSB0aGlzW21vZGVsXSgpLmNvbG9yW2NoYW5uZWxdO1xuXHRcdGlmIChtb2RpZmllcikge1xuXHRcdFx0cmVzdWx0ID0gbW9kaWZpZXIocmVzdWx0KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xufVxuXG5mdW5jdGlvbiBtYXhmbihtYXgpIHtcblx0cmV0dXJuIGZ1bmN0aW9uICh2KSB7XG5cdFx0cmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKG1heCwgdikpO1xuXHR9O1xufVxuXG5mdW5jdGlvbiBhc3NlcnRBcnJheSh2YWwpIHtcblx0cmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbCA6IFt2YWxdO1xufVxuXG5mdW5jdGlvbiB6ZXJvQXJyYXkoYXJyLCBsZW5ndGgpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdGlmICh0eXBlb2YgYXJyW2ldICE9PSAnbnVtYmVyJykge1xuXHRcdFx0YXJyW2ldID0gMDtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYXJyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbG9yO1xuIl19