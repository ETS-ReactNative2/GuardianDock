0d76a2ab795153dce0bdea27ab325c8d
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));

var _excluded = ["children", "style", "onPress", "onLongPress", "to", "accessibilityRole"],
    _excluded2 = ["icon", "label", "labelStyle", "to", "focused", "allowFontScaling", "activeTintColor", "inactiveTintColor", "activeBackgroundColor", "inactiveBackgroundColor", "style", "onPress", "pressColor", "pressOpacity"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = DrawerItem;

var _elements = require("@react-navigation/elements");

var _native = require("@react-navigation/native");

var _color = _interopRequireDefault(require("color"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

var LinkPressable = function LinkPressable(_ref) {
  var children = _ref.children,
      style = _ref.style,
      _onPress = _ref.onPress,
      onLongPress = _ref.onLongPress,
      to = _ref.to,
      accessibilityRole = _ref.accessibilityRole,
      rest = (0, _objectWithoutProperties2.default)(_ref, _excluded);

  if (_reactNative.Platform.OS === 'web' && to) {
    return React.createElement(_native.Link, _extends({}, rest, {
      to: to,
      style: [styles.button, style],
      onPress: function onPress(e) {
        if (!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) && (e.button == null || e.button === 0)) {
          e.preventDefault();
          _onPress === null || _onPress === void 0 ? void 0 : _onPress(e);
        }
      },
      onLongPress: onLongPress !== null && onLongPress !== void 0 ? onLongPress : undefined
    }), children);
  } else {
    return React.createElement(_elements.PlatformPressable, _extends({}, rest, {
      accessibilityRole: accessibilityRole,
      onPress: _onPress
    }), React.createElement(_reactNative.View, {
      style: style
    }, children));
  }
};

function DrawerItem(props) {
  var _ref2 = (0, _native.useTheme)(),
      colors = _ref2.colors;

  var icon = props.icon,
      label = props.label,
      labelStyle = props.labelStyle,
      to = props.to,
      _props$focused = props.focused,
      focused = _props$focused === void 0 ? false : _props$focused,
      allowFontScaling = props.allowFontScaling,
      _props$activeTintColo = props.activeTintColor,
      activeTintColor = _props$activeTintColo === void 0 ? colors.primary : _props$activeTintColo,
      _props$inactiveTintCo = props.inactiveTintColor,
      inactiveTintColor = _props$inactiveTintCo === void 0 ? (0, _color.default)(colors.text).alpha(0.68).rgb().string() : _props$inactiveTintCo,
      _props$activeBackgrou = props.activeBackgroundColor,
      activeBackgroundColor = _props$activeBackgrou === void 0 ? (0, _color.default)(activeTintColor).alpha(0.12).rgb().string() : _props$activeBackgrou,
      _props$inactiveBackgr = props.inactiveBackgroundColor,
      inactiveBackgroundColor = _props$inactiveBackgr === void 0 ? 'transparent' : _props$inactiveBackgr,
      style = props.style,
      onPress = props.onPress,
      pressColor = props.pressColor,
      pressOpacity = props.pressOpacity,
      rest = (0, _objectWithoutProperties2.default)(props, _excluded2);

  var _reactNative$StyleShe = _reactNative.StyleSheet.flatten(style || {}),
      _reactNative$StyleShe2 = _reactNative$StyleShe.borderRadius,
      borderRadius = _reactNative$StyleShe2 === void 0 ? 4 : _reactNative$StyleShe2;

  var color = focused ? activeTintColor : inactiveTintColor;
  var backgroundColor = focused ? activeBackgroundColor : inactiveBackgroundColor;
  var iconNode = icon ? icon({
    size: 24,
    focused: focused,
    color: color
  }) : null;
  return React.createElement(_reactNative.View, _extends({
    collapsable: false
  }, rest, {
    style: [styles.container, {
      borderRadius: borderRadius,
      backgroundColor: backgroundColor
    }, style]
  }), React.createElement(LinkPressable, {
    onPress: onPress,
    style: [styles.wrapper, {
      borderRadius: borderRadius
    }],
    accessibilityRole: "button",
    accessibilityState: {
      selected: focused
    },
    pressColor: pressColor,
    pressOpacity: pressOpacity,
    to: to
  }, React.createElement(React.Fragment, null, iconNode, React.createElement(_reactNative.View, {
    style: [styles.label, {
      marginLeft: iconNode ? 32 : 0,
      marginVertical: 5
    }]
  }, typeof label === 'string' ? React.createElement(_reactNative.Text, {
    numberOfLines: 1,
    allowFontScaling: allowFontScaling,
    style: [{
      color: color,
      fontWeight: '500'
    }, labelStyle]
  }, label) : label({
    color: color,
    focused: focused
  })))));
}

var styles = _reactNative.StyleSheet.create({
  container: {
    marginHorizontal: 10,
    marginVertical: 4,
    overflow: 'hidden'
  },
  wrapper: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: 8
  },
  label: {
    marginRight: 32,
    flex: 1
  },
  button: {
    display: 'flex'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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IjpbIkxpbmtQcmVzc2FibGUiLCJjaGlsZHJlbiIsInN0eWxlIiwib25QcmVzcyIsIm9uTG9uZ1ByZXNzIiwidG8iLCJhY2Nlc3NpYmlsaXR5Um9sZSIsInJlc3QiLCJQbGF0Zm9ybSIsIk9TIiwiUmVhY3QiLCJfbmF0aXZlIiwic3R5bGVzIiwiYnV0dG9uIiwiZSIsIm1ldGFLZXkiLCJhbHRLZXkiLCJjdHJsS2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInVuZGVmaW5lZCIsIl9lbGVtZW50cyIsIl9yZWFjdE5hdGl2ZSIsIkRyYXdlckl0ZW0iLCJwcm9wcyIsImNvbG9ycyIsImljb24iLCJsYWJlbCIsImxhYmVsU3R5bGUiLCJmb2N1c2VkIiwiYWxsb3dGb250U2NhbGluZyIsImFjdGl2ZVRpbnRDb2xvciIsInByaW1hcnkiLCJpbmFjdGl2ZVRpbnRDb2xvciIsInRleHQiLCJhbHBoYSIsInJnYiIsInN0cmluZyIsImFjdGl2ZUJhY2tncm91bmRDb2xvciIsImluYWN0aXZlQmFja2dyb3VuZENvbG9yIiwicHJlc3NDb2xvciIsInByZXNzT3BhY2l0eSIsIlN0eWxlU2hlZXQiLCJmbGF0dGVuIiwiYm9yZGVyUmFkaXVzIiwiY29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJpY29uTm9kZSIsInNpemUiLCJjb2xsYXBzYWJsZSIsImNvbnRhaW5lciIsIndyYXBwZXIiLCJhY2Nlc3NpYmlsaXR5U3RhdGUiLCJzZWxlY3RlZCIsIkZyYWdtZW50IiwibWFyZ2luTGVmdCIsIm1hcmdpblZlcnRpY2FsIiwibnVtYmVyT2ZMaW5lcyIsImZvbnRXZWlnaHQiLCJjcmVhdGUiLCJtYXJnaW5Ib3Jpem9udGFsIiwib3ZlcmZsb3ciLCJmbGV4RGlyZWN0aW9uIiwiYWxpZ25JdGVtcyIsInBhZGRpbmciLCJtYXJnaW5SaWdodCIsImZsZXgiLCJkaXNwbGF5Il0sInNvdXJjZXMiOlsiRHJhd2VySXRlbS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxhdGZvcm1QcmVzc2FibGUgfSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9lbGVtZW50cyc7XG5pbXBvcnQgeyBMaW5rLCB1c2VUaGVtZSB9IGZyb20gJ0ByZWFjdC1uYXZpZ2F0aW9uL25hdGl2ZSc7XG5pbXBvcnQgQ29sb3IgZnJvbSAnY29sb3InO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgUGxhdGZvcm0sXG4gIFN0eWxlUHJvcCxcbiAgU3R5bGVTaGVldCxcbiAgVGV4dCxcbiAgVGV4dFN0eWxlLFxuICBWaWV3LFxuICBWaWV3U3R5bGUsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIC8qKlxuICAgKiBUaGUgbGFiZWwgdGV4dCBvZiB0aGUgaXRlbS5cbiAgICovXG4gIGxhYmVsOlxuICAgIHwgc3RyaW5nXG4gICAgfCAoKHByb3BzOiB7IGZvY3VzZWQ6IGJvb2xlYW47IGNvbG9yOiBzdHJpbmcgfSkgPT4gUmVhY3QuUmVhY3ROb2RlKTtcbiAgLyoqXG4gICAqIEljb24gdG8gZGlzcGxheSBmb3IgdGhlIGBEcmF3ZXJJdGVtYC5cbiAgICovXG4gIGljb24/OiAocHJvcHM6IHtcbiAgICBmb2N1c2VkOiBib29sZWFuO1xuICAgIHNpemU6IG51bWJlcjtcbiAgICBjb2xvcjogc3RyaW5nO1xuICB9KSA9PiBSZWFjdC5SZWFjdE5vZGU7XG4gIC8qKlxuICAgKiBVUkwgdG8gdXNlIGZvciB0aGUgbGluayB0byB0aGUgdGFiLlxuICAgKi9cbiAgdG8/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGhpZ2hsaWdodCB0aGUgZHJhd2VyIGl0ZW0gYXMgYWN0aXZlLlxuICAgKi9cbiAgZm9jdXNlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIG9uIHByZXNzLlxuICAgKi9cbiAgb25QcmVzczogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIENvbG9yIGZvciB0aGUgaWNvbiBhbmQgbGFiZWwgd2hlbiB0aGUgaXRlbSBpcyBhY3RpdmUuXG4gICAqL1xuICBhY3RpdmVUaW50Q29sb3I/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDb2xvciBmb3IgdGhlIGljb24gYW5kIGxhYmVsIHdoZW4gdGhlIGl0ZW0gaXMgaW5hY3RpdmUuXG4gICAqL1xuICBpbmFjdGl2ZVRpbnRDb2xvcj86IHN0cmluZztcbiAgLyoqXG4gICAqIEJhY2tncm91bmQgY29sb3IgZm9yIGl0ZW0gd2hlbiBpdHMgYWN0aXZlLlxuICAgKi9cbiAgYWN0aXZlQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAvKipcbiAgICogQmFja2dyb3VuZCBjb2xvciBmb3IgaXRlbSB3aGVuIGl0cyBpbmFjdGl2ZS5cbiAgICovXG4gIGluYWN0aXZlQmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAvKipcbiAgICogQ29sb3Igb2YgdGhlIHRvdWNoYWJsZSBlZmZlY3Qgb24gcHJlc3MuXG4gICAqIE9ubHkgc3VwcG9ydGVkIG9uIEFuZHJvaWQuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBwcmVzc0NvbG9yPzogc3RyaW5nO1xuICAvKipcbiAgICogT3BhY2l0eSBvZiB0aGUgdG91Y2hhYmxlIGVmZmVjdCBvbiBwcmVzcy5cbiAgICogT25seSBzdXBwb3J0ZWQgb24gaU9TLlxuICAgKlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBwcmVzc09wYWNpdHk/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBTdHlsZSBvYmplY3QgZm9yIHRoZSBsYWJlbCBlbGVtZW50LlxuICAgKi9cbiAgbGFiZWxTdHlsZT86IFN0eWxlUHJvcDxUZXh0U3R5bGU+O1xuICAvKipcbiAgICogU3R5bGUgb2JqZWN0IGZvciB0aGUgd3JhcHBlciBlbGVtZW50LlxuICAgKi9cbiAgc3R5bGU/OiBTdHlsZVByb3A8Vmlld1N0eWxlPjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgbGFiZWwgZm9udCBzaG91bGQgc2NhbGUgdG8gcmVzcGVjdCBUZXh0IFNpemUgYWNjZXNzaWJpbGl0eSBzZXR0aW5ncy5cbiAgICovXG4gIGFsbG93Rm9udFNjYWxpbmc/OiBib29sZWFuO1xufTtcblxuY29uc3QgTGlua1ByZXNzYWJsZSA9ICh7XG4gIGNoaWxkcmVuLFxuICBzdHlsZSxcbiAgb25QcmVzcyxcbiAgb25Mb25nUHJlc3MsXG4gIHRvLFxuICBhY2Nlc3NpYmlsaXR5Um9sZSxcbiAgLi4ucmVzdFxufTogT21pdDxSZWFjdC5Db21wb25lbnRQcm9wczx0eXBlb2YgUGxhdGZvcm1QcmVzc2FibGU+LCAnc3R5bGUnPiAmIHtcbiAgc3R5bGU6IFN0eWxlUHJvcDxWaWV3U3R5bGU+O1xufSAmIHtcbiAgdG8/OiBzdHJpbmc7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIG9uUHJlc3M/OiAoKSA9PiB2b2lkO1xufSkgPT4ge1xuICBpZiAoUGxhdGZvcm0uT1MgPT09ICd3ZWInICYmIHRvKSB7XG4gICAgLy8gUmVhY3QgTmF0aXZlIFdlYiBkb2Vzbid0IGZvcndhcmQgYG9uQ2xpY2tgIGlmIHdlIHVzZSBgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrYC5cbiAgICAvLyBXZSBuZWVkIHRvIHVzZSBgb25DbGlja2AgdG8gYmUgYWJsZSB0byBwcmV2ZW50IGRlZmF1bHQgYnJvd3NlciBoYW5kbGluZyBvZiBsaW5rcy5cbiAgICByZXR1cm4gKFxuICAgICAgPExpbmtcbiAgICAgICAgey4uLnJlc3R9XG4gICAgICAgIHRvPXt0b31cbiAgICAgICAgc3R5bGU9e1tzdHlsZXMuYnV0dG9uLCBzdHlsZV19XG4gICAgICAgIG9uUHJlc3M9eyhlOiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAhKGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSkgJiYgLy8gaWdub3JlIGNsaWNrcyB3aXRoIG1vZGlmaWVyIGtleXNcbiAgICAgICAgICAgIChlLmJ1dHRvbiA9PSBudWxsIHx8IGUuYnV0dG9uID09PSAwKSAvLyBpZ25vcmUgZXZlcnl0aGluZyBidXQgbGVmdCBjbGlja3NcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIG9uUHJlc3M/LihlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAgIG9uTG9uZ1ByZXNzPXtvbkxvbmdQcmVzcyA/PyB1bmRlZmluZWR9XG4gICAgICA+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvTGluaz5cbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXG4gICAgICA8UGxhdGZvcm1QcmVzc2FibGVcbiAgICAgICAgey4uLnJlc3R9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlSb2xlPXthY2Nlc3NpYmlsaXR5Um9sZX1cbiAgICAgICAgb25QcmVzcz17b25QcmVzc31cbiAgICAgID5cbiAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlfT57Y2hpbGRyZW59PC9WaWV3PlxuICAgICAgPC9QbGF0Zm9ybVByZXNzYWJsZT5cbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIEEgY29tcG9uZW50IHVzZWQgdG8gc2hvdyBhbiBhY3Rpb24gaXRlbSB3aXRoIGFuIGljb24gYW5kIGEgbGFiZWwgaW4gYSBuYXZpZ2F0aW9uIGRyYXdlci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRHJhd2VySXRlbShwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBjb2xvcnMgfSA9IHVzZVRoZW1lKCk7XG5cbiAgY29uc3Qge1xuICAgIGljb24sXG4gICAgbGFiZWwsXG4gICAgbGFiZWxTdHlsZSxcbiAgICB0byxcbiAgICBmb2N1c2VkID0gZmFsc2UsXG4gICAgYWxsb3dGb250U2NhbGluZyxcbiAgICBhY3RpdmVUaW50Q29sb3IgPSBjb2xvcnMucHJpbWFyeSxcbiAgICBpbmFjdGl2ZVRpbnRDb2xvciA9IENvbG9yKGNvbG9ycy50ZXh0KS5hbHBoYSgwLjY4KS5yZ2IoKS5zdHJpbmcoKSxcbiAgICBhY3RpdmVCYWNrZ3JvdW5kQ29sb3IgPSBDb2xvcihhY3RpdmVUaW50Q29sb3IpLmFscGhhKDAuMTIpLnJnYigpLnN0cmluZygpLFxuICAgIGluYWN0aXZlQmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JyxcbiAgICBzdHlsZSxcbiAgICBvblByZXNzLFxuICAgIHByZXNzQ29sb3IsXG4gICAgcHJlc3NPcGFjaXR5LFxuICAgIC4uLnJlc3RcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IHsgYm9yZGVyUmFkaXVzID0gNCB9ID0gU3R5bGVTaGVldC5mbGF0dGVuKHN0eWxlIHx8IHt9KTtcbiAgY29uc3QgY29sb3IgPSBmb2N1c2VkID8gYWN0aXZlVGludENvbG9yIDogaW5hY3RpdmVUaW50Q29sb3I7XG4gIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IGZvY3VzZWRcbiAgICA/IGFjdGl2ZUJhY2tncm91bmRDb2xvclxuICAgIDogaW5hY3RpdmVCYWNrZ3JvdW5kQ29sb3I7XG5cbiAgY29uc3QgaWNvbk5vZGUgPSBpY29uID8gaWNvbih7IHNpemU6IDI0LCBmb2N1c2VkLCBjb2xvciB9KSA6IG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICA8Vmlld1xuICAgICAgY29sbGFwc2FibGU9e2ZhbHNlfVxuICAgICAgey4uLnJlc3R9XG4gICAgICBzdHlsZT17W3N0eWxlcy5jb250YWluZXIsIHsgYm9yZGVyUmFkaXVzLCBiYWNrZ3JvdW5kQ29sb3IgfSwgc3R5bGVdfVxuICAgID5cbiAgICAgIDxMaW5rUHJlc3NhYmxlXG4gICAgICAgIG9uUHJlc3M9e29uUHJlc3N9XG4gICAgICAgIHN0eWxlPXtbc3R5bGVzLndyYXBwZXIsIHsgYm9yZGVyUmFkaXVzIH1dfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgIGFjY2Vzc2liaWxpdHlTdGF0ZT17eyBzZWxlY3RlZDogZm9jdXNlZCB9fVxuICAgICAgICBwcmVzc0NvbG9yPXtwcmVzc0NvbG9yfVxuICAgICAgICBwcmVzc09wYWNpdHk9e3ByZXNzT3BhY2l0eX1cbiAgICAgICAgdG89e3RvfVxuICAgICAgPlxuICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAge2ljb25Ob2RlfVxuICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICBzdHlsZXMubGFiZWwsXG4gICAgICAgICAgICAgIHsgbWFyZ2luTGVmdDogaWNvbk5vZGUgPyAzMiA6IDAsIG1hcmdpblZlcnRpY2FsOiA1IH0sXG4gICAgICAgICAgICBdfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0eXBlb2YgbGFiZWwgPT09ICdzdHJpbmcnID8gKFxuICAgICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICAgIG51bWJlck9mTGluZXM9ezF9XG4gICAgICAgICAgICAgICAgYWxsb3dGb250U2NhbGluZz17YWxsb3dGb250U2NhbGluZ31cbiAgICAgICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcixcbiAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogJzUwMCcsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgbGFiZWxTdHlsZSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2xhYmVsfVxuICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICBsYWJlbCh7IGNvbG9yLCBmb2N1c2VkIH0pXG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgIDwvTGlua1ByZXNzYWJsZT5cbiAgICA8L1ZpZXc+XG4gICk7XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgbWFyZ2luSG9yaXpvbnRhbDogMTAsXG4gICAgbWFyZ2luVmVydGljYWw6IDQsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICB9LFxuICB3cmFwcGVyOiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgcGFkZGluZzogOCxcbiAgfSxcbiAgbGFiZWw6IHtcbiAgICBtYXJnaW5SaWdodDogMzIsXG4gICAgZmxleDogMSxcbiAgfSxcbiAgYnV0dG9uOiB7XG4gICAgZGlzcGxheTogJ2ZsZXgnLFxuICB9LFxufSk7XG4iXX0=