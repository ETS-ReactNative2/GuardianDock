752341bd9be05d53d16817d78f0f351f
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var PixelRatio = require('../Utilities/PixelRatio');

var ReactNativeStyleAttributes = require('../Components/View/ReactNativeStyleAttributes');

var flatten = require('./flattenStyle');

var hairlineWidth = PixelRatio.roundToNearestPixel(0.4);

if (hairlineWidth === 0) {
  hairlineWidth = 1 / PixelRatio.get();
}

var absoluteFill = {
  position: 'absolute',
  left: 0,
  right: 0,
  top: 0,
  bottom: 0
};

if (__DEV__) {
  Object.freeze(absoluteFill);
}

module.exports = {
  hairlineWidth: hairlineWidth,
  absoluteFill: absoluteFill,
  absoluteFillObject: absoluteFill,
  compose: function compose(style1, style2) {
    if (style1 != null && style2 != null) {
      return [style1, style2];
    } else {
      return style1 != null ? style1 : style2;
    }
  },
  flatten: flatten,
  setStyleAttributePreprocessor: function setStyleAttributePreprocessor(property, process) {
    var value;

    if (ReactNativeStyleAttributes[property] === true) {
      value = {
        process: process
      };
    } else if (typeof ReactNativeStyleAttributes[property] === 'object') {
      value = (0, _extends2.default)({}, ReactNativeStyleAttributes[property], {
        process: process
      });
    } else {
      console.error(property + " is not a valid style attribute");
      return;
    }

    if (__DEV__ && typeof value.process === 'function') {
      console.warn("Overwriting " + property + " style attribute preprocessor");
    }

    ReactNativeStyleAttributes[property] = value;
  },
  create: function create(obj) {
    if (__DEV__) {
      for (var _key in obj) {
        if (obj[_key]) {
          Object.freeze(obj[_key]);
        }
      }
    }

    return obj;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0eWxlU2hlZXQuanMiXSwibmFtZXMiOlsiUGl4ZWxSYXRpbyIsInJlcXVpcmUiLCJSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcyIsImZsYXR0ZW4iLCJoYWlybGluZVdpZHRoIiwicm91bmRUb05lYXJlc3RQaXhlbCIsImdldCIsImFic29sdXRlRmlsbCIsInBvc2l0aW9uIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiX19ERVZfXyIsIk9iamVjdCIsImZyZWV6ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJhYnNvbHV0ZUZpbGxPYmplY3QiLCJjb21wb3NlIiwic3R5bGUxIiwic3R5bGUyIiwic2V0U3R5bGVBdHRyaWJ1dGVQcmVwcm9jZXNzb3IiLCJwcm9wZXJ0eSIsInByb2Nlc3MiLCJ2YWx1ZSIsImNvbnNvbGUiLCJlcnJvciIsIndhcm4iLCJjcmVhdGUiLCJvYmoiLCJrZXkiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7QUFFQSxJQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyx5QkFBRCxDQUExQjs7QUFDQSxJQUFNQywwQkFBMEIsR0FBR0QsT0FBTyxDQUFDLCtDQUFELENBQTFDOztBQUVBLElBQU1FLE9BQU8sR0FBR0YsT0FBTyxDQUFDLGdCQUFELENBQXZCOztBQW9KQSxJQUFJRyxhQUFxQixHQUFHSixVQUFVLENBQUNLLG1CQUFYLENBQStCLEdBQS9CLENBQTVCOztBQUNBLElBQUlELGFBQWEsS0FBSyxDQUF0QixFQUF5QjtBQUN2QkEsRUFBQUEsYUFBYSxHQUFHLElBQUlKLFVBQVUsQ0FBQ00sR0FBWCxFQUFwQjtBQUNEOztBQUVELElBQU1DLFlBQVksR0FBRztBQUNuQkMsRUFBQUEsUUFBUSxFQUFFLFVBRFM7QUFFbkJDLEVBQUFBLElBQUksRUFBRSxDQUZhO0FBR25CQyxFQUFBQSxLQUFLLEVBQUUsQ0FIWTtBQUluQkMsRUFBQUEsR0FBRyxFQUFFLENBSmM7QUFLbkJDLEVBQUFBLE1BQU0sRUFBRTtBQUxXLENBQXJCOztBQU9BLElBQUlDLE9BQUosRUFBYTtBQUNYQyxFQUFBQSxNQUFNLENBQUNDLE1BQVAsQ0FBY1IsWUFBZDtBQUNEOztBQThDRFMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBb0JmYixFQUFBQSxhQUFhLEVBQWJBLGFBcEJlO0FBMkJmRyxFQUFBQSxZQUFZLEVBQUdBLFlBM0JBO0FBeUNmVyxFQUFBQSxrQkFBa0IsRUFBRVgsWUF6Q0w7QUFpRGZZLEVBQUFBLE9BakRlLG1CQWtEYkMsTUFsRGEsRUFtRGJDLE1BbkRhLEVBb0RXO0FBQ3hCLFFBQUlELE1BQU0sSUFBSSxJQUFWLElBQWtCQyxNQUFNLElBQUksSUFBaEMsRUFBc0M7QUFDcEMsYUFBUSxDQUFDRCxNQUFELEVBQVNDLE1BQVQsQ0FBUjtBQUNELEtBRkQsTUFFTztBQUNMLGFBQU9ELE1BQU0sSUFBSSxJQUFWLEdBQWlCQSxNQUFqQixHQUEwQkMsTUFBakM7QUFDRDtBQUNGLEdBMURjO0FBbUdmbEIsRUFBQUEsT0FBTyxFQUFQQSxPQW5HZTtBQThHZm1CLEVBQUFBLDZCQTlHZSx5Q0ErR2JDLFFBL0dhLEVBZ0hiQyxPQWhIYSxFQWlIYjtBQUNBLFFBQUlDLEtBQUo7O0FBRUEsUUFBSXZCLDBCQUEwQixDQUFDcUIsUUFBRCxDQUExQixLQUF5QyxJQUE3QyxFQUFtRDtBQUNqREUsTUFBQUEsS0FBSyxHQUFHO0FBQUNELFFBQUFBLE9BQU8sRUFBUEE7QUFBRCxPQUFSO0FBQ0QsS0FGRCxNQUVPLElBQUksT0FBT3RCLDBCQUEwQixDQUFDcUIsUUFBRCxDQUFqQyxLQUFnRCxRQUFwRCxFQUE4RDtBQUNuRUUsTUFBQUEsS0FBSyw4QkFBT3ZCLDBCQUEwQixDQUFDcUIsUUFBRCxDQUFqQztBQUE2Q0MsUUFBQUEsT0FBTyxFQUFQQTtBQUE3QyxRQUFMO0FBQ0QsS0FGTSxNQUVBO0FBQ0xFLE1BQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUFpQkosUUFBakI7QUFDQTtBQUNEOztBQUVELFFBQUlWLE9BQU8sSUFBSSxPQUFPWSxLQUFLLENBQUNELE9BQWIsS0FBeUIsVUFBeEMsRUFBb0Q7QUFDbERFLE1BQUFBLE9BQU8sQ0FBQ0UsSUFBUixrQkFBNEJMLFFBQTVCO0FBQ0Q7O0FBRURyQixJQUFBQSwwQkFBMEIsQ0FBQ3FCLFFBQUQsQ0FBMUIsR0FBdUNFLEtBQXZDO0FBQ0QsR0FsSWM7QUF1SWZJLEVBQUFBLE1BdkllLGtCQXVJaUJDLEdBdklqQixFQXVJdUM7QUFJcEQsUUFBSWpCLE9BQUosRUFBYTtBQUNYLFdBQUssSUFBTWtCLElBQVgsSUFBa0JELEdBQWxCLEVBQXVCO0FBQ3JCLFlBQUlBLEdBQUcsQ0FBQ0MsSUFBRCxDQUFQLEVBQWM7QUFDWmpCLFVBQUFBLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjZSxHQUFHLENBQUNDLElBQUQsQ0FBakI7QUFDRDtBQUNGO0FBQ0Y7O0FBQ0QsV0FBT0QsR0FBUDtBQUNEO0FBbkpjLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgUGl4ZWxSYXRpbyA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9QaXhlbFJhdGlvJyk7XG5jb25zdCBSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvVmlldy9SZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcycpO1xuXG5jb25zdCBmbGF0dGVuID0gcmVxdWlyZSgnLi9mbGF0dGVuU3R5bGUnKTtcblxuaW1wb3J0IHR5cGUge1xuICBfX19fQ29sb3JWYWx1ZV9JbnRlcm5hbCxcbiAgX19fX1N0eWxlc19JbnRlcm5hbCxcbiAgX19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVfSW50ZXJuYWwsXG4gIF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcF9JbnRlcm5hbCxcbiAgX19fX1ZpZXdTdHlsZV9JbnRlcm5hbCxcbiAgX19fX1ZpZXdTdHlsZVByb3BfSW50ZXJuYWwsXG4gIF9fX19UZXh0U3R5bGVfSW50ZXJuYWwsXG4gIF9fX19UZXh0U3R5bGVQcm9wX0ludGVybmFsLFxuICBfX19fSW1hZ2VTdHlsZV9JbnRlcm5hbCxcbiAgX19fX0ltYWdlU3R5bGVQcm9wX0ludGVybmFsLFxufSBmcm9tICcuL1N0eWxlU2hlZXRUeXBlcyc7XG5cbi8qKlxuICogVGhpcyB0eXBlIHNob3VsZCBiZSB1c2VkIGFzIHRoZSB0eXBlIGZvciBhbnl0aGluZyB0aGF0IGlzIGEgY29sb3IuIEl0IGlzXG4gKiBtb3N0IHVzZWZ1bCB3aGVuIHVzaW5nIER5bmFtaWNDb2xvcklPUyB3aGljaCBjYW4gYmUgYSBzdHJpbmcgb3IgYSBkeW5hbWljXG4gKiBjb2xvciBvYmplY3QuXG4gKlxuICogdHlwZSBwcm9wcyA9IHtiYWNrZ3JvdW5kQ29sb3I6IENvbG9yVmFsdWV9O1xuICovXG5leHBvcnQgdHlwZSBDb2xvclZhbHVlID0gX19fX0NvbG9yVmFsdWVfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIHNob3VsZCBiZSB1c2VkIGFzIHRoZSB0eXBlIGZvciBhIHByb3AgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaFxuICogdG8gYSA8Vmlldz4ncyBgc3R5bGVgIHByb3AuIFRoaXMgZW5zdXJlcyBjYWxsIHNpdGVzIG9mIHRoZSBjb21wb25lbnRcbiAqIGNhbid0IHBhc3Mgc3R5bGVzIHRoYXQgVmlldyBkb2Vzbid0IHN1cHBvcnQgc3VjaCBhcyBgZm9udFNpemVgLmBcbiAqXG4gKiB0eXBlIFByb3BzID0ge3N0eWxlOiBWaWV3U3R5bGVQcm9wfVxuICogY29uc3QgTXlDb21wb25lbnQgPSAocHJvcHM6IFByb3BzKSA9PiA8VmlldyBzdHlsZT17cHJvcHMuc3R5bGV9IC8+XG4gKi9cbmV4cG9ydCB0eXBlIFZpZXdTdHlsZVByb3AgPSBfX19fVmlld1N0eWxlUHJvcF9JbnRlcm5hbDtcblxuLyoqXG4gKiBUaGlzIHR5cGUgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIHR5cGUgZm9yIGEgcHJvcCB0aGF0IGlzIHBhc3NlZCB0aHJvdWdoXG4gKiB0byBhIDxUZXh0PidzIGBzdHlsZWAgcHJvcC4gVGhpcyBlbnN1cmVzIGNhbGwgc2l0ZXMgb2YgdGhlIGNvbXBvbmVudFxuICogY2FuJ3QgcGFzcyBzdHlsZXMgdGhhdCBUZXh0IGRvZXNuJ3Qgc3VwcG9ydCBzdWNoIGFzIGByZXNpemVNb2RlYC5gXG4gKlxuICogdHlwZSBQcm9wcyA9IHtzdHlsZTogVGV4dFN0eWxlUHJvcH1cbiAqIGNvbnN0IE15Q29tcG9uZW50ID0gKHByb3BzOiBQcm9wcykgPT4gPFRleHQgc3R5bGU9e3Byb3BzLnN0eWxlfSAvPlxuICovXG5leHBvcnQgdHlwZSBUZXh0U3R5bGVQcm9wID0gX19fX1RleHRTdHlsZVByb3BfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIHNob3VsZCBiZSB1c2VkIGFzIHRoZSB0eXBlIGZvciBhIHByb3AgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaFxuICogdG8gYW4gPEltYWdlPidzIGBzdHlsZWAgcHJvcC4gVGhpcyBlbnN1cmVzIGNhbGwgc2l0ZXMgb2YgdGhlIGNvbXBvbmVudFxuICogY2FuJ3QgcGFzcyBzdHlsZXMgdGhhdCBJbWFnZSBkb2Vzbid0IHN1cHBvcnQgc3VjaCBhcyBgZm9udFNpemVgLmBcbiAqXG4gKiB0eXBlIFByb3BzID0ge3N0eWxlOiBJbWFnZVN0eWxlUHJvcH1cbiAqIGNvbnN0IE15Q29tcG9uZW50ID0gKHByb3BzOiBQcm9wcykgPT4gPEltYWdlIHN0eWxlPXtwcm9wcy5zdHlsZX0gLz5cbiAqL1xuZXhwb3J0IHR5cGUgSW1hZ2VTdHlsZVByb3AgPSBfX19fSW1hZ2VTdHlsZVByb3BfSW50ZXJuYWw7XG5cbi8qKlxuICogV0FSTklORzogWW91IHByb2JhYmx5IHNob3VsZG4ndCBiZSB1c2luZyB0aGlzIHR5cGUuIFRoaXMgdHlwZVxuICogaXMgc2ltaWxhciB0byB0aGUgb25lcyBhYm92ZSBleGNlcHQgaXQgYWxsb3dzIHN0eWxlcyB0aGF0IGFyZSBhY2NlcHRlZFxuICogYnkgYWxsIG9mIFZpZXcsIFRleHQsIG9yIEltYWdlLiBJdCBpcyB0aGVyZWZvcmUgdmVyeSB1bnNhZmUgdG8gcGFzcyB0aGlzXG4gKiB0aHJvdWdoIHRvIGFuIHVuZGVybHlpbmcgY29tcG9uZW50LiBVc2luZyB0aGlzIGlzIGFsbW9zdCBhbHdheXMgYSBtaXN0YWtlXG4gKiBhbmQgdXNpbmcgb25lIG9mIHRoZSBvdGhlciBtb3JlIHJlc3RyaWN0aXZlIHR5cGVzIGlzIGxpa2VseSB0aGUgcmlnaHQgY2hvaWNlLlxuICovXG5leHBvcnQgdHlwZSBEYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcCA9IF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcF9JbnRlcm5hbDtcblxuLyoqXG4gKiBVdGlsaXR5IHR5cGUgZm9yIGdldHRpbmcgdGhlIHZhbHVlcyBmb3Igc3BlY2lmaWMgc3R5bGUga2V5cy5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGlzIGJhZCBiZWNhdXNlIHBvc2l0aW9uIGlzIG1vcmUgcmVzdHJpY3RpdmUgdGhhbiAnc3RyaW5nJzpcbiAqIGBgYFxuICogdHlwZSBQcm9wcyA9IHtwb3NpdGlvbjogc3RyaW5nfTtcbiAqIGBgYFxuICpcbiAqIFlvdSBzaG91bGQgdXNlIHRoZSBmb2xsb3dpbmcgaW5zdGVhZDpcbiAqXG4gKiBgYGBcbiAqIHR5cGUgUHJvcHMgPSB7cG9zaXRpb246IFR5cGVGb3JTdHlsZUtleTwncG9zaXRpb24nPn07XG4gKiBgYGBcbiAqXG4gKiBUaGlzIHdpbGwgY29ycmVjdGx5IGdpdmUgeW91IHRoZSB0eXBlICdhYnNvbHV0ZScgfCAncmVsYXRpdmUnXG4gKi9cbmV4cG9ydCB0eXBlIFR5cGVGb3JTdHlsZUtleTxcbiAgK2tleTogJEtleXM8X19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVfSW50ZXJuYWw+LFxuPiA9ICRFbGVtZW50VHlwZTxfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZV9JbnRlcm5hbCwga2V5PjtcblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgYW4gb2JqZWN0IG9mIHRoZSBkaWZmZXJlbnQgcG9zc2libGUgc3R5bGVcbiAqIHByb3BlcnRpZXMgdGhhdCBjYW4gYmUgc3BlY2lmaWVkIGZvciBWaWV3LlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGlzbid0IGEgc2FmZSB3YXkgdG8gdHlwZSBhIHN0eWxlIHByb3AgZm9yIGEgY29tcG9uZW50IGFzXG4gKiByZXN1bHRzIGZyb20gU3R5bGVTaGVldC5jcmVhdGUgcmV0dXJuIGFuIGludGVybmFsIGlkZW50aWZpZXIsIG5vdFxuICogYW4gb2JqZWN0IG9mIHN0eWxlcy5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byB0eXBlIHRoZSBzdHlsZSBwcm9wIG9mIGEgZnVuY3Rpb24sXG4gKiBjb25zaWRlciB1c2luZyBWaWV3U3R5bGVQcm9wLlxuICpcbiAqIEEgcmVhc29uYWJsZSB1c2FnZSBvZiB0aGlzIHR5cGUgaXMgZm9yIGhlbHBlciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gYW5cbiAqIG9iamVjdCBvZiBzdHlsZXMgdG8gcGFzcyB0byBhIFZpZXcgdGhhdCBjYW4ndCBiZSBwcmVjb21wdXRlZCB3aXRoXG4gKiBTdHlsZVNoZWV0LmNyZWF0ZS5cbiAqL1xuZXhwb3J0IHR5cGUgVmlld1N0eWxlID0gX19fX1ZpZXdTdHlsZV9JbnRlcm5hbDtcblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgYW4gb2JqZWN0IG9mIHRoZSBkaWZmZXJlbnQgcG9zc2libGUgc3R5bGVcbiAqIHByb3BlcnRpZXMgdGhhdCBjYW4gYmUgc3BlY2lmaWVkIGZvciBUZXh0LlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGlzbid0IGEgc2FmZSB3YXkgdG8gdHlwZSBhIHN0eWxlIHByb3AgZm9yIGEgY29tcG9uZW50IGFzXG4gKiByZXN1bHRzIGZyb20gU3R5bGVTaGVldC5jcmVhdGUgcmV0dXJuIGFuIGludGVybmFsIGlkZW50aWZpZXIsIG5vdFxuICogYW4gb2JqZWN0IG9mIHN0eWxlcy5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byB0eXBlIHRoZSBzdHlsZSBwcm9wIG9mIGEgZnVuY3Rpb24sXG4gKiBjb25zaWRlciB1c2luZyBUZXh0U3R5bGVQcm9wLlxuICpcbiAqIEEgcmVhc29uYWJsZSB1c2FnZSBvZiB0aGlzIHR5cGUgaXMgZm9yIGhlbHBlciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gYW5cbiAqIG9iamVjdCBvZiBzdHlsZXMgdG8gcGFzcyB0byBhIFRleHQgdGhhdCBjYW4ndCBiZSBwcmVjb21wdXRlZCB3aXRoXG4gKiBTdHlsZVNoZWV0LmNyZWF0ZS5cbiAqL1xuZXhwb3J0IHR5cGUgVGV4dFN0eWxlID0gX19fX1RleHRTdHlsZV9JbnRlcm5hbDtcblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgYW4gb2JqZWN0IG9mIHRoZSBkaWZmZXJlbnQgcG9zc2libGUgc3R5bGVcbiAqIHByb3BlcnRpZXMgdGhhdCBjYW4gYmUgc3BlY2lmaWVkIGZvciBJbWFnZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBpc24ndCBhIHNhZmUgd2F5IHRvIHR5cGUgYSBzdHlsZSBwcm9wIGZvciBhIGNvbXBvbmVudCBhc1xuICogcmVzdWx0cyBmcm9tIFN0eWxlU2hlZXQuY3JlYXRlIHJldHVybiBhbiBpbnRlcm5hbCBpZGVudGlmaWVyLCBub3RcbiAqIGFuIG9iamVjdCBvZiBzdHlsZXMuXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdHlwZSB0aGUgc3R5bGUgcHJvcCBvZiBhIGZ1bmN0aW9uLFxuICogY29uc2lkZXIgdXNpbmcgSW1hZ2VTdHlsZVByb3AuXG4gKlxuICogQSByZWFzb25hYmxlIHVzYWdlIG9mIHRoaXMgdHlwZSBpcyBmb3IgaGVscGVyIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBhblxuICogb2JqZWN0IG9mIHN0eWxlcyB0byBwYXNzIHRvIGFuIEltYWdlIHRoYXQgY2FuJ3QgYmUgcHJlY29tcHV0ZWQgd2l0aFxuICogU3R5bGVTaGVldC5jcmVhdGUuXG4gKi9cbmV4cG9ydCB0eXBlIEltYWdlU3R5bGUgPSBfX19fSW1hZ2VTdHlsZV9JbnRlcm5hbDtcblxuLyoqXG4gKiBXQVJOSU5HOiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHVzaW5nIHRoaXMgdHlwZS4gVGhpcyB0eXBlIGlzIGFuIG9iamVjdFxuICogd2l0aCBhbGwgcG9zc2libGUgc3R5bGUga2V5cyBhbmQgdGhlaXIgdmFsdWVzLiBOb3RlIHRoYXQgdGhpcyBpc24ndFxuICogYSBzYWZlIHdheSB0byB0eXBlIGEgc3R5bGUgcHJvcCBmb3IgYSBjb21wb25lbnQgYXMgcmVzdWx0cyBmcm9tXG4gKiBTdHlsZVNoZWV0LmNyZWF0ZSByZXR1cm4gYW4gaW50ZXJuYWwgaWRlbnRpZmllciwgbm90IGFuIG9iamVjdCBvZiBzdHlsZXMuXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdHlwZSB0aGUgc3R5bGUgcHJvcCBvZiBhIGZ1bmN0aW9uLCBjb25zaWRlciB1c2luZ1xuICogVmlld1N0eWxlUHJvcCwgVGV4dFN0eWxlUHJvcCwgb3IgSW1hZ2VTdHlsZVByb3AuXG4gKlxuICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGJ5IHZlcnkgY29yZSB1dGlsaXRpZXMgdGhhdCBvcGVyYXRlIG9uIGFuIG9iamVjdFxuICogY29udGFpbmluZyBhbnkgcG9zc2libGUgc3R5bGUgdmFsdWUuXG4gKi9cbmV4cG9ydCB0eXBlIERhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGUgPSBfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZV9JbnRlcm5hbDtcblxubGV0IGhhaXJsaW5lV2lkdGg6IG51bWJlciA9IFBpeGVsUmF0aW8ucm91bmRUb05lYXJlc3RQaXhlbCgwLjQpO1xuaWYgKGhhaXJsaW5lV2lkdGggPT09IDApIHtcbiAgaGFpcmxpbmVXaWR0aCA9IDEgLyBQaXhlbFJhdGlvLmdldCgpO1xufVxuXG5jb25zdCBhYnNvbHV0ZUZpbGwgPSB7XG4gIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICBsZWZ0OiAwLFxuICByaWdodDogMCxcbiAgdG9wOiAwLFxuICBib3R0b206IDAsXG59O1xuaWYgKF9fREVWX18pIHtcbiAgT2JqZWN0LmZyZWV6ZShhYnNvbHV0ZUZpbGwpO1xufVxuXG4vKipcbiAqIEEgU3R5bGVTaGVldCBpcyBhbiBhYnN0cmFjdGlvbiBzaW1pbGFyIHRvIENTUyBTdHlsZVNoZWV0c1xuICpcbiAqIENyZWF0ZSBhIG5ldyBTdHlsZVNoZWV0OlxuICpcbiAqIGBgYFxuICogY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICogICBjb250YWluZXI6IHtcbiAqICAgICBib3JkZXJSYWRpdXM6IDQsXG4gKiAgICAgYm9yZGVyV2lkdGg6IDAuNSxcbiAqICAgICBib3JkZXJDb2xvcjogJyNkNmQ3ZGEnLFxuICogICB9LFxuICogICB0aXRsZToge1xuICogICAgIGZvbnRTaXplOiAxOSxcbiAqICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gKiAgIH0sXG4gKiAgIGFjdGl2ZVRpdGxlOiB7XG4gKiAgICAgY29sb3I6ICdyZWQnLFxuICogICB9LFxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBVc2UgYSBTdHlsZVNoZWV0OlxuICpcbiAqIGBgYFxuICogPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICogICA8VGV4dCBzdHlsZT17W3N0eWxlcy50aXRsZSwgdGhpcy5wcm9wcy5pc0FjdGl2ZSAmJiBzdHlsZXMuYWN0aXZlVGl0bGVdfSAvPlxuICogPC9WaWV3PlxuICogYGBgXG4gKlxuICogQ29kZSBxdWFsaXR5OlxuICpcbiAqICAtIEJ5IG1vdmluZyBzdHlsZXMgYXdheSBmcm9tIHRoZSByZW5kZXIgZnVuY3Rpb24sIHlvdSdyZSBtYWtpbmcgdGhlIGNvZGVcbiAqICBlYXNpZXIgdG8gdW5kZXJzdGFuZC5cbiAqICAtIE5hbWluZyB0aGUgc3R5bGVzIGlzIGEgZ29vZCB3YXkgdG8gYWRkIG1lYW5pbmcgdG8gdGhlIGxvdyBsZXZlbCBjb21wb25lbnRzXG4gKiAgaW4gdGhlIHJlbmRlciBmdW5jdGlvbi5cbiAqXG4gKiBQZXJmb3JtYW5jZTpcbiAqXG4gKiAgLSBNYWtpbmcgYSBzdHlsZXNoZWV0IGZyb20gYSBzdHlsZSBvYmplY3QgbWFrZXMgaXQgcG9zc2libGUgdG8gcmVmZXIgdG8gaXRcbiAqIGJ5IElEIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBuZXcgc3R5bGUgb2JqZWN0IGV2ZXJ5IHRpbWUuXG4gKiAgLSBJdCBhbHNvIGFsbG93cyB0byBzZW5kIHRoZSBzdHlsZSBvbmx5IG9uY2UgdGhyb3VnaCB0aGUgYnJpZGdlLiBBbGxcbiAqIHN1YnNlcXVlbnQgdXNlcyBhcmUgZ29pbmcgdG8gcmVmZXIgYW4gaWQgKG5vdCBpbXBsZW1lbnRlZCB5ZXQpLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgLyoqXG4gICAqIFRoaXMgaXMgZGVmaW5lZCBhcyB0aGUgd2lkdGggb2YgYSB0aGluIGxpbmUgb24gdGhlIHBsYXRmb3JtLiBJdCBjYW4gYmVcbiAgICogdXNlZCBhcyB0aGUgdGhpY2tuZXNzIG9mIGEgYm9yZGVyIG9yIGRpdmlzaW9uIGJldHdlZW4gdHdvIGVsZW1lbnRzLlxuICAgKiBFeGFtcGxlOlxuICAgKiBgYGBcbiAgICogICB7XG4gICAqICAgICBib3JkZXJCb3R0b21Db2xvcjogJyNiYmInLFxuICAgKiAgICAgYm9yZGVyQm90dG9tV2lkdGg6IFN0eWxlU2hlZXQuaGFpcmxpbmVXaWR0aFxuICAgKiAgIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFRoaXMgY29uc3RhbnQgd2lsbCBhbHdheXMgYmUgYSByb3VuZCBudW1iZXIgb2YgcGl4ZWxzIChzbyBhIGxpbmUgZGVmaW5lZFxuICAgKiBieSBpdCBsb29rIGNyaXNwKSBhbmQgd2lsbCB0cnkgdG8gbWF0Y2ggdGhlIHN0YW5kYXJkIHdpZHRoIG9mIGEgdGhpbiBsaW5lXG4gICAqIG9uIHRoZSB1bmRlcmx5aW5nIHBsYXRmb3JtLiBIb3dldmVyLCB5b3Ugc2hvdWxkIG5vdCByZWx5IG9uIGl0IGJlaW5nIGFcbiAgICogY29uc3RhbnQgc2l6ZSwgYmVjYXVzZSBvbiBkaWZmZXJlbnQgcGxhdGZvcm1zIGFuZCBzY3JlZW4gZGVuc2l0aWVzIGl0c1xuICAgKiB2YWx1ZSBtYXkgYmUgY2FsY3VsYXRlZCBkaWZmZXJlbnRseS5cbiAgICpcbiAgICogQSBsaW5lIHdpdGggaGFpcmxpbmUgd2lkdGggbWF5IG5vdCBiZSB2aXNpYmxlIGlmIHlvdXIgc2ltdWxhdG9yIGlzIGRvd25zY2FsZWQuXG4gICAqL1xuICBoYWlybGluZVdpZHRoLFxuXG4gIC8qKlxuICAgKiBBIHZlcnkgY29tbW9uIHBhdHRlcm4gaXMgdG8gY3JlYXRlIG92ZXJsYXlzIHdpdGggcG9zaXRpb24gYWJzb2x1dGUgYW5kIHplcm8gcG9zaXRpb25pbmcsXG4gICAqIHNvIGBhYnNvbHV0ZUZpbGxgIGNhbiBiZSB1c2VkIGZvciBjb252ZW5pZW5jZSBhbmQgdG8gcmVkdWNlIGR1cGxpY2F0aW9uIG9mIHRoZXNlIHJlcGVhdGVkXG4gICAqIHN0eWxlcy5cbiAgICovXG4gIGFic29sdXRlRmlsbDogKGFic29sdXRlRmlsbDogYW55KSwgLy8gVE9ETzogVGhpcyBzaG91bGQgYmUgdXBkYXRlZCBhZnRlciB3ZSBmaXggZG93bnN0cmVhbSBGbG93IHNpdGVzLlxuXG4gIC8qKlxuICAgKiBTb21ldGltZXMgeW91IG1heSB3YW50IGBhYnNvbHV0ZUZpbGxgIGJ1dCB3aXRoIGEgY291cGxlIHR3ZWFrcyAtIGBhYnNvbHV0ZUZpbGxPYmplY3RgIGNhbiBiZVxuICAgKiB1c2VkIHRvIGNyZWF0ZSBhIGN1c3RvbWl6ZWQgZW50cnkgaW4gYSBgU3R5bGVTaGVldGAsIGUuZy46XG4gICAqXG4gICAqICAgY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICAgKiAgICAgd3JhcHBlcjoge1xuICAgKiAgICAgICAuLi5TdHlsZVNoZWV0LmFic29sdXRlRmlsbE9iamVjdCxcbiAgICogICAgICAgdG9wOiAxMCxcbiAgICogICAgICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgKiAgICAgfSxcbiAgICogICB9KTtcbiAgICovXG4gIGFic29sdXRlRmlsbE9iamVjdDogYWJzb2x1dGVGaWxsLFxuXG4gIC8qKlxuICAgKiBDb21iaW5lcyB0d28gc3R5bGVzIHN1Y2ggdGhhdCBgc3R5bGUyYCB3aWxsIG92ZXJyaWRlIGFueSBzdHlsZXMgaW4gYHN0eWxlMWAuXG4gICAqIElmIGVpdGhlciBzdHlsZSBpcyBmYWxzeSwgdGhlIG90aGVyIG9uZSBpcyByZXR1cm5lZCB3aXRob3V0IGFsbG9jYXRpbmcgYW5cbiAgICogYXJyYXksIHNhdmluZyBhbGxvY2F0aW9ucyBhbmQgbWFpbnRhaW5pbmcgcmVmZXJlbmNlIGVxdWFsaXR5IGZvclxuICAgKiBQdXJlQ29tcG9uZW50IGNoZWNrcy5cbiAgICovXG4gIGNvbXBvc2U8VDogRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3A+KFxuICAgIHN0eWxlMTogP1QsXG4gICAgc3R5bGUyOiA/VCxcbiAgKTogP1QgfCAkUmVhZE9ubHlBcnJheTxUPiB7XG4gICAgaWYgKHN0eWxlMSAhPSBudWxsICYmIHN0eWxlMiAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gKFtzdHlsZTEsIHN0eWxlMl06ICRSZWFkT25seUFycmF5PFQ+KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0eWxlMSAhPSBudWxsID8gc3R5bGUxIDogc3R5bGUyO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRmxhdHRlbnMgYW4gYXJyYXkgb2Ygc3R5bGUgb2JqZWN0cywgaW50byBvbmUgYWdncmVnYXRlZCBzdHlsZSBvYmplY3QuXG4gICAqIEFsdGVybmF0aXZlbHksIHRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIGxvb2t1cCBJRHMsIHJldHVybmVkIGJ5XG4gICAqIFN0eWxlU2hlZXQucmVnaXN0ZXIuXG4gICAqXG4gICAqID4gKipOT1RFKio6IEV4ZXJjaXNlIGNhdXRpb24gYXMgYWJ1c2luZyB0aGlzIGNhbiB0YXggeW91IGluIHRlcm1zIG9mXG4gICAqID4gb3B0aW1pemF0aW9ucy5cbiAgICogPlxuICAgKiA+IElEcyBlbmFibGUgb3B0aW1pemF0aW9ucyB0aHJvdWdoIHRoZSBicmlkZ2UgYW5kIG1lbW9yeSBpbiBnZW5lcmFsLiBSZWZlcnJpbmdcbiAgICogPiB0byBzdHlsZSBvYmplY3RzIGRpcmVjdGx5IHdpbGwgZGVwcml2ZSB5b3Ugb2YgdGhlc2Ugb3B0aW1pemF0aW9ucy5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICogYGBgXG4gICAqIGNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgICogICBsaXN0SXRlbToge1xuICAgKiAgICAgZmxleDogMSxcbiAgICogICAgIGZvbnRTaXplOiAxNixcbiAgICogICAgIGNvbG9yOiAnd2hpdGUnXG4gICAqICAgfSxcbiAgICogICBzZWxlY3RlZExpc3RJdGVtOiB7XG4gICAqICAgICBjb2xvcjogJ2dyZWVuJ1xuICAgKiAgIH1cbiAgICogfSk7XG4gICAqXG4gICAqIFN0eWxlU2hlZXQuZmxhdHRlbihbc3R5bGVzLmxpc3RJdGVtLCBzdHlsZXMuc2VsZWN0ZWRMaXN0SXRlbV0pXG4gICAqIC8vIHJldHVybnMgeyBmbGV4OiAxLCBmb250U2l6ZTogMTYsIGNvbG9yOiAnZ3JlZW4nIH1cbiAgICogYGBgXG4gICAqIEFsdGVybmF0aXZlIHVzZTpcbiAgICogYGBgXG4gICAqIFN0eWxlU2hlZXQuZmxhdHRlbihzdHlsZXMubGlzdEl0ZW0pO1xuICAgKiAvLyByZXR1cm4geyBmbGV4OiAxLCBmb250U2l6ZTogMTYsIGNvbG9yOiAnd2hpdGUnIH1cbiAgICogLy8gU2ltcGx5IHN0eWxlcy5saXN0SXRlbSB3b3VsZCByZXR1cm4gaXRzIElEIChudW1iZXIpXG4gICAqIGBgYFxuICAgKiBUaGlzIG1ldGhvZCBpbnRlcm5hbGx5IHVzZXMgYFN0eWxlU2hlZXRSZWdpc3RyeS5nZXRTdHlsZUJ5SUQoc3R5bGUpYFxuICAgKiB0byByZXNvbHZlIHN0eWxlIG9iamVjdHMgcmVwcmVzZW50ZWQgYnkgSURzLiBUaHVzLCBhbiBhcnJheSBvZiBzdHlsZVxuICAgKiBvYmplY3RzIChpbnN0YW5jZXMgb2YgU3R5bGVTaGVldC5jcmVhdGUpLCBhcmUgaW5kaXZpZHVhbGx5IHJlc29sdmVkIHRvLFxuICAgKiB0aGVpciByZXNwZWN0aXZlIG9iamVjdHMsIG1lcmdlZCBhcyBvbmUgYW5kIHRoZW4gcmV0dXJuZWQuIFRoaXMgYWxzbyBleHBsYWluc1xuICAgKiB0aGUgYWx0ZXJuYXRpdmUgdXNlLlxuICAgKi9cbiAgZmxhdHRlbixcblxuICAvKipcbiAgICogV0FSTklORzogRVhQRVJJTUVOVEFMLiBCcmVha2luZyBjaGFuZ2VzIHdpbGwgcHJvYmFibHkgaGFwcGVuIGEgbG90IGFuZCB3aWxsXG4gICAqIG5vdCBiZSByZWxpYWJseSBhbm5vdW5jZWQuIFRoZSB3aG9sZSB0aGluZyBtaWdodCBiZSBkZWxldGVkLCB3aG8ga25vd3M/IFVzZVxuICAgKiBhdCB5b3VyIG93biByaXNrLlxuICAgKlxuICAgKiBTZXRzIGEgZnVuY3Rpb24gdG8gdXNlIHRvIHByZS1wcm9jZXNzIGEgc3R5bGUgcHJvcGVydHkgdmFsdWUuIFRoaXMgaXMgdXNlZFxuICAgKiBpbnRlcm5hbGx5IHRvIHByb2Nlc3MgY29sb3IgYW5kIHRyYW5zZm9ybSB2YWx1ZXMuIFlvdSBzaG91bGQgbm90IHVzZSB0aGlzXG4gICAqIHVubGVzcyB5b3UgcmVhbGx5IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nIGFuZCBoYXZlIGV4aGF1c3RlZCBvdGhlciBvcHRpb25zLlxuICAgKi9cbiAgc2V0U3R5bGVBdHRyaWJ1dGVQcmVwcm9jZXNzb3IoXG4gICAgcHJvcGVydHk6IHN0cmluZyxcbiAgICBwcm9jZXNzOiAobmV4dFByb3A6IG1peGVkKSA9PiBtaXhlZCxcbiAgKSB7XG4gICAgbGV0IHZhbHVlO1xuXG4gICAgaWYgKFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSA9PT0gdHJ1ZSkge1xuICAgICAgdmFsdWUgPSB7cHJvY2Vzc307XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgUmVhY3ROYXRpdmVTdHlsZUF0dHJpYnV0ZXNbcHJvcGVydHldID09PSAnb2JqZWN0Jykge1xuICAgICAgdmFsdWUgPSB7Li4uUmVhY3ROYXRpdmVTdHlsZUF0dHJpYnV0ZXNbcHJvcGVydHldLCBwcm9jZXNzfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihgJHtwcm9wZXJ0eX0gaXMgbm90IGEgdmFsaWQgc3R5bGUgYXR0cmlidXRlYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKF9fREVWX18gJiYgdHlwZW9mIHZhbHVlLnByb2Nlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybihgT3ZlcndyaXRpbmcgJHtwcm9wZXJ0eX0gc3R5bGUgYXR0cmlidXRlIHByZXByb2Nlc3NvcmApO1xuICAgIH1cblxuICAgIFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSA9IHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgU3R5bGVTaGVldCBzdHlsZSByZWZlcmVuY2UgZnJvbSB0aGUgZ2l2ZW4gb2JqZWN0LlxuICAgKi9cbiAgY3JlYXRlPCtTOiBfX19fU3R5bGVzX0ludGVybmFsPihvYmo6IFMpOiAkUmVhZE9ubHk8Uz4ge1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIHJldHVybiBTIGFzIHRoZSByZXR1cm4gdHlwZS4gQnV0IGZpcnN0LFxuICAgIC8vIHdlIG5lZWQgdG8gY29kZW1vZCBhbGwgdGhlIGNhbGxzaXRlcyB0aGF0IGFyZSB0eXBpbmcgdGhpc1xuICAgIC8vIHJldHVybiB2YWx1ZSBhcyBhIG51bWJlciAoZXZlbiB0aG91Z2ggaXQgd2FzIG9wYXF1ZSkuXG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqW2tleV0pIHtcbiAgICAgICAgICBPYmplY3QuZnJlZXplKG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9LFxufTtcbiJdfQ==